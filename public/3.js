/*! For license information please see 3.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{278:function(t,e,n){"use strict";n.d(e,"a",(function(){return C})),n.d(e,"b",(function(){return y})),n.d(e,"c",(function(){return d})),n.d(e,"d",(function(){return p})),n.d(e,"e",(function(){return m})),n.d(e,"f",(function(){return g})),n.d(e,"g",(function(){return v}));var r=n(281),o=n(280),i=n(279);function s(t,e){return!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0)}function a(t,e){for(;t;t="start"==e?t.firstChild:t.lastChild)if(t.isTextblock)return!0;return!1}function l(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function c(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){var n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}function p(t,e){var n=t.selection,o=n.$from,i=n.$to,s=o.blockRange(i),a=s&&Object(r.k)(s);return null!=a&&(e&&e(t.tr.lift(s,a).scrollIntoView()),!0)}function u(t){for(var e=0;e<t.edgeCount;e++){var n=t.edge(e).type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function d(t,e){var n=t.selection,r=n.$head,o=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(o))return!1;var s=r.node(-1),a=r.indexAfter(-1),l=u(s.contentMatchAt(a));if(!s.canReplaceWith(a,a,l))return!1;if(e){var c=r.after(),p=t.tr.replaceWith(c,c,l.createAndFill());p.setSelection(i.Selection.near(p.doc.resolve(c),1)),e(p.scrollIntoView())}return!0}function h(t,e){var n=t.selection,s=n.$from,a=n.$to;if(t.selection instanceof i.NodeSelection&&t.selection.node.isBlock)return!(!s.parentOffset||!Object(r.g)(t.doc,s.pos))&&(e&&e(t.tr.split(s.pos).scrollIntoView()),!0);if(!s.parent.isBlock)return!1;if(e){var l=a.parentOffset==a.parent.content.size,c=t.tr;t.selection instanceof i.TextSelection&&c.deleteSelection();var p=0==s.depth?null:u(s.node(-1).contentMatchAt(s.indexAfter(-1))),d=l&&p?[{type:p}]:null,h=Object(r.g)(c.doc,c.mapping.map(s.pos),1,d);d||h||!Object(r.g)(c.doc,c.mapping.map(s.pos),1,p&&[{type:p}])||(d=[{type:p}],h=!0),h&&(c.split(c.mapping.map(s.pos),1,d),l||s.parentOffset||s.parent.type==p||!s.node(-1).canReplace(s.index(-1),s.indexAfter(-1),o.Fragment.from(p.create(),s.parent))||c.setNodeMarkup(c.mapping.map(s.before()),p)),e(c.scrollIntoView())}return!0}function f(t,e,n){var s,a,l=e.nodeBefore,c=e.nodeAfter;if(l.type.spec.isolating||c.type.spec.isolating)return!1;if(function(t,e,n){var o=e.nodeBefore,i=e.nodeAfter,s=e.index();return!!(o&&i&&o.type.compatibleContent(i.type))&&(!o.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-o.nodeSize,e.pos).scrollIntoView()),!0):!(!e.parent.canReplace(s,s+1)||!i.isTextblock&&!Object(r.f)(t.doc,e.pos))&&(n&&n(t.tr.clearIncompatible(e.pos,o.type,o.contentMatchAt(o.childCount)).join(e.pos).scrollIntoView()),!0))}(t,e,n))return!0;if(e.parent.canReplace(e.index(),e.index()+1)&&(s=(a=l.contentMatchAt(l.childCount)).findWrapping(c.type))&&a.matchType(s[0]||c.type).validEnd){if(n){for(var p=e.pos+c.nodeSize,u=o.Fragment.empty,d=s.length-1;d>=0;d--)u=o.Fragment.from(s[d].create(null,u));u=o.Fragment.from(l.copy(u));var h=t.tr.step(new r.b(e.pos-1,p,e.pos,p,new o.Slice(u,1,0),s.length,!0)),f=p+2*s.length;Object(r.f)(h.doc,f)&&h.join(f),n(h.scrollIntoView())}return!0}var v=i.Selection.findFrom(e,1),m=v&&v.$from.blockRange(v.$to),g=m&&Object(r.k)(m);return null!=g&&g>=e.depth&&(n&&n(t.tr.lift(m,g).scrollIntoView()),!0)}function v(t,e){return function(n,o){var i=n.selection,s=i.$from,a=i.$to,l=s.blockRange(a),c=l&&Object(r.i)(l,t,e);return!!c&&(o&&o(n.tr.wrap(l,c).scrollIntoView()),!0)}}function m(t,e){return function(n,r){var o=n.selection,i=o.from,s=o.to,a=!1;return n.doc.nodesBetween(i,s,(function(r,o){if(a)return!1;if(r.isTextblock&&!r.hasMarkup(t,e))if(r.type==t)a=!0;else{var i=n.doc.resolve(o),s=i.index();a=i.parent.canReplaceWith(s,s+1,t)}})),!!a&&(r&&r(n.tr.setBlockType(i,s,t,e).scrollIntoView()),!0)}}function g(t,e){return function(n,r){var o=n.selection,i=o.empty,s=o.$cursor,a=o.ranges;if(i&&!s||!function(t,e,n){for(var r=function(r){var o=e[r],i=o.$from,s=o.$to,a=0==i.depth&&t.type.allowsMarkType(n);if(t.nodesBetween(i.pos,s.pos,(function(t){if(a)return!1;a=t.inlineContent&&t.type.allowsMarkType(n)})),a)return{v:!0}},o=0;o<e.length;o++){var i=r(o);if(i)return i.v}return!1}(n.doc,a,t))return!1;if(r)if(s)t.isInSet(n.storedMarks||s.marks())?r(n.tr.removeStoredMark(t)):r(n.tr.addStoredMark(t.create(e)));else{for(var l=!1,c=n.tr,p=0;!l&&p<a.length;p++){var u=a[p],d=u.$from,h=u.$to;l=n.doc.rangeHasMark(d.pos,h.pos,t)}for(var f=0;f<a.length;f++){var v=a[f],m=v.$from,g=v.$to;l?c.removeMark(m.pos,g.pos,t):c.addMark(m.pos,g.pos,t.create(e))}r(c.scrollIntoView())}return!0}}function y(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return function(e,n,r){for(var o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}var b=y(s,(function(t,e,n){var o=t.selection.$cursor;if(!o||(n?!n.endOfTextblock("backward",t):o.parentOffset>0))return!1;var s=l(o);if(!s){var c=o.blockRange(),p=c&&Object(r.k)(c);return null!=p&&(e&&e(t.tr.lift(c,p).scrollIntoView()),!0)}var u=s.nodeBefore;if(!u.type.spec.isolating&&f(t,s,e))return!0;if(0==o.parent.content.size&&(a(u,"end")||i.NodeSelection.isSelectable(u))){if(e){var d=t.tr.deleteRange(o.before(),o.after());d.setSelection(a(u,"end")?i.Selection.findFrom(d.doc.resolve(d.mapping.map(s.pos,-1)),-1):i.NodeSelection.create(d.doc,s.pos-u.nodeSize)),e(d.scrollIntoView())}return!0}return!(!u.isAtom||s.depth!=o.depth-1)&&(e&&e(t.tr.delete(s.pos-u.nodeSize,s.pos).scrollIntoView()),!0)}),(function(t,e,n){var r=t.selection,o=r.$head,s=o;if(!r.empty)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):o.parentOffset>0)return!1;s=l(o)}var a=s&&s.nodeBefore;return!(!a||!i.NodeSelection.isSelectable(a))&&(e&&e(t.tr.setSelection(i.NodeSelection.create(t.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)})),w=y(s,(function(t,e,n){var r=t.selection.$cursor;if(!r||(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size))return!1;var o=c(r);if(!o)return!1;var s=o.nodeAfter;if(f(t,o,e))return!0;if(0==r.parent.content.size&&(a(s,"start")||i.NodeSelection.isSelectable(s))){if(e){var l=t.tr.deleteRange(r.before(),r.after());l.setSelection(a(s,"start")?i.Selection.findFrom(l.doc.resolve(l.mapping.map(o.pos)),1):i.NodeSelection.create(l.doc,l.mapping.map(o.pos))),e(l.scrollIntoView())}return!0}return!(!s.isAtom||o.depth!=r.depth-1)&&(e&&e(t.tr.delete(o.pos,o.pos+s.nodeSize).scrollIntoView()),!0)}),(function(t,e,n){var r=t.selection,o=r.$head,s=o;if(!r.empty)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):o.parentOffset<o.parent.content.size)return!1;s=c(o)}var a=s&&s.nodeAfter;return!(!a||!i.NodeSelection.isSelectable(a))&&(e&&e(t.tr.setSelection(i.NodeSelection.create(t.doc,s.pos)).scrollIntoView()),!0)})),x={Enter:y((function(t,e){var n=t.selection,r=n.$head,o=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(o))&&(e&&e(t.tr.insertText("\n").scrollIntoView()),!0)}),(function(t,e){var n=t.selection,r=n.$from,o=n.$to;if(r.parent.inlineContent||o.parent.inlineContent)return!1;var s=u(r.parent.contentMatchAt(o.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){var a=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,l=t.tr.insert(a,s.createAndFill());l.setSelection(i.TextSelection.create(l.doc,a+1)),e(l.scrollIntoView())}return!0}),(function(t,e){var n=t.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var o=n.before();if(Object(r.g)(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}var i=n.blockRange(),s=i&&Object(r.k)(i);return null!=s&&(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)}),h),"Mod-Enter":d,Backspace:b,"Mod-Backspace":b,Delete:w,"Mod-Delete":w,"Mod-a":function(t,e){return e&&e(t.tr.setSelection(new i.AllSelection(t.doc))),!0}},S={"Ctrl-h":x.Backspace,"Alt-Backspace":x["Mod-Backspace"],"Ctrl-d":x.Delete,"Ctrl-Alt-Backspace":x["Mod-Delete"],"Alt-Delete":x["Mod-Delete"],"Alt-d":x["Mod-Delete"]};for(var k in x)S[k]=x[k];var C=("undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform())?S:x},279:function(t,e,n){"use strict";n.r(e),n.d(e,"AllSelection",(function(){return h})),n.d(e,"EditorState",(function(){return S})),n.d(e,"NodeSelection",(function(){return u})),n.d(e,"Plugin",(function(){return O})),n.d(e,"PluginKey",(function(){return _})),n.d(e,"Selection",(function(){return s})),n.d(e,"SelectionRange",(function(){return l})),n.d(e,"TextSelection",(function(){return c})),n.d(e,"Transaction",(function(){return g}));var r=n(280),o=n(281),i=Object.create(null),s=function(t,e,n){this.ranges=n||[new l(t.min(e),t.max(e))],this.$anchor=t,this.$head=e},a={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};a.anchor.get=function(){return this.$anchor.pos},a.head.get=function(){return this.$head.pos},a.from.get=function(){return this.$from.pos},a.to.get=function(){return this.$to.pos},a.$from.get=function(){return this.ranges[0].$from},a.$to.get=function(){return this.ranges[0].$to},a.empty.get=function(){for(var t=this.ranges,e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0},s.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},s.prototype.replace=function(t,e){void 0===e&&(e=r.Slice.empty);for(var n=e.content.lastChild,o=null,i=0;i<e.openEnd;i++)o=n,n=n.lastChild;for(var s=t.steps.length,a=this.ranges,l=0;l<a.length;l++){var c=a[l],p=c.$from,u=c.$to,d=t.mapping.slice(s);t.replaceRange(d.map(p.pos),d.map(u.pos),l?r.Slice.empty:e),0==l&&m(t,s,(n?n.isInline:o&&o.isTextblock)?-1:1)}},s.prototype.replaceWith=function(t,e){for(var n=t.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],s=i.$from,a=i.$to,l=t.mapping.slice(n),c=l.map(s.pos),p=l.map(a.pos);o?t.deleteRange(c,p):(t.replaceRangeWith(c,p,e),m(t,n,e.isInline?-1:1))}},s.findFrom=function(t,e,n){var r=t.parent.inlineContent?new c(t):v(t.node(0),t.parent,t.pos,t.index(),e,n);if(r)return r;for(var o=t.depth-1;o>=0;o--){var i=e<0?v(t.node(0),t.node(o),t.before(o+1),t.index(o),e,n):v(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,e,n);if(i)return i}},s.near=function(t,e){return void 0===e&&(e=1),this.findFrom(t,e)||this.findFrom(t,-e)||new h(t.node(0))},s.atStart=function(t){return v(t,t,0,0,1)||new h(t)},s.atEnd=function(t){return v(t,t,t.content.size,t.childCount,-1)||new h(t)},s.fromJSON=function(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=i[e.type];if(!n)throw new RangeError("No selection type "+e.type+" defined");return n.fromJSON(t,e)},s.jsonID=function(t,e){if(t in i)throw new RangeError("Duplicate use of selection JSON ID "+t);return i[t]=e,e.prototype.jsonID=t,e},s.prototype.getBookmark=function(){return c.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(s.prototype,a),s.prototype.visible=!0;var l=function(t,e){this.$from=t,this.$to=e},c=function(t){function e(e,n){void 0===n&&(n=e),t.call(this,e,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},e.prototype.map=function(n,r){var o=n.resolve(r.map(this.head));if(!o.parent.inlineContent)return t.near(o);var i=n.resolve(r.map(this.anchor));return new e(i.parent.inlineContent?i:o,o)},e.prototype.replace=function(e,n){if(void 0===n&&(n=r.Slice.empty),t.prototype.replace.call(this,e,n),n==r.Slice.empty){var o=this.$from.marksAcross(this.$to);o&&e.ensureMarks(o)}},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor&&t.head==this.head},e.prototype.getBookmark=function(){return new p(this.anchor,this.head)},e.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},e.fromJSON=function(t,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new e(t.resolve(n.anchor),t.resolve(n.head))},e.create=function(t,e,n){void 0===n&&(n=e);var r=t.resolve(e);return new this(r,n==e?r:t.resolve(n))},e.between=function(n,r,o){var i=n.pos-r.pos;if(o&&!i||(o=i>=0?1:-1),!r.parent.inlineContent){var s=t.findFrom(r,o,!0)||t.findFrom(r,-o,!0);if(!s)return t.near(r,o);r=s.$head}return n.parent.inlineContent||(0==i||(n=(t.findFrom(n,-o,!0)||t.findFrom(n,o,!0)).$anchor).pos<r.pos!=i<0)&&(n=r),new e(n,r)},Object.defineProperties(e.prototype,n),e}(s);s.jsonID("text",c);var p=function(t,e){this.anchor=t,this.head=e};p.prototype.map=function(t){return new p(t.map(this.anchor),t.map(this.head))},p.prototype.resolve=function(t){return c.between(t.resolve(this.anchor),t.resolve(this.head))};var u=function(t){function e(e){var n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);t.call(this,e,r),this.node=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(n,r){var o=r.mapResult(this.anchor),i=o.deleted,s=o.pos,a=n.resolve(s);return i?t.near(a):new e(a)},e.prototype.content=function(){return new r.Slice(r.Fragment.from(this.node),0,0)},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor},e.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},e.prototype.getBookmark=function(){return new d(this.anchor)},e.fromJSON=function(t,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new e(t.resolve(n.anchor))},e.create=function(t,e){return new this(t.resolve(e))},e.isSelectable=function(t){return!t.isText&&!1!==t.type.spec.selectable},e}(s);u.prototype.visible=!1,s.jsonID("node",u);var d=function(t){this.anchor=t};d.prototype.map=function(t){var e=t.mapResult(this.anchor),n=e.deleted,r=e.pos;return n?new p(r,r):new d(r)},d.prototype.resolve=function(t){var e=t.resolve(this.anchor),n=e.nodeAfter;return n&&u.isSelectable(n)?new u(e):s.near(e)};var h=function(t){function e(e){t.call(this,e.resolve(0),e.resolve(e.content.size))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.replace=function(e,n){if(void 0===n&&(n=r.Slice.empty),n==r.Slice.empty){e.delete(0,e.doc.content.size);var o=t.atStart(e.doc);o.eq(e.selection)||e.setSelection(o)}else t.prototype.replace.call(this,e,n)},e.prototype.toJSON=function(){return{type:"all"}},e.fromJSON=function(t){return new e(t)},e.prototype.map=function(t){return new e(t)},e.prototype.eq=function(t){return t instanceof e},e.prototype.getBookmark=function(){return f},e}(s);s.jsonID("all",h);var f={map:function(){return this},resolve:function(t){return new h(t)}};function v(t,e,n,r,o,i){if(e.inlineContent)return c.create(t,n);for(var s=r-(o>0?0:1);o>0?s<e.childCount:s>=0;s+=o){var a=e.child(s);if(a.isAtom){if(!i&&u.isSelectable(a))return u.create(t,n-(o<0?a.nodeSize:0))}else{var l=v(t,a,n+o,o<0?a.childCount:0,o,i);if(l)return l}n+=a.nodeSize*o}}function m(t,e,n){var r=t.steps.length-1;if(!(r<e)){var i,a=t.steps[r];if(a instanceof o.c||a instanceof o.b)t.mapping.maps[r].forEach((function(t,e,n,r){null==i&&(i=r)})),t.setSelection(s.near(t.doc.resolve(i),n))}}var g=function(t){function e(e){t.call(this,e.doc),this.time=Date.now(),this.curSelection=e.selection,this.curSelectionFor=0,this.storedMarks=e.storedMarks,this.updated=0,this.meta=Object.create(null)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},e.prototype.setSelection=function(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},n.selectionSet.get=function(){return(1&this.updated)>0},e.prototype.setStoredMarks=function(t){return this.storedMarks=t,this.updated|=2,this},e.prototype.ensureMarks=function(t){return r.Mark.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this},e.prototype.addStoredMark=function(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))},e.prototype.removeStoredMark=function(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(2&this.updated)>0},e.prototype.addStep=function(e,n){t.prototype.addStep.call(this,e,n),this.updated=-3&this.updated,this.storedMarks=null},e.prototype.setTime=function(t){return this.time=t,this},e.prototype.replaceSelection=function(t){return this.selection.replace(this,t),this},e.prototype.replaceSelectionWith=function(t,e){var n=this.selection;return!1!==e&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||r.Mark.none))),n.replaceWith(this,t),this},e.prototype.deleteSelection=function(){return this.selection.replace(this),this},e.prototype.insertText=function(t,e,n){void 0===n&&(n=e);var r=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(r.text(t),!0):this.deleteSelection();if(!t)return this.deleteRange(e,n);var o=this.storedMarks;if(!o){var i=this.doc.resolve(e);o=n==e?i.marks():i.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(e,n,r.text(t,o)),this.selection.empty||this.setSelection(s.near(this.selection.$to)),this},e.prototype.setMeta=function(t,e){return this.meta["string"==typeof t?t:t.key]=e,this},e.prototype.getMeta=function(t){return this.meta["string"==typeof t?t:t.key]},n.isGeneric.get=function(){for(var t in this.meta)return!1;return!0},e.prototype.scrollIntoView=function(){return this.updated|=4,this},n.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(e.prototype,n),e}(o.e);function y(t,e){return e&&t?t.bind(e):t}var b=function(t,e,n){this.name=t,this.init=y(e.init,n),this.apply=y(e.apply,n)},w=[new b("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new b("selection",{init:function(t,e){return t.selection||s.atStart(e.doc)},apply:function(t){return t.selection}}),new b("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new b("scrollToSelection",{init:function(){return 0},apply:function(t,e){return t.scrolledIntoView?e+1:e}})],x=function(t,e){var n=this;this.schema=t,this.fields=w.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),e&&e.forEach((function(t){if(n.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");n.plugins.push(t),n.pluginsByKey[t.key]=t,t.spec.state&&n.fields.push(new b(t.key,t.spec.state,t))}))},S=function(t){this.config=t},k={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};k.schema.get=function(){return this.config.schema},k.plugins.get=function(){return this.config.plugins},S.prototype.apply=function(t){return this.applyTransaction(t).state},S.prototype.filterTransaction=function(t,e){void 0===e&&(e=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=e){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,t,this))return!1}return!0},S.prototype.applyTransaction=function(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};for(var e=[t],n=this.applyInner(t),r=null;;){for(var o=!1,i=0;i<this.config.plugins.length;i++){var s=this.config.plugins[i];if(s.spec.appendTransaction){var a=r?r[i].n:0,l=r?r[i].state:this,c=a<e.length&&s.spec.appendTransaction.call(s,a?e.slice(a):e,l,n);if(c&&n.filterTransaction(c,i)){if(c.setMeta("appendedTransaction",t),!r){r=[];for(var p=0;p<this.config.plugins.length;p++)r.push(p<i?{state:n,n:e.length}:{state:this,n:0})}e.push(c),n=n.applyInner(c),o=!0}r&&(r[i]={state:n,n:e.length})}}if(!o)return{state:n,transactions:e}}},S.prototype.applyInner=function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var e=new S(this.config),n=this.config.fields,r=0;r<n.length;r++){var o=n[r];e[o.name]=o.apply(t,this[o.name],this,e)}for(var i=0;i<C.length;i++)C[i](this,t,e);return e},k.tr.get=function(){return new g(this)},S.create=function(t){for(var e=new x(t.schema||t.doc.type.schema,t.plugins),n=new S(e),r=0;r<e.fields.length;r++)n[e.fields[r].name]=e.fields[r].init(t,n);return n},S.prototype.reconfigure=function(t){for(var e=new x(t.schema||this.schema,t.plugins),n=e.fields,r=new S(e),o=0;o<n.length;o++){var i=n[o].name;r[i]=this.hasOwnProperty(i)?this[i]:n[o].init(t,r)}return r},S.prototype.toJSON=function(t){var e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map((function(t){return t.toJSON()}))),t&&"object"==typeof t)for(var n in t){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=t[n],o=r.spec.state;o&&o.toJSON&&(e[n]=o.toJSON.call(r,this[r.key]))}return e},S.fromJSON=function(t,e,n){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var o=new x(t.schema,t.plugins),i=new S(o);return o.fields.forEach((function(o){if("doc"==o.name)i.doc=r.Node.fromJSON(t.schema,e.doc);else if("selection"==o.name)i.selection=s.fromJSON(i.doc,e.selection);else if("storedMarks"==o.name)e.storedMarks&&(i.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(n)for(var a in n){var l=n[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(e,a))return void(i[o.name]=c.fromJSON.call(l,t,e[a],i))}i[o.name]=o.init(t,i)}})),i},S.addApplyListener=function(t){C.push(t)},S.removeApplyListener=function(t){var e=C.indexOf(t);e>-1&&C.splice(e,1)},Object.defineProperties(S.prototype,k);var C=[];var O=function(t){this.props={},t.props&&function t(e,n,r){for(var o in e){var i=e[o];i instanceof Function?i=i.bind(n):"handleDOMEvents"==o&&(i=t(i,n,{})),r[o]=i}return r}(t.props,this,this.props),this.spec=t,this.key=t.key?t.key.key:T("plugin")};O.prototype.getState=function(t){return t[this.key]};var M=Object.create(null);function T(t){return t in M?t+"$"+ ++M[t]:(M[t]=0,t+"$")}var _=function(t){void 0===t&&(t="key"),this.key=T(t)};_.prototype.get=function(t){return t.config.pluginsByKey[this.key]},_.prototype.getState=function(t){return t[this.key]}},280:function(t,e,n){"use strict";function r(t){this.content=t}n.r(e),n.d(e,"ContentMatch",(function(){return D})),n.d(e,"DOMParser",(function(){return tt})),n.d(e,"DOMSerializer",(function(){return dt})),n.d(e,"Fragment",(function(){return i})),n.d(e,"Mark",(function(){return p})),n.d(e,"MarkType",(function(){return Y})),n.d(e,"Node",(function(){return A})),n.d(e,"NodeRange",(function(){return M})),n.d(e,"NodeType",(function(){return K})),n.d(e,"ReplaceError",(function(){return u})),n.d(e,"ResolvedPos",(function(){return x})),n.d(e,"Schema",(function(){return Z})),n.d(e,"Slice",(function(){return d})),r.prototype={constructor:r,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,n){var o=n&&n!=t?this.remove(n):this,i=o.find(t),s=o.content.slice();return-1==i?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new r(s)},remove:function(t){var e=this.find(t);if(-1==e)return this;var n=this.content.slice();return n.splice(e,2),new r(n)},addToStart:function(t,e){return new r([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new r(n)},addBefore:function(t,e,n){var o=this.remove(e),i=o.content.slice(),s=o.find(t);return i.splice(-1==s?i.length:s,0,e,n),new r(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return(t=r.from(t)).size?new r(t.content.concat(this.subtract(t).content)):this},append:function(t){return(t=r.from(t)).size?new r(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=r.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},get size(){return this.content.length>>1}},r.from=function(t){if(t instanceof r)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new r(e)};var o=r;var i=function(t,e){if(this.content=t,this.size=e||0,null==e)for(var n=0;n<t.length;n++)this.size+=t[n].nodeSize},s={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};i.prototype.nodesBetween=function(t,e,n,r,o){void 0===r&&(r=0);for(var i=0,s=0;s<e;i++){var a=this.content[i],l=s+a.nodeSize;if(l>t&&!1!==n(a,r+s,o,i)&&a.content.size){var c=s+1;a.nodesBetween(Math.max(0,t-c),Math.min(a.content.size,e-c),n,r+c)}s=l}},i.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)},i.prototype.textBetween=function(t,e,n,r){var o="",i=!0;return this.nodesBetween(t,e,(function(s,a){s.isText?(o+=s.text.slice(Math.max(t,a)-a,e-a),i=!n):s.isLeaf&&r?(o+=r,i=!n):!i&&s.isBlock&&(o+=n,i=!0)}),0),o},i.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,n=t.firstChild,r=this.content.slice(),o=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),o=1);o<t.content.length;o++)r.push(t.content[o]);return new i(r,this.size+t.size)},i.prototype.cut=function(t,e){if(null==e&&(e=this.size),0==t&&e==this.size)return this;var n=[],r=0;if(e>t)for(var o=0,s=0;s<e;o++){var a=this.content[o],l=s+a.nodeSize;l>t&&((s<t||l>e)&&(a=a.isText?a.cut(Math.max(0,t-s),Math.min(a.text.length,e-s)):a.cut(Math.max(0,t-s-1),Math.min(a.content.size,e-s-1))),n.push(a),r+=a.nodeSize),s=l}return new i(n,r)},i.prototype.cutByIndex=function(t,e){return t==e?i.empty:0==t&&e==this.content.length?this:new i(this.content.slice(t,e))},i.prototype.replaceChild=function(t,e){var n=this.content[t];if(n==e)return this;var r=this.content.slice(),o=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new i(r,o)},i.prototype.addToStart=function(t){return new i([t].concat(this.content),this.size+t.nodeSize)},i.prototype.addToEnd=function(t){return new i(this.content.concat(t),this.size+t.nodeSize)},i.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0},s.firstChild.get=function(){return this.content.length?this.content[0]:null},s.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},s.childCount.get=function(){return this.content.length},i.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},i.prototype.maybeChild=function(t){return this.content[t]},i.prototype.forEach=function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}},i.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),function t(e,n,r){for(var o=0;;o++){if(o==e.childCount||o==n.childCount)return e.childCount==n.childCount?null:r;var i=e.child(o),s=n.child(o);if(i!=s){if(!i.sameMarkup(s))return r;if(i.isText&&i.text!=s.text){for(var a=0;i.text[a]==s.text[a];a++)r++;return r}if(i.content.size||s.content.size){var l=t(i.content,s.content,r+1);if(null!=l)return l}r+=i.nodeSize}else r+=i.nodeSize}}(this,t,e)},i.prototype.findDiffEnd=function(t,e,n){return void 0===e&&(e=this.size),void 0===n&&(n=t.size),function t(e,n,r,o){for(var i=e.childCount,s=n.childCount;;){if(0==i||0==s)return i==s?null:{a:r,b:o};var a=e.child(--i),l=n.child(--s),c=a.nodeSize;if(a!=l){if(!a.sameMarkup(l))return{a:r,b:o};if(a.isText&&a.text!=l.text){for(var p=0,u=Math.min(a.text.length,l.text.length);p<u&&a.text[a.text.length-p-1]==l.text[l.text.length-p-1];)p++,r--,o--;return{a:r,b:o}}if(a.content.size||l.content.size){var d=t(a.content,l.content,r-1,o-1);if(d)return d}r-=c,o-=c}else r-=c,o-=c}}(this,t,e,n)},i.prototype.findIndex=function(t,e){if(void 0===e&&(e=-1),0==t)return l(0,t);if(t==this.size)return l(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var o=r+this.child(n).nodeSize;if(o>=t)return o==t||e>0?l(n+1,o):l(n,r);r=o}},i.prototype.toString=function(){return"<"+this.toStringInner()+">"},i.prototype.toStringInner=function(){return this.content.join(", ")},i.prototype.toJSON=function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null},i.fromJSON=function(t,e){if(!e)return i.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new i(e.map(t.nodeFromJSON))},i.fromArray=function(t){if(!t.length)return i.empty;for(var e,n=0,r=0;r<t.length;r++){var o=t[r];n+=o.nodeSize,r&&o.isText&&t[r-1].sameMarkup(o)?(e||(e=t.slice(0,r)),e[e.length-1]=o.withText(e[e.length-1].text+o.text)):e&&e.push(o)}return new i(e||t,n)},i.from=function(t){if(!t)return i.empty;if(t instanceof i)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new i([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(i.prototype,s);var a={index:0,offset:0};function l(t,e){return a.index=t,a.offset=e,a}function c(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!c(t[r],e[r]))return!1}else{for(var o in t)if(!(o in e)||!c(t[o],e[o]))return!1;for(var i in e)if(!(i in t))return!1}return!0}i.empty=new i([],0);var p=function(t,e){this.type=t,this.attrs=e};function u(t){var e=Error.call(this,t);return e.__proto__=u.prototype,e}p.prototype.addToSet=function(t){for(var e,n=!1,r=0;r<t.length;r++){var o=t[r];if(this.eq(o))return t;if(this.type.excludes(o.type))e||(e=t.slice(0,r));else{if(o.type.excludes(this.type))return t;!n&&o.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(o)}}return e||(e=t.slice()),n||e.push(this),e},p.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t},p.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1},p.prototype.eq=function(t){return this==t||this.type==t.type&&c(this.attrs,t.attrs)},p.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t},p.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type "+e.type+" in this schema");return n.create(e.attrs)},p.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0},p.setFrom=function(t){if(!t||0==t.length)return p.none;if(t instanceof p)return[t];var e=t.slice();return e.sort((function(t,e){return t.type.rank-e.type.rank})),e},p.none=[],u.prototype=Object.create(Error.prototype),u.prototype.constructor=u,u.prototype.name="ReplaceError";var d=function(t,e,n){this.content=t,this.openStart=e,this.openEnd=n},h={size:{configurable:!0}};function f(t,e,n){if(n.openStart>t.depth)throw new u("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new u("Inconsistent open depths");return function t(e,n,r,o){var s=e.index(o),a=e.node(o);if(s==n.index(o)&&o<e.depth-r.openStart){var l=t(e,n,r,o+1);return a.copy(a.content.replaceChild(s,l))}if(r.content.size){if(r.openStart||r.openEnd||e.depth!=o||n.depth!=o){var c=function(t,e){for(var n=e.depth-t.openStart,r=e.node(n).copy(t.content),o=n-1;o>=0;o--)r=e.node(o).copy(i.from(r));return{start:r.resolveNoCache(t.openStart+n),end:r.resolveNoCache(r.content.size-t.openEnd-n)}}(r,e),p=c.start,u=c.end;return b(a,function t(e,n,r,o,s){var a=e.depth>s&&m(e,n,s+1),l=o.depth>s&&m(r,o,s+1),c=[];y(null,e,s,c),a&&l&&n.index(s)==r.index(s)?(v(a,l),g(b(a,t(e,n,r,o,s+1)),c)):(a&&g(b(a,w(e,n,s+1)),c),y(n,r,s,c),l&&g(b(l,w(r,o,s+1)),c));return y(o,null,s,c),new i(c)}(e,p,u,n,o))}var d=e.parent,h=d.content;return b(d,h.cut(0,e.parentOffset).append(r.content).append(h.cut(n.parentOffset)))}return b(a,w(e,n,o))}(t,e,n,0)}function v(t,e){if(!e.type.compatibleContent(t.type))throw new u("Cannot join "+e.type.name+" onto "+t.type.name)}function m(t,e,n){var r=t.node(n);return v(r,e.node(n)),r}function g(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function y(t,e,n,r){var o=(e||t).node(n),i=0,s=e?e.index(n):o.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(g(t.nodeAfter,r),i++));for(var a=i;a<s;a++)g(o.child(a),r);e&&e.depth==n&&e.textOffset&&g(e.nodeBefore,r)}function b(t,e){if(!t.type.validContent(e))throw new u("Invalid content for node "+t.type.name);return t.copy(e)}function w(t,e,n){var r=[];(y(null,t,n,r),t.depth>n)&&g(b(m(t,e,n+1),w(t,e,n+1)),r);return y(e,null,n,r),new i(r)}h.size.get=function(){return this.content.size-this.openStart-this.openEnd},d.prototype.insertAt=function(t,e){var n=function t(e,n,r,o){var i=e.findIndex(n),s=i.index,a=i.offset,l=e.maybeChild(s);if(a==n||l.isText)return o&&!o.canReplace(s,s,r)?null:e.cut(0,n).append(r).append(e.cut(n));var c=t(l.content,n-a-1,r);return c&&e.replaceChild(s,l.copy(c))}(this.content,t+this.openStart,e,null);return n&&new d(n,this.openStart,this.openEnd)},d.prototype.removeBetween=function(t,e){return new d(function t(e,n,r){var o=e.findIndex(n),i=o.index,s=o.offset,a=e.maybeChild(i),l=e.findIndex(r),c=l.index,p=l.offset;if(s==n||a.isText){if(p!=r&&!e.child(c).isText)throw new RangeError("Removing non-flat range");return e.cut(0,n).append(e.cut(r))}if(i!=c)throw new RangeError("Removing non-flat range");return e.replaceChild(i,a.copy(t(a.content,n-s-1,r-s-1)))}(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)},d.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd},d.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},d.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t},d.fromJSON=function(t,e){if(!e)return d.empty;var n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new d(i.fromJSON(t,e.content),n,r)},d.maxOpen=function(t,e){void 0===e&&(e=!0);for(var n=0,r=0,o=t.firstChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.firstChild)n++;for(var i=t.lastChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.lastChild)r++;return new d(t,n,r)},Object.defineProperties(d.prototype,h),d.empty=new d(i.empty,0,0);var x=function(t,e,n){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=n},S={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};x.prototype.resolveDepth=function(t){return null==t?this.depth:t<0?this.depth+t:t},S.parent.get=function(){return this.node(this.depth)},S.doc.get=function(){return this.node(0)},x.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},x.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},x.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},x.prototype.start=function(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1},x.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},x.prototype.before=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},x.prototype.after=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},S.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},S.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r},S.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},x.prototype.posAtIndex=function(t,e){e=this.resolveDepth(e);for(var n=this.path[3*e],r=0==e?0:this.path[3*e-1]+1,o=0;o<t;o++)r+=n.child(o).nodeSize;return r},x.prototype.marks=function(){var t=this.parent,e=this.index();if(0==t.content.size)return p.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){var o=n;n=r,r=o}for(var i=n.marks,s=0;s<i.length;s++)!1!==i[s].type.spec.inclusive||r&&i[s].isInSet(r.marks)||(i=i[s--].removeFromSet(i));return i},x.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,r=t.parent.maybeChild(t.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n},x.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0},x.prototype.blockRange=function(t,e){if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new M(this,t,n)},x.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},x.prototype.max=function(t){return t.pos>this.pos?t:this},x.prototype.min=function(t){return t.pos<this.pos?t:this},x.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset},x.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var n=[],r=0,o=e,i=t;;){var s=i.content.findIndex(o),a=s.index,l=s.offset,c=o-l;if(n.push(i,a,r+l),!c)break;if((i=i.child(a)).isText)break;o=c-1,r+=l+1}return new x(e,n,o)},x.resolveCached=function(t,e){for(var n=0;n<k.length;n++){var r=k[n];if(r.pos==e&&r.doc==t)return r}var o=k[C]=x.resolve(t,e);return C=(C+1)%O,o},Object.defineProperties(x.prototype,S);var k=[],C=0,O=12,M=function(t,e,n){this.$from=t,this.$to=e,this.depth=n},T={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};T.start.get=function(){return this.$from.before(this.depth+1)},T.end.get=function(){return this.$to.after(this.depth+1)},T.parent.get=function(){return this.$from.node(this.depth)},T.startIndex.get=function(){return this.$from.index(this.depth)},T.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(M.prototype,T);var _=Object.create(null),A=function(t,e,n,r){this.type=t,this.attrs=e,this.content=n||i.empty,this.marks=r||p.none},N={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};N.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},N.childCount.get=function(){return this.content.childCount},A.prototype.child=function(t){return this.content.child(t)},A.prototype.maybeChild=function(t){return this.content.maybeChild(t)},A.prototype.forEach=function(t){this.content.forEach(t)},A.prototype.nodesBetween=function(t,e,n,r){void 0===r&&(r=0),this.content.nodesBetween(t,e,n,r,this)},A.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},N.textContent.get=function(){return this.textBetween(0,this.content.size,"")},A.prototype.textBetween=function(t,e,n,r){return this.content.textBetween(t,e,n,r)},N.firstChild.get=function(){return this.content.firstChild},N.lastChild.get=function(){return this.content.lastChild},A.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},A.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},A.prototype.hasMarkup=function(t,e,n){return this.type==t&&c(this.attrs,e||t.defaultAttrs||_)&&p.sameSet(this.marks,n||p.none)},A.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},A.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},A.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},A.prototype.slice=function(t,e,n){if(void 0===e&&(e=this.content.size),void 0===n&&(n=!1),t==e)return d.empty;var r=this.resolve(t),o=this.resolve(e),i=n?0:r.sharedDepth(e),s=r.start(i),a=r.node(i).content.cut(r.pos-s,o.pos-s);return new d(a,r.depth-i,o.depth-i)},A.prototype.replace=function(t,e,n){return f(this.resolve(t),this.resolve(e),n)},A.prototype.nodeAt=function(t){for(var e=this;;){var n=e.content.findIndex(t),r=n.index,o=n.offset;if(!(e=e.maybeChild(r)))return null;if(o==t||e.isText)return e;t-=o+1}},A.prototype.childAfter=function(t){var e=this.content.findIndex(t),n=e.index,r=e.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},A.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,r=e.offset;if(r<t)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}},A.prototype.resolve=function(t){return x.resolveCached(this,t)},A.prototype.resolveNoCache=function(t){return x.resolve(this,t)},A.prototype.rangeHasMark=function(t,e,n){var r=!1;return e>t&&this.nodesBetween(t,e,(function(t){return n.isInSet(t.marks)&&(r=!0),!r})),r},N.isBlock.get=function(){return this.type.isBlock},N.isTextblock.get=function(){return this.type.isTextblock},N.inlineContent.get=function(){return this.type.inlineContent},N.isInline.get=function(){return this.type.isInline},N.isText.get=function(){return this.type.isText},N.isLeaf.get=function(){return this.type.isLeaf},N.isAtom.get=function(){return this.type.isAtom},A.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),R(this.marks,t)},A.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e},A.prototype.canReplace=function(t,e,n,r,o){void 0===n&&(n=i.empty),void 0===r&&(r=0),void 0===o&&(o=n.childCount);var s=this.contentMatchAt(t).matchFragment(n,r,o),a=s&&s.matchFragment(this.content,e);if(!a||!a.validEnd)return!1;for(var l=r;l<o;l++)if(!this.type.allowsMarks(n.child(l).marks))return!1;return!0},A.prototype.canReplaceWith=function(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(t).matchType(n),i=o&&o.matchFragment(this.content,e);return!!i&&i.validEnd},A.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},A.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));this.content.forEach((function(t){return t.check()}))},A.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((function(t){return t.toJSON()}))),t},A.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var r=i.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)},Object.defineProperties(A.prototype,N);var E=function(t){function e(e,n,r,o){if(t.call(this,e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return e.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):R(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},e.prototype.textBetween=function(t,e){return this.text.slice(t,e)},n.nodeSize.get=function(){return this.text.length},e.prototype.mark=function(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)},e.prototype.withText=function(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)},e.prototype.cut=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.text.length),0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))},e.prototype.eq=function(t){return this.sameMarkup(t)&&this.text==t.text},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.text=this.text,e},Object.defineProperties(e.prototype,n),e}(A);function R(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var D=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},I={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};D.parse=function(t,e){var n=new P(t,e);if(null==n.next)return D.empty;var r=L(n);n.next&&n.err("Unexpected trailing text");var o=function(t){var e=Object.create(null);return function n(r){var o=[];r.forEach((function(e){t[e].forEach((function(e){var n=e.term,r=e.to;if(n){var i=o.indexOf(n),s=i>-1&&o[i+1];H(t,r).forEach((function(t){s||o.push(n,s=[]),-1==s.indexOf(t)&&s.push(t)}))}}))}));for(var i=e[r.join(",")]=new D(r.indexOf(t.length-1)>-1),s=0;s<o.length;s+=2){var a=o[s+1].sort(F);i.next.push(o[s],e[a.join(",")]||n(a))}return i}(H(t,0))}(function(t){var e=[[]];return o(function t(e,i){if("choice"==e.type)return e.exprs.reduce((function(e,n){return e.concat(t(n,i))}),[]);if("seq"==e.type)for(var s=0;;s++){var a=t(e.exprs[s],i);if(s==e.exprs.length-1)return a;o(a,i=n())}else{if("star"==e.type){var l=n();return r(i,l),o(t(e.expr,l),l),[r(l)]}if("plus"==e.type){var c=n();return o(t(e.expr,i),c),o(t(e.expr,c),c),[r(c)]}if("opt"==e.type)return[r(i)].concat(t(e.expr,i));if("range"==e.type){for(var p=i,u=0;u<e.min;u++){var d=n();o(t(e.expr,p),d),p=d}if(-1==e.max)o(t(e.expr,p),p);else for(var h=e.min;h<e.max;h++){var f=n();r(p,f),o(t(e.expr,p),f),p=f}return[r(p)]}if("name"==e.type)return[r(i,null,e.value)]}}(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){var o={term:r,to:n};return e[t].push(o),o}function o(t,e){t.forEach((function(t){return t.to=e}))}}(r));return function(t,e){for(var n=0,r=[t];n<r.length;n++){for(var o=r[n],i=!o.validEnd,s=[],a=0;a<o.next.length;a+=2){var l=o.next[a],c=o.next[a+1];s.push(l.name),!i||l.isText||l.hasRequiredAttrs()||(i=!1),-1==r.indexOf(c)&&r.push(c)}i&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(o,n),o},D.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null},D.prototype.matchFragment=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.childCount);for(var r=this,o=e;r&&o<n;o++)r=r.matchType(t.child(o).type);return r},I.inlineContent.get=function(){var t=this.next[0];return!!t&&t.isInline},I.defaultType.get=function(){for(var t=0;t<this.next.length;t+=2){var e=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}},D.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var n=0;n<t.next.length;n+=2)if(this.next[e]==t.next[n])return!0;return!1},D.prototype.fillBefore=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=0);var r=[this];return function o(s,a){var l=s.matchFragment(t,n);if(l&&(!e||l.validEnd))return i.from(a.map((function(t){return t.createAndFill()})));for(var c=0;c<s.next.length;c+=2){var p=s.next[c],u=s.next[c+1];if(!p.isText&&!p.hasRequiredAttrs()&&-1==r.indexOf(u)){r.push(u);var d=o(u,a.concat(p));if(d)return d}}}(this,[])},D.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n},D.prototype.computeWrapping=function(t){for(var e=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),o=r.match;if(o.matchType(t)){for(var i=[],s=r;s.type;s=s.via)i.push(s.type);return i.reverse()}for(var a=0;a<o.next.length;a+=2){var l=o.next[a];l.isLeaf||l.hasRequiredAttrs()||l.name in e||r.type&&!o.next[a+1].validEnd||(n.push({match:l.contentMatch,type:l,via:r}),e[l.name]=!0)}}},I.edgeCount.get=function(){return this.next.length>>1},D.prototype.edge=function(t){var e=t<<1;if(e>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}},D.prototype.toString=function(){var t=[];return function e(n){t.push(n);for(var r=1;r<n.next.length;r+=2)-1==t.indexOf(n.next[r])&&e(n.next[r])}(this),t.map((function(e,n){for(var r=n+(e.validEnd?"*":" ")+" ",o=0;o<e.next.length;o+=2)r+=(o?", ":"")+e.next[o].name+"->"+t.indexOf(e.next[o+1]);return r})).join("\n")},Object.defineProperties(D.prototype,I),D.empty=new D(!0);var P=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.unshift()},$={next:{configurable:!0}};function L(t){var e=[];do{e.push(z(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function z(t){var e=[];do{e.push(B(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function B(t){for(var e=function(t){if(t.eat("(")){var e=L(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=function(t,e){var n=t.nodeTypes,r=n[e];if(r)return[r];var o=[];for(var i in n){var s=n[i];s.groups.indexOf(e)>-1&&o.push(s)}0==o.length&&t.err("No node type or group '"+e+"' found");return o}(t,t.next).map((function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}}));return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=V(t,e)}return e}function j(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function V(t,e){var n=j(t),r=n;return t.eat(",")&&(r="}"!=t.next?j(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function F(t,e){return e-t}function H(t,e){var n=[];return function e(r){var o=t[r];if(1==o.length&&!o[0].term)return e(o[0].to);n.push(r);for(var i=0;i<o.length;i++){var s=o[i],a=s.term,l=s.to;a||-1!=n.indexOf(l)||e(l)}}(e),n.sort(F)}function q(t){var e=Object.create(null);for(var n in t){var r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function W(t,e){var n=Object.create(null);for(var r in t){var o=e&&e[r];if(void 0===o){var i=t[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function J(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new G(t[n]);return e}$.next.get=function(){return this.tokens[this.pos]},P.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)},P.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")},Object.defineProperties(P.prototype,$);var K=function(t,e,n){this.name=t,this.schema=e,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=J(n.attrs),this.defaultAttrs=q(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t},U={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};U.isInline.get=function(){return!this.isBlock},U.isTextblock.get=function(){return this.isBlock&&this.inlineContent},U.isLeaf.get=function(){return this.contentMatch==D.empty},U.isAtom.get=function(){return this.isLeaf||this.spec.atom},K.prototype.hasRequiredAttrs=function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1},K.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)},K.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:W(this.attrs,t)},K.prototype.create=function(t,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new A(this,this.computeAttrs(t),i.from(e),p.setFrom(n))},K.prototype.createChecked=function(t,e,n){if(e=i.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new A(this,this.computeAttrs(t),e,p.setFrom(n))},K.prototype.createAndFill=function(t,e,n){if(t=this.computeAttrs(t),(e=i.from(e)).size){var r=this.contentMatch.fillBefore(e);if(!r)return null;e=r.append(e)}var o=this.contentMatch.matchFragment(e).fillBefore(i.empty,!0);return o?new A(this,t,e.append(o),p.setFrom(n)):null},K.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0},K.prototype.allowsMarkType=function(t){return null==this.markSet||this.markSet.indexOf(t)>-1},K.prototype.allowsMarks=function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0},K.prototype.allowedMarks=function(t){if(null==this.markSet)return t;for(var e,n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:p.empty:t},K.compile=function(t,e){var n=Object.create(null);t.forEach((function(t,r){return n[t]=new K(t,e,r)}));var r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var o in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(K.prototype,U);var G=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},X={isRequired:{configurable:!0}};X.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(G.prototype,X);var Y=function(t,e,n,r){this.name=t,this.schema=n,this.spec=r,this.attrs=J(r.attrs),this.rank=e,this.excluded=null;var o=q(this.attrs);this.instance=o&&new p(this,o)};Y.prototype.create=function(t){return!t&&this.instance?this.instance:new p(this,W(this.attrs,t))},Y.compile=function(t,e){var n=Object.create(null),r=0;return t.forEach((function(t,o){return n[t]=new Y(t,r++,e,o)})),n},Y.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t.slice(0,e).concat(t.slice(e+1));return t},Y.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]},Y.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var Z=function(t){for(var e in this.spec={},t)this.spec[e]=t[e];this.spec.nodes=o.from(t.nodes),this.spec.marks=o.from(t.marks),this.nodes=K.compile(this.spec.nodes,this),this.marks=Y.compile(this.spec.marks,this);var n=Object.create(null);for(var r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");var i=this.nodes[r],s=i.spec.content||"",a=i.spec.marks;i.contentMatch=n[s]||(n[s]=D.parse(s,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.markSet="_"==a?null:a?Q(this,a.split(" ")):""!=a&&i.inlineContent?null:[]}for(var l in this.marks){var c=this.marks[l],p=c.spec.excludes;c.excluded=null==p?[c]:""==p?[]:Q(this,p.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function Q(t,e){for(var n=[],r=0;r<e.length;r++){var o=e[r],i=t.marks[o],s=i;if(i)n.push(i);else for(var a in t.marks){var l=t.marks[a];("_"==o||l.spec.group&&l.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}Z.prototype.node=function(t,e,n,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof K))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)},Z.prototype.text=function(t,e){var n=this.nodes.text;return new E(n,n.defaultAttrs,t,p.setFrom(e))},Z.prototype.mark=function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)},Z.prototype.nodeFromJSON=function(t){return A.fromJSON(this,t)},Z.prototype.markFromJSON=function(t){return p.fromJSON(this,t)},Z.prototype.nodeType=function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e};var tt=function(t,e){var n=this;this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach((function(t){t.tag?n.tags.push(t):t.style&&n.styles.push(t)})),this.normalizeLists=!this.tags.some((function(e){if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;var n=t.nodes[e.node];return n.contentMatch.matchType(n)}))};tt.prototype.parse=function(t,e){void 0===e&&(e={});var n=new st(this,e,!1);return n.addAll(t,null,e.from,e.to),n.finish()},tt.prototype.parseSlice=function(t,e){void 0===e&&(e={});var n=new st(this,e,!0);return n.addAll(t,null,e.from,e.to),d.maxOpen(n.finish())},tt.prototype.matchTag=function(t,e){for(var n=0;n<this.tags.length;n++){var r=this.tags[n];if(lt(t,r.tag)&&(void 0===r.namespace||t.namespaceURI==r.namespace)&&(!r.context||e.matchesContext(r.context))){if(r.getAttrs){var o=r.getAttrs(t);if(!1===o)continue;r.attrs=o}return r}}},tt.prototype.matchStyle=function(t,e,n){for(var r=0;r<this.styles.length;r++){var o=this.styles[r];if(!(0!=o.style.indexOf(t)||o.context&&!n.matchesContext(o.context)||o.style.length>t.length&&(61!=o.style.charCodeAt(t.length)||o.style.slice(t.length+1)!=e))){if(o.getAttrs){var i=o.getAttrs(e);if(!1===i)continue;o.attrs=i}return o}}},tt.schemaRules=function(t){var e=[];function n(t){for(var n=null==t.priority?50:t.priority,r=0;r<e.length;r++){var o=e[r];if((null==o.priority?50:o.priority)<n)break}e.splice(r,0,t)}var r=function(e){var r=t.marks[e].spec.parseDOM;r&&r.forEach((function(t){n(t=ct(t)),t.mark=e}))};for(var o in t.marks)r(o);var i;for(var s in t.nodes)i=void 0,(i=t.nodes[s].spec.parseDOM)&&i.forEach((function(t){n(t=ct(t)),t.node=s}));return e},tt.fromSchema=function(t){return t.cached.domParser||(t.cached.domParser=new tt(t,tt.schemaRules(t)))};var et={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},nt={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},rt={ol:!0,ul:!0};function ot(t){return(t?1:0)|("full"===t?2:0)}var it=function(t,e,n,r,o,i,s){this.type=t,this.attrs=e,this.solid=o,this.match=i||(4&s?null:t.contentMatch),this.options=s,this.content=[],this.marks=n,this.activeMarks=p.none,this.pendingMarks=r,this.stashMarks=[]};it.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(i.from(t));if(!e){var n,r=this.type.contentMatch;return(n=r.findWrapping(t.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)},it.prototype.finish=function(t){if(!(1&this.options)){var e,n=this.content[this.content.length-1];n&&n.isText&&(e=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length)))}var r=i.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(i.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r},it.prototype.popFromStashMark=function(t){for(var e=this.stashMarks.length-1;e>=0;e--)if(this.stashMarks[e].type==t)return this.stashMarks.splice(e,1)[0]},it.prototype.applyPending=function(t){for(var e=0,n=this.pendingMarks;e<n.length;e++){var r=n[e];if((this.type?this.type.allowsMarkType(r.type):pt(r.type,t))&&!r.isInSet(this.activeMarks)){var o=ut(r,this.activeMarks);o&&this.stashMarks.push(o),this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks)}}};var st=function(t,e,n){this.parser=t,this.options=e,this.isOpen=n;var r,o=e.topNode,i=ot(e.preserveWhitespace)|(n?4:0);r=o?new it(o.type,o.attrs,p.none,p.none,!0,e.topMatch||o.type.contentMatch,i):new it(n?null:t.schema.topNodeType,null,p.none,p.none,!0,null,i),this.nodes=[r],this.open=0,this.find=e.findPositions,this.needsBlock=!1},at={top:{configurable:!0},currentPos:{configurable:!0}};function lt(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function ct(t){var e={};for(var n in t)e[n]=t[n];return e}function pt(t,e){var n=e.schema.nodes,r=function(r){var o=n[r];if(o.allowsMarkType(t)){var i=[],s=function(t){i.push(t);for(var n=0;n<t.edgeCount;n++){var r=t.edge(n),o=r.type,a=r.next;if(o==e)return!0;if(i.indexOf(a)<0&&s(a))return!0}};return s(o.contentMatch)?{v:!0}:void 0}};for(var o in n){var i=r(o);if(i)return i.v}}function ut(t,e){for(var n=0;n<e.length;n++)if(t.type==e[n].type)return e[n]}at.top.get=function(){return this.nodes[this.open]},st.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),n=e?this.readStyles(function(t){var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];for(;e=n.exec(t);)r.push(e[1],e[2].trim());return r}(e)):null,r=this.top;if(null!=n)for(var o=0;o<n.length;o++)this.addPendingMark(n[o]);if(this.addElement(t),null!=n)for(var i=0;i<n.length;i++)this.removePendingMark(n[i],r)}},st.prototype.addTextNode=function(t){var e=t.nodeValue,n=this.top;if((n.type?n.type.inlineContent:n.content.length&&n.content[0].isInline)||/[^ \t\r\n\u000c]/.test(e)){if(1&n.options)2&n.options||(e=e.replace(/\r?\n|\r/g," "));else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],o=t.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)},st.prototype.addElement=function(t){var e=t.nodeName.toLowerCase();rt.hasOwnProperty(e)&&this.parser.normalizeLists&&function(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&rt.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}(t);var n=this.options.ruleFromNode&&this.options.ruleFromNode(t)||this.parser.matchTag(t,this);if(n?n.ignore:nt.hasOwnProperty(e))this.findInside(t);else if(!n||n.skip||n.closeParent){n&&n.closeParent?this.open=Math.max(0,this.open-1):n&&n.skip.nodeType&&(t=n.skip);var r,o=this.top,i=this.needsBlock;if(et.hasOwnProperty(e))r=!0,o.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),r&&this.sync(o),this.needsBlock=i}else this.addElementByRule(t,n)},st.prototype.leafFallback=function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))},st.prototype.readStyles=function(t){for(var e=p.none,n=0;n<t.length;n+=2){var r=this.parser.matchStyle(t[n],t[n+1],this);if(r){if(r.ignore)return null;e=this.parser.schema.marks[r.mark].create(r.attrs).addToSet(e)}}return e},st.prototype.addElementByRule=function(t,e){var n,r,o,i=this;e.node?(r=this.parser.schema.nodes[e.node]).isLeaf?this.insertNode(r.create(e.attrs))||this.leafFallback(t):n=this.enter(r,e.attrs,e.preserveWhitespace):(o=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(o));var s=this.top;if(r&&r.isLeaf)this.findInside(t);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((function(t){return i.insertNode(t)}));else{var a=e.contentElement;"string"==typeof a?a=t.querySelector(a):"function"==typeof a&&(a=a(t)),a||(a=t),this.findAround(t,a,!0),this.addAll(a,n)}n&&(this.sync(s),this.open--),o&&this.removePendingMark(o,s)},st.prototype.addAll=function(t,e,n,r){for(var o=n||0,i=n?t.childNodes[n]:t.firstChild,s=null==r?null:t.childNodes[r];i!=s;i=i.nextSibling,++o)this.findAtPoint(t,o),this.addDOM(i),e&&et.hasOwnProperty(i.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,o)},st.prototype.findPlace=function(t){for(var e,n,r=this.open;r>=0;r--){var o=this.nodes[r],i=o.findWrapping(t);if(i&&(!e||e.length>i.length)&&(e=i,n=o,!i.length))break;if(o.solid)break}if(!e)return!1;this.sync(n);for(var s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0},st.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));for(var r=n.activeMarks,o=0;o<t.marks.length;o++)n.type&&!n.type.allowsMarkType(t.marks[o].type)||(r=t.marks[o].addToSet(r));return n.content.push(t.mark(r)),!0}return!1},st.prototype.enter=function(t,e,n){var r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,n),r},st.prototype.enterInner=function(t,e,n,r){this.closeExtra();var o=this.top;o.applyPending(t),o.match=o.match&&o.match.matchType(t,e);var i=null==r?-5&o.options:ot(r);4&o.options&&0==o.content.length&&(i|=4),this.nodes.push(new it(t,e,o.activeMarks,o.pendingMarks,n,null,i)),this.open++},st.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}},st.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},st.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return void(this.open=e)},at.currentPos.get=function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t},st.prototype.findAtPoint=function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)},st.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)},st.prototype.findAround=function(t,e,n){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++){if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node))e.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}},st.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))},st.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),r=this.options.context,o=!(this.isOpen||r&&r.parent.type!=this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),s=function(t,a){for(;t>=0;t--){var l=n[t];if(""==l){if(t==n.length-1||0==t)continue;for(;a>=i;a--)if(s(t-1,a))return!0;return!1}var c=a>0||0==a&&o?e.nodes[a].type:r&&a>=i?r.node(a-i).type:null;if(!c||c.name!=l&&-1==c.groups.indexOf(l))return!1;a--}return!0};return s(n.length-1,this.open)},st.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}},st.prototype.addPendingMark=function(t){var e=ut(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)},st.prototype.removePendingMark=function(t,e){for(var n=this.open;n>=0;n--){var r=this.nodes[n];if(r.pendingMarks.lastIndexOf(t)>-1)r.pendingMarks=t.removeFromSet(r.pendingMarks);else{r.activeMarks=t.removeFromSet(r.activeMarks);var o=r.popFromStashMark(t.type);o&&(r.activeMarks=o.addToSet(r.activeMarks))}if(r==e)break}},Object.defineProperties(st.prototype,at);var dt=function(t,e){this.nodes=t||{},this.marks=e||{}};function ht(t){var e={};for(var n in t){var r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function ft(t){return t.document||window.document}dt.prototype.serializeFragment=function(t,e,n){var r=this;void 0===e&&(e={}),n||(n=ft(e).createDocumentFragment());var o=n,i=null;return t.forEach((function(t){if(i||t.marks.length){i||(i=[]);for(var n=0,s=0;n<i.length&&s<t.marks.length;){var a=t.marks[s];if(r.marks[a.type.name]){if(!a.eq(i[n])||!1===a.type.spec.spanning)break;n+=2,s++}else s++}for(;n<i.length;)o=i.pop(),i.pop();for(;s<t.marks.length;){var l=t.marks[s++],c=r.serializeMark(l,t.isInline,e);c&&(i.push(l,o),o.appendChild(c.dom),o=c.contentDOM||c.dom)}}o.appendChild(r.serializeNode(t,e))})),n},dt.prototype.serializeNode=function(t,e){void 0===e&&(e={});var n=dt.renderSpec(ft(e),this.nodes[t.type.name](t)),r=n.dom,o=n.contentDOM;if(o){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");e.onContent?e.onContent(t,o,e):this.serializeFragment(t.content,e,o)}return r},dt.prototype.serializeNodeAndMarks=function(t,e){void 0===e&&(e={});for(var n=this.serializeNode(t,e),r=t.marks.length-1;r>=0;r--){var o=this.serializeMark(t.marks[r],t.isInline,e);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n},dt.prototype.serializeMark=function(t,e,n){void 0===n&&(n={});var r=this.marks[t.type.name];return r&&dt.renderSpec(ft(n),r(t,e))},dt.renderSpec=function(t,e,n){if(void 0===n&&(n=null),"string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};var r=e[0],o=r.indexOf(" ");o>0&&(n=r.slice(0,o),r=r.slice(o+1));var i=null,s=n?t.createElementNS(n,r):t.createElement(r),a=e[1],l=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a))for(var c in l=2,a)if(null!=a[c]){var p=c.indexOf(" ");p>0?s.setAttributeNS(c.slice(0,p),c.slice(p+1),a[c]):s.setAttribute(c,a[c])}for(var u=l;u<e.length;u++){var d=e[u];if(0===d){if(u<e.length-1||u>l)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}var h=dt.renderSpec(t,d,n),f=h.dom,v=h.contentDOM;if(s.appendChild(f),v){if(i)throw new RangeError("Multiple content holes");i=v}}return{dom:s,contentDOM:i}},dt.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new dt(this.nodesFromSchema(t),this.marksFromSchema(t)))},dt.nodesFromSchema=function(t){var e=ht(t.nodes);return e.text||(e.text=function(t){return t.text}),e},dt.marksFromSchema=function(t){return ht(t.marks)}},281:function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return g})),n.d(e,"c",(function(){return m})),n.d(e,"d",(function(){return f})),n.d(e,"e",(function(){return p})),n.d(e,"f",(function(){return C})),n.d(e,"g",(function(){return k})),n.d(e,"h",(function(){return T})),n.d(e,"i",(function(){return x})),n.d(e,"j",(function(){return M})),n.d(e,"k",(function(){return w}));var r=n(280),o=Math.pow(2,16);function i(t){return 65535&t}var s=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=null),this.pos=t,this.deleted=e,this.recover=n},a=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};a.prototype.recover=function(t){var e=0,n=i(t);if(!this.inverted)for(var r=0;r<n;r++)e+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+e+function(t){return(t-(65535&t))/o}(t)},a.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},a.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},a.prototype._map=function(t,e,n){for(var r=0,i=this.inverted?2:1,a=this.inverted?1:2,l=0;l<this.ranges.length;l+=3){var c=this.ranges[l]-(this.inverted?r:0);if(c>t)break;var p=this.ranges[l+i],u=this.ranges[l+a],d=c+p;if(t<=d){var h=c+r+((p?t==c?-1:t==d?1:e:e)<0?0:u);if(n)return h;var f=t==(e<0?c:d)?null:l/3+(t-c)*o;return new s(h,e<0?t!=c:t!=d,f)}r+=u-p}return n?t+r:new s(t+r)},a.prototype.touches=function(t,e){for(var n=0,r=i(e),o=this.inverted?2:1,s=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var l=this.ranges[a]-(this.inverted?n:0);if(l>t)break;var c=this.ranges[a+o];if(t<=l+c&&a==3*r)return!0;n+=this.ranges[a+s]-c}return!1},a.prototype.forEach=function(t){for(var e=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],s=i-(this.inverted?o:0),a=i+(this.inverted?0:o),l=this.ranges[r+e],c=this.ranges[r+n];t(s,s+l,a,a+c),o+=c-l}},a.prototype.invert=function(){return new a(this.ranges,!this.inverted)},a.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},a.offset=function(t){return 0==t?a.empty:new a(t<0?[0,-t,0]:[0,0,t])},a.empty=new a([]);var l=function(t,e,n,r){this.maps=t||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=e};function c(t){var e=Error.call(this,t);return e.__proto__=c.prototype,e}l.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new l(this.maps,this.mirror,t,e)},l.prototype.copy=function(){return new l(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},l.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},l.prototype.appendMapping=function(t){for(var e=0,n=this.maps.length;e<t.maps.length;e++){var r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?n+r:null)}},l.prototype.getMirror=function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]},l.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},l.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){var r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&r>e?n-r-1:null)}},l.prototype.invert=function(){var t=new l;return t.appendMappingInverted(this),t},l.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t},l.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},l.prototype._map=function(t,e,n){for(var r=!1,o=this.from;o<this.to;o++){var i=this.maps[o].mapResult(t,e);if(null!=i.recover){var a=this.getMirror(o);if(null!=a&&a>o&&a<this.to){o=a,t=this.maps[a].recover(i.recover);continue}}i.deleted&&(r=!0),t=i.pos}return n?t:new s(t,r)},c.prototype=Object.create(Error.prototype),c.prototype.constructor=c,c.prototype.name="TransformError";var p=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new l},u={before:{configurable:!0},docChanged:{configurable:!0}};function d(){throw new Error("Override me")}u.before.get=function(){return this.docs.length?this.docs[0]:this.doc},p.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new c(e.failed);return this},p.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},u.docChanged.get=function(){return this.steps.length>0},p.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(p.prototype,u);var h=Object.create(null),f=function(){};f.prototype.apply=function(t){return d()},f.prototype.getMap=function(){return a.empty},f.prototype.invert=function(t){return d()},f.prototype.map=function(t){return d()},f.prototype.merge=function(t){return null},f.prototype.toJSON=function(){return d()},f.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=h[e.stepType];if(!n)throw new RangeError("No step type "+e.stepType+" defined");return n.fromJSON(t,e)},f.jsonID=function(t,e){if(t in h)throw new RangeError("Duplicate use of step JSON ID "+t);return h[t]=e,e.prototype.jsonID=t,e};var v=function(t,e){this.doc=t,this.failed=e};v.ok=function(t){return new v(t,null)},v.fail=function(t){return new v(null,t)},v.fromReplace=function(t,e,n,o){try{return v.ok(t.replace(e,n,o))}catch(t){if(t instanceof r.ReplaceError)return v.fail(t.message);throw t}};var m=function(t){function e(e,n,r,o){t.call(this),this.from=e,this.to=n,this.slice=r,this.structure=!!o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){return this.structure&&y(t,this.from,this.to)?v.fail("Structure replace would overwrite content"):v.fromReplace(t,this.from,this.to,this.slice)},e.prototype.getMap=function(){return new a([this.from,this.to-this.from,this.slice.size])},e.prototype.invert=function(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new e(n.pos,Math.max(n.pos,r.pos),this.slice)},e.prototype.merge=function(t){if(!(t instanceof e)||t.structure!=this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var n=this.slice.size+t.slice.size==0?r.Slice.empty:new r.Slice(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,n,this.structure)}var o=this.slice.size+t.slice.size==0?r.Slice.empty:new r.Slice(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),o,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(n.from,n.to,r.Slice.fromJSON(t,n.slice),!!n.structure)},e}(f);f.jsonID("replace",m);var g=function(t){function e(e,n,r,o,i,s,a){t.call(this),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=!!a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){if(this.structure&&(y(t,this.from,this.gapFrom)||y(t,this.gapTo,this.to)))return v.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return v.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,e.content);return n?v.fromReplace(t,this.from,this.to,n):v.fail("Content does not fit in gap")},e.prototype.getMap=function(){return new a([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},e.prototype.invert=function(t){var n=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),o=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return n.deleted&&r.deleted||o<n.pos||i>r.pos?null:new e(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(n.from,n.to,n.gapFrom,n.gapTo,r.Slice.fromJSON(t,n.slice),n.insert,!!n.structure)},e}(f);function y(t,e,n){for(var r=t.resolve(e),o=n-e,i=r.depth;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0)for(var s=r.node(i).maybeChild(r.indexAfter(i));o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}return!1}function b(t,e,n){return(0==e||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function w(t){for(var e=t.parent.content.cutByIndex(t.startIndex,t.endIndex),n=t.depth;;--n){var r=t.$from.node(n),o=t.$from.index(n),i=t.$to.indexAfter(n);if(n<t.depth&&r.canReplace(o,i,e))return n;if(0==n||r.type.spec.isolating||!b(r,o,i))break}}function x(t,e,n,r){void 0===r&&(r=t);var o=function(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.contentMatchAt(r).findWrapping(e);if(!i)return null;var s=i.length?i[0]:e;return n.canReplaceWith(r,o,s)?i:null}(t,e),i=o&&function(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.child(r),s=e.contentMatch.findWrapping(i.type);if(!s)return null;for(var a=(s.length?s[s.length-1]:e).contentMatch,l=r;a&&l<o;l++)a=a.matchType(n.child(l).type);if(!a||!a.validEnd)return null;return s}(r,e);return i?o.map(S).concat({type:e,attrs:n}).concat(i.map(S)):null}function S(t){return{type:t,attrs:null}}function k(t,e,n,r){void 0===n&&(n=1);var o=t.resolve(e),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var a=o.depth-1,l=n-2;a>i;a--,l--){var c=o.node(a),p=o.index(a);if(c.type.spec.isolating)return!1;var u=c.content.cutByIndex(p,c.childCount),d=r&&r[l]||c;if(d!=c&&(u=u.replaceChild(0,d.type.create(d.attrs))),!c.canReplace(p+1,c.childCount)||!d.type.validContent(u))return!1}var h=o.indexAfter(i),f=r&&r[0];return o.node(i).canReplaceWith(h,h,f?f.type:o.node(i+1).type)}function C(t,e){var n=t.resolve(e),r=n.index();return O(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function O(t,e){return t&&e&&!t.isLeaf&&t.canAppend(e)}function M(t,e,n){void 0===n&&(n=-1);for(var r=t.resolve(e),o=r.depth;;o--){var i=void 0,s=void 0,a=r.index(o);if(o==r.depth?(i=r.nodeBefore,s=r.nodeAfter):n>0?(i=r.node(o+1),a++,s=r.node(o).maybeChild(a)):(i=r.node(o).maybeChild(a-1),s=r.node(o+1)),i&&!i.isTextblock&&O(i,s)&&r.node(o).canReplace(a,a+1))return e;if(0==o)break;e=n<0?r.before(o):r.after(o)}}function T(t,e,n){var r=t.resolve(e);if(!n.content.size)return e;for(var o=n.content,i=0;i<n.openStart;i++)o=o.firstChild.content;for(var s=1;s<=(0==n.openStart&&n.size?2:1);s++)for(var a=r.depth;a>=0;a--){var l=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,c=r.index(a)+(l>0?1:0);if(1==s?r.node(a).canReplace(c,c,o):r.node(a).contentMatchAt(c).findWrapping(o.firstChild.type))return 0==l?r.pos:l<0?r.before(a+1):r.after(a+1)}return null}function _(t,e,n){for(var o=[],i=0;i<t.childCount;i++){var s=t.child(i);s.content.size&&(s=s.copy(_(s.content,e,s))),s.isInline&&(s=e(s,n,i)),o.push(s)}return r.Fragment.fromArray(o)}f.jsonID("replaceAround",g),p.prototype.lift=function(t,e){for(var n=t.$from,o=t.$to,i=t.depth,s=n.before(i+1),a=o.after(i+1),l=s,c=a,p=r.Fragment.empty,u=0,d=i,h=!1;d>e;d--)h||n.index(d)>0?(h=!0,p=r.Fragment.from(n.node(d).copy(p)),u++):l--;for(var f=r.Fragment.empty,v=0,m=i,y=!1;m>e;m--)y||o.after(m+1)<o.end(m)?(y=!0,f=r.Fragment.from(o.node(m).copy(f)),v++):c++;return this.step(new g(l,c,s,a,new r.Slice(p.append(f),u,v),p.size-u,!0))},p.prototype.wrap=function(t,e){for(var n=r.Fragment.empty,o=e.length-1;o>=0;o--)n=r.Fragment.from(e[o].type.create(e[o].attrs,n));var i=t.start,s=t.end;return this.step(new g(i,s,i,s,new r.Slice(n,0,0),e.length,!0))},p.prototype.setBlockType=function(t,e,n,o){var i=this;if(void 0===e&&(e=t),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var s=this.steps.length;return this.doc.nodesBetween(t,e,(function(t,e){if(t.isTextblock&&!t.hasMarkup(n,o)&&function(t,e,n){var r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(i.doc,i.mapping.slice(s).map(e),n)){i.clearIncompatible(i.mapping.slice(s).map(e,1),n);var a=i.mapping.slice(s),l=a.map(e,1),c=a.map(e+t.nodeSize,1);return i.step(new g(l,c,l+1,c-1,new r.Slice(r.Fragment.from(n.create(o,null,t.marks)),0,0),1,!0)),!1}})),this},p.prototype.setNodeMarkup=function(t,e,n,o){var i=this.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");e||(e=i.type);var s=e.create(n,null,o||i.marks);if(i.isLeaf)return this.replaceWith(t,t+i.nodeSize,s);if(!e.validContent(i.content))throw new RangeError("Invalid content for node type "+e.name);return this.step(new g(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new r.Slice(r.Fragment.from(s),0,0),1,!0))},p.prototype.split=function(t,e,n){void 0===e&&(e=1);for(var o=this.doc.resolve(t),i=r.Fragment.empty,s=r.Fragment.empty,a=o.depth,l=o.depth-e,c=e-1;a>l;a--,c--){i=r.Fragment.from(o.node(a).copy(i));var p=n&&n[c];s=r.Fragment.from(p?p.type.create(p.attrs,s):o.node(a).copy(s))}return this.step(new m(t,t,new r.Slice(i.append(s),e,e),!0))},p.prototype.join=function(t,e){void 0===e&&(e=1);var n=new m(t-e,t+e,r.Slice.empty,!0);return this.step(n)};var A=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),o=t.resolve(this.from),i=o.node(o.sharedDepth(this.to)),s=new r.Slice(_(n.content,(function(t,n){return n.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t}),i),n.openStart,n.openEnd);return v.fromReplace(t,this.from,this.to,s)},e.prototype.invert=function(){return new N(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(f);f.jsonID("addMark",A);var N=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),o=new r.Slice(_(n.content,(function(t){return t.mark(e.mark.removeFromSet(t.marks))})),n.openStart,n.openEnd);return v.fromReplace(t,this.from,this.to,o)},e.prototype.invert=function(){return new A(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(f);function E(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}f.jsonID("removeMark",N),p.prototype.addMark=function(t,e,n){var r=this,o=[],i=[],s=null,a=null;return this.doc.nodesBetween(t,e,(function(r,l,c){if(r.isInline){var p=r.marks;if(!n.isInSet(p)&&c.type.allowsMarkType(n.type)){for(var u=Math.max(l,t),d=Math.min(l+r.nodeSize,e),h=n.addToSet(p),f=0;f<p.length;f++)p[f].isInSet(h)||(s&&s.to==u&&s.mark.eq(p[f])?s.to=d:o.push(s=new N(u,d,p[f])));a&&a.to==u?a.to=d:i.push(a=new A(u,d,n))}}})),o.forEach((function(t){return r.step(t)})),i.forEach((function(t){return r.step(t)})),this},p.prototype.removeMark=function(t,e,n){var o=this;void 0===n&&(n=null);var i=[],s=0;return this.doc.nodesBetween(t,e,(function(o,a){if(o.isInline){s++;var l=null;if(n instanceof r.MarkType){var c=n.isInSet(o.marks);c&&(l=[c])}else n?n.isInSet(o.marks)&&(l=[n]):l=o.marks;if(l&&l.length)for(var p=Math.min(a+o.nodeSize,e),u=0;u<l.length;u++){for(var d=l[u],h=void 0,f=0;f<i.length;f++){var v=i[f];v.step==s-1&&d.eq(i[f].style)&&(h=v)}h?(h.to=p,h.step=s):i.push({style:d,from:Math.max(a,t),to:p,step:s})}}})),i.forEach((function(t){return o.step(new N(t.from,t.to,t.style))})),this},p.prototype.clearIncompatible=function(t,e,n){void 0===n&&(n=e.contentMatch);for(var o=this.doc.nodeAt(t),i=[],s=t+1,a=0;a<o.childCount;a++){var l=o.child(a),c=s+l.nodeSize,p=n.matchType(l.type,l.attrs);if(p){n=p;for(var u=0;u<l.marks.length;u++)e.allowsMarkType(l.marks[u].type)||this.step(new N(s,c,l.marks[u]))}else i.push(new m(s,c,r.Slice.empty));s=c}if(!n.validEnd){var d=n.fillBefore(r.Fragment.empty,!0);this.replace(s,s,new r.Slice(d,0,0))}for(var h=i.length-1;h>=0;h--)this.step(i[h]);return this},p.prototype.replace=function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=r.Slice.empty);var o=function(t,e,n,o){if(void 0===n&&(n=e),void 0===o&&(o=r.Slice.empty),e==n&&!o.size)return null;var i=t.resolve(e),s=t.resolve(n);return E(i,s,o)?new m(e,n,o):new R(i,s,o).fit()}(this.doc,t,e,n);return o&&this.step(o),this},p.prototype.replaceWith=function(t,e,n){return this.replace(t,e,new r.Slice(r.Fragment.from(n),0,0))},p.prototype.delete=function(t,e){return this.replace(t,e,r.Slice.empty)},p.prototype.insert=function(t,e){return this.replaceWith(t,t,e)};var R=function(t,e,n){this.$to=e,this.$from=t,this.unplaced=n,this.frontier=[];for(var o=0;o<=t.depth;o++){var i=t.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(t.indexAfter(o))})}this.placed=r.Fragment.empty;for(var s=t.depth;s>0;s--)this.placed=r.Fragment.from(t.node(s).copy(this.placed))},D={depth:{configurable:!0}};function I(t,e,n){return 0==e?t.cutByIndex(n):t.replaceChild(0,t.firstChild.copy(I(t.firstChild.content,e-1,n)))}function P(t,e,n){return 0==e?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(P(t.lastChild.content,e-1,n)))}function $(t,e){for(var n=0;n<e;n++)t=t.firstChild.content;return t}function L(t,e,n){if(e<=0)return t;var o=t.content;return e>1&&(o=o.replaceChild(0,L(o.firstChild,e-1,1==o.childCount?n-1:0))),e>0&&(o=t.type.contentMatch.fillBefore(o).append(o),n<=0&&(o=o.append(t.type.contentMatch.matchFragment(o).fillBefore(r.Fragment.empty,!0)))),t.copy(o)}function z(t,e,n,r,o){var i=t.node(e),s=o?t.indexAfter(e):t.index(e);if(s==i.childCount&&!n.compatibleContent(i.type))return null;var a=r.fillBefore(i.content,!0,s);return a&&!function(t,e,n){for(var r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}(n,i.content,s)?a:null}function B(t,e,n,o,i){if(e<n){var s=t.firstChild;t=t.replaceChild(0,s.copy(B(s.content,e+1,n,o,s)))}if(e>o){var a=i.contentMatchAt(0),l=a.fillBefore(t).append(t);t=l.append(a.matchFragment(l).fillBefore(r.Fragment.empty,!0))}return t}function j(t,e){for(var n=[],r=Math.min(t.depth,e.depth);r>=0;r--){var o=t.start(r);if(o<t.pos-(t.depth-r)||e.end(r)>e.pos+(e.depth-r)||t.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;o==e.start(r)&&n.push(r)}return n}D.depth.get=function(){return this.frontier.length-1},R.prototype.fit=function(){for(;this.unplaced.size;){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,o=this.$from,i=this.close(e<0?this.$to:o.doc.resolve(e));if(!i)return null;for(var s=this.placed,a=o.depth,l=i.depth;a&&l&&1==s.childCount;)s=s.firstChild.content,a--,l--;var c=new r.Slice(s,a,l);return e>-1?new g(o.pos,e,this.$to.pos,this.$to.end(),c,n):c.size||o.pos!=this.$to.pos?new m(o.pos,i.pos,c):void 0},R.prototype.findFittable=function(){for(var t=1;t<=2;t++)for(var e=this.unplaced.openStart;e>=0;e--)for(var n=void 0,o=(e?(n=$(this.unplaced.content,e-1).firstChild).content:this.unplaced.content).firstChild,i=this.depth;i>=0;i--){var s=this.frontier[i],a=s.type,l=s.match,c=void 0,p=void 0;if(1==t&&(o?l.matchType(o.type)||(p=l.fillBefore(r.Fragment.from(o),!1)):a.compatibleContent(n.type)))return{sliceDepth:e,frontierDepth:i,parent:n,inject:p};if(2==t&&o&&(c=l.findWrapping(o.type)))return{sliceDepth:e,frontierDepth:i,parent:n,wrap:c};if(n&&l.matchType(n.type))break}},R.prototype.openMore=function(){var t=this.unplaced,e=t.content,n=t.openStart,o=t.openEnd,i=$(e,n);return!(!i.childCount||i.firstChild.isLeaf)&&(this.unplaced=new r.Slice(e,n+1,Math.max(o,i.size+n>=e.size-o?n+1:0)),!0)},R.prototype.dropNode=function(){var t=this.unplaced,e=t.content,n=t.openStart,o=t.openEnd,i=$(e,n);if(i.childCount<=1&&n>0){var s=e.size-n<=n+i.size;this.unplaced=new r.Slice(I(e,n-1,1),n-1,s?n-1:o)}else this.unplaced=new r.Slice(I(e,n,1),n,o)},R.prototype.placeNodes=function(t){for(var e=t.sliceDepth,n=t.frontierDepth,o=t.parent,i=t.inject,s=t.wrap;this.depth>n;)this.closeFrontierNode();if(s)for(var a=0;a<s.length;a++)this.openFrontierNode(s[a]);var l=this.unplaced,c=o?o.content:l.content,p=l.openStart-e,u=0,d=[],h=this.frontier[n],f=h.match,v=h.type;if(i){for(var m=0;m<i.childCount;m++)d.push(i.child(m));f=f.matchFragment(i)}for(var g=c.size+e-(l.content.size-l.openEnd);u<c.childCount;){var y=c.child(u),b=f.matchType(y.type);if(!b)break;(++u>1||0==p||y.content.size)&&(f=b,d.push(L(y.mark(v.allowedMarks(y.marks)),1==u?p:0,u==c.childCount?g:-1)))}var w=u==c.childCount;w||(g=-1),this.placed=P(this.placed,n,r.Fragment.from(d)),this.frontier[n].match=f,w&&g<0&&o&&o.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var x=0,S=c;x<g;x++){var k=S.lastChild;this.frontier.push({type:k.type,match:k.contentMatchAt(k.childCount)}),S=k.content}this.unplaced=w?0==e?r.Slice.empty:new r.Slice(I(l.content,e-1,1),e-1,g<0?l.openEnd:e-1):new r.Slice(I(l.content,e,u),l.openStart,l.openEnd)},R.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var t,e=this.frontier[this.depth];if(!e.type.isTextblock||!z(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;for(var n=this.$to.depth,r=this.$to.after(n);n>1&&r==this.$to.end(--n);)++r;return r},R.prototype.findCloseLevel=function(t){t:for(var e=Math.min(this.depth,t.depth);e>=0;e--){var n=this.frontier[e],r=n.match,o=n.type,i=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),s=z(t,e,o,r,i);if(s){for(var a=e-1;a>=0;a--){var l=this.frontier[a],c=l.match,p=z(t,a,l.type,c,!0);if(!p||p.childCount)continue t}return{depth:e,fit:s,move:i?t.doc.resolve(t.after(e+1)):t}}}},R.prototype.close=function(t){var e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=P(this.placed,e.depth,e.fit)),t=e.move;for(var n=e.depth+1;n<=t.depth;n++){var r=t.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,t.index(n));this.openFrontierNode(r.type,r.attrs,o)}return t},R.prototype.openFrontierNode=function(t,e,n){var o=this.frontier[this.depth];o.match=o.match.matchType(t),this.placed=P(this.placed,this.depth,r.Fragment.from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})},R.prototype.closeFrontierNode=function(){var t=this.frontier.pop().match.fillBefore(r.Fragment.empty,!0);t.childCount&&(this.placed=P(this.placed,this.frontier.length,t))},Object.defineProperties(R.prototype,D),p.prototype.replaceRange=function(t,e,n){if(!n.size)return this.deleteRange(t,e);var o=this.doc.resolve(t),i=this.doc.resolve(e);if(E(o,i,n))return this.step(new m(t,e,n));var s=j(o,this.doc.resolve(e));0==s[s.length-1]&&s.pop();var a=-(o.depth+1);s.unshift(a);for(var l=o.depth,c=o.pos-1;l>0;l--,c--){var p=o.node(l).type.spec;if(p.defining||p.isolating)break;s.indexOf(l)>-1?a=l:o.before(l)==c&&s.splice(1,0,-l)}for(var u=s.indexOf(a),d=[],h=n.openStart,f=n.content,v=0;;v++){var g=f.firstChild;if(d.push(g),v==n.openStart)break;f=g.content}h>0&&d[h-1].type.spec.defining&&o.node(u).type!=d[h-1].type?h-=1:h>=2&&d[h-1].isTextblock&&d[h-2].type.spec.defining&&o.node(u).type!=d[h-2].type&&(h-=2);for(var y=n.openStart;y>=0;y--){var b=(y+h+1)%(n.openStart+1),w=d[b];if(w)for(var x=0;x<s.length;x++){var S=s[(x+u)%s.length],k=!0;S<0&&(k=!1,S=-S);var C=o.node(S-1),O=o.index(S-1);if(C.canReplaceWith(O,O,w.type,w.marks))return this.replace(o.before(S),k?i.after(S):e,new r.Slice(B(n.content,0,n.openStart,b),b,n.openEnd))}}for(var M=this.steps.length,T=s.length-1;T>=0&&(this.replace(t,e,n),!(this.steps.length>M));T--){var _=s[T];T<0||(t=o.before(_),e=i.after(_))}return this},p.prototype.replaceRangeWith=function(t,e,n){if(!n.isInline&&t==e&&this.doc.resolve(t).parent.content.size){var o=function(t,e,n){var r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}}(this.doc,t,n.type);null!=o&&(t=e=o)}return this.replaceRange(t,e,new r.Slice(r.Fragment.from(n),0,0))},p.prototype.deleteRange=function(t,e){for(var n=this.doc.resolve(t),r=this.doc.resolve(e),o=j(n,r),i=0;i<o.length;i++){var s=o[i],a=i==o.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),r.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),r.indexAfter(s-1))))return this.delete(n.before(s),r.after(s))}for(var l=1;l<=n.depth&&l<=r.depth;l++)if(t-n.start(l)==n.depth-l&&e>n.end(l)&&r.end(l)-e!=r.depth-l)return this.delete(n.before(l),e);return this.delete(t,e)}},283:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return p})),n.d(e,"d",(function(){return l})),n.d(e,"e",(function(){return c}));var r=n(279),o=n(281),i=function(t,e){var n;this.match=t,this.handler="string"==typeof e?(n=e,function(t,e,r,o){var i=n;if(e[1]){var s=e[0].lastIndexOf(e[1]);i+=e[0].slice(s+e[1].length);var a=(r+=s)-o;a>0&&(i=e[0].slice(s-a,s)+i,r=o)}return t.tr.insertText(i,r,o)}):e};function s(t){var e=t.rules,n=new r.Plugin({state:{init:function(){return null},apply:function(t,e){var n=t.getMeta(this);return n||(t.selectionSet||t.docChanged?null:e)}},props:{handleTextInput:function(t,r,o,i){return a(t,r,o,i,e,n)},handleDOMEvents:{compositionend:function(t){setTimeout((function(){var r=t.state.selection.$cursor;r&&a(t,r.pos,r.pos,"",e,n)}))}}},isInputRules:!0});return n}function a(t,e,n,r,o,i){if(t.composing)return!1;var s=t.state,a=s.doc.resolve(e);if(a.parent.type.spec.code)return!1;for(var l=a.parent.textBetween(Math.max(0,a.parentOffset-500),a.parentOffset,null,"")+r,c=0;c<o.length;c++){var p=o[c].match.exec(l),u=p&&o[c].handler(s,p,e-(p[0].length-r.length),n);if(u)return t.dispatch(u.setMeta(i,{transform:u,from:e,to:n,text:r})),!0}return!1}function l(t,e){for(var n=t.plugins,r=0;r<n.length;r++){var o=n[r],i=void 0;if(o.spec.isInputRules&&(i=o.getState(t))){if(e){for(var s=t.tr,a=i.transform,l=a.steps.length-1;l>=0;l--)s.step(a.steps[l].invert(a.docs[l]));var c=s.doc.resolve(i.from).marks();e(s.replaceWith(i.from,i.to,t.schema.text(i.text,c)))}return!0}}return!1}new i(/--$/,""),new i(/\.\.\.$/,""),new i(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,""),new i(/"$/,""),new i(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,""),new i(/'$/,"");function c(t,e,n,r){return new i(t,(function(t,i,s,a){var l=n instanceof Function?n(i):n,c=t.tr.delete(s,a),p=c.doc.resolve(s).blockRange(),u=p&&Object(o.i)(p,e,l);if(!u)return null;c.wrap(p,u);var d=c.doc.resolve(s-1).nodeBefore;return d&&d.type==e&&Object(o.f)(c.doc,s-1)&&(!r||r(i,d))&&c.join(s-1),c}))}function p(t,e,n){return new i(t,(function(t,r,o,i){var s=t.doc.resolve(o),a=n instanceof Function?n(r):n;return s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),e)?t.tr.delete(o,i).setBlockType(o,o,e,a):null}))}},286:function(t,e,n){"use strict";n.d(e,"a",(function(){return Se})),n.d(e,"b",(function(){return Me})),n.d(e,"c",(function(){return Le}));var r=n(279),o=n(280),i=n(281),s={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var a=/Edge\/(\d+)/.exec(navigator.userAgent),l=/MSIE \d/.test(navigator.userAgent),c=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);s.mac=/Mac/.test(navigator.platform);var p=s.ie=!!(l||c||a);s.ie_version=l?document.documentMode||6:c?+c[1]:a?+a[1]:null,s.gecko=!p&&/gecko\/(\d+)/i.test(navigator.userAgent),s.gecko_version=s.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var u=!p&&/Chrome\/(\d+)/.exec(navigator.userAgent);s.chrome=!!u,s.chrome_version=u&&+u[1],s.ios=!p&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),s.android=/Android \d/.test(navigator.userAgent),s.webkit="webkitFontSmoothing"in document.documentElement.style,s.safari=/Apple Computer/.test(navigator.vendor),s.webkit_version=s.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var d=function(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e},h=function(t){var e=t.parentNode;return e&&11==e.nodeType?e.host:e},f=function(t,e,n){var r=document.createRange();return r.setEnd(t,null==n?t.nodeValue.length:n),r.setStart(t,e||0),r},v=function(t,e,n,r){return n&&(g(t,e,n,r,-1)||g(t,e,n,r,1))},m=/^(img|br|input|textarea|hr)$/i;function g(t,e,n,r,o){for(;;){if(t==n&&e==r)return!0;if(e==(o<0?0:y(t))){var i=t.parentNode;if(1!=i.nodeType||b(t)||m.test(t.nodeName)||"false"==t.contentEditable)return!1;e=d(t)+(o<0?0:1),t=i}else{if(1!=t.nodeType)return!1;if("false"==(t=t.childNodes[e+(o<0?-1:0)]).contentEditable)return!1;e=o<0?y(t):0}}}function y(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function b(t){for(var e,n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}var w=function(t){var e=t.isCollapsed;return e&&s.chrome&&t.rangeCount&&!t.getRangeAt(0).collapsed&&(e=!1),e};function x(t,e){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function S(t){return{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function k(t,e){return"number"==typeof t?t:t[e]}function C(t){var e=t.getBoundingClientRect();return{left:e.left,right:e.left+t.clientWidth,top:e.top,bottom:e.top+t.clientHeight}}function O(t,e,n){for(var r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument,s=n||t.dom;s;s=h(s))if(1==s.nodeType){var a=s==i.body||1!=s.nodeType,l=a?S(i):C(s),c=0,p=0;if(e.top<l.top+k(r,"top")?p=-(l.top-e.top+k(o,"top")):e.bottom>l.bottom-k(r,"bottom")&&(p=e.bottom-l.bottom+k(o,"bottom")),e.left<l.left+k(r,"left")?c=-(l.left-e.left+k(o,"left")):e.right>l.right-k(r,"right")&&(c=e.right-l.right+k(o,"right")),c||p)if(a)i.defaultView.scrollBy(c,p);else{var u=s.scrollLeft,d=s.scrollTop;p&&(s.scrollTop+=p),c&&(s.scrollLeft+=c);var f=s.scrollLeft-u,v=s.scrollTop-d;e={left:e.left-f,top:e.top-v,right:e.right-f,bottom:e.bottom-v}}if(a)break}}function M(t){for(var e=[],n=t.ownerDocument;t&&(e.push({dom:t,top:t.scrollTop,left:t.scrollLeft}),t!=n);t=h(t));return e}function T(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=r.dom,i=r.top,s=r.left;o.scrollTop!=i+e&&(o.scrollTop=i+e),o.scrollLeft!=s&&(o.scrollLeft=s)}}var _=null;function A(t,e){for(var n,r,o=2e8,i=0,s=e.top,a=e.top,l=t.firstChild,c=0;l;l=l.nextSibling,c++){var p=void 0;if(1==l.nodeType)p=l.getClientRects();else{if(3!=l.nodeType)continue;p=f(l).getClientRects()}for(var u=0;u<p.length;u++){var d=p[u];if(d.top<=s&&d.bottom>=a){s=Math.max(d.bottom,s),a=Math.min(d.top,a);var h=d.left>e.left?d.left-e.left:d.right<e.left?e.left-d.right:0;if(h<o){n=l,o=h,r=h&&3==n.nodeType?{left:d.right<e.left?d.right:d.left,top:e.top}:e,1==l.nodeType&&h&&(i=c+(e.left>=(d.left+d.right)/2?1:0));continue}}!n&&(e.left>=d.right&&e.top>=d.top||e.left>=d.left&&e.top>=d.bottom)&&(i=c+1)}}return n&&3==n.nodeType?function(t,e){for(var n=t.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);var i=R(r,1);if(i.top!=i.bottom&&N(e,i))return{node:t,offset:o+(e.left>=(i.left+i.right)/2?1:0)}}return{node:t,offset:0}}(n,r):!n||o&&1==n.nodeType?{node:t,offset:i}:A(n,r)}function N(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function E(t,e){var n,r,o,i,a=t.root;if(a.caretPositionFromPoint)try{var l=a.caretPositionFromPoint(e.left,e.top);l&&(o=(n=l).offsetNode,i=n.offset)}catch(t){}if(!o&&a.caretRangeFromPoint){var c=a.caretRangeFromPoint(e.left,e.top);c&&(o=(r=c).startContainer,i=r.startOffset)}var p,u=a.elementFromPoint(e.left,e.top+1);if(!u||!t.dom.contains(1!=u.nodeType?u.parentNode:u)){var d=t.dom.getBoundingClientRect();if(!N(e,d))return null;if(!(u=function t(e,n,r){var o=e.childNodes.length;if(o&&r.top<r.bottom)for(var i=Math.max(0,Math.min(o-1,Math.floor(o*(n.top-r.top)/(r.bottom-r.top))-2)),s=i;;){var a=e.childNodes[s];if(1==a.nodeType)for(var l=a.getClientRects(),c=0;c<l.length;c++){var p=l[c];if(N(n,p))return t(a,n,p)}if((s=(s+1)%o)==i)break}return e}(t.dom,e,d)))return null}if(s.safari&&u.draggable&&(o=i=null),u=function(t,e){var n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}(u,e),o){if(s.gecko&&1==o.nodeType&&(i=Math.min(i,o.childNodes.length))<o.childNodes.length){var h,f=o.childNodes[i];"IMG"==f.nodeName&&(h=f.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&i++}o==t.dom&&i==o.childNodes.length-1&&1==o.lastChild.nodeType&&e.top>o.lastChild.getBoundingClientRect().bottom?p=t.state.doc.content.size:0!=i&&1==o.nodeType&&"BR"==o.childNodes[i-1].nodeName||(p=function(t,e,n,r){for(var o=-1,i=e;i!=t.dom;){var s=t.docView.nearestDesc(i,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>r.left||a.top>r.top)o=s.posBefore;else{if(!(a.right<r.left||a.bottom<r.top))break;o=s.posAfter}}i=s.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n)}(t,o,i,e))}null==p&&(p=function(t,e,n){var r=A(e,n),o=r.node,i=r.offset,s=-1;if(1==o.nodeType&&!o.firstChild){var a=o.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return t.docView.posFromDOM(o,i,s)}(t,u,e));var v=t.docView.nearestDesc(u,!0);return{pos:p,inside:v?v.posAtStart-v.border:-1}}function R(t,e){var n=t.getClientRects();return n.length?n[e<0?0:n.length-1]:t.getBoundingClientRect()}function D(t,e){var n=t.docView.domFromPos(e),r=n.node,o=n.offset;if(3==r.nodeType&&(s.webkit||s.gecko)){var i=R(f(r,o,o),0);if(s.gecko&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){var a=R(f(r,o-1,o-1),-1);if(a.top==i.top){var l=R(f(r,o,o+1),-1);if(l.top!=i.top)return I(l,l.left<a.left)}}return i}if(1==r.nodeType&&!t.state.doc.resolve(e).parent.inlineContent){var c,p=!0;if(o<r.childNodes.length){var u=r.childNodes[o];1==u.nodeType&&(c=u.getBoundingClientRect())}if(!c&&o){var d=r.childNodes[o-1];1==d.nodeType&&(c=d.getBoundingClientRect(),p=!1)}return function(t,e){if(0==t.height)return t;var n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}(c||r.getBoundingClientRect(),p)}for(var h=-1;h<2;h+=2)if(h<0&&o){var v=void 0,m=3==r.nodeType?f(r,o-1,o):3==(v=r.childNodes[o-1]).nodeType?f(v):1==v.nodeType&&"BR"!=v.nodeName?v:null;if(m){var g=R(m,1);if(g.top<g.bottom)return I(g,!1)}}else if(h>0&&o<y(r)){var b=void 0,w=3==r.nodeType?f(r,o,o+1):3==(b=r.childNodes[o]).nodeType?f(b):1==b.nodeType?b:null;if(w){var x=R(w,-1);if(x.top<x.bottom)return I(x,!0)}}return I(R(3==r.nodeType?f(r):r,0),!1)}function I(t,e){if(0==t.width)return t;var n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function P(t,e,n){var r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o&&o.focus()}}var $=/[\u0590-\u08ac]/;var L=null,z=null,B=!1;function j(t,e,n){return L==e&&z==n?B:(L=e,z=n,B="up"==n||"down"==n?function(t,e,n){var r=e.selection,o="up"==n?r.$anchor.min(r.$head):r.$anchor.max(r.$head);return P(t,e,(function(){for(var e=t.docView.domFromPos(o.pos).node;;){var r=t.docView.nearestDesc(e,!0);if(!r)break;if(r.node.isBlock){e=r.dom;break}e=r.dom.parentNode}for(var i=D(t,o.pos),s=e.firstChild;s;s=s.nextSibling){var a=void 0;if(1==s.nodeType)a=s.getClientRects();else{if(3!=s.nodeType)continue;a=f(s,0,s.nodeValue.length).getClientRects()}for(var l=0;l<a.length;l++){var c=a[l];if(c.bottom>c.top&&("up"==n?c.bottom<i.top+1:c.top>i.bottom-1))return!1}}return!0}))}(t,e,n):function(t,e,n){var r=e.selection.$head;if(!r.parent.isTextblock)return!1;var o=r.parentOffset,i=!o,s=o==r.parent.content.size,a=getSelection();return $.test(r.parent.textContent)&&a.modify?P(t,e,(function(){var e=a.getRangeAt(0),o=a.focusNode,i=a.focusOffset,s=a.caretBidiLevel;a.modify("move",n,"character");var l=!(r.depth?t.docView.domAfterPos(r.before()):t.dom).contains(1==a.focusNode.nodeType?a.focusNode:a.focusNode.parentNode)||o==a.focusNode&&i==a.focusOffset;return a.removeAllRanges(),a.addRange(e),null!=s&&(a.caretBidiLevel=s),l})):"left"==n||"backward"==n?i:s}(t,e,n))}var V=function(t,e,n,r){this.parent=t,this.children=e,this.dom=n,n.pmViewDesc=this,this.contentDOM=r,this.dirty=0},F={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0}};V.prototype.matchesWidget=function(){return!1},V.prototype.matchesMark=function(){return!1},V.prototype.matchesNode=function(){return!1},V.prototype.matchesHack=function(){return!1},F.beforePosition.get=function(){return!1},V.prototype.parseRule=function(){return null},V.prototype.stopEvent=function(){return!1},F.size.get=function(){for(var t=0,e=0;e<this.children.length;e++)t+=this.children[e].size;return t},F.border.get=function(){return 0},V.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var t=0;t<this.children.length;t++)this.children[t].destroy()},V.prototype.posBeforeChild=function(t){for(var e=0,n=this.posAtStart;e<this.children.length;e++){var r=this.children[e];if(r==t)return n;n+=r.size}},F.posBefore.get=function(){return this.parent.posBeforeChild(this)},F.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},F.posAfter.get=function(){return this.posBefore+this.size},F.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},V.prototype.localPosFromDOM=function(t,e,n){if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(n<0){var r,o;if(t==this.contentDOM)r=t.childNodes[e-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;r=t.previousSibling}for(;r&&(!(o=r.pmViewDesc)||o.parent!=this);)r=r.previousSibling;return r?this.posBeforeChild(o)+o.size:this.posAtStart}var i,s;if(t==this.contentDOM)i=t.childNodes[e];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;i=t.nextSibling}for(;i&&(!(s=i.pmViewDesc)||s.parent!=this);)i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}var a;if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(var l=t;;l=l.parentNode){if(l==this.dom){a=!1;break}if(l.parentNode.firstChild!=l)break}if(null==a&&e==t.childNodes.length)for(var c=t;;c=c.parentNode){if(c==this.dom){a=!0;break}if(c.parentNode.lastChild!=c)break}}return(null==a?n>0:a)?this.posAtEnd:this.posAtStart},V.prototype.nearestDesc=function(t,e){for(var n=!0,r=t;r;r=r.parentNode){var o=this.getDesc(r);if(o&&(!e||o.node)){if(!n||!o.nodeDOM||(1==o.nodeDOM.nodeType?o.nodeDOM.contains(1==t.nodeType?t:t.parentNode):o.nodeDOM==t))return o;n=!1}}},V.prototype.getDesc=function(t){for(var e=t.pmViewDesc,n=e;n;n=n.parent)if(n==this)return e},V.prototype.posFromDOM=function(t,e,n){for(var r=t;r;r=r.parentNode){var o=this.getDesc(r);if(o)return o.localPosFromDOM(t,e,n)}return-1},V.prototype.descAt=function(t){for(var e=0,n=0;e<this.children.length;e++){var r=this.children[e],o=n+r.size;if(n==t&&o!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(t<o)return r.descAt(t-n-r.border);n=o}},V.prototype.domFromPos=function(t){if(!this.contentDOM)return{node:this.dom,offset:0};for(var e=0,n=0;;n++){if(e==t){for(;n<this.children.length&&(this.children[n].beforePosition||this.children[n].dom.parentNode!=this.contentDOM);)n++;return{node:this.contentDOM,offset:n==this.children.length?this.contentDOM.childNodes.length:d(this.children[n].dom)}}if(n==this.children.length)throw new Error("Invalid position "+t);var r=this.children[n],o=e+r.size;if(t<o)return r.domFromPos(t-e-r.border);e=o}},V.prototype.parseRange=function(t,e,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,o=-1,i=n,s=0;;s++){var a=this.children[s],l=i+a.size;if(-1==r&&t<=l){var c=i+a.border;if(t>=c&&e<=l-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(t,e,c);t=i;for(var p=s;p>0;p--){var u=this.children[p-1];if(u.size&&u.dom.parentNode==this.contentDOM&&!u.emptyChildAt(1)){r=d(u.dom)+1;break}t-=u.size}-1==r&&(r=0)}if(r>-1&&(l>e||s==this.children.length-1)){e=l;for(var h=s+1;h<this.children.length;h++){var f=this.children[h];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=d(f.dom);break}e+=f.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=l}return{node:this.contentDOM,from:t,to:e,fromOffset:r,toOffset:o}},V.prototype.emptyChildAt=function(t){if(this.border||!this.contentDOM||!this.children.length)return!1;var e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)},V.prototype.domAfterPos=function(t){var e=this.domFromPos(t),n=e.node,r=e.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]},V.prototype.setSelection=function(t,e,n,r){for(var o=Math.min(t,e),i=Math.max(t,e),a=0,l=0;a<this.children.length;a++){var c=this.children[a],p=l+c.size;if(o>l&&i<p)return c.setSelection(t-l-c.border,e-l-c.border,n,r);l=p}var u=this.domFromPos(t),d=this.domFromPos(e),h=n.getSelection(),f=!1;if((s.gecko||s.safari)&&t==e){var m=u.node.childNodes[u.offset-1];f=m&&("BR"==m.nodeName||"false"==m.contentEditable)}if(r||f&&s.safari||!v(u.node,u.offset,h.anchorNode,h.anchorOffset)||!v(d.node,d.offset,h.focusNode,h.focusOffset)){var g=!1;if((h.extend||t==e)&&!f){h.collapse(u.node,u.offset);try{t!=e&&h.extend(d.node,d.offset),g=!0}catch(t){if(!(t instanceof DOMException))throw t}}if(!g){if(t>e){var y=u;u=d,d=y}var b=document.createRange();b.setEnd(d.node,d.offset),b.setStart(u.node,u.offset),h.removeAllRanges(),h.addRange(b)}}},V.prototype.ignoreMutation=function(t){return!this.contentDOM&&"selection"!=t.type},F.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},V.prototype.markDirty=function(t,e){for(var n=0,r=0;r<this.children.length;r++){var o=this.children[r],i=n+o.size;if(n==i?t<=i&&e>=n:t<i&&e>n){var s=n+o.border,a=i-o.border;if(t>=s&&e<=a)return this.dirty=t==n||e==i?2:1,void(t!=s||e!=a||!o.contentLost&&o.dom.parentNode==this.contentDOM?o.markDirty(t-s,e-s):o.dirty=3);o.dirty=3}n=i}this.dirty=2},V.prototype.markParentsDirty=function(){for(var t=1,e=this.parent;e;e=e.parent,t++){var n=1==t?2:1;e.dirty<n&&(e.dirty=n)}},Object.defineProperties(V.prototype,F);var H=[],q=function(t){function e(e,n,r,o){var i,s=n.type.toDOM;if("function"==typeof s&&(s=s(r,(function(){return i?i.parent?i.parent.posBeforeChild(i):void 0:o}))),!n.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}t.call(this,e,H,s,null),this.widget=n,i=this}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={beforePosition:{configurable:!0}};return n.beforePosition.get=function(){return this.widget.type.side<0},e.prototype.matchesWidget=function(t){return 0==this.dirty&&t.type.eq(this.widget.type)},e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.stopEvent=function(t){var e=this.widget.spec.stopEvent;return!!e&&e(t)},e.prototype.ignoreMutation=function(t){return"selection"!=t.type||this.widget.spec.ignoreSelection},Object.defineProperties(e.prototype,n),e}(V),W=function(t){function e(e,n,r,o){t.call(this,e,H,n,null),this.textDOM=r,this.text=o}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},e.prototype.localPosFromDOM=function(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e},e.prototype.domFromPos=function(t){return{node:this.textDOM,offset:t}},e.prototype.ignoreMutation=function(t){return"characterData"===t.type&&t.target.nodeValue==t.oldValue},Object.defineProperties(e.prototype,n),e}(V),J=function(t){function e(e,n,r,o){t.call(this,e,[],r,o),this.mark=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.create=function(t,n,r,i){var s=i.nodeViews[n.type.name],a=s&&s(n,i,r);return a&&a.dom||(a=o.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n,r))),new e(t,n,a.dom,a.contentDOM||a.dom)},e.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},e.prototype.matchesMark=function(t){return 3!=this.dirty&&this.mark.eq(t)},e.prototype.markDirty=function(e,n){if(t.prototype.markDirty.call(this,e,n),0!=this.dirty){for(var r=this.parent;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=0}},e.prototype.slice=function(t,n,r){var o=e.create(this.parent,this.mark,!0,r),i=this.children,s=this.size;n<s&&(i=lt(i,n,s,r)),t>0&&(i=lt(i,0,t,r));for(var a=0;a<i.length;a++)i[a].parent=o;return o.children=i,o},e}(V),K=function(t){function e(e,n,r,o,i,s,a,l,c){t.call(this,e,n.isLeaf?H:[],i,s),this.nodeDOM=a,this.node=n,this.outerDeco=r,this.innerDeco=o,s&&this.updateChildren(l,c)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={size:{configurable:!0},border:{configurable:!0}};return e.create=function(t,n,r,i,s,a){var l,c,p=s.nodeViews[n.type.name],u=p&&p(n,s,(function(){return c?c.parent?c.parent.posBeforeChild(c):void 0:a}),r),d=u&&u.dom,h=u&&u.contentDOM;if(n.isText)if(d){if(3!=d.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else d=document.createTextNode(n.text);else d||(d=(l=o.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n))).dom,h=l.contentDOM);h||n.isText||"BR"==d.nodeName||(d.hasAttribute("contenteditable")||(d.contentEditable=!1),n.type.spec.draggable&&(d.draggable=!0));var f=d;return d=rt(d,r,n),u?c=new Y(t,n,r,i,d,h,f,u,s,a+1):n.isText?new G(t,n,r,i,d,f,s):new e(t,n,r,i,d,h,f,s,a+1)},e.prototype.parseRule=function(){var t=this;if(this.node.type.spec.reparseInView)return null;var e={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(e.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?e.contentElement=this.contentDOM:e.getContent=function(){return t.contentDOM?o.Fragment.empty:t.node.content},e},e.prototype.matchesNode=function(t,e,n){return 0==this.dirty&&t.eq(this.node)&&ot(e,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},e.prototype.updateChildren=function(t,e){var n=this,r=this.node.inlineContent,i=e,a=r&&t.composing&&this.localCompositionNode(t,e),l=new st(this,a&&a.node);!function(t,e,n,r){var o=e.locals(t),i=0;if(0==o.length){for(var s=0;s<t.childCount;s++){var a=t.child(s);r(a,o,e.forChild(i,a),s),i+=a.nodeSize}return}for(var l=0,c=[],p=null,u=0;;){if(l<o.length&&o[l].to==i){for(var d=o[l++],h=void 0;l<o.length&&o[l].to==i;)(h||(h=[d])).push(o[l++]);if(h){h.sort(at);for(var f=0;f<h.length;f++)n(h[f],u,!!p)}else n(d,u,!!p)}var v=void 0,m=void 0;if(p)m=-1,v=p,p=null;else{if(!(u<t.childCount))break;m=u,v=t.child(u++)}for(var g=0;g<c.length;g++)c[g].to<=i&&c.splice(g--,1);for(;l<o.length&&o[l].from<=i&&o[l].to>i;)c.push(o[l++]);var y=i+v.nodeSize;if(v.isText){var b=y;l<o.length&&o[l].from<b&&(b=o[l].from);for(var w=0;w<c.length;w++)c[w].to<b&&(b=c[w].to);b<y&&(p=v.cut(b-i),v=v.cut(0,b-i),y=b,m=-1)}var x=c.length?v.isInline&&!v.isLeaf?c.filter((function(t){return!t.inline})):c.slice():H;r(v,x,e.forChild(i,v),m),i=y}}(this.node,this.innerDeco,(function(e,s,a){e.spec.marks?l.syncToMarks(e.spec.marks,r,t):e.type.side>=0&&!a&&l.syncToMarks(s==n.node.childCount?o.Mark.none:n.node.child(s).marks,r,t),l.placeWidget(e,t,i)}),(function(e,n,o,s){l.syncToMarks(e.marks,r,t),l.findNodeMatch(e,n,o,s)||l.updateNextNode(e,n,o,t,s)||l.addNode(e,n,o,t,i),i+=e.nodeSize})),l.syncToMarks(H,r,t),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||2==this.dirty)&&(a&&this.protectLocalComposition(t,a),function t(e,n,r){for(var o=e.firstChild,i=!1,s=0;s<n.length;s++){var a=n[s],l=a.dom;if(l.parentNode==e){for(;l!=o;)o=it(o),i=!0;o=o.nextSibling}else i=!0,e.insertBefore(l,o);if(a instanceof J){var c=o?o.previousSibling:e.lastChild;t(a.contentDOM,a.children,r),o=c?c.nextSibling:e.firstChild}}for(;o;)o=it(o),i=!0;i&&r.trackWrites==e&&(r.trackWrites=null)}(this.contentDOM,this.children,t),s.ios&&function(t){if("UL"==t.nodeName||"OL"==t.nodeName){var e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}(this.dom))},e.prototype.localCompositionNode=function(t,e){var n=t.state.selection,o=n.from,i=n.to;if(!(!(t.state.selection instanceof r.TextSelection)||o<e||i>e+this.node.content.size)){var s=t.root.getSelection(),a=function(t,e){for(;;){if(3==t.nodeType)return t;if(1==t.nodeType&&e>0){if(t.childNodes.length>e&&3==t.childNodes[e].nodeType)return t.childNodes[e];t=t.childNodes[e-1],e=y(t)}else{if(!(1==t.nodeType&&e<t.childNodes.length))return null;t=t.childNodes[e],e=0}}}(s.focusNode,s.focusOffset);if(a&&this.dom.contains(a.parentNode)){var l=a.nodeValue,c=function(t,e,n,r){for(var o=0,i=0;o<t.childCount&&i<=r;){var s=t.child(o++),a=i;if(i+=s.nodeSize,s.isText){for(var l=s.text;o<t.childCount;){var c=t.child(o++);if(i+=c.nodeSize,!c.isText)break;l+=c.text}if(i>=n){var p=l.lastIndexOf(e,r-a);if(p>=0&&p+e.length+a>=n)return a+p}}}return-1}(this.node.content,l,o-e,i-e);return c<0?null:{node:a,pos:c,text:l}}}},e.prototype.protectLocalComposition=function(t,e){var n=e.node,r=e.pos,o=e.text;if(!this.getDesc(n)){for(var i=n;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=null)}var s=new W(this,i,n,o);t.compositionNodes.push(s),this.children=lt(this.children,r,r+o.length,t,s)}},e.prototype.update=function(t,e,n,r){return!(3==this.dirty||!t.sameMarkup(this.node))&&(this.updateInner(t,e,n,r),!0)},e.prototype.updateInner=function(t,e,n,r){this.updateOuterDeco(e),this.node=t,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0},e.prototype.updateOuterDeco=function(t){if(!ot(t,this.outerDeco)){var e=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=et(this.dom,this.nodeDOM,tt(this.outerDeco,this.node,e),tt(t,this.node,e)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=t}},e.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},e.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},Object.defineProperties(e.prototype,n),e}(V);function U(t,e,n,r,o){return rt(r,e,t),new K(null,t,e,n,r,r,r,o,0)}var G=function(t){function e(e,n,r,o,i,s,a){t.call(this,e,n,r,o,i,null,s,a)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseRule=function(){for(var t=this.nodeDOM.parentNode;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}},e.prototype.update=function(t,e,n,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!t.sameMarkup(this.node))&&(this.updateOuterDeco(e),0==this.dirty&&t.text==this.node.text||t.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=t.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=t,this.dirty=0,!0)},e.prototype.inParent=function(){for(var t=this.parent.contentDOM,e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1},e.prototype.domFromPos=function(t){return{node:this.nodeDOM,offset:t}},e.prototype.localPosFromDOM=function(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):t.prototype.localPosFromDOM.call(this,e,n,r)},e.prototype.ignoreMutation=function(t){return"characterData"!=t.type&&"selection"!=t.type},e.prototype.slice=function(t,n,r){var o=this.node.cut(t,n),i=document.createTextNode(o.text);return new e(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)},e}(K),X=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.matchesHack=function(){return 0==this.dirty},e}(V),Y=function(t){function e(e,n,r,o,i,s,a,l,c,p){t.call(this,e,n,r,o,i,s,a,c,p),this.spec=l}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(e,n,r,o){if(3==this.dirty)return!1;if(this.spec.update){var i=this.spec.update(e,n);return i&&this.updateInner(e,n,r,o),i}return!(!this.contentDOM&&!e.isLeaf)&&t.prototype.update.call(this,e,n,r,o)},e.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():t.prototype.selectNode.call(this)},e.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():t.prototype.deselectNode.call(this)},e.prototype.setSelection=function(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r):t.prototype.setSelection.call(this,e,n,r,o)},e.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),t.prototype.destroy.call(this)},e.prototype.stopEvent=function(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)},e.prototype.ignoreMutation=function(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):t.prototype.ignoreMutation.call(this,e)},e}(K);function Z(t){t&&(this.nodeName=t)}Z.prototype=Object.create(null);var Q=[new Z];function tt(t,e,n){if(0==t.length)return Q;for(var r=n?Q[0]:new Z,o=[r],i=0;i<t.length;i++){var s=t[i].type.attrs,a=r;if(s)for(var l in s.nodeName&&o.push(a=new Z(s.nodeName)),s){var c=s[l];null!=c&&(n&&1==o.length&&o.push(a=r=new Z(e.isInline?"span":"div")),"class"==l?a.class=(a.class?a.class+" ":"")+c:"style"==l?a.style=(a.style?a.style+";":"")+c:"nodeName"!=l&&(a[l]=c))}}return o}function et(t,e,n,r){if(n==Q&&r==Q)return e;for(var o=e,i=0;i<r.length;i++){var s=r[i],a=n[i];if(i){var l=void 0;a&&a.nodeName==s.nodeName&&o!=t&&(l=o.parentNode)&&l.tagName.toLowerCase()==s.nodeName||((l=document.createElement(s.nodeName)).pmIsDeco=!0,l.appendChild(o),a=Q[0]),o=l}nt(o,a||Q[0],s)}return o}function nt(t,e,n){for(var r in e)"class"==r||"style"==r||"nodeName"==r||r in n||t.removeAttribute(r);for(var o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=e[o]&&t.setAttribute(o,n[o]);if(e.class!=n.class){for(var i=e.class?e.class.split(" "):H,s=n.class?n.class.split(" "):H,a=0;a<i.length;a++)-1==s.indexOf(i[a])&&t.classList.remove(i[a]);for(var l=0;l<s.length;l++)-1==i.indexOf(s[l])&&t.classList.add(s[l])}if(e.style!=n.style){if(e.style)for(var c,p=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;c=p.exec(e.style);)t.style.removeProperty(c[1]);n.style&&(t.style.cssText+=n.style)}}function rt(t,e,n){return et(t,t,Q,tt(e,n,1!=t.nodeType))}function ot(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function it(t){var e=t.nextSibling;return t.parentNode.removeChild(t),e}var st=function(t,e){this.top=t,this.lock=e,this.index=0,this.stack=[],this.changed=!1;var n=function(t,e){for(var n=[],r=t.childCount,o=e.length-1;r>0&&o>=0;o--){var i=e[o],s=i.node;if(s){if(s!=t.child(r-1))break;n.push(i),--r}}return{nodes:n.reverse(),offset:r}}(t.node.content,t.children);this.preMatched=n.nodes,this.preMatchOffset=n.offset};function at(t,e){return t.type.side-e.type.side}function lt(t,e,n,r,o){for(var i=[],s=0,a=0;s<t.length;s++){var l=t[s],c=a,p=a+=l.size;c>=n||p<=e?i.push(l):(c<e&&i.push(l.slice(0,e-c,r)),o&&(i.push(o),o=null),p>n&&i.push(l.slice(n-c,l.size,r)))}return i}function ct(t,e){var n=t.root.getSelection(),o=t.state.doc;if(!n.focusNode)return null;var i=t.docView.nearestDesc(n.focusNode),s=i&&0==i.size,a=t.docView.posFromDOM(n.focusNode,n.focusOffset);if(a<0)return null;var l,c,p=o.resolve(a);if(w(n)){for(l=p;i&&!i.node;)i=i.parent;if(i&&i.node.isAtom&&r.NodeSelection.isSelectable(i.node)&&i.parent&&(!i.node.isInline||!function(t,e,n){for(var r=0==e,o=e==y(t);r||o;){if(t==n)return!0;var i=d(t);if(!(t=t.parentNode))return!1;r=r&&0==i,o=o&&i==y(t)}}(n.focusNode,n.focusOffset,i.dom))){var u=i.posBefore;c=new r.NodeSelection(a==u?p:o.resolve(u))}}else{var h=t.docView.posFromDOM(n.anchorNode,n.anchorOffset);if(h<0)return null;l=o.resolve(h)}c||(c=gt(t,l,p,"pointer"==e||t.state.selection.head<p.pos&&!s?1:-1));return c}function pt(t,e){var n=t.state.selection;if(vt(t,n),t.editable?t.hasFocus():yt(t)&&document.activeElement&&document.activeElement.contains(t.dom)){if(t.domObserver.disconnectSelection(),t.cursorWrapper)!function(t){var e=t.root.getSelection(),n=document.createRange(),r=t.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setEnd(r.parentNode,d(r)+1):n.setEnd(r,0);n.collapse(!1),e.removeAllRanges(),e.addRange(n),!o&&!t.state.selection.visible&&s.ie&&s.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}(t);else{var o,i,a=n.anchor,l=n.head;!ut||n instanceof r.TextSelection||(n.$from.parent.inlineContent||(o=dt(t,n.from)),n.empty||n.$from.parent.inlineContent||(i=dt(t,n.to))),t.docView.setSelection(a,l,t.root,e),ut&&(o&&ft(o),i&&ft(i)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(t){var e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.hideSelectionGuard);var n=t.root.getSelection(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==o||(e.removeEventListener("selectionchange",t.hideSelectionGuard),t.dom.classList.remove("ProseMirror-hideselection"))})}(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}st.prototype.getPreMatch=function(t){return t>=this.preMatchOffset?this.preMatched[t-this.preMatchOffset]:null},st.prototype.destroyBetween=function(t,e){if(t!=e){for(var n=t;n<e;n++)this.top.children[n].destroy();this.top.children.splice(t,e-t),this.changed=!0}},st.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},st.prototype.syncToMarks=function(t,e,n){for(var r=0,o=this.stack.length>>1,i=Math.min(o,t.length);r<i&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(t[r])&&!1!==t[r].type.spec.spanning;)r++;for(;r<o;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<t.length;){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(t[o])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var l=J.create(this.top,t[o],e,n);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,o++}},st.prototype.findNodeMatch=function(t,e,n,r){var o=-1,i=r<0?void 0:this.getPreMatch(r),s=this.top.children;if(i&&i.matchesNode(t,e,n))o=s.indexOf(i);else for(var a=this.index,l=Math.min(s.length,a+5);a<l;a++){var c=s[a];if(c.matchesNode(t,e,n)&&this.preMatched.indexOf(c)<0){o=a;break}}return!(o<0)&&(this.destroyBetween(this.index,o),this.index++,!0)},st.prototype.updateNextNode=function(t,e,n,r,o){for(var i=this.index;i<this.top.children.length;i++){var s=this.top.children[i];if(s instanceof K){var a=this.preMatched.indexOf(s);if(a>-1&&a+this.preMatchOffset!=o)return!1;var l=s.dom;if(!(this.lock&&(l==this.lock||1==l.nodeType&&l.contains(this.lock.parentNode))&&!(t.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==t.text&&3!=s.dirty&&ot(e,s.outerDeco)))&&s.update(t,e,n,r))return this.destroyBetween(this.index,i),s.dom!=l&&(this.changed=!0),this.index++,!0;break}}return!1},st.prototype.addNode=function(t,e,n,r,o){this.top.children.splice(this.index++,0,K.create(this.top,t,e,n,r,o)),this.changed=!0},st.prototype.placeWidget=function(t,e,n){var r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(t)||t!=r.widget&&r.widget.type.toDOM.parentNode){var o=new q(this.top,t,e,n);this.top.children.splice(this.index++,0,o),this.changed=!0}else this.index++},st.prototype.addTextblockHacks=function(){for(var t=this.top.children[this.index-1];t instanceof J;)t=t.children[t.children.length-1];if(!t||!(t instanceof G)||/\n$/.test(t.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var e=document.createElement("br");this.top.children.splice(this.index++,0,new X(this.top,H,e,null)),this.changed=!0}};var ut=s.safari||s.chrome&&s.chrome_version<63;function dt(t,e){var n=t.docView.domFromPos(e),r=n.node,o=n.offset,i=o<r.childNodes.length?r.childNodes[o]:null,a=o?r.childNodes[o-1]:null;if(s.safari&&i&&"false"==i.contentEditable)return ht(i);if(!(i&&"false"!=i.contentEditable||a&&"false"!=a.contentEditable)){if(i)return ht(i);if(a)return ht(a)}}function ht(t){return t.contentEditable="true",s.safari&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function ft(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function vt(t,e){if(e instanceof r.NodeSelection){var n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(mt(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else mt(t)}function mt(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=null)}function gt(t,e,n,o){return t.someProp("createSelectionBetween",(function(r){return r(t,e,n)}))||r.TextSelection.between(e,n,o)}function yt(t){var e=t.root.getSelection();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(t){return!1}}function bt(t,e){var n=t.selection,o=n.$anchor,i=n.$head,s=e>0?o.max(i):o.min(i),a=s.parent.inlineContent?s.depth?t.doc.resolve(e>0?s.after():s.before()):null:s;return a&&r.Selection.findFrom(a,e)}function wt(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function xt(t,e,n){var o=t.state.selection;if(!(o instanceof r.TextSelection)){if(o instanceof r.NodeSelection&&o.node.isInline)return wt(t,new r.TextSelection(e>0?o.$to:o.$from));var i=bt(t.state,e);return!!i&&wt(t,i)}if(!o.empty||n.indexOf("s")>-1)return!1;if(t.endOfTextblock(e>0?"right":"left")){var a=bt(t.state,e);return!!(a&&a instanceof r.NodeSelection)&&wt(t,a)}if(!(s.mac&&n.indexOf("m")>-1)){var l,c=o.$head,p=c.textOffset?null:e<0?c.nodeBefore:c.nodeAfter;if(!p||p.isText)return!1;var u=e<0?c.pos-p.nodeSize:c.pos;return!!(p.isAtom||(l=t.docView.descAt(u))&&!l.contentDOM)&&(r.NodeSelection.isSelectable(p)?wt(t,new r.NodeSelection(e<0?t.state.doc.resolve(c.pos-p.nodeSize):c)):!!s.webkit&&wt(t,new r.TextSelection(t.state.doc.resolve(e<0?u:u+p.nodeSize))))}}function St(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function kt(t){var e=t.pmViewDesc;return e&&0==e.size&&(t.nextSibling||"BR"!=t.nodeName)}function Ct(t){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n){var o,i,a=!1;for(s.gecko&&1==n.nodeType&&r<St(n)&&kt(n.childNodes[r])&&(a=!0);;)if(r>0){if(1!=n.nodeType)break;var l=n.childNodes[r-1];if(kt(l))o=n,i=--r;else{if(3!=l.nodeType)break;r=(n=l).nodeValue.length}}else{if(Mt(n))break;for(var c=n.previousSibling;c&&kt(c);)o=n.parentNode,i=d(c),c=c.previousSibling;if(c)r=St(n=c);else{if((n=n.parentNode)==t.dom)break;r=0}}a?Tt(t,e,n,r):o&&Tt(t,e,o,i)}}function Ot(t){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n){for(var o,i,s=St(n);;)if(r<s){if(1!=n.nodeType)break;if(!kt(n.childNodes[r]))break;o=n,i=++r}else{if(Mt(n))break;for(var a=n.nextSibling;a&&kt(a);)o=a.parentNode,i=d(a)+1,a=a.nextSibling;if(a)r=0,s=St(n=a);else{if((n=n.parentNode)==t.dom)break;r=s=0}}o&&Tt(t,e,o,i)}}function Mt(t){var e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function Tt(t,e,n,r){if(w(e)){var o=document.createRange();o.setEnd(n,r),o.setStart(n,r),e.removeAllRanges(),e.addRange(o)}else e.extend&&e.extend(n,r);t.domObserver.setCurSelection();var i=t.state;setTimeout((function(){t.state==i&&pt(t)}),50)}function _t(t,e,n){var o=t.state.selection;if(o instanceof r.TextSelection&&!o.empty||n.indexOf("s")>-1)return!1;if(s.mac&&n.indexOf("m")>-1)return!1;var i=o.$from,a=o.$to;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){var l=bt(t.state,e);if(l&&l instanceof r.NodeSelection)return wt(t,l)}if(!i.parent.inlineContent){var c=r.Selection.findFrom(e<0?i:a,e);return!c||wt(t,c)}return!1}function At(t,e){if(!(t.state.selection instanceof r.TextSelection))return!0;var n=t.state.selection,o=n.$head,i=n.$anchor,s=n.empty;if(!o.sameParent(i))return!0;if(!s)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;var a=!o.textOffset&&(e<0?o.nodeBefore:o.nodeAfter);if(a&&!a.isText){var l=t.state.tr;return e<0?l.delete(o.pos-a.nodeSize,o.pos):l.delete(o.pos,o.pos+a.nodeSize),t.dispatch(l),!0}return!1}function Nt(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function Et(t,e){var n=e.keyCode,r=function(t){var e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}(e);return 8==n||s.mac&&72==n&&"c"==r?At(t,-1)||Ct(t):46==n||s.mac&&68==n&&"c"==r?At(t,1)||Ot(t):13==n||27==n||(37==n?xt(t,-1,r)||Ct(t):39==n?xt(t,1,r)||Ot(t):38==n?_t(t,-1,r)||Ct(t):40==n?function(t){if(s.safari&&!(t.state.selection.$head.parentOffset>0)){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var o=n.firstChild;Nt(t,o,!0),setTimeout((function(){return Nt(t,o,!1)}),20)}}}(t)||_t(t,1,r)||Ot(t):r==(s.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}function Rt(t){var e=t.pmViewDesc;if(e)return e.parseRule();if("BR"==t.nodeName&&t.parentNode){if(s.safari&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(t.parentNode.lastChild==t||s.safari&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if("IMG"==t.nodeName&&t.getAttribute("mark-placeholder"))return{ignore:!0}}function Dt(t,e,n,i,a){if(e<0){var l=t.lastSelectionTime>Date.now()-50?t.lastSelectionOrigin:null,c=ct(t,l);if(c&&!t.state.selection.eq(c)){var p=t.state.tr.setSelection(c);"pointer"==l?p.setMeta("pointer",!0):"key"==l&&p.scrollIntoView(),t.dispatch(p)}}else{var u=t.state.doc.resolve(e),d=u.sharedDepth(n);e=u.before(d+1),n=t.state.doc.resolve(n).after(d+1);var h,f,v=t.state.selection,m=function(t,e,n){var r=t.docView.parseRange(e,n),i=r.node,a=r.fromOffset,l=r.toOffset,c=r.from,p=r.to,u=t.root.getSelection(),d=null,h=u.anchorNode;if(h&&t.dom.contains(1==h.nodeType?h:h.parentNode)&&(d=[{node:h,offset:u.anchorOffset}],w(u)||d.push({node:u.focusNode,offset:u.focusOffset})),s.chrome&&8===t.lastKeyCode)for(var f=l;f>a;f--){var v=i.childNodes[f-1],m=v.pmViewDesc;if("BR"==v.nodeType&&!m){l=f;break}if(!m||m.size)break}var g=t.state.doc,y=t.someProp("domParser")||o.DOMParser.fromSchema(t.state.schema),b=g.resolve(c),x=null,S=y.parse(i,{topNode:b.parent,topMatch:b.parent.contentMatchAt(b.index()),topOpen:!0,from:a,to:l,preserveWhitespace:!b.parent.type.spec.code||"full",editableContent:!0,findPositions:d,ruleFromNode:Rt,context:b});if(d&&null!=d[0].pos){var k=d[0].pos,C=d[1]&&d[1].pos;null==C&&(C=k),x={anchor:k+c,head:C+c}}return{doc:S,sel:x,from:c,to:p}}(t,e,n),g=t.state.doc,y=g.slice(m.from,m.to);8===t.lastKeyCode&&Date.now()-100<t.lastKeyCodeTime?(h=t.state.selection.to,f="end"):(h=t.state.selection.from,f="start"),t.lastKeyCode=null;var b=function(t,e,n,r,o){var i=t.findDiffStart(e,n);if(null==i)return null;var s=t.findDiffEnd(e,n+t.size,n+e.size),a=s.a,l=s.b;if("end"==o){var c=Math.max(0,i-Math.min(a,l));r-=a+c-i}if(a<i&&t.size<e.size){l=(i-=r<=i&&r>=a?i-r:0)+(l-a),a=i}else if(l<i){a=(i-=r<=i&&r>=l?i-r:0)+(a-l),l=i}return{start:i,endA:a,endB:l}}(y.content,m.doc.content,m.from,h,f);if(!b){if(!(i&&v instanceof r.TextSelection&&!v.empty&&v.$head.sameParent(v.$anchor))||t.composing||m.sel&&m.sel.anchor!=m.sel.head){if(m.sel){var S=It(t,t.state.doc,m.sel);S&&!S.eq(t.state.selection)&&t.dispatch(t.state.tr.setSelection(S))}return}b={start:v.from,endA:v.to,endB:v.to}}t.domChangeCount++,t.state.selection.from<t.state.selection.to&&b.start==b.endB&&t.state.selection instanceof r.TextSelection&&(b.start>t.state.selection.from&&b.start<=t.state.selection.from+2?b.start=t.state.selection.from:b.endA<t.state.selection.to&&b.endA>=t.state.selection.to-2&&(b.endB+=t.state.selection.to-b.endA,b.endA=t.state.selection.to)),s.ie&&s.ie_version<=11&&b.endB==b.start+1&&b.endA==b.start&&b.start>m.from&&" "==m.doc.textBetween(b.start-m.from-1,b.start-m.from+1)&&(b.start--,b.endA--,b.endB--);var k,C=m.doc.resolveNoCache(b.start-m.from),O=m.doc.resolveNoCache(b.endB-m.from),M=C.sameParent(O)&&C.parent.inlineContent;if((s.ios&&t.lastIOSEnter>Date.now()-225&&(!M||a.some((function(t){return"DIV"==t.nodeName||"P"==t.nodeName})))||!M&&C.pos<m.doc.content.size&&(k=r.Selection.findFrom(m.doc.resolve(C.pos+1),1,!0))&&k.head==O.pos)&&t.someProp("handleKeyDown",(function(e){return e(t,x(13,"Enter"))})))t.lastIOSEnter=0;else if(t.state.selection.anchor>b.start&&function(t,e,n,r,o){if(!r.parent.isTextblock||n-e<=o.pos-r.pos||Pt(r,!0,!1)<o.pos)return!1;var i=t.resolve(e);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var s=t.resolve(Pt(i,!0,!0));if(!s.parent.isTextblock||s.pos>n||Pt(s,!0,!1)<n)return!1;return r.parent.content.cut(r.parentOffset).eq(s.parent.content)}(g,b.start,b.endA,C,O)&&t.someProp("handleKeyDown",(function(e){return e(t,x(8,"Backspace"))})))s.android&&s.chrome&&t.domObserver.suppressSelectionUpdates();else{s.android&&!M&&C.start()!=O.start()&&0==O.parentOffset&&C.depth==O.depth&&m.sel&&m.sel.anchor==m.sel.head&&m.sel.head==b.endA&&(b.endB-=2,O=m.doc.resolveNoCache(b.endB-m.from),setTimeout((function(){t.someProp("handleKeyDown",(function(e){return e(t,x(13,"Enter"))}))}),20));var T,_,A,N,E=b.start,R=b.endA;if(M)if(C.pos==O.pos)s.ie&&s.ie_version<=11&&0==C.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout((function(){return pt(t)}),20)),T=t.state.tr.delete(E,R),_=g.resolve(b.start).marksAcross(g.resolve(b.endA));else if(b.endA==b.endB&&(N=g.resolve(b.start))&&(A=function(t,e){for(var n,r,i,s=t.firstChild.marks,a=e.firstChild.marks,l=s,c=a,p=0;p<a.length;p++)l=a[p].removeFromSet(l);for(var u=0;u<s.length;u++)c=s[u].removeFromSet(c);if(1==l.length&&0==c.length)r=l[0],n="add",i=function(t){return t.mark(r.addToSet(t.marks))};else{if(0!=l.length||1!=c.length)return null;r=c[0],n="remove",i=function(t){return t.mark(r.removeFromSet(t.marks))}}for(var d=[],h=0;h<e.childCount;h++)d.push(i(e.child(h)));if(o.Fragment.from(d).eq(t))return{mark:r,type:n}}(C.parent.content.cut(C.parentOffset,O.parentOffset),N.parent.content.cut(N.parentOffset,b.endA-N.start()))))T=t.state.tr,"add"==A.type?T.addMark(E,R,A.mark):T.removeMark(E,R,A.mark);else if(C.parent.child(C.index()).isText&&C.index()==O.index()-(O.textOffset?0:1)){var D=C.parent.textBetween(C.parentOffset,O.parentOffset);if(t.someProp("handleTextInput",(function(e){return e(t,E,R,D)})))return;T=t.state.tr.insertText(D,E,R)}if(T||(T=t.state.tr.replace(E,R,m.doc.slice(b.start-m.from,b.endB-m.from))),m.sel){var I=It(t,T.doc,m.sel);I&&!(s.chrome&&s.android&&t.composing&&I.empty&&(I.head==E||I.head==T.mapping.map(R)-1)||s.ie&&I.empty&&I.head==E)&&T.setSelection(I)}_&&T.ensureMarks(_),t.dispatch(T.scrollIntoView())}}}function It(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:gt(t,e.resolve(n.anchor),e.resolve(n.head))}function Pt(t,e,n){for(var r=t.depth,o=e?t.end():t.pos;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n)for(var i=t.node(r).maybeChild(t.indexAfter(r));i&&!i.isLeaf;)i=i.firstChild,o++;return o}function $t(t,e){for(var n=[],r=e.content,i=e.openStart,s=e.openEnd;i>1&&s>1&&1==r.childCount&&1==r.firstChild.childCount;){i--,s--;var a=r.firstChild;n.push(a.type.name,a.type.hasRequiredAttrs()?a.attrs:null),r=a.content}var l=t.someProp("clipboardSerializer")||o.DOMSerializer.fromSchema(t.state.schema),c=Ft(),p=c.createElement("div");p.appendChild(l.serializeFragment(r,{document:c}));for(var u,d=p.firstChild;d&&1==d.nodeType&&(u=jt[d.nodeName.toLowerCase()]);){for(var h=u.length-1;h>=0;h--){for(var f=c.createElement(u[h]);p.firstChild;)f.appendChild(p.firstChild);p.appendChild(f)}d=p.firstChild}return d&&1==d.nodeType&&d.setAttribute("data-pm-slice",i+" "+s+" "+JSON.stringify(n)),{dom:p,text:t.someProp("clipboardTextSerializer",(function(t){return t(e)}))||e.content.textBetween(0,e.content.size,"\n\n")}}function Lt(t,e,n,r,i){var s,a,l=i.parent.type.spec.code;if(!n&&!e)return null;var c=e&&(r||l||!n);if(c){if(t.someProp("transformPastedText",(function(t){e=t(e,l||r)})),l)return new o.Slice(o.Fragment.from(t.state.schema.text(e)),0,0);var p=t.someProp("clipboardTextParser",(function(t){return t(e,i,r)}));p?a=p:(s=document.createElement("div"),e.trim().split(/(?:\r\n?|\n)+/).forEach((function(t){s.appendChild(document.createElement("p")).textContent=t})))}else t.someProp("transformPastedHTML",(function(t){n=t(n)})),s=function(t){var e=/(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));var n,r=Ft().createElement("div"),o=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(t),i=0;(n=o&&jt[o[1].toLowerCase()])&&(t=n.map((function(t){return"<"+t+">"})).join("")+t+n.map((function(t){return"</"+t+">"})).reverse().join(""),i=n.length);r.innerHTML=t;for(var s=0;s<i;s++)r=r.firstChild;return r}(n);var u=s&&s.querySelector("[data-pm-slice]"),d=u&&/^(\d+) (\d+) (.*)/.exec(u.getAttribute("data-pm-slice"));if(!a){var h=t.someProp("clipboardParser")||t.someProp("domParser")||o.DOMParser.fromSchema(t.state.schema);a=h.parseSlice(s,{preserveWhitespace:!(!c&&!d),context:i})}return a=d?function(t,e){if(!t.size)return t;var n,r=t.content.firstChild.type.schema;try{n=JSON.parse(e)}catch(e){return t}for(var i=t.content,s=t.openStart,a=t.openEnd,l=n.length-2;l>=0;l-=2){var c=r.nodes[n[l]];if(!c||c.hasRequiredAttrs())break;i=o.Fragment.from(c.create(n[l+1],i)),s++,a++}return new o.Slice(i,s,a)}(function(t,e,n){e<t.openStart&&(t=new o.Slice(Bt(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd));n<t.openEnd&&(t=new o.Slice(Bt(t.content,1,n,t.openEnd,0,0),t.openStart,n));return t}(a,+d[1],+d[2]),d[3]):o.Slice.maxOpen(function(t,e){if(t.childCount<2)return t;for(var n=function(n){var r=e.node(n).contentMatchAt(e.index(n)),i=void 0,s=[];if(t.forEach((function(t){if(s){var e,n=r.findWrapping(t.type);if(!n)return s=null;if(e=s.length&&i.length&&function t(e,n,r,i,s){if(s<e.length&&s<n.length&&e[s]==n[s]){var a=t(e,n,r,i.lastChild,s+1);if(a)return i.copy(i.content.replaceChild(i.childCount-1,a));if(i.contentMatchAt(i.childCount).matchType(s==e.length-1?r.type:e[s+1]))return i.copy(i.content.append(o.Fragment.from(zt(r,e,s+1))))}}(n,i,t,s[s.length-1],0))s[s.length-1]=e;else{s.length&&(s[s.length-1]=function t(e,n){if(0==n)return e;var r=e.content.replaceChild(e.childCount-1,t(e.lastChild,n-1)),i=e.contentMatchAt(e.childCount).fillBefore(o.Fragment.empty,!0);return e.copy(r.append(i))}(s[s.length-1],i.length));var a=zt(t,n);s.push(a),r=r.matchType(a.type,a.attrs),i=n}}})),s)return{v:o.Fragment.from(s)}},r=e.depth;r>=0;r--){var i=n(r);if(i)return i.v}return t}(a.content,i),!1),t.someProp("transformPasted",(function(t){a=t(a)})),a}function zt(t,e,n){void 0===n&&(n=0);for(var r=e.length-1;r>=n;r--)t=e[r].create(null,o.Fragment.from(t));return t}function Bt(t,e,n,r,i,s){var a=e<0?t.firstChild:t.lastChild,l=a.content;return i<r-1&&(l=Bt(l,e,n,r,i+1,s)),i>=n&&(l=e<0?a.contentMatchAt(0).fillBefore(l,t.childCount>1||s<=i).append(l):l.append(a.contentMatchAt(a.childCount).fillBefore(o.Fragment.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,a.copy(l))}var jt={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Vt=null;function Ft(){return Vt||(Vt=document.implementation.createHTMLDocument("title"))}var Ht={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},qt=s.ie&&s.ie_version<=11,Wt=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};Wt.prototype.set=function(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset},Wt.prototype.eq=function(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset};var Jt=function(t,e){var n=this;this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(t){for(var e=0;e<t.length;e++)n.queue.push(t[e]);s.ie&&s.ie_version<=11&&t.some((function(t){return"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length}))?n.flushSoon():n.flush()})),this.currentSelection=new Wt,qt&&(this.onCharData=function(t){n.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};Jt.prototype.flushSoon=function(){var t=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){t.flushingSoon=-1,t.flush()}),20))},Jt.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},Jt.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,Ht),qt&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},Jt.prototype.stop=function(){var t=this;if(this.observer){var e=this.observer.takeRecords();if(e.length){for(var n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout((function(){return t.flush()}),20)}this.observer.disconnect()}qt&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},Jt.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},Jt.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},Jt.prototype.suppressSelectionUpdates=function(){var t=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return t.suppressingSelectionUpdates=!1}),50)},Jt.prototype.onSelectionChange=function(){if((!(t=this.view).editable||t.root.activeElement==t.dom)&&yt(t)){var t;if(this.suppressingSelectionUpdates)return pt(this.view);if(s.ie&&s.ie_version<=11&&!this.view.state.selection.empty){var e=this.view.root.getSelection();if(e.focusNode&&v(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}},Jt.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},Jt.prototype.ignoreSelectionChange=function(t){if(0==t.rangeCount)return!0;var e=t.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(e);return n&&n.ignoreMutation({type:"selection",target:3==e.nodeType?e.parentNode:e})?(this.setCurSelection(),!0):void 0},Jt.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var t=this.observer?this.observer.takeRecords():[];this.queue.length&&(t=this.queue.concat(t),this.queue.length=0);var e=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(e)&&yt(this.view)&&!this.ignoreSelectionChange(e),r=-1,o=-1,i=!1,a=[];if(this.view.editable)for(var l=0;l<t.length;l++){var c=this.registerMutation(t[l],a);c&&(r=r<0?c.from:Math.min(c.from,r),o=o<0?c.to:Math.max(c.to,o),c.typeOver&&(i=!0))}if(s.gecko&&a.length>1){var p=a.filter((function(t){return"BR"==t.nodeName}));if(2==p.length){var u=p[0],d=p[1];u.parentNode&&u.parentNode.parentNode==d.parentNode?d.remove():u.remove()}}(r>-1||n)&&(r>-1&&(this.view.docView.markDirty(r,o),function(t){if(Kt)return;Kt=!0,"normal"==getComputedStyle(t.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package.")}(this.view)),this.handleDOMChange(r,o,i,a),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(e)||pt(this.view))}},Jt.prototype.registerMutation=function(t,e){if(e.indexOf(t.target)>-1)return null;var n=this.view.docView.nearestDesc(t.target);if("attributes"==t.type&&(n==this.view.docView||"contenteditable"==t.attributeName||"style"==t.attributeName&&!t.oldValue&&!t.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(t))return null;if("childList"==t.type){var r=t.previousSibling,o=t.nextSibling;if(s.ie&&s.ie_version<=11&&t.addedNodes.length)for(var i=0;i<t.addedNodes.length;i++){var a=t.addedNodes[i],l=a.previousSibling,c=a.nextSibling;(!l||Array.prototype.indexOf.call(t.addedNodes,l)<0)&&(r=l),(!c||Array.prototype.indexOf.call(t.addedNodes,c)<0)&&(o=c)}for(var p=r&&r.parentNode==t.target?d(r)+1:0,u=n.localPosFromDOM(t.target,p,-1),h=o&&o.parentNode==t.target?d(o):t.target.childNodes.length,f=0;f<t.addedNodes.length;f++)e.push(t.addedNodes[f]);return{from:u,to:n.localPosFromDOM(t.target,h,1)}}return"attributes"==t.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}};var Kt=!1;var Ut={},Gt={};function Xt(t,e){t.lastSelectionOrigin=e,t.lastSelectionTime=Date.now()}function Yt(t){t.someProp("handleDOMEvents",(function(e){for(var n in e)t.eventHandlers[n]||t.dom.addEventListener(n,t.eventHandlers[n]=function(e){return Zt(t,e)})}))}function Zt(t,e){return t.someProp("handleDOMEvents",(function(n){var r=n[e.type];return!!r&&(r(t,e)||e.defaultPrevented)}))}function Qt(t){return{left:t.clientX,top:t.clientY}}function te(t,e,n,r,o){if(-1==r)return!1;for(var i=t.state.doc.resolve(r),s=function(r){if(t.someProp(e,(function(e){return r>i.depth?e(t,n,i.nodeAfter,i.before(r),o,!0):e(t,n,i.node(r),i.before(r),o,!1)})))return{v:!0}},a=i.depth+1;a>0;a--){var l=s(a);if(l)return l.v}return!1}function ee(t,e,n){t.focused||t.focus();var r=t.state.tr.setSelection(e);"pointer"==n&&r.setMeta("pointer",!0),t.dispatch(r)}function ne(t,e,n,o,i){return te(t,"handleClickOn",e,n,o)||t.someProp("handleClick",(function(n){return n(t,e,o)}))||(i?function(t,e){if(-1==e)return!1;var n,o,i=t.state.selection;i instanceof r.NodeSelection&&(n=i.node);for(var s=t.state.doc.resolve(e),a=s.depth+1;a>0;a--){var l=a>s.depth?s.nodeAfter:s.node(a);if(r.NodeSelection.isSelectable(l)){o=n&&i.$from.depth>0&&a>=i.$from.depth&&s.before(i.$from.depth+1)==i.$from.pos?s.before(i.$from.depth):s.before(a);break}}return null!=o&&(ee(t,r.NodeSelection.create(t.state.doc,o),"pointer"),!0)}(t,n):function(t,e){if(-1==e)return!1;var n=t.state.doc.resolve(e),o=n.nodeAfter;return!!(o&&o.isAtom&&r.NodeSelection.isSelectable(o))&&(ee(t,new r.NodeSelection(n),"pointer"),!0)}(t,n))}function re(t,e,n,r){return te(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",(function(n){return n(t,e,r)}))}function oe(t,e,n,o){return te(t,"handleTripleClickOn",e,n,o)||t.someProp("handleTripleClick",(function(n){return n(t,e,o)}))||function(t,e){var n=t.state.doc;if(-1==e)return!!n.inlineContent&&(ee(t,r.TextSelection.create(n,0,n.content.size),"pointer"),!0);for(var o=n.resolve(e),i=o.depth+1;i>0;i--){var s=i>o.depth?o.nodeAfter:o.node(i),a=o.before(i);if(s.inlineContent)ee(t,r.TextSelection.create(n,a+1,a+1+s.content.size),"pointer");else{if(!r.NodeSelection.isSelectable(s))continue;ee(t,r.NodeSelection.create(n,a),"pointer")}return!0}}(t,n)}function ie(t){return de(t)}Gt.keydown=function(t,e){if(t.shiftKey=16==e.keyCode||e.shiftKey,!le(t,e))if(t.domObserver.forceFlush(),t.lastKeyCode=e.keyCode,t.lastKeyCodeTime=Date.now(),!s.ios||13!=e.keyCode||e.ctrlKey||e.altKey||e.metaKey)t.someProp("handleKeyDown",(function(n){return n(t,e)}))||Et(t,e)?e.preventDefault():Xt(t,"key");else{var n=Date.now();t.lastIOSEnter=n,t.lastIOSEnterFallbackTimeout=setTimeout((function(){t.lastIOSEnter==n&&(t.someProp("handleKeyDown",(function(e){return e(t,x(13,"Enter"))})),t.lastIOSEnter=0)}),200)}},Gt.keyup=function(t,e){16==e.keyCode&&(t.shiftKey=!1)},Gt.keypress=function(t,e){if(!(le(t,e)||!e.charCode||e.ctrlKey&&!e.altKey||s.mac&&e.metaKey))if(t.someProp("handleKeyPress",(function(n){return n(t,e)})))e.preventDefault();else{var n=t.state.selection;if(!(n instanceof r.TextSelection&&n.$from.sameParent(n.$to))){var o=String.fromCharCode(e.charCode);t.someProp("handleTextInput",(function(e){return e(t,n.$from.pos,n.$to.pos,o)}))||t.dispatch(t.state.tr.insertText(o).scrollIntoView()),e.preventDefault()}}};var se=s.mac?"metaKey":"ctrlKey";Ut.mousedown=function(t,e){t.shiftKey=e.shiftKey;var n=ie(t),r=Date.now(),o="singleClick";r-t.lastClick.time<500&&function(t,e){var n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}(e,t.lastClick)&&!e[se]&&("singleClick"==t.lastClick.type?o="doubleClick":"doubleClick"==t.lastClick.type&&(o="tripleClick")),t.lastClick={time:r,x:e.clientX,y:e.clientY,type:o};var i=t.posAtCoords(Qt(e));i&&("singleClick"==o?t.mouseDown=new ae(t,i,e,n):("doubleClick"==o?re:oe)(t,i.pos,i.inside,e)?e.preventDefault():Xt(t,"pointer"))};var ae=function(t,e,n,o){var i,a,l=this;if(this.view=t,this.startDoc=t.state.doc,this.pos=e,this.event=n,this.flushed=o,this.selectNode=n[se],this.allowDefault=n.shiftKey,e.inside>-1)i=t.state.doc.nodeAt(e.inside),a=e.inside;else{var c=t.state.doc.resolve(e.pos);i=c.parent,a=c.depth?c.before():0}this.mightDrag=null;var p=o?null:n.target,u=p?t.docView.nearestDesc(p,!0):null;this.target=u?u.dom:null,(i.type.spec.draggable&&!1!==i.type.spec.selectable||t.state.selection instanceof r.NodeSelection&&a==t.state.selection.from)&&(this.mightDrag={node:i,pos:a,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&s.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){return l.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),Xt(t,"pointer")};function le(t,e){return!!t.composing||!!(s.safari&&Math.abs(e.timeStamp-t.compositionEndedAt)<500)&&(t.compositionEndedAt=-2e8,!0)}ae.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},ae.prototype.up=function(t){if(this.done(),this.view.dom.contains(3==t.target.nodeType?t.target.parentNode:t.target)){var e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(Qt(t))),this.allowDefault||!e?Xt(this.view,"pointer"):ne(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():this.flushed||s.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||s.chrome&&!(this.view.state.selection instanceof r.TextSelection)&&(e.pos==this.view.state.selection.from||e.pos==this.view.state.selection.to)?(ee(this.view,r.Selection.near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault()):Xt(this.view,"pointer")}},ae.prototype.move=function(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0),Xt(this.view,"pointer")},Ut.touchdown=function(t){ie(t),Xt(t,"pointer")},Ut.contextmenu=function(t){return ie(t)};var ce=s.android?5e3:-1;function pe(t,e){clearTimeout(t.composingTimeout),e>-1&&(t.composingTimeout=setTimeout((function(){return de(t)}),e))}function ue(t){for(t.composing=!1;t.compositionNodes.length>0;)t.compositionNodes.pop().markParentsDirty()}function de(t,e){if(t.domObserver.forceFlush(),ue(t),e||t.docView.dirty){var n=ct(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}Gt.compositionstart=Gt.compositionupdate=function(t){if(!t.composing){t.domObserver.flush();var e=t.state,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(t){return!1===t.type.spec.inclusive}))))t.markCursor=t.state.storedMarks||n.marks(),de(t,!0),t.markCursor=null;else if(de(t),s.gecko&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=t.root.getSelection(),o=r.focusNode,i=r.focusOffset;o&&1==o.nodeType&&0!=i;){var a=i<0?o.lastChild:o.childNodes[i-1];if(!a)break;if(3==a.nodeType){r.collapse(a,a.nodeValue.length);break}o=a,i=-1}t.composing=!0}pe(t,ce)},Gt.compositionend=function(t,e){t.composing&&(t.composing=!1,t.compositionEndedAt=e.timeStamp,pe(t,20))};var he=s.ie&&s.ie_version<15||s.ios&&s.webkit_version<604;function fe(t,e,n,r){var i=Lt(t,e,n,t.shiftKey,t.state.selection.$from);if(!t.someProp("handlePaste",(function(e){return e(t,r,i||o.Slice.empty)}))&&i){var s=function(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}(i),a=s?t.state.tr.replaceSelectionWith(s,t.shiftKey):t.state.tr.replaceSelection(i);t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste"))}}Ut.copy=Gt.cut=function(t,e){var n=t.state.selection,r="cut"==e.type;if(!n.empty){var o=he?null:e.clipboardData,i=$t(t,n.content()),s=i.dom,a=i.text;o?(e.preventDefault(),o.clearData(),o.setData("text/html",s.innerHTML),o.setData("text/plain",a)):function(t,e){if(t.dom.parentNode){var n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n),t.focus()}),50)}}(t,s),r&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},Gt.paste=function(t,e){var n=he?null:e.clipboardData,r=n&&n.getData("text/html"),o=n&&n.getData("text/plain");n&&(r||o||n.files.length)?(fe(t,o,r,e),e.preventDefault()):function(t,e){if(t.dom.parentNode){var n=t.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout((function(){t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?fe(t,r.value,null,e):fe(t,r.textContent,r.innerHTML,e)}),50)}}(t,e)};var ve=function(t,e){this.slice=t,this.move=e},me=s.mac?"altKey":"ctrlKey";for(var ge in Ut.dragstart=function(t,e){var n=t.mouseDown;if(n&&n.done(),e.dataTransfer){var o=t.state.selection,i=o.empty?null:t.posAtCoords(Qt(e));if(i&&i.pos>=o.from&&i.pos<=(o instanceof r.NodeSelection?o.to-1:o.to));else if(n&&n.mightDrag)t.dispatch(t.state.tr.setSelection(r.NodeSelection.create(t.state.doc,n.mightDrag.pos)));else if(e.target&&1==e.target.nodeType){var s=t.docView.nearestDesc(e.target,!0);if(!s||!s.node.type.spec.draggable||s==t.docView)return;t.dispatch(t.state.tr.setSelection(r.NodeSelection.create(t.state.doc,s.posBefore)))}var a=t.state.selection.content(),l=$t(t,a),c=l.dom,p=l.text;e.dataTransfer.clearData(),e.dataTransfer.setData(he?"Text":"text/html",c.innerHTML),he||e.dataTransfer.setData("text/plain",p),t.dragging=new ve(a,!e[me])}},Ut.dragend=function(t){window.setTimeout((function(){return t.dragging=null}),50)},Gt.dragover=Gt.dragenter=function(t,e){return e.preventDefault()},Gt.drop=function(t,e){var n=t.dragging;if(t.dragging=null,e.dataTransfer){var s=t.posAtCoords(Qt(e));if(s){var a=t.state.doc.resolve(s.pos);if(a){var l=n&&n.slice||Lt(t,e.dataTransfer.getData(he?"Text":"text/plain"),he?null:e.dataTransfer.getData("text/html"),!1,a),c=n&&!e[me];if(t.someProp("handleDrop",(function(n){return n(t,e,l||o.Slice.empty,c)})))e.preventDefault();else if(l){e.preventDefault();var p=l?Object(i.h)(t.state.doc,a.pos,l):a.pos;null==p&&(p=a.pos);var u=t.state.tr;c&&u.deleteSelection();var d=u.mapping.map(p),h=0==l.openStart&&0==l.openEnd&&1==l.content.childCount,f=u.doc;if(h?u.replaceRangeWith(d,d,l.content.firstChild):u.replaceRange(d,d,l),!u.doc.eq(f)){var v=u.doc.resolve(d);if(h&&r.NodeSelection.isSelectable(l.content.firstChild)&&v.nodeAfter&&v.nodeAfter.sameMarkup(l.content.firstChild))u.setSelection(new r.NodeSelection(v));else{var m=u.mapping.map(p);u.mapping.maps[u.mapping.maps.length-1].forEach((function(t,e,n,r){return m=r})),u.setSelection(gt(t,v,u.doc.resolve(m)))}t.focus(),t.dispatch(u.setMeta("uiEvent","drop"))}}}}}},Ut.focus=function(t){t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout((function(){t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.root.getSelection())&&pt(t)}),20))},Ut.blur=function(t){t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),t.domObserver.currentSelection.set({}),t.focused=!1)},Ut.beforeinput=function(t,e){if(s.chrome&&s.android&&"deleteContentBackward"==e.inputType){var n=t.domChangeCount;setTimeout((function(){if(t.domChangeCount==n&&(t.dom.blur(),t.focus(),!t.someProp("handleKeyDown",(function(e){return e(t,x(8,"Backspace"))})))){var e=t.state.selection.$cursor;e&&e.pos>0&&t.dispatch(t.state.tr.delete(e.pos-1,e.pos).scrollIntoView())}}),50)}},Gt)Ut[ge]=Gt[ge];function ye(t,e){if(t==e)return!0;for(var n in t)if(t[n]!==e[n])return!1;for(var r in e)if(!(r in t))return!1;return!0}var be=function(t,e){this.spec=e||Oe,this.side=this.spec.side||0,this.toDOM=t};be.prototype.map=function(t,e,n,r){var o=t.mapResult(e.from+r,this.side<0?-1:1),i=o.pos;return o.deleted?null:new Se(i-n,i-n,this)},be.prototype.valid=function(){return!0},be.prototype.eq=function(t){return this==t||t instanceof be&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&ye(this.spec,t.spec))};var we=function(t,e){this.spec=e||Oe,this.attrs=t};we.prototype.map=function(t,e,n,r){var o=t.map(e.from+r,this.spec.inclusiveStart?-1:1)-n,i=t.map(e.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new Se(o,i,this)},we.prototype.valid=function(t,e){return e.from<e.to},we.prototype.eq=function(t){return this==t||t instanceof we&&ye(this.attrs,t.attrs)&&ye(this.spec,t.spec)},we.is=function(t){return t.type instanceof we};var xe=function(t,e){this.spec=e||Oe,this.attrs=t};xe.prototype.map=function(t,e,n,r){var o=t.mapResult(e.from+r,1);if(o.deleted)return null;var i=t.mapResult(e.to+r,-1);return i.deleted||i.pos<=o.pos?null:new Se(o.pos-n,i.pos-n,this)},xe.prototype.valid=function(t,e){var n=t.content.findIndex(e.from),r=n.index,o=n.offset;return o==e.from&&o+t.child(r).nodeSize==e.to},xe.prototype.eq=function(t){return this==t||t instanceof xe&&ye(this.attrs,t.attrs)&&ye(this.spec,t.spec)};var Se=function(t,e,n){this.from=t,this.to=e,this.type=n},ke={spec:{configurable:!0},inline:{configurable:!0}};Se.prototype.copy=function(t,e){return new Se(t,e,this.type)},Se.prototype.eq=function(t,e){return void 0===e&&(e=0),this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to},Se.prototype.map=function(t,e,n){return this.type.map(t,this,e,n)},Se.widget=function(t,e,n){return new Se(t,t,new be(e,n))},Se.inline=function(t,e,n,r){return new Se(t,e,new we(n,r))},Se.node=function(t,e,n,r){return new Se(t,e,new xe(n,r))},ke.spec.get=function(){return this.type.spec},ke.inline.get=function(){return this.type instanceof we},Object.defineProperties(Se.prototype,ke);var Ce=[],Oe={},Me=function(t,e){this.local=t&&t.length?t:Ce,this.children=e&&e.length?e:Ce};Me.create=function(t,e){return e.length?Re(e,t,0,Oe):Te},Me.prototype.find=function(t,e,n){var r=[];return this.findInner(null==t?0:t,null==e?1e9:e,r,0,n),r},Me.prototype.findInner=function(t,e,n,r,o){for(var i=0;i<this.local.length;i++){var s=this.local[i];s.from<=e&&s.to>=t&&(!o||o(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<e&&this.children[a+1]>t){var l=this.children[a]+1;this.children[a+2].findInner(t-l,e-l,n,r+l,o)}},Me.prototype.map=function(t,e,n){return this==Te||0==t.maps.length?this:this.mapInner(t,e,0,0,n||Oe)},Me.prototype.mapInner=function(t,e,n,r,o){for(var i,s=0;s<this.local.length;s++){var a=this.local[s].map(t,n,r);a&&a.type.valid(e,a)?(i||(i=[])).push(a):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?function(t,e,n,r,o,i,s){for(var a=t.slice(),l=function(t,e,n,r){for(var s=0;s<a.length;s+=3){var l=a[s+1],c=void 0;-1==l||t>l+i||(e>=a[s]+i?a[s+1]=-1:n>=o&&(c=r-n-(e-t))&&(a[s]+=c,a[s+1]+=c))}},c=0;c<n.maps.length;c++)n.maps[c].forEach(l);for(var p=!1,u=0;u<a.length;u+=3)if(-1==a[u+1]){var d=n.map(t[u]+i),h=d-o;if(h<0||h>=r.content.size){p=!0;continue}var f=n.map(t[u+1]+i,-1)-o,v=r.content.findIndex(h),m=v.index,g=v.offset,y=r.maybeChild(m);if(y&&g==h&&g+y.nodeSize==f){var b=a[u+2].mapInner(n,y,d+1,t[u]+i+1,s);b!=Te?(a[u]=h,a[u+1]=f,a[u+2]=b):(a[u+1]=-2,p=!0)}else p=!0}if(p){var w=Re(function(t,e,n,r,o,i,s){function a(t,e){for(var i=0;i<t.local.length;i++){var l=t.local[i].map(r,o,e);l?n.push(l):s.onRemove&&s.onRemove(t.local[i].spec)}for(var c=0;c<t.children.length;c+=3)a(t.children[c+2],t.children[c]+e+1)}for(var l=0;l<t.length;l+=3)-1==t[l+1]&&a(t[l+2],e[l]+i+1);return n}(a,t,e||[],n,o,i,s),r,0,s);e=w.local;for(var x=0;x<a.length;x+=3)a[x+1]<0&&(a.splice(x,3),x-=3);for(var S=0,k=0;S<w.children.length;S+=3){for(var C=w.children[S];k<a.length&&a[k]<C;)k+=3;a.splice(k,0,w.children[S],w.children[S+1],w.children[S+2])}}return new Me(e&&e.sort(De),a)}(this.children,i,t,e,n,r,o):i?new Me(i.sort(De)):Te},Me.prototype.add=function(t,e){return e.length?this==Te?Me.create(t,e):this.addInner(t,e,0):this},Me.prototype.addInner=function(t,e,n){var r,o=this,i=0;t.forEach((function(t,s){var a,l=s+n;if(a=Ne(e,t,l)){for(r||(r=o.children.slice());i<r.length&&r[i]<s;)i+=3;r[i]==s?r[i+2]=r[i+2].addInner(t,a,l+1):r.splice(i,0,s,s+t.nodeSize,Re(a,t,l+1,Oe)),i+=3}}));var s=Ae(i?Ee(e):e,-n);return new Me(s.length?this.local.concat(s).sort(De):this.local,r||this.children)},Me.prototype.remove=function(t){return 0==t.length||this==Te?this:this.removeInner(t,0)},Me.prototype.removeInner=function(t,e){for(var n=this.children,r=this.local,o=0;o<n.length;o+=3){for(var i=void 0,s=n[o]+e,a=n[o+1]+e,l=0,c=void 0;l<t.length;l++)(c=t[l])&&c.from>s&&c.to<a&&(t[l]=null,(i||(i=[])).push(c));if(i){n==this.children&&(n=this.children.slice());var p=n[o+2].removeInner(i,s+1);p!=Te?n[o+2]=p:(n.splice(o,3),o-=3)}}if(r.length)for(var u=0,d=void 0;u<t.length;u++)if(d=t[u])for(var h=0;h<r.length;h++)r[h].eq(d,e)&&(r==this.local&&(r=this.local.slice()),r.splice(h--,1));return n==this.children&&r==this.local?this:r.length||n.length?new Me(r,n):Te},Me.prototype.forChild=function(t,e){if(this==Te)return this;if(e.isLeaf)return Me.empty;for(var n,r,o=0;o<this.children.length;o+=3)if(this.children[o]>=t){this.children[o]==t&&(n=this.children[o+2]);break}for(var i=t+1,s=i+e.content.size,a=0;a<this.local.length;a++){var l=this.local[a];if(l.from<s&&l.to>i&&l.type instanceof we){var c=Math.max(i,l.from)-i,p=Math.min(s,l.to)-i;c<p&&(r||(r=[])).push(l.copy(c,p))}}if(r){var u=new Me(r.sort(De));return n?new _e([u,n]):u}return n||Te},Me.prototype.eq=function(t){if(this==t)return!0;if(!(t instanceof Me)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(var e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0},Me.prototype.locals=function(t){return Ie(this.localsInner(t))},Me.prototype.localsInner=function(t){if(this==Te)return Ce;if(t.inlineContent||!this.local.some(we.is))return this.local;for(var e=[],n=0;n<this.local.length;n++)this.local[n].type instanceof we||e.push(this.local[n]);return e};var Te=new Me;Me.empty=Te,Me.removeOverlap=Ie;var _e=function(t){this.members=t};function Ae(t,e){if(!e||!t.length)return t;for(var n=[],r=0;r<t.length;r++){var o=t[r];n.push(new Se(o.from+e,o.to+e,o.type))}return n}function Ne(t,e,n){if(e.isLeaf)return null;for(var r=n+e.nodeSize,o=null,i=0,s=void 0;i<t.length;i++)(s=t[i])&&s.from>n&&s.to<r&&((o||(o=[])).push(s),t[i]=null);return o}function Ee(t){for(var e=[],n=0;n<t.length;n++)null!=t[n]&&e.push(t[n]);return e}function Re(t,e,n,r){var o=[],i=!1;e.forEach((function(e,s){var a=Ne(t,e,s+n);if(a){i=!0;var l=Re(a,e,n+s+1,r);l!=Te&&o.push(s,s+e.nodeSize,l)}}));for(var s=Ae(i?Ee(t):t,-n).sort(De),a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new Me(s,o):Te}function De(t,e){return t.from-e.from||t.to-e.to}function Ie(t){for(var e=t,n=0;n<e.length-1;n++){var r=e[n];if(r.from!=r.to)for(var o=n+1;o<e.length;o++){var i=e[o];if(i.from!=r.from){i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),Pe(e,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(e==t&&(e=t.slice()),e[o]=i.copy(i.from,r.to),Pe(e,o+1,i.copy(r.to,i.to)))}}return e}function Pe(t,e,n){for(;e<t.length&&De(n,t[e])>0;)e++;t.splice(e,0,n)}function $e(t){var e=[];return t.someProp("decorations",(function(n){var r=n(t.state);r&&r!=Te&&e.push(r)})),t.cursorWrapper&&e.push(Me.create(t.state.doc,[t.cursorWrapper.deco])),_e.from(e)}_e.prototype.forChild=function(t,e){if(e.isLeaf)return Me.empty;for(var n=[],r=0;r<this.members.length;r++){var o=this.members[r].forChild(t,e);o!=Te&&(o instanceof _e?n=n.concat(o.members):n.push(o))}return _e.from(n)},_e.prototype.eq=function(t){if(!(t instanceof _e)||t.members.length!=this.members.length)return!1;for(var e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0},_e.prototype.locals=function(t){for(var e,n=!0,r=0;r<this.members.length;r++){var o=this.members[r].localsInner(t);if(o.length)if(e){n&&(e=e.slice(),n=!1);for(var i=0;i<o.length;i++)e.push(o[i])}else e=o}return e?Ie(n?e:e.sort(De)):Ce},_e.from=function(t){switch(t.length){case 0:return Te;case 1:return t[0];default:return new _e(t)}};var Le=function(t,e){this._props=e,this.state=e.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):t.apply?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=Ve(this),this.markCursor=null,this.cursorWrapper=null,je(this),this.nodeViews=Fe(this),this.docView=U(this.state.doc,Be(this),$e(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(t){t.shiftKey=!1,t.mouseDown=null,t.lastKeyCode=null,t.lastKeyCodeTime=0,t.lastClick={time:0,x:0,y:0,type:""},t.lastSelectionOrigin=null,t.lastSelectionTime=0,t.lastIOSEnter=0,t.lastIOSEnterFallbackTimeout=null,t.composing=!1,t.composingTimeout=null,t.compositionNodes=[],t.compositionEndedAt=-2e8,t.domObserver=new Jt(t,(function(e,n,r,o){return Dt(t,e,n,r,o)})),t.domObserver.start(),t.domChangeCount=0,t.eventHandlers=Object.create(null);var e=function(e){var n=Ut[e];t.dom.addEventListener(e,t.eventHandlers[e]=function(e){!function(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(var n=e.target;n!=t.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}(t,e)||Zt(t,e)||!t.editable&&e.type in Gt||n(t,e)})};for(var n in Ut)e(n);s.safari&&t.dom.addEventListener("input",(function(){return null})),Yt(t)}(this),this.pluginViews=[],this.updatePluginViews()},ze={props:{configurable:!0},root:{configurable:!0}};function Be(t){var e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(t.state)),n)for(var r in n)"class"==r?e.class+=" "+n[r]:e[r]||"contenteditable"==r||"nodeName"==r||(e[r]=String(n[r]))})),[Se.node(0,t.state.doc.content.size,e)]}function je(t){if(t.markCursor){var e=document.createElement("img");e.setAttribute("mark-placeholder","true"),t.cursorWrapper={dom:e,deco:Se.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Ve(t){return!t.someProp("editable",(function(e){return!1===e(t.state)}))}function Fe(t){var e={};return t.someProp("nodeViews",(function(t){for(var n in t)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n])})),e}ze.props.get=function(){if(this._props.state!=this.state){var t=this._props;for(var e in this._props={},t)this._props[e]=t[e];this._props.state=this.state}return this._props},Le.prototype.update=function(t){t.handleDOMEvents!=this._props.handleDOMEvents&&Yt(this),this._props=t,this.updateStateInner(t.state,!0)},Le.prototype.setProps=function(t){var e={};for(var n in this._props)e[n]=this._props[n];for(var r in e.state=this.state,t)e[r]=t[r];this.update(e)},Le.prototype.updateState=function(t){this.updateStateInner(t,this.state.plugins!=t.plugins)},Le.prototype.updateStateInner=function(t,e){var n=this,o=this.state,i=!1,a=!1;if(t.storedMarks&&this.composing&&(ue(this),a=!0),this.state=t,e){var l=Fe(this);(function(t,e){var n=0,r=0;for(var o in t){if(t[o]!=e[o])return!0;n++}for(var i in e)r++;return n!=r})(l,this.nodeViews)&&(this.nodeViews=l,i=!0),Yt(this)}this.editable=Ve(this),je(this);var c=$e(this),p=Be(this),u=e?"reset":t.scrollToSelection>o.scrollToSelection?"to selection":"preserve",d=i||!this.docView.matchesNode(t.doc,p,c);!d&&t.selection.eq(o.selection)||(a=!0);var h,f,m,g,y,b,w,x,S,k,C,_="preserve"==u&&a&&null==this.dom.style.overflowAnchor&&function(t){for(var e,n,r=t.dom.getBoundingClientRect(),o=Math.max(0,r.top),i=(r.left+r.right)/2,s=o+1;s<Math.min(innerHeight,r.bottom);s+=5){var a=t.root.elementFromPoint(i,s);if(a!=t.dom&&t.dom.contains(a)){var l=a.getBoundingClientRect();if(l.top>=o-20){e=a,n=l.top;break}}}return{refDOM:e,refTop:n,stack:M(t.dom)}}(this);if(a){this.domObserver.stop();var A=d&&(s.ie||s.chrome)&&!this.composing&&!o.selection.empty&&!t.selection.empty&&(g=o.selection,y=t.selection,b=Math.min(g.$anchor.sharedDepth(g.head),y.$anchor.sharedDepth(y.head)),g.$anchor.start(b)!=y.$anchor.start(b));if(d){var N=s.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!i&&this.docView.update(t.doc,p,c,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=U(t.doc,p,c,this.dom,this)),N&&!this.trackWrites&&(A=!0)}A||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&(h=this,f=h.docView.domFromPos(h.state.selection.anchor),m=h.root.getSelection(),v(f.node,f.offset,m.anchorNode,m.anchorOffset)))?pt(this,A):(vt(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(o),"reset"==u)this.dom.scrollTop=0;else if("to selection"==u){var E=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(t){return t(n)}))||(t.selection instanceof r.NodeSelection?O(this,this.docView.domAfterPos(t.selection.from).getBoundingClientRect(),E):O(this,this.coordsAtPos(t.selection.head),E))}else _&&(x=(w=_).refDOM,S=w.refTop,k=w.stack,C=x?x.getBoundingClientRect().top:0,T(k,0==C?0:C-S))},Le.prototype.destroyPluginViews=function(){for(var t;t=this.pluginViews.pop();)t.destroy&&t.destroy()},Le.prototype.updatePluginViews=function(t){if(t&&t.plugins==this.state.plugins)for(var e=0;e<this.pluginViews.length;e++){var n=this.pluginViews[e];n.update&&n.update(this,t)}else{this.destroyPluginViews();for(var r=0;r<this.state.plugins.length;r++){var o=this.state.plugins[r];o.spec.view&&this.pluginViews.push(o.spec.view(this))}}},Le.prototype.someProp=function(t,e){var n,r=this._props&&this._props[t];if(null!=r&&(n=e?e(r):r))return n;var o=this.state.plugins;if(o)for(var i=0;i<o.length;i++){var s=o[i].props[t];if(null!=s&&(n=e?e(s):s))return n}},Le.prototype.hasFocus=function(){return this.root.activeElement==this.dom},Le.prototype.focus=function(){this.domObserver.stop(),this.editable&&function(t){if(t.setActive)return t.setActive();if(_)return t.focus(_);var e=M(t);t.focus(null==_?{get preventScroll(){return _={preventScroll:!0},!0}}:void 0),_||(_=!1,T(e,0))}(this.dom),pt(this),this.domObserver.start()},ze.root.get=function(){var t=this._root;if(null==t)for(var e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=function(){return document.getSelection()}),this._root=e;return t||document},Le.prototype.posAtCoords=function(t){return E(this,t)},Le.prototype.coordsAtPos=function(t){return D(this,t)},Le.prototype.domAtPos=function(t){return this.docView.domFromPos(t)},Le.prototype.nodeDOM=function(t){var e=this.docView.descAt(t);return e?e.nodeDOM:null},Le.prototype.posAtDOM=function(t,e,n){void 0===n&&(n=-1);var r=this.docView.posFromDOM(t,e,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r},Le.prototype.endOfTextblock=function(t,e){return j(this,e||this.state,t)},Le.prototype.destroy=function(){this.docView&&(!function(t){for(var e in t.domObserver.stop(),t.eventHandlers)t.dom.removeEventListener(e,t.eventHandlers[e]);clearTimeout(t.composingTimeout),clearTimeout(t.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],$e(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},Le.prototype.dispatchEvent=function(t){return function(t,e){Zt(t,e)||!Ut[e.type]||!t.editable&&e.type in Gt||Ut[e.type](t,e)}(this,t)},Le.prototype.dispatch=function(t){var e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))},Object.defineProperties(Le.prototype,ze)},291:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return a})),n.d(e,"e",(function(){return l})),n.d(e,"f",(function(){return c}));var r=n(292);function o(t,e){const{from:n,to:r}=t.selection;let o=[];t.doc.nodesBetween(n,r,t=>{o=[...o,...t.marks]});const i=o.find(t=>t.type.name===e.name);return i?i.attrs:{}}function i(t,e){const{from:n,to:r}=t.selection;let o=[];t.doc.nodesBetween(n,r,t=>{o=[...o,t]});const i=o.reverse().find(t=>t.type.name===e.name);return i?i.attrs:{}}function s(t=null,e=null){if(!t||!e)return!1;const n=t.parent.childAfter(t.parentOffset);if(!n.node)return!1;const r=n.node.marks.find(t=>t.type===e);if(!r)return!1;let o=t.index(),i=t.start()+n.offset,s=o+1,a=i+n.node.nodeSize;for(;o>0&&r.isInSet(t.parent.child(o-1).marks);)o-=1,i-=t.parent.child(o).nodeSize;for(;s<t.parent.childCount&&r.isInSet(t.parent.child(s).marks);)a+=t.parent.child(s).nodeSize,s+=1;return{from:i,to:a}}function a(t,e){const{from:n,$from:r,to:o,empty:i}=t.selection;return i?!!e.isInSet(t.storedMarks||r.marks()):!!t.doc.rangeHasMark(n,o,e)}function l({types:t,node:e}){return Array.isArray(t)&&t.includes(e.type)||e.type===t}function c(t,e,n={}){const o=Object(r.findSelectedNodeOfType)(e)(t.selection)||Object(r.findParentNode)(t=>t.type===e)(t.selection);return Object.keys(n).length&&o?o.node.hasMarkup(e,{...o.node.attrs,...n}):!!o}},292:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(279),o=n(280),i=n(304),s=function(t,e){return function(n){Array.isArray(t)||(t=[t]);for(var r=0,o=t.length;r<o;r++){var i=R(t[r])(n.selection);if(i){var s=v(i.pos,e)(n);if(s!==n)return s}}return n}},a=function(t){return function(e){if(d(e.selection)){var n=e.selection,i=n.$from,s=n.$to;if(t instanceof o.Fragment&&i.parent.canReplace(i.index(),i.indexAfter(),t)||i.parent.canReplaceWith(i.index(),i.indexAfter(),t.type))return f(e.replaceWith(i.pos,s.pos,t).setSelection(new r.NodeSelection(e.doc.resolve(i.pos))))}return e}},l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(n){var o=r.Selection.findFrom(n.doc.resolve(t),e,!0);return o?n.setSelection(o):n}},c=function(t){return t.type&&t.type.spec.selectable},p=function(t,e,n){return function(t){return c(t)&&t.type.isLeaf}(t)?n.setSelection(new r.NodeSelection(n.doc.resolve(e))):l(e)(n)},u=function(t,e,n){return function(r){var o="number"==typeof e,i=r.selection.$from,l=o?r.doc.resolve(e):d(r.selection)?r.doc.resolve(i.pos+1):i,u=l.parent;if(d(r.selection)&&n&&r!==(r=a(t)(r)))return r;if(w(u)&&r!==(r=s(u.type,t)(r))){var h=c(t)?l.before(l.depth):l.pos;return p(t,h,r)}if(b(l,t)){r.insert(l.pos,t);var v=o?l.pos:c(t)?r.selection.$anchor.pos-1:r.selection.$anchor.pos;return f(p(t,v,r))}for(var m=l.depth;m>0;m--){var g=l.after(m),y=r.doc.resolve(g);if(b(y,t))return r.insert(g,t),f(p(t,g,r))}return r}},d=function(t){return t instanceof r.NodeSelection},h=function(t,e){return Array.isArray(t)&&t.indexOf(e.type)>-1||e.type===t},f=function(t){return Object.assign(Object.create(t),t).setTime(Date.now())},v=function(t,e){return function(n){var r=n.doc.nodeAt(t),o=n.doc.resolve(t);if(m(o,e)){var i=(n=n.replaceWith(t,t+r.nodeSize,e)).selection.$from.pos-1;return n=l(Math.max(i,0),-1)(n),n=l(n.selection.$from.start())(n),f(n)}return n}},m=function(t,e){var n=t.node(t.depth);return n&&n.type.validContent(e instanceof o.Fragment?e:o.Fragment.from(e))},g=function(t){return function(e){var n=e.doc.nodeAt(t);return f(e.delete(t,t+n.nodeSize))}},y=function(t){if(t.cached.tableNodeTypes)return t.cached.tableNodeTypes;var e={};return Object.keys(t.nodes).forEach((function(n){var r=t.nodes[n];r.spec.tableRole&&(e[r.spec.tableRole]=r)})),t.cached.tableNodeTypes=e,e},b=function(t,e){var n=t.index();return e instanceof o.Fragment?t.parent.canReplace(n,n,e):e instanceof o.Node&&t.parent.canReplaceWith(n,n,e.type)},w=function(t){return!t||"paragraph"===t.type.name&&2===t.nodeSize},x=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e?t.createChecked(null,e):t.createAndFill()},S=function(t){return function(e){for(var n=i.TableMap.get(e.$anchorCell.node(-1)),r=e.$anchorCell.start(-1),o=n.cellsInRect(t),s=n.cellsInRect(n.rectBetween(e.$anchorCell.pos-r,e.$headCell.pos-r)),a=0,l=o.length;a<l;a++)if(-1===s.indexOf(o[a]))return!1;return!0}},k=function(t){return t[0].map((function(e,n){return t.map((function(t){return t[n]}))}))},C=function(t){for(var e=i.TableMap.get(t),n=[],r=0;r<e.height;r++){for(var o=[],s={},a=0;a<e.width;a++){var l=e.map[r*e.width+a],c=t.nodeAt(l),p=e.findCell(l);s[l]||p.top!==r?o.push(null):(s[l]=!0,o.push(c))}n.push(o)}return n},O=function(t,e){for(var n=[],r=i.TableMap.get(t),o=0;o<r.height;o++){for(var s=t.child(o),a=[],l=0;l<r.width;l++)if(e[o][l]){var c=r.map[o*r.width+l],p=e[o][l],u=t.nodeAt(c).type.createChecked(Object.assign({},p.attrs),p.content,p.marks);a.push(u)}n.push(s.type.createChecked(s.attrs,a,s.marks))}return t.type.createChecked(t.attrs,n,t.marks)},M=function(t,e,n,r){var o=e[0]>n[0]?-1:1,i=t.splice(e[0],e.length),s=i.length%2==0?1:0,a=void 0;return a=-1===r&&1===o?n[0]-1:1===r&&-1===o?n[n.length-1]-s+1:-1===o?n[0]:n[n.length-1]-s,t.splice.apply(t,[a,0].concat(i)),t},T=function(t,e,n,r){var o="Target position is invalid, you can't move the "+r+" "+t+" to "+e+", the target can't be split. You could use tryToFit option.";if(1===(t>e?-1:1)){if(-1!==n.slice(0,n.length-1).indexOf(e))throw new Error(o)}else if(-1!==n.slice(1).indexOf(e))throw new Error(o);return!0},_=function(t){return function(e){var n=e.$from;return A(n,t)}},A=function(t,e){for(var n=t.depth;n>0;n--){var r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}},N=function(t,e){return function(n){var r=_(t)(n);if(r)return I(r.pos,e)}},E=function(t){return function(e){return!!_(t)(e)}},R=function(t){return function(e){return _((function(e){return h(t,e)}))(e)}},D=function(t){var e=t.$from.nodeBefore,n=r.Selection.findFrom(t.$from,-1);if(n&&e){var o=R(e.type)(n);return o?o.pos:n.$from.pos}},I=function(t,e){var n=e(t),r=n.node.childNodes[n.offset];return n.node.nodeType===Node.TEXT_NODE?n.node.parentNode:r&&r.nodeType!==Node.TEXT_NODE?r:n.node},P=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t)throw new Error('Invalid "node" parameter');var n=[];return t.descendants((function(t,r){if(n.push({node:t,pos:r}),!e)return!1})),n},$=function(t,e,n){if(!t)throw new Error('Invalid "node" parameter');if(!e)throw new Error('Invalid "predicate" parameter');return P(t,n).filter((function(t){return e(t.node)}))},L=function(t,e,n){return $(t,(function(t){return t.type===e}),n)};var z=function(t){return _((function(t){return t.type.spec.tableRole&&"table"===t.type.spec.tableRole}))(t)},B=function(t){return t instanceof i.CellSelection},j=function(t){if(B(t)){var e=i.TableMap.get(t.$anchorCell.node(-1));return S({left:0,right:e.width,top:0,bottom:e.height})(t)}return!1},V=function(t){return function(e){var n=z(e);if(n){var r=i.TableMap.get(n.node);return(Array.isArray(t)?t:Array.from([t])).reduce((function(t,e){if(e>=0&&e<=r.width-1){var o=r.cellsInRect({left:e,right:e+1,top:0,bottom:r.height});return t.concat(o.map((function(t){var e=n.node.nodeAt(t),r=t+n.start;return{pos:r,start:r+1,node:e}})))}}),[])}}},F=function(t){return function(e){var n=z(e);if(n){var r=i.TableMap.get(n.node);return(Array.isArray(t)?t:Array.from([t])).reduce((function(t,e){if(e>=0&&e<=r.height-1){var o=r.cellsInRect({left:0,right:r.width,top:e,bottom:e+1});return t.concat(o.map((function(t){var e=n.node.nodeAt(t),r=t+n.start;return{pos:r,start:r+1,node:e}})))}}),[])}}},H=function(t){return function(e,n){return function(r){var o=z(r.selection),s="row"===t;if(o){var a=i.TableMap.get(o.node);if(e>=0&&e<(s?a.height:a.width)){var l=s?0:e,c=s?e:0,p=s?a.width:e+1,u=s?e+1:a.height;if(n){var d=Y(r.selection.$from);if(!d)return r;var h=a.findCell(d.pos-o.start);s?(c=Math.min(c,h.top),u=Math.max(u,h.bottom)):(l=Math.min(l,h.left),p=Math.max(p,h.right))}var v=a.cellsInRect({left:l,top:c,right:s?p:l+1,bottom:s?c+1:u}),m=u-c==1?v:a.cellsInRect({left:s?l:p-1,top:s?u-1:c,right:p,bottom:u}),g=o.start+v[0],y=o.start+m[m.length-1],b=r.doc.resolve(g),w=r.doc.resolve(y);return f(r.setSelection(new i.CellSelection(w,b)))}}return r}}},q=H("column"),W=H("row"),J=function(t){return function(e){var n=z(e.selection);if(n){var r=i.TableMap.get(n.node);if(t>=0&&t<=r.height){for(var o=n.node,s=y(o.type.schema),a=n.start,l=0;l<t+1;l++)a+=o.child(l).nodeSize;var c=o.child(t),p=[],d=0;if(c.forEach((function(t){1===t.attrs.rowspan&&(d+=t.attrs.colspan,p.push(s[t.type.spec.tableRole].createAndFill(t.attrs,t.marks)))})),d<r.width){for(var h=[],f=function(n){var r=Q(n,(function(e,r){var o=e.node.attrs.rowspan;return o>1&&n+o>t}))(e);h.push.apply(h,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(r))},v=t;v>=0;v--)f(v);h.length&&h.forEach((function(t){e=X(t,{rowspan:t.node.attrs.rowspan+1})(e)}))}return u(s.row.create(c.attrs,p),a)(e)}}return e}},K=function(t){return function(e){var n=z(e.selection);if(n){var r=i.TableMap.get(n.node);if(0===t&&1===r.width)return G(e);if(t>=0&&t<=r.width)return i.removeColumn(e,{map:r,tableStart:n.start,table:n.node},t),f(e)}return e}},U=function(t){return function(e){var n=z(e.selection);if(n){var r=i.TableMap.get(n.node);if(0===t&&1===r.height)return G(e);if(t>=0&&t<=r.height)return i.removeRow(e,{map:r,tableStart:n.start,table:n.node},t),f(e)}return e}},G=function(t){for(var e=t.selection.$from,n=e.depth;n>0;n--){if("table"===e.node(n).type.spec.tableRole)return f(t.delete(e.before(n),e.after(n)))}return t},X=function(t,e){return function(n){return t?(n.setNodeMarkup(t.pos,null,Object.assign({},t.node.attrs,e)),f(n)):n}},Y=function(t){return A(t,(function(t){return t.type.spec.tableRole&&/cell/i.test(t.type.spec.tableRole)}))},Z=function(t){var e=Y(t);if(e){var n=function(t){return A(t,(function(t){return t.type.spec.tableRole&&/table/i.test(t.type.spec.tableRole)}))}(t),r=i.TableMap.get(n.node),o=e.pos-n.start;return r.rectBetween(o,o)}},Q=function(t,e){return function(n){var r=[],o=F(t)(n.selection);if(o)for(var i=o.length-1;i>=0;i--)e(o[i],n)&&r.push(o[i]);return r}},tt=function(t){return function(e){for(var n=t,r=t,o=function(t){var o=V(t)(e.selection);o&&o.forEach((function(e){var o=e.node.attrs.colspan+t-1;o>=n&&(n=t),o>r&&(r=o)}))},i=t;i>=0;i--)o(i);var s=function(t){var n=V(t)(e.selection);n&&n.forEach((function(e){var n=e.node.attrs.colspan+t-1;e.node.attrs.colspan>1&&n>r&&(r=n)}))};for(i=t;i<=r;i++)s(i);var a=[];for(i=n;i<=r;i++){var l=V(i)(e.selection);l&&l.length&&a.push(i)}n=a[0],r=a[a.length-1];for(var c=V(n)(e.selection),p=F(0)(e.selection),u=e.doc.resolve(c[c.length-1].pos),d=void 0,h=r;h>=n;h--){var f=V(h)(e.selection);if(f&&f.length){for(var v=p.length-1;v>=0;v--)if(p[v].pos===f[0].pos){d=f[0];break}if(d)break}}return{$anchor:u,$head:e.doc.resolve(d.pos),indexes:a}}},et=function(t){return function(e){for(var n=t,r=t,o=function(t){F(t)(e.selection).forEach((function(e){var o=e.node.attrs.rowspan+t-1;o>=n&&(n=t),o>r&&(r=o)}))},i=t;i>=0;i--)o(i);var s=function(t){F(t)(e.selection).forEach((function(e){var n=e.node.attrs.rowspan+t-1;e.node.attrs.rowspan>1&&n>r&&(r=n)}))};for(i=t;i<=r;i++)s(i);var a=[];for(i=n;i<=r;i++){var l=F(i)(e.selection);l&&l.length&&a.push(i)}n=a[0],r=a[a.length-1];for(var c=F(n)(e.selection),p=V(0)(e.selection),u=e.doc.resolve(c[c.length-1].pos),d=void 0,h=r;h>=n;h--){var f=F(h)(e.selection);if(f&&f.length){for(var v=p.length-1;v>=0;v--)if(p[v].pos===f[0].pos){d=f[0];break}if(d)break}}return{$anchor:u,$head:e.doc.resolve(d.pos),indexes:a}}};e.isNodeSelection=d,e.canInsert=b,e.convertTableNodeToArrayOfRows=C,e.convertArrayOfRowsToTableNode=O,e.findParentNode=_,e.findParentNodeClosestToPos=A,e.findParentDomRef=N,e.hasParentNode=E,e.findParentNodeOfType=R,e.findParentNodeOfTypeClosestToPos=function(t,e){return A(t,(function(t){return h(e,t)}))},e.hasParentNodeOfType=function(t){return function(e){return E((function(e){return h(t,e)}))(e)}},e.findParentDomRefOfType=function(t,e){return function(n){return N((function(e){return h(t,e)}),e)(n)}},e.findSelectedNodeOfType=function(t){return function(e){if(d(e)){var n=e.node,r=e.$from;if(h(t,n))return{node:n,pos:r.pos,depth:r.depth}}}},e.findPositionOfNodeBefore=D,e.findDomRefAtPos=I,e.flatten=P,e.findChildren=$,e.findTextNodes=function(t,e){return $(t,(function(t){return t.isText}),e)},e.findInlineNodes=function(t,e){return $(t,(function(t){return t.isInline}),e)},e.findBlockNodes=function(t,e){return $(t,(function(t){return t.isBlock}),e)},e.findChildrenByAttr=function(t,e,n){return $(t,(function(t){return!!e(t.attrs)}),n)},e.findChildrenByType=L,e.findChildrenByMark=function(t,e,n){return $(t,(function(t){return e.isInSet(t.marks)}),n)},e.contains=function(t,e){return!!L(t,e).length},e.findTable=z,e.isCellSelection=B,e.getSelectionRect=function(t){if(B(t)){var e=t.$anchorCell.start(-1);return i.TableMap.get(t.$anchorCell.node(-1)).rectBetween(t.$anchorCell.pos-e,t.$headCell.pos-e)}},e.isColumnSelected=function(t){return function(e){if(B(e)){var n=i.TableMap.get(e.$anchorCell.node(-1));return S({left:t,right:t+1,top:0,bottom:n.height})(e)}return!1}},e.isRowSelected=function(t){return function(e){if(B(e)){var n=i.TableMap.get(e.$anchorCell.node(-1));return S({left:0,right:n.width,top:t,bottom:t+1})(e)}return!1}},e.isTableSelected=j,e.getCellsInColumn=V,e.getCellsInRow=F,e.getCellsInTable=function(t){var e=z(t);if(e){var n=i.TableMap.get(e.node);return n.cellsInRect({left:0,right:n.width,top:0,bottom:n.height}).map((function(t){var n=e.node.nodeAt(t),r=t+e.start;return{pos:r,start:r+1,node:n}}))}},e.selectColumn=q,e.selectRow=W,e.selectTable=function(t){var e=z(t.selection);if(e){var n=i.TableMap.get(e.node).map;if(n&&n.length){var r=e.start+n[0],o=e.start+n[n.length-1],s=t.doc.resolve(r),a=t.doc.resolve(o);return f(t.setSelection(new i.CellSelection(a,s)))}}return t},e.emptyCell=function(t,e){return function(n){if(t){var r=y(e).cell.createAndFill().content;if(!t.node.content.eq(r))return n.replaceWith(t.pos+1,t.pos+t.node.nodeSize,r),f(n)}return n}},e.addColumnAt=function(t){return function(e){var n=z(e.selection);if(n){var r=i.TableMap.get(n.node);if(t>=0&&t<=r.width)return f(i.addColumn(e,{map:r,tableStart:n.start,table:n.node},t))}return e}},e.moveRow=function(t,e,n){return function(r){var o=Object.assign({tryToFit:!1,direction:0},n),i=z(r.selection);if(!i)return r;var s=et(t)(r).indexes,a=et(e)(r).indexes;if(s.indexOf(e)>-1)return r;!o.tryToFit&&a.length>1&&T(t,e,a,"row");var l=function(t,e,n,r){var o=C(t.node);return o=M(o,e,n,r),O(t.node,o)}(i,s,a,o.direction);return f(r).replaceWith(i.pos,i.pos+i.node.nodeSize,l)}},e.moveColumn=function(t,e,n){return function(r){var o=Object.assign({tryToFit:!1,direction:0},n),i=z(r.selection);if(!i)return r;var s=tt(t)(r).indexes,a=tt(e)(r).indexes;if(s.indexOf(e)>-1)return r;!o.tryToFit&&a.length>1&&T(t,e,a,"column");var l=function(t,e,n,r){var o=k(C(t.node));return o=M(o,e,n,r),o=k(o),O(t.node,o)}(i,s,a,o.direction);return f(r).replaceWith(i.pos,i.pos+i.node.nodeSize,l)}},e.addRowAt=function(t,e){return function(n){var r=z(n.selection);if(r){var o=i.TableMap.get(r.node),s=t-1;if(e&&s>=0)return f(J(s)(n));if(t>=0&&t<=o.height)return f(i.addRow(n,{map:o,tableStart:r.start,table:r.node},t))}return n}},e.cloneRowAt=J,e.removeColumnAt=K,e.removeRowAt=U,e.removeTable=G,e.removeSelectedColumns=function(t){var e=t.selection;if(j(e))return G(t);if(B(e)){var n=z(e);if(n){var r=i.TableMap.get(n.node),o=r.rectBetween(e.$anchorCell.pos-n.start,e.$headCell.pos-n.start);if(0==o.left&&o.right==r.width)return!1;for(var s=Object.assign({},o,{map:r,table:n.node,tableStart:n.start}),a=s.right-1;i.removeColumn(t,s,a),a!==s.left;a--)s.table=s.tableStart?t.doc.nodeAt(s.tableStart-1):t.doc,s.map=i.TableMap.get(s.table);return f(t)}}return t},e.removeSelectedRows=function(t){var e=t.selection;if(j(e))return G(t);if(B(e)){var n=z(e);if(n){var r=i.TableMap.get(n.node),o=r.rectBetween(e.$anchorCell.pos-n.start,e.$headCell.pos-n.start);if(0==o.top&&o.bottom==r.height)return!1;for(var s=Object.assign({},o,{map:r,table:n.node,tableStart:n.start}),a=s.bottom-1;i.removeRow(t,s,a),a!==s.top;a--)s.table=s.tableStart?t.doc.nodeAt(s.tableStart-1):t.doc,s.map=i.TableMap.get(s.table);return f(t)}}return t},e.removeColumnClosestToPos=function(t){return function(e){var n=Z(t);return n?K(n.left)(l(t.pos)(e)):e}},e.removeRowClosestToPos=function(t){return function(e){var n=Z(t);return n?U(n.top)(l(t.pos)(e)):e}},e.forEachCellInColumn=function(t,e,n){return function(o){var i=V(t)(o.selection);if(i){for(var s=i.length-1;s>=0;s--)o=e(i[s],o);if(n){var a=o.doc.resolve(o.mapping.map(i[i.length-1].pos));o.setSelection(r.Selection.near(a))}return f(o)}return o}},e.forEachCellInRow=function(t,e,n){return function(o){var i=F(t)(o.selection);if(i){for(var s=i.length-1;s>=0;s--)o=e(i[s],o);if(n){var a=o.doc.resolve(o.mapping.map(i[i.length-1].pos));o.setSelection(r.Selection.near(a))}}return o}},e.setCellAttrs=X,e.createTable=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=y(t),s=i.cell,a=i.header_cell,l=i.row,c=i.table,p=[],u=[],d=0;d<n;d++)p.push(x(s,o)),r&&u.push(x(a,o));for(var h=[],f=0;f<e;f++)h.push(l.createChecked(null,r&&0===f?u:p));return c.createChecked(null,h)},e.findCellClosestToPos=Y,e.findCellRectClosestToPos=Z,e.getSelectionRangeInColumn=tt,e.getSelectionRangeInRow=et,e.removeParentNodeOfType=function(t){return function(e){var n=R(t)(e.selection);return n?g(n.pos)(e):e}},e.replaceParentNodeOfType=s,e.removeSelectedNode=function(t){if(d(t.selection)){var e=t.selection.$from.pos,n=t.selection.$to.pos;return f(t.delete(e,n))}return t},e.replaceSelectedNode=a,e.setTextSelection=l,e.safeInsert=u,e.setParentNodeMarkup=function(t,e,n,r){return function(o){var i=R(t)(o.selection);return i?f(o.setNodeMarkup(i.pos,e,Object.assign({},i.node.attrs,n),r)):o}},e.selectParentNodeOfType=function(t){return function(e){if(!d(e.selection)){var n=R(t)(e.selection);if(n)return f(e.setSelection(r.NodeSelection.create(e.doc,n.pos)))}return e}},e.removeNodeBefore=function(t){var e=D(t.selection);return"number"==typeof e?g(e)(t):t}},297:function(t,e,n){"use strict";n.d(e,"a",(function(){return y})),n.d(e,"b",(function(){return g}));for(var r={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},o={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},i="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),s="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),a="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),l="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),c="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),p=i&&(l||+i[1]<57)||a&&l,u=0;u<10;u++)r[48+u]=r[96+u]=String(u);for(u=1;u<=24;u++)r[u+111]="F"+u;for(u=65;u<=90;u++)r[u]=String.fromCharCode(u+32),o[u]=String.fromCharCode(u);for(var d in r)o.hasOwnProperty(d)||(o[d]=r[d]);var h=n(279),f="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function v(t){var e,n,r,o,i=t.split(/-(?!$)/),s=i[i.length-1];"Space"==s&&(s=" ");for(var a=0;a<i.length-1;a++){var l=i[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))e=!0;else if(/^(c|ctrl|control)$/i.test(l))n=!0;else if(/^s(hift)?$/i.test(l))r=!0;else{if(!/^mod$/i.test(l))throw new Error("Unrecognized modifier name: "+l);f?o=!0:n=!0}}return e&&(s="Alt-"+s),n&&(s="Ctrl-"+s),o&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function m(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==n&&e.shiftKey&&(t="Shift-"+t),t}function g(t){return new h.Plugin({props:{handleKeyDown:y(t)}})}function y(t){var e=function(t){var e=Object.create(null);for(var n in t)e[v(n)]=t[n];return e}(t);return function(t,n){var i,a=function(t){var e=!(p&&(t.ctrlKey||t.altKey||t.metaKey)||(s||c)&&t.shiftKey&&t.key&&1==t.key.length)&&t.key||(t.shiftKey?o:r)[t.keyCode]||t.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}(n),l=1==a.length&&" "!=a,u=e[m(a,n,!l)];if(u&&u(t.state,t.dispatch,t))return!0;if(l&&(n.shiftKey||n.altKey||n.metaKey||a.charCodeAt(0)>127)&&(i=r[n.keyCode])&&i!=a){var d=e[m(i,n,!0)];if(d&&d(t.state,t.dispatch,t))return!0}else if(l&&n.shiftKey){var h=e[m(a,n,!0)];if(h&&h(t.state,t.dispatch,t))return!0}return!1}}},303:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return pi})),n.d(e,"b",(function(){return ti})),n.d(e,"c",(function(){return ai})),n.d(e,"d",(function(){return oi})),n.d(e,"e",(function(){return ii})),n.d(e,"f",(function(){return ui})),n.d(e,"g",(function(){return Qo})),n.d(e,"h",(function(){return hi})),n.d(e,"i",(function(){return di})),n.d(e,"j",(function(){return ei})),n.d(e,"k",(function(){return wi})),n.d(e,"l",(function(){return ci})),n.d(e,"m",(function(){return li})),n.d(e,"n",(function(){return si})),n.d(e,"o",(function(){return ni})),n.d(e,"p",(function(){return Jo})),n.d(e,"q",(function(){return ah})),n.d(e,"r",(function(){return ri}));var r=n(1),o=n.n(r),i=n(311),s=n(324),a=n(53),l=n(66),c=n(24),p=n(84),u=n(271),d=n(14),h=n(272),f=n(26),v=n(270),m=n(268),g=n(70),y=n(275),b=n(273),w=n(122),x=n(388),S=n(121),k=n(389),C=n(375),O=function(t,e){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function M(t,e){function n(){this.constructor=t}O(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var T=function(){return(T=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function _(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function A(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function N(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{l(r.next(t))}catch(t){i(t)}}function a(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(s,a)}l((r=r.apply(t,e||[])).next())}))}function E(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function R(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function D(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(R(arguments[e]));return t}var I="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function P(t,e){return t(e={exports:{}},e.exports),e.exports}function $(t){return t&&t.default||t}var L=function(t){return t&&t.Math==Math&&t},z=L("object"==typeof globalThis&&globalThis)||L("object"==typeof window&&window)||L("object"==typeof self&&self)||L("object"==typeof I&&I)||Function("return this")(),B=function(t){try{return!!t()}catch(t){return!0}},j=!B((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),V={}.propertyIsEnumerable,F=Object.getOwnPropertyDescriptor,H={f:F&&!V.call({1:2},1)?function(t){var e=F(this,t);return!!e&&e.enumerable}:V},q=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},W={}.toString,J=function(t){return W.call(t).slice(8,-1)},K="".split,U=B((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==J(t)?K.call(t,""):Object(t)}:Object,G=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},X=function(t){return U(G(t))},Y=function(t){return"object"==typeof t?null!==t:"function"==typeof t},Z=function(t,e){if(!Y(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!Y(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!Y(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!Y(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},Q={}.hasOwnProperty,tt=function(t,e){return Q.call(t,e)},et=z.document,nt=Y(et)&&Y(et.createElement),rt=function(t){return nt?et.createElement(t):{}},ot=!j&&!B((function(){return 7!=Object.defineProperty(rt("div"),"a",{get:function(){return 7}}).a})),it=Object.getOwnPropertyDescriptor,st={f:j?it:function(t,e){if(t=X(t),e=Z(e,!0),ot)try{return it(t,e)}catch(t){}if(tt(t,e))return q(!H.f.call(t,e),t[e])}},at=function(t){if(!Y(t))throw TypeError(String(t)+" is not an object");return t},lt=Object.defineProperty,ct={f:j?lt:function(t,e,n){if(at(t),e=Z(e,!0),at(n),ot)try{return lt(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},pt=j?function(t,e,n){return ct.f(t,e,q(1,n))}:function(t,e,n){return t[e]=n,t},ut=function(t,e){try{pt(z,t,e)}catch(n){z[t]=e}return e},dt=z["__core-js_shared__"]||ut("__core-js_shared__",{}),ht=Function.toString;"function"!=typeof dt.inspectSource&&(dt.inspectSource=function(t){return ht.call(t)});var ft,vt,mt,gt=dt.inspectSource,yt=z.WeakMap,bt="function"==typeof yt&&/native code/.test(gt(yt)),wt=P((function(t){(t.exports=function(t,e){return dt[t]||(dt[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.4",mode:"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})})),xt=0,St=Math.random(),kt=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++xt+St).toString(36)},Ct=wt("keys"),Ot=function(t){return Ct[t]||(Ct[t]=kt(t))},Mt={},Tt=z.WeakMap;if(bt){var _t=new Tt,At=_t.get,Nt=_t.has,Et=_t.set;ft=function(t,e){return Et.call(_t,t,e),e},vt=function(t){return At.call(_t,t)||{}},mt=function(t){return Nt.call(_t,t)}}else{var Rt=Ot("state");Mt[Rt]=!0,ft=function(t,e){return pt(t,Rt,e),e},vt=function(t){return tt(t,Rt)?t[Rt]:{}},mt=function(t){return tt(t,Rt)}}var Dt={set:ft,get:vt,has:mt,enforce:function(t){return mt(t)?vt(t):ft(t,{})},getterFor:function(t){return function(e){var n;if(!Y(e)||(n=vt(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},It=P((function(t){var e=Dt.get,n=Dt.enforce,r=String(String).split("String");(t.exports=function(t,e,o,i){var s=!!i&&!!i.unsafe,a=!!i&&!!i.enumerable,l=!!i&&!!i.noTargetGet;"function"==typeof o&&("string"!=typeof e||tt(o,"name")||pt(o,"name",e),n(o).source=r.join("string"==typeof e?e:"")),t!==z?(s?!l&&t[e]&&(a=!0):delete t[e],a?t[e]=o:pt(t,e,o)):a?t[e]=o:ut(e,o)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||gt(this)}))})),Pt=z,$t=function(t){return"function"==typeof t?t:void 0},Lt=function(t,e){return arguments.length<2?$t(Pt[t])||$t(z[t]):Pt[t]&&Pt[t][e]||z[t]&&z[t][e]},zt=Math.ceil,Bt=Math.floor,jt=function(t){return isNaN(t=+t)?0:(t>0?Bt:zt)(t)},Vt=Math.min,Ft=function(t){return t>0?Vt(jt(t),9007199254740991):0},Ht=Math.max,qt=Math.min,Wt=function(t,e){var n=jt(t);return n<0?Ht(n+e,0):qt(n,e)},Jt=function(t){return function(e,n,r){var o,i=X(e),s=Ft(i.length),a=Wt(r,s);if(t&&n!=n){for(;s>a;)if((o=i[a++])!=o)return!0}else for(;s>a;a++)if((t||a in i)&&i[a]===n)return t||a||0;return!t&&-1}},Kt={includes:Jt(!0),indexOf:Jt(!1)},Ut=Kt.indexOf,Gt=function(t,e){var n,r=X(t),o=0,i=[];for(n in r)!tt(Mt,n)&&tt(r,n)&&i.push(n);for(;e.length>o;)tt(r,n=e[o++])&&(~Ut(i,n)||i.push(n));return i},Xt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Yt=Xt.concat("length","prototype"),Zt={f:Object.getOwnPropertyNames||function(t){return Gt(t,Yt)}},Qt={f:Object.getOwnPropertySymbols},te=Lt("Reflect","ownKeys")||function(t){var e=Zt.f(at(t)),n=Qt.f;return n?e.concat(n(t)):e},ee=function(t,e){for(var n=te(e),r=ct.f,o=st.f,i=0;i<n.length;i++){var s=n[i];tt(t,s)||r(t,s,o(e,s))}},ne=/#|\.prototype\./,re=function(t,e){var n=ie[oe(t)];return n==ae||n!=se&&("function"==typeof e?B(e):!!e)},oe=re.normalize=function(t){return String(t).replace(ne,".").toLowerCase()},ie=re.data={},se=re.NATIVE="N",ae=re.POLYFILL="P",le=re,ce=st.f,pe=function(t,e){var n,r,o,i,s,a=t.target,l=t.global,c=t.stat;if(n=l?z:c?z[a]||ut(a,{}):(z[a]||{}).prototype)for(r in e){if(i=e[r],o=t.noTargetGet?(s=ce(n,r))&&s.value:n[r],!le(l?r:a+(c?".":"#")+r,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;ee(i,o)}(t.sham||o&&o.sham)&&pt(i,"sham",!0),It(n,r,i,t)}},ue=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},de=function(t){return Object(G(t))},he=Array.isArray||function(t){return"Array"==J(t)},fe=!!Object.getOwnPropertySymbols&&!B((function(){return!String(Symbol())})),ve=fe&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,me=wt("wks"),ge=z.Symbol,ye=ve?ge:ge&&ge.withoutSetter||kt,be=function(t){return tt(me,t)||(fe&&tt(ge,t)?me[t]=ge[t]:me[t]=ye("Symbol."+t)),me[t]},we=be("species"),xe=function(t,e){var n;return he(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!he(n.prototype)?Y(n)&&null===(n=n[we])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},Se=[].push,ke=function(t){var e=1==t,n=2==t,r=3==t,o=4==t,i=6==t,s=5==t||i;return function(a,l,c,p){for(var u,d,h=de(a),f=U(h),v=function(t,e,n){return ue(t),void 0===e?t:function(n,r,o){return t.call(e,n,r,o)}}(l,c),m=Ft(f.length),g=0,y=p||xe,b=e?y(a,m):n?y(a,0):void 0;m>g;g++)if((s||g in f)&&(d=v(u=f[g],g,h),t))if(e)b[g]=d;else if(d)switch(t){case 3:return!0;case 5:return u;case 6:return g;case 2:Se.call(b,u)}else if(o)return!1;return i?-1:r||o?o:b}},Ce={forEach:ke(0),map:ke(1),filter:ke(2),some:ke(3),every:ke(4),find:ke(5),findIndex:ke(6)},Oe=function(t,e){var n=[][t];return!!n&&B((function(){n.call(null,e||function(){throw 1},1)}))},Me=Object.defineProperty,Te={},_e=function(t){throw t},Ae=function(t,e){if(tt(Te,t))return Te[t];e||(e={});var n=[][t],r=!!tt(e,"ACCESSORS")&&e.ACCESSORS,o=tt(e,0)?e[0]:_e,i=tt(e,1)?e[1]:void 0;return Te[t]=!!n&&!B((function(){if(r&&!j)return!0;var t={length:-1};r?Me(t,1,{enumerable:!0,get:_e}):t[1]=1,n.call(t,o,i)}))},Ne=Ce.forEach,Ee=Oe("forEach"),Re=Ae("forEach"),De=Ee&&Re?[].forEach:function(t){return Ne(this,t,arguments.length>1?arguments[1]:void 0)};pe({target:"Array",proto:!0,forced:[].forEach!=De},{forEach:De});var Ie,Pe,$e=function(t,e,n){var r=Z(e);r in t?ct.f(t,r,q(0,n)):t[r]=n},Le=Lt("navigator","userAgent")||"",ze=z.process,Be=ze&&ze.versions,je=Be&&Be.v8;je?Pe=(Ie=je.split("."))[0]+Ie[1]:Le&&(!(Ie=Le.match(/Edge\/(\d+)/))||Ie[1]>=74)&&(Ie=Le.match(/Chrome\/(\d+)/))&&(Pe=Ie[1]);var Ve=Pe&&+Pe,Fe=be("species"),He=function(t){return Ve>=51||!B((function(){var e=[];return(e.constructor={})[Fe]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},qe=He("slice"),We=Ae("slice",{ACCESSORS:!0,0:0,1:2}),Je=be("species"),Ke=[].slice,Ue=Math.max;pe({target:"Array",proto:!0,forced:!qe||!We},{slice:function(t,e){var n,r,o,i=X(this),s=Ft(i.length),a=Wt(t,s),l=Wt(void 0===e?s:e,s);if(he(i)&&("function"!=typeof(n=i.constructor)||n!==Array&&!he(n.prototype)?Y(n)&&null===(n=n[Je])&&(n=void 0):n=void 0,n===Array||void 0===n))return Ke.call(i,a,l);for(r=new(void 0===n?Array:n)(Ue(l-a,0)),o=0;a<l;a++,o++)a in i&&$e(r,o,i[a]);return r.length=o,r}});var Ge,Xe=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return at(n),function(t){if(!Y(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),Ye=Object.keys||function(t){return Gt(t,Xt)},Ze=j?Object.defineProperties:function(t,e){at(t);for(var n,r=Ye(e),o=r.length,i=0;o>i;)ct.f(t,n=r[i++],e[n]);return t},Qe=Lt("document","documentElement"),tn=Ot("IE_PROTO"),en=function(){},nn=function(t){return"<script>"+t+"<\/script>"},rn=function(){try{Ge=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;rn=Ge?function(t){t.write(nn("")),t.close();var e=t.parentWindow.Object;return t=null,e}(Ge):((e=rt("iframe")).style.display="none",Qe.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(nn("document.F=Object")),t.close(),t.F);for(var n=Xt.length;n--;)delete rn.prototype[Xt[n]];return rn()};Mt[tn]=!0;var on=Object.create||function(t,e){var n;return null!==t?(en.prototype=at(t),n=new en,en.prototype=null,n[tn]=t):n=rn(),void 0===e?n:Ze(n,e)},sn="[\t\n\v\f\r \u2028\u2029\ufeff]",an=RegExp("^"+sn+sn+"*"),ln=RegExp(sn+sn+"*$"),cn=function(t){return function(e){var n=String(G(e));return 1&t&&(n=n.replace(an,"")),2&t&&(n=n.replace(ln,"")),n}},pn={start:cn(1),end:cn(2),trim:cn(3)},un=Zt.f,dn=st.f,hn=ct.f,fn=pn.trim,vn=z.Number,mn=vn.prototype,gn="Number"==J(on(mn)),yn=function(t){var e,n,r,o,i,s,a,l,c=Z(t,!1);if("string"==typeof c&&c.length>2)if(43===(e=(c=fn(c)).charCodeAt(0))||45===e){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+c}for(s=(i=c.slice(2)).length,a=0;a<s;a++)if((l=i.charCodeAt(a))<48||l>o)return NaN;return parseInt(i,r)}return+c};if(le("Number",!vn(" 0o1")||!vn("0b1")||vn("+0x1"))){for(var bn,wn=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof wn&&(gn?B((function(){mn.valueOf.call(n)})):"Number"!=J(n))?function(t,e,n){var r,o;return Xe&&"function"==typeof(r=e.constructor)&&r!==n&&Y(o=r.prototype)&&o!==n.prototype&&Xe(t,o),t}(new vn(yn(e)),n,wn):yn(e)},xn=j?un(vn):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),Sn=0;xn.length>Sn;Sn++)tt(vn,bn=xn[Sn])&&!tt(wn,bn)&&hn(wn,bn,dn(vn,bn));wn.prototype=mn,mn.constructor=wn,It(z,"Number",wn)}var kn={};kn[be("toStringTag")]="z";var Cn="[object z]"===String(kn),On=be("toStringTag"),Mn="Arguments"==J(function(){return arguments}()),Tn=Cn?J:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),On))?n:Mn?J(e):"Object"==(r=J(e))&&"function"==typeof e.callee?"Arguments":r},_n=Cn?{}.toString:function(){return"[object "+Tn(this)+"]"};Cn||It(Object.prototype,"toString",_n,{unsafe:!0});var An=function(){var t=at(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},Nn=RegExp.prototype,En=Nn.toString,Rn=B((function(){return"/a/b"!=En.call({source:"a",flags:"b"})})),Dn="toString"!=En.name;(Rn||Dn)&&It(RegExp.prototype,"toString",(function(){var t=at(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in Nn)?An.call(t):n)}),{unsafe:!0});var In={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var Pn in In){var $n=z[Pn],Ln=$n&&$n.prototype;if(Ln&&Ln.forEach!==De)try{pt(Ln,"forEach",De)}catch(rr){Ln.forEach=De}}function zn(t){return(zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bn(t,e,n){(n?Reflect.getOwnMetadataKeys(e,n):Reflect.getOwnMetadataKeys(e)).forEach((function(r){var o=n?Reflect.getOwnMetadata(r,e,n):Reflect.getOwnMetadata(r,e);n?Reflect.defineMetadata(r,o,t,n):Reflect.defineMetadata(r,o,t)}))}var jn={__proto__:[]}instanceof Array;function Vn(t){return function(e,n,r){var o="function"==typeof e?e:e.constructor;o.__decorators__||(o.__decorators__=[]),"number"!=typeof r&&(r=void 0),o.__decorators__.push((function(e){return t(e,n,r)}))}}function Fn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return o.a.extend({mixins:e})}var Hn=["data","beforeCreate","created","beforeMount","mounted","beforeDestroy","destroyed","beforeUpdate","updated","activated","deactivated","render","errorCaptured","serverPrefetch"];function qn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.name=e.name||t._componentTag||t.name;var n=t.prototype;Object.getOwnPropertyNames(n).forEach((function(t){if("constructor"!==t)if(Hn.indexOf(t)>-1)e[t]=n[t];else{var r=Object.getOwnPropertyDescriptor(n,t);void 0!==r.value?"function"==typeof r.value?(e.methods||(e.methods={}))[t]=r.value:(e.mixins||(e.mixins=[])).push({data:function(){return function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},t,r.value)}}):(r.get||r.set)&&((e.computed||(e.computed={}))[t]={get:r.get,set:r.set})}})),(e.mixins||(e.mixins=[])).push({data:function(){return function(t,e){var n=e.prototype._init;e.prototype._init=function(){var e=this,n=Object.getOwnPropertyNames(t);if(t.$options.props)for(var r in t.$options.props)t.hasOwnProperty(r)||n.push(r);n.forEach((function(n){"_"!==n.charAt(0)&&Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){t[n]=e},configurable:!0})}))};var r=new e;e.prototype._init=n;var o={};return Object.keys(r).forEach((function(t){void 0!==r[t]&&(o[t]=r[t])})),o}(this,t)}});var r=t.__decorators__;r&&(r.forEach((function(t){return t(e)})),delete t.__decorators__);var i,s,a=Object.getPrototypeOf(t.prototype),l=a instanceof o.a?a.constructor:o.a,c=l.extend(e);return function(t,e,n){Object.getOwnPropertyNames(e).forEach((function(r){if(!Wn[r]){var o=Object.getOwnPropertyDescriptor(t,r);if(!o||o.configurable){var i,s,a=Object.getOwnPropertyDescriptor(e,r);if(!jn){if("cid"===r)return;var l=Object.getOwnPropertyDescriptor(n,r);if(s=zn(i=a.value),null!=i&&("object"===s||"function"===s)&&l&&l.value===a.value)return}Object.defineProperty(t,r,a)}}}))}(c,t,l),"undefined"!=typeof Reflect&&Reflect.defineMetadata&&Reflect.getOwnMetadataKeys&&(Bn(i=c,s=t),Object.getOwnPropertyNames(s.prototype).forEach((function(t){Bn(i.prototype,s.prototype,t)})),Object.getOwnPropertyNames(s).forEach((function(t){Bn(i,s,t)}))),c}var Wn={prototype:!0,arguments:!0,callee:!0,caller:!0};function Jn(t){return"function"==typeof t?qn(t):function(e){return qn(e,t)}}Jn.registerHooks=function(t){Hn.push.apply(Hn,function(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(t))};var Kn="undefined"!=typeof Reflect&&void 0!==Reflect.getMetadata;function Un(t){return void 0===t&&(t={}),function(e,n){!function(t,e,n){Kn&&(Array.isArray(t)||"function"==typeof t||void 0!==t.type||(t.type=Reflect.getMetadata("design:type",e,n)))}(t,e,n),Vn((function(e,n){(e.props||(e.props={}))[n]=t}))(e,n)}}function Gn(t,e){void 0===e&&(e={});var n=e.deep,r=void 0!==n&&n,o=e.immediate,i=void 0!==o&&o;return Vn((function(e,n){"object"!=typeof e.watch&&(e.watch=Object.create(null));var o=e.watch;"object"!=typeof o[t]||Array.isArray(o[t])?void 0===o[t]&&(o[t]=[]):o[t]=[o[t]],o[t].push({handler:n,deep:r,immediate:i})}))}var Xn={color:"grey lighten-4",flat:!0,dense:!0},Yn=function(){function t(t){this.text=t}return t.prototype.toString=function(){return this.text},t}(),Zn=ct.f,Qn=Function.prototype,tr=Qn.toString,er=/^\s*function ([^ (]*)/;!j||"name"in Qn||Zn(Qn,"name",{configurable:!0,get:function(){try{return tr.call(this).match(er)[1]}catch(t){return""}}});var nr,rr,or=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t}(),ir={VALUE:"value",EXTENSIONS:"extensions",TOOLBAR_ATTRIBUTES:"toolbarAttributes",EDITOR_PROPERTIES:"editorProperties",NATIVE_EXTENSIONS:"nativeExtensions",PLACEHOLDER:"placeholder",CARD_PROPS:"cardProps",OUTPUT_FORMAT:"outputFormat",TYPE:"type",MIN_HEIGHT:"minHeight",MAX_HEIGHT:"maxHeight",DISABLED:"disabled"};(rr=nr||(nr={})).card="card",rr.inline="inline";var sr=new(function(){function t(){}return t.prototype.warn=function(t){console.warn("tiptap-vuetify: "+t)},t.prototype.error=function(t){console.error("tiptap-vuetify: "+t)},t}()),ar={EDITOR:"editor",OPTIONS:"options",CONTEXT:"context",DARK:"dark",DISABLED:"disabled"},lr=function(t,e,n,r,o,i,s,a,l,c){"boolean"!=typeof s&&(l=a,a=s,s=!1);var p,u="function"==typeof n?n.options:n;if(t&&t.render&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0,o&&(u.functional=!0)),r&&(u._scopeId=r),i?(p=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(i)},u._ssrRegister=p):e&&(p=s?function(){e.call(this,c(this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),p)if(u.functional){var d=u.render;u.render=function(t,e){return p.call(e),d(t,e)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,p):[p]}return n},cr=lr({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-btn",t._g({class:{"tiptap-vuetify-editor__action-render-btn":!0,"v-btn--active":t.$props[t.PROPS.OPTIONS].isActive(t.$props[t.PROPS.CONTEXT])},attrs:{disabled:t.disabled,dark:t.$props[t.PROPS.DARK],small:"",icon:""},on:{click:function(e){return t.options.onClick({context:t.$props[t.PROPS.CONTEXT],editor:t.$props[t.PROPS.EDITOR]})}}},r),[n(t.isTextIcon?"b":t.isVuetifyIcon?"v-icon":null,{tag:"component",staticClass:"tiptap-vuetify-editor__btn-icon"},[t._v("\n        "+t._s(t.buttonIcon)+"\n      ")])],1)]}}])},[t._v(" "),[t._v(t._s(t.tooltipText))]],2)},staticRenderFns:[]},void 0,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PROPS=ar,e}var n,r,o,c,p;return M(e,t),Object.defineProperty(e.prototype,"buttonIcon",{get:function(){return this[ar.OPTIONS].icons[this.$tiptapVuetify.iconsGroup]||(sr.warn("No icon was provided in extension options."),"No icon")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isTextIcon",{get:function(){return this.buttonIcon instanceof Yn},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVuetifyIcon",{get:function(){return this.buttonIcon instanceof or},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipText",{get:function(){var t=this.$props[ar.OPTIONS].tooltip;return"function"==typeof t?t(this.$props[ar.CONTEXT],this.$props[ar.OPTIONS]):t},enumerable:!0,configurable:!0}),n=ar.DISABLED,r=ar.EDITOR,o=ar.OPTIONS,c=ar.CONTEXT,p=ar.DARK,_([Un({type:Boolean,default:!1}),A("design:type",Boolean)],e.prototype,n,void 0),_([Un({type:Object,required:!0}),A("design:type",i.a)],e.prototype,r,void 0),_([Un({type:Object,required:!0}),A("design:type",Object)],e.prototype,o,void 0),_([Un({type:Object,required:!0}),A("design:type",Object)],e.prototype,c,void 0),_([Un({type:Boolean,default:!1}),A("design:type",Boolean)],e.prototype,p,void 0),_([Jn({components:{VTooltip:s.a,VBtn:a.a,VIcon:l.a}})],e)}(o.a),void 0,!1,void 0,void 0,void 0),pr=function(t){var e=t.nativeExtensionName;this.options=T({onClick:function(n){n.context.commands[e](t.onClickOptions)},isActive:function(n){var r=n.isActive;return!!r[e]&&r[e](t.isActiveOptions)}},t)},ur={EDITOR:"editor",ACTIONS:"actions",CONTEXT:"context",DARK:"dark",DISABLED:"disabled"},dr=lr({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._l(t.$props[t.PROPS.ACTIONS],(function(e,r){return[t.isBtn(e)?n("action-btn",{key:"action-button-"+r,attrs:{options:e.render.options,context:t.$props[t.PROPS.CONTEXT],editor:t.$props[t.PROPS.EDITOR],dark:t.$props[t.PROPS.DARK],disabled:t.$props[t.PROPS.DISABLED]}}):t._e()]}))],2)},staticRenderFns:[]},void 0,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PROPS=ur,e}var n,r,o,s,a;return M(e,t),e.prototype.isBtn=function(t){return t.render instanceof pr},n=ur.EDITOR,r=ur.DISABLED,o=ur.ACTIONS,s=ur.CONTEXT,a=ur.DARK,_([Un({type:Object,required:!0}),A("design:type",i.a)],e.prototype,n,void 0),_([Un({type:Boolean,default:!1}),A("design:type",Boolean)],e.prototype,r,void 0),_([Un({type:Array,default:function(){return[]}}),A("design:type",Array)],e.prototype,o,void 0),_([Un({type:Object}),A("design:type",Object)],e.prototype,s,void 0),_([Un({type:Boolean,default:!1}),A("design:type",Boolean)],e.prototype,a,void 0),_([Jn({components:{"action-btn":cr}})],e)}(o.a),void 0,!1,void 0,void 0,void 0),hr=lr({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tiptap-vuetify-editor__toolbar"},[n("editor-menu-bar",{attrs:{editor:t.editor},scopedSlots:t._u([{key:"default",fn:function(e){return[t._t("default",[n("v-toolbar",t._b({},"v-toolbar",Object.assign({},t.toolbarConfig,t.toolbarAttributes),!1),[n("actions-render",{attrs:{actions:t.actions,context:e,editor:t.editor,disabled:t.disabled}})],1)],{isActive:e.isActive,commands:e.commands})]}}],null,!0)})],1)},staticRenderFns:[]},void 0,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.toolbarConfig=Xn,e}return M(e,t),_([Un({type:Boolean,default:!1}),A("design:type",Boolean)],e.prototype,"disabled",void 0),_([Un({type:Object,required:!0}),A("design:type",i.a)],e.prototype,"editor",void 0),_([Un({type:Array,default:function(){return[]}}),A("design:type",Array)],e.prototype,"actions",void 0),_([Un({type:[Array,Object],default:function(){return{}}}),A("design:type",Object)],e.prototype,"toolbarAttributes",void 0),_([Jn({components:{ActionsRender:dr,EditorMenuBar:i.c,VToolbar:c.a}})],e)}(o.a),void 0,!1,void 0,void 0,void 0),fr=function(t){return function(e,n,r,o){ue(n);var i=de(e),s=U(i),a=Ft(i.length),l=t?a-1:0,c=t?-1:1;if(r<2)for(;;){if(l in s){o=s[l],l+=c;break}if(l+=c,t?l<0:a<=l)throw TypeError("Reduce of empty array with no initial value")}for(;t?l>=0:a>l;l+=c)l in s&&(o=n(o,s[l],l,i));return o}},vr=[fr(!1),fr(!0)][0],mr=Oe("reduce"),gr=Ae("reduce",{1:0});function yr(t,e){return RegExp(t,e)}pe({target:"Array",proto:!0,forced:!mr||!gr},{reduce:function(t){return vr(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}});var br,wr,xr={UNSUPPORTED_Y:B((function(){var t=yr("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),BROKEN_CARET:B((function(){var t=yr("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},Sr=RegExp.prototype.exec,kr=String.prototype.replace,Cr=Sr,Or=(br=/a/,wr=/b*/g,Sr.call(br,"a"),Sr.call(wr,"a"),0!==br.lastIndex||0!==wr.lastIndex),Mr=xr.UNSUPPORTED_Y||xr.BROKEN_CARET,Tr=void 0!==/()??/.exec("")[1];(Or||Tr||Mr)&&(Cr=function(t){var e,n,r,o,i=this,s=Mr&&i.sticky,a=An.call(i),l=i.source,c=0,p=t;return s&&(-1===(a=a.replace("y","")).indexOf("g")&&(a+="g"),p=String(t).slice(i.lastIndex),i.lastIndex>0&&(!i.multiline||i.multiline&&"\n"!==t[i.lastIndex-1])&&(l="(?: "+l+")",p=" "+p,c++),n=new RegExp("^(?:"+l+")",a)),Tr&&(n=new RegExp("^"+l+"$(?!\\s)",a)),Or&&(e=i.lastIndex),r=Sr.call(s?n:i,p),s?r?(r.input=r.input.slice(c),r[0]=r[0].slice(c),r.index=i.lastIndex,i.lastIndex+=r[0].length):i.lastIndex=0:Or&&r&&(i.lastIndex=i.global?r.index+r[0].length:e),Tr&&r&&r.length>1&&kr.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r});var _r=Cr;pe({target:"RegExp",proto:!0,forced:/./.exec!==_r},{exec:_r});var Ar=be("species"),Nr=(B((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),"a".replace(/./,"$0"),be("replace")),Er=(!!/./[Nr]&&/./[Nr]("a","$0"),!B((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}))),Rr=be("match"),Dr=function(t){var e;return Y(t)&&(void 0!==(e=t[Rr])?!!e:"RegExp"==J(t))},Ir=be("species"),Pr=function(t){return function(e,n){var r,o,i=String(G(e)),s=jt(n),a=i.length;return s<0||s>=a?t?"":void 0:(r=i.charCodeAt(s))<55296||r>56319||s+1===a||(o=i.charCodeAt(s+1))<56320||o>57343?t?i.charAt(s):r:t?i.slice(s,s+2):o-56320+(r-55296<<10)+65536}},$r=(Pr(!1),Pr(!0)),Lr=function(t,e,n){return e+(n?$r(t,e).length:1)},zr=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==J(t))throw TypeError("RegExp#exec called on incompatible receiver");return _r.call(t,e)},Br=[].push,jr=Math.min,Vr=!B((function(){return!RegExp(4294967295,"y")}));!function(t,e,n,r){var o=be(t),i=!B((function(){var e={};return e[o]=function(){return 7},7!=""[t](e)})),s=i&&!B((function(){var t=!1,e=/a/;return(e={}).constructor={},e.constructor[Ar]=function(){return e},e.flags="",e[o]=/./[o],e.exec=function(){return t=!0,null},e[o](""),!t}));if(!i||!s||!Er){var a=/./[o],l=function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(G(this)),o=void 0===n?4294967295:n>>>0;if(0===o)return[];if(void 0===t)return[r];if(!Dr(t))return e.call(r,t,o);for(var i,s,a,l=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,u=new RegExp(t.source,c+"g");(i=_r.call(u,r))&&!((s=u.lastIndex)>p&&(l.push(r.slice(p,i.index)),i.length>1&&i.index<r.length&&Br.apply(l,i.slice(1)),a=i[0].length,p=s,l.length>=o));)u.lastIndex===i.index&&u.lastIndex++;return p===r.length?!a&&u.test("")||l.push(""):l.push(r.slice(p)),l.length>o?l.slice(0,o):l}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var o=G(this),i=null==e?void 0:e[t];return void 0!==i?i.call(e,o,n):r.call(String(o),e,n)},function(t,o){var i=n(r,t,this,o,r!==e);if(i.done)return i.value;var s=at(t),a=String(this),l=function(t,e){var n,r=at(t).constructor;return void 0===r||null==(n=at(r)[Ir])?e:ue(n)}(s,RegExp),c=s.unicode,p=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(Vr?"y":"g"),u=new l(Vr?s:"^(?:"+s.source+")",p),d=void 0===o?4294967295:o>>>0;if(0===d)return[];if(0===a.length)return null===zr(u,a)?[a]:[];for(var h=0,f=0,v=[];f<a.length;){u.lastIndex=Vr?f:0;var m,g=zr(u,Vr?a:a.slice(f));if(null===g||(m=jr(Ft(u.lastIndex+(Vr?0:f)),a.length))===h)f=Lr(a,f,c);else{if(v.push(a.slice(h,f)),v.length===d)return v;for(var y=1;y<=g.length-1;y++)if(v.push(g[y]),v.length===d)return v;f=h=m}}return v.push(a.slice(h)),v}]}(o,""[t],(function(t,e,n,r,o){return e.exec===_r?i&&!o?{done:!0,value:a.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}})),c=l[0],p=l[1];It(String.prototype,t,c),It(RegExp.prototype,o,(function(t,e){return p.call(t,this,e)}))}r&&pt(RegExp.prototype[o],"sham",!0)}("split",0,0,!Vr);var Fr="en",Hr={en:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:"Block quote"}}},Bold:{buttons:{bold:{tooltip:"Bold"}}},BulletList:{buttons:{bulletList:{tooltip:"Bulleted list"}}},Code:{buttons:{code:{tooltip:"Code"}}},CodeBlock:{buttons:{codeBlock:{tooltip:"Code block"}}},History:{buttons:{undo:{tooltip:"Undo"},redo:{tooltip:"Redo"}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:"Horizontal line"}}},Italic:{buttons:{italic:{tooltip:"Italic"}}},OrderedList:{buttons:{orderedList:{tooltip:"Ordered list"}}},Paragraph:{buttons:{paragraph:{tooltip:"Paragraph"}}},Strike:{buttons:{strike:{tooltip:"Strike"}}},Underline:{buttons:{underline:{tooltip:"Underline"}}},Heading:{buttons:{heading:{tooltip:function(t){return t.level+" level header"}}}},Link:{buttons:{isActive:{tooltip:"Change Link"},notActive:{tooltip:"Add Link"}},window:{title:"Link control",form:{hrefLabel:"URL"},buttons:{close:"Close",remove:"Remove",apply:"Apply"}}},Image:{buttons:{tooltip:"Image"},window:{title:"Add Image",form:{sourceLink:"Image URL",altText:"Alternative Text",addImage:"Add Image"},imageUpload:{instruction:"Choose a file(s) or drag it here."},buttons:{close:"Close",apply:"Apply"}}},TodoList:{buttons:{todoList:{tooltip:"To Do List"}}}}},ru:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:" "}}},Bold:{buttons:{bold:{tooltip:""}}},BulletList:{buttons:{bulletList:{tooltip:" "}}},Code:{buttons:{code:{tooltip:""}}},CodeBlock:{buttons:{codeBlock:{tooltip:" "}}},History:{buttons:{undo:{tooltip:""},redo:{tooltip:""}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:" "}}},Italic:{buttons:{italic:{tooltip:""}}},OrderedList:{buttons:{orderedList:{tooltip:" "}}},Paragraph:{buttons:{paragraph:{tooltip:""}}},Strike:{buttons:{strike:{tooltip:""}}},Underline:{buttons:{underline:{tooltip:""}}},Heading:{buttons:{heading:{tooltip:function(t){return" "+t.level+" "}}}},Link:{buttons:{isActive:{tooltip:" "},notActive:{tooltip:" "}},window:{title:" ",form:{hrefLabel:"Href"},buttons:{close:"",remove:"",apply:""}}},Image:{buttons:{tooltip:""},window:{title:" ",form:{sourceLink:"  "},buttons:{close:"",apply:""}}}}},es:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:"Cita en bloque"}}},Bold:{buttons:{bold:{tooltip:"Texto en negrita"}}},BulletList:{buttons:{bulletList:{tooltip:"Lista no ordenada"}}},Code:{buttons:{code:{tooltip:"Cdigo"}}},CodeBlock:{buttons:{codeBlock:{tooltip:"Bloque de cdigo"}}},History:{buttons:{undo:{tooltip:"Deshacer"},redo:{tooltip:"Rehacer"}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:"Lnea horizontal"}}},Italic:{buttons:{italic:{tooltip:"Texto en cursiva"}}},OrderedList:{buttons:{orderedList:{tooltip:"Lista ordenada"}}},Paragraph:{buttons:{paragraph:{tooltip:"Prrafo"}}},Strike:{buttons:{strike:{tooltip:"Tachar texto"}}},Underline:{buttons:{underline:{tooltip:"Subrayar texto"}}},Heading:{buttons:{heading:{tooltip:function(t){return"Nivel de encabezado "+t.level}}}},Link:{buttons:{isActive:{tooltip:"Actualizar enlace"},notActive:{tooltip:"Aadir enlace"}},window:{title:"Control de enlace",form:{hrefLabel:"Href"},buttons:{close:"Cerrar",remove:"Eliminar",apply:"Aplicar"}}},Image:{buttons:{tooltip:"Imagen"},window:{title:"Agregar Imagen",form:{sourceLink:"URL de la Imagen"},buttons:{close:"Cerrar",apply:"Aplicar"}}}}},pl:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:"Blok cytatu"}}},Bold:{buttons:{bold:{tooltip:"Pogrubienie"}}},BulletList:{buttons:{bulletList:{tooltip:"Lista punktw"}}},Code:{buttons:{code:{tooltip:"Kod"}}},CodeBlock:{buttons:{codeBlock:{tooltip:"Blok kodu"}}},History:{buttons:{undo:{tooltip:"Cofnij"},redo:{tooltip:"Ponw"}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:"Linia pozioma"}}},Italic:{buttons:{italic:{tooltip:"Kursywa"}}},OrderedList:{buttons:{orderedList:{tooltip:"Lista numerowana"}}},Paragraph:{buttons:{paragraph:{tooltip:"Paragraf"}}},Strike:{buttons:{strike:{tooltip:"Przekrelenie"}}},Underline:{buttons:{underline:{tooltip:"Podkrelenie"}}},Heading:{buttons:{heading:{tooltip:function(t){return"Nagwek "+t.level}}}},Link:{buttons:{isActive:{tooltip:"Zaktualizuj odnonik"},notActive:{tooltip:"Dodaj odnonik"}},window:{title:"Odnonik",form:{hrefLabel:"Adres URL"},buttons:{close:"Zamknij",remove:"Usu",apply:"Zastosuj"}}},Image:{buttons:{tooltip:"Obrazek"},window:{title:"Dodaj obrazek",form:{sourceLink:"Adres URL obrazka"},buttons:{close:"Zamknij",apply:"Zastosuj"}}}}},fr:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:"Bloc de citation"}}},Bold:{buttons:{bold:{tooltip:"Gras"}}},BulletList:{buttons:{bulletList:{tooltip:"Liste  puce"}}},Code:{buttons:{code:{tooltip:"Code"}}},CodeBlock:{buttons:{codeBlock:{tooltip:"Bloc de code"}}},History:{buttons:{undo:{tooltip:"Annuler"},redo:{tooltip:"Rtablir"}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:"Ligne horizontale"}}},Italic:{buttons:{italic:{tooltip:"Italique"}}},OrderedList:{buttons:{orderedList:{tooltip:"Liste ordonne"}}},Paragraph:{buttons:{paragraph:{tooltip:"Paragraphe"}}},Strike:{buttons:{strike:{tooltip:"Barr"}}},Underline:{buttons:{underline:{tooltip:"Soulign"}}},Heading:{buttons:{heading:{tooltip:function(t){return"Titre de niveau "+t.level}}}},Link:{buttons:{isActive:{tooltip:"Mise  jour du lien"},notActive:{tooltip:"Ajouter un lien"}},window:{title:"Ajout ou mise  jour d'un lien",form:{hrefLabel:"URL"},buttons:{close:"Fermer",remove:"Retirer",apply:"Appliquer"}}},Image:{buttons:{tooltip:"Image"},window:{title:"Ajouter une Image",form:{sourceLink:"Image URL",altText:"Texte alternatif",addImage:"Ajouter une image"},imageUpload:{instruction:"Slectionnez un fichier(s), ou glisser-dposser ii"},buttons:{close:"Fermer",apply:"Appliquer"}}},TodoList:{buttons:{todoList:{tooltip:"Liste de choses  faire"}}}}},uk:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:" "}}},Bold:{buttons:{bold:{tooltip:""}}},BulletList:{buttons:{bulletList:{tooltip:" "}}},Code:{buttons:{code:{tooltip:""}}},CodeBlock:{buttons:{codeBlock:{tooltip:" "}}},History:{buttons:{undo:{tooltip:""},redo:{tooltip:""}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:" "}}},Italic:{buttons:{italic:{tooltip:""}}},OrderedList:{buttons:{orderedList:{tooltip:" "}}},Paragraph:{buttons:{paragraph:{tooltip:""}}},Strike:{buttons:{strike:{tooltip:""}}},Underline:{buttons:{underline:{tooltip:""}}},Heading:{buttons:{heading:{tooltip:function(t){return" "+t.level+" "}}}},Link:{buttons:{isActive:{tooltip:" "},notActive:{tooltip:" "}},window:{title:" ",form:{hrefLabel:"Href"},buttons:{close:"",remove:"",apply:""}}}}},ptbr:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:"Bloco de citao"}}},Bold:{buttons:{bold:{tooltip:"Negrito"}}},BulletList:{buttons:{bulletList:{tooltip:"Lista de pontos"}}},Code:{buttons:{code:{tooltip:"Cdigo"}}},CodeBlock:{buttons:{codeBlock:{tooltip:"Bloco de cdigo"}}},History:{buttons:{undo:{tooltip:"Desfazer"},redo:{tooltip:"Refazer"}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:"Linha horizontal"}}},Italic:{buttons:{italic:{tooltip:"Itlico"}}},OrderedList:{buttons:{orderedList:{tooltip:"Lista ordenada"}}},Paragraph:{buttons:{paragraph:{tooltip:"Pargrafo"}}},Strike:{buttons:{strike:{tooltip:"Riscado"}}},Underline:{buttons:{underline:{tooltip:"Sublinhado"}}},Heading:{buttons:{heading:{tooltip:function(t){return"cabealho nvel "+t.level}}}},Link:{buttons:{isActive:{tooltip:"Mudar Link"},notActive:{tooltip:"Adicionar Link"}},window:{title:"Configurar link",form:{hrefLabel:"link"},buttons:{close:"Fechar",remove:"Remover",apply:"Aplicar"}}}}},tr:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:"Alnt"}}},Bold:{buttons:{bold:{tooltip:"Kaln"}}},BulletList:{buttons:{bulletList:{tooltip:"Liste"}}},Code:{buttons:{code:{tooltip:"Kod"}}},CodeBlock:{buttons:{codeBlock:{tooltip:"Kod Blou"}}},History:{buttons:{undo:{tooltip:"Geri"},redo:{tooltip:"leri"}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:"Yatay izgi"}}},Italic:{buttons:{italic:{tooltip:"talik"}}},OrderedList:{buttons:{orderedList:{tooltip:"Numaral Liste"}}},Paragraph:{buttons:{paragraph:{tooltip:"Paragraf"}}},Strike:{buttons:{strike:{tooltip:"st izili"}}},Underline:{buttons:{underline:{tooltip:"Alt izili"}}},Heading:{buttons:{heading:{tooltip:function(t){return t.level+" Balk"}}}},Link:{buttons:{isActive:{tooltip:"Link'i Dzenle"},notActive:{tooltip:"Link Ekle"}},window:{title:"Link Kontrol",form:{hrefLabel:"Adres"},buttons:{close:"Kapat",remove:"Sil",apply:"Uygula"}}}}},he:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:""}}},Bold:{buttons:{bold:{tooltip:""}}},BulletList:{buttons:{bulletList:{tooltip:"  "}}},Code:{buttons:{code:{tooltip:""}}},CodeBlock:{buttons:{codeBlock:{tooltip:" "}}},History:{buttons:{undo:{tooltip:""},redo:{tooltip:" "}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:" "}}},Italic:{buttons:{italic:{tooltip:""}}},OrderedList:{buttons:{orderedList:{tooltip:" "}}},Paragraph:{buttons:{paragraph:{tooltip:""}}},Strike:{buttons:{strike:{tooltip:" "}}},Underline:{buttons:{underline:{tooltip:" "}}},Heading:{buttons:{heading:{tooltip:function(t){return t.level+"  "}}}},Link:{buttons:{isActive:{tooltip:" "},notActive:{tooltip:" "}},window:{title:" ",form:{hrefLabel:""},buttons:{close:"",remove:"",apply:""}}}}},nl:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:"Citaatblok"}}},Bold:{buttons:{bold:{tooltip:"Vet"}}},BulletList:{buttons:{bulletList:{tooltip:"Opsomming tekens"}}},Code:{buttons:{code:{tooltip:"Code"}}},CodeBlock:{buttons:{codeBlock:{tooltip:"Code blok"}}},History:{buttons:{undo:{tooltip:"Ongedaan maken"},redo:{tooltip:"Opnieuw uitvoeren"}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:"Horizontale lijn"}}},Italic:{buttons:{italic:{tooltip:"Cursief"}}},OrderedList:{buttons:{orderedList:{tooltip:"Genummerde lijst"}}},Paragraph:{buttons:{paragraph:{tooltip:"Paragraaf"}}},Strike:{buttons:{strike:{tooltip:"Doorhalen"}}},Underline:{buttons:{underline:{tooltip:"Onderstrepen"}}},Heading:{buttons:{heading:{tooltip:function(t){return"Kop "+t.level}}}},Link:{buttons:{isActive:{tooltip:"Link wijzigigen"},notActive:{tooltip:"Link invoegen"}},window:{title:"Link controle",form:{hrefLabel:"Href"},buttons:{close:"Sluiten",remove:"Verwijderen",apply:"Toepassen"}}},Image:{buttons:{tooltip:"Afbeelding"},window:{title:"Afbeelding toevoegen",form:{sourceLink:"Afbeelding URL",altText:"Alternatieve Tekst"},imageUpload:{instruction:"Kies een of meerdere bestanden of sleep ze hiernaartoe."},buttons:{close:"Sluiten",apply:"Toepassen"}}}}},ja:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:""}}},Bold:{buttons:{bold:{tooltip:""}}},BulletList:{buttons:{bulletList:{tooltip:""}}},Code:{buttons:{code:{tooltip:""}}},CodeBlock:{buttons:{codeBlock:{tooltip:""}}},History:{buttons:{undo:{tooltip:""},redo:{tooltip:""}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:""}}},Italic:{buttons:{italic:{tooltip:""}}},OrderedList:{buttons:{orderedList:{tooltip:""}}},Paragraph:{buttons:{paragraph:{tooltip:""}}},Strike:{buttons:{strike:{tooltip:""}}},Underline:{buttons:{underline:{tooltip:""}}},Heading:{buttons:{heading:{tooltip:function(t){return" "+t.level}}}},Link:{buttons:{isActive:{tooltip:""},notActive:{tooltip:""}},window:{title:"",form:{hrefLabel:""},buttons:{close:"",remove:"",apply:""}}},Image:{buttons:{tooltip:""},window:{title:"",form:{sourceLink:"URL"},buttons:{close:"",apply:""}}}}},de:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:"Block Zitat"}}},Bold:{buttons:{bold:{tooltip:"Fett"}}},BulletList:{buttons:{bulletList:{tooltip:"Aufzhlungsliste"}}},Code:{buttons:{code:{tooltip:"Code"}}},CodeBlock:{buttons:{codeBlock:{tooltip:"Code Abschnitt"}}},History:{buttons:{undo:{tooltip:"Rckgngig"},redo:{tooltip:"Wiederherstellen"}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:"Horizontale Linie"}}},Italic:{buttons:{italic:{tooltip:"Kursiv"}}},OrderedList:{buttons:{orderedList:{tooltip:"Geordnete Liste"}}},Paragraph:{buttons:{paragraph:{tooltip:"Paragraph"}}},Strike:{buttons:{strike:{tooltip:"Durchgestrichen"}}},Underline:{buttons:{underline:{tooltip:"Unterstreichen"}}},Heading:{buttons:{heading:{tooltip:function(t){return t.level+" level berschrift"}}}},Link:{buttons:{isActive:{tooltip:"Link ndern"},notActive:{tooltip:"Link hinzufgen"}},window:{title:"Link Kontrolle",form:{hrefLabel:"Href"},buttons:{close:"Schlieen",remove:"Entfernen",apply:"bernehmen"}}},Image:{buttons:{tooltip:"Bild"},window:{title:"Bild hinzufgen",form:{sourceLink:"Bild URL"},buttons:{close:"Schlieen",apply:"bernehmen"}}}}},ko:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:""}}},Bold:{buttons:{bold:{tooltip:""}}},BulletList:{buttons:{bulletList:{tooltip:" "}}},Code:{buttons:{code:{tooltip:""}}},CodeBlock:{buttons:{codeBlock:{tooltip:" "}}},History:{buttons:{undo:{tooltip:" "},redo:{tooltip:"  "}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:""}}},Italic:{buttons:{italic:{tooltip:""}}},OrderedList:{buttons:{orderedList:{tooltip:" "}}},Paragraph:{buttons:{paragraph:{tooltip:""}}},Strike:{buttons:{strike:{tooltip:""}}},Underline:{buttons:{underline:{tooltip:""}}},Heading:{buttons:{heading:{tooltip:function(t){return" "+t.level}}}},Link:{buttons:{isActive:{tooltip:" "},notActive:{tooltip:" "}},window:{title:" ",form:{hrefLabel:""},buttons:{close:"",remove:"",apply:""}}},Image:{buttons:{tooltip:""},window:{title:" ",form:{sourceLink:" URL"},buttons:{close:"",apply:""}}}}},zh:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:""}}},Bold:{buttons:{bold:{tooltip:""}}},BulletList:{buttons:{bulletList:{tooltip:""}}},Code:{buttons:{code:{tooltip:""}}},CodeBlock:{buttons:{codeBlock:{tooltip:""}}},History:{buttons:{undo:{tooltip:""},redo:{tooltip:""}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:""}}},Italic:{buttons:{italic:{tooltip:""}}},OrderedList:{buttons:{orderedList:{tooltip:""}}},Paragraph:{buttons:{paragraph:{tooltip:""}}},Strike:{buttons:{strike:{tooltip:""}}},Underline:{buttons:{underline:{tooltip:""}}},Heading:{buttons:{heading:{tooltip:function(t){return t.level+"  "}}}},Link:{buttons:{isActive:{tooltip:""},notActive:{tooltip:""}},window:{title:"",form:{hrefLabel:""},buttons:{close:"",remove:"",apply:""}}},Image:{buttons:{tooltip:""},window:{title:"",form:{sourceLink:""},buttons:{close:"",apply:""}}}}},fa:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:" "}}},Bold:{buttons:{bold:{tooltip:""}}},BulletList:{buttons:{bulletList:{tooltip:" "}}},Code:{buttons:{code:{tooltip:""}}},CodeBlock:{buttons:{codeBlock:{tooltip:" "}}},History:{buttons:{undo:{tooltip:""},redo:{tooltip:""}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:" "}}},Italic:{buttons:{italic:{tooltip:""}}},OrderedList:{buttons:{orderedList:{tooltip:"  "}}},Paragraph:{buttons:{paragraph:{tooltip:""}}},Strike:{buttons:{strike:{tooltip:" "}}},Underline:{buttons:{underline:{tooltip:" "}}},Heading:{buttons:{heading:{tooltip:function(t){return t.level+"  "}}}},Link:{buttons:{isActive:{tooltip:"  "},notActive:{tooltip:" "}},window:{title:" ",form:{hrefLabel:""},buttons:{close:"",remove:"",apply:""}}},Image:{buttons:{tooltip:""},window:{title:" ",or:"OR",form:{sourceLink:" "},buttons:{close:"",apply:""}}},TodoList:{buttons:{todoList:{tooltip:" "}}}}},sv:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:"Blockcitat"}}},Bold:{buttons:{bold:{tooltip:"Fet"}}},BulletList:{buttons:{bulletList:{tooltip:"Punktlista"}}},Code:{buttons:{code:{tooltip:"Kod"}}},CodeBlock:{buttons:{codeBlock:{tooltip:"Kodblock"}}},History:{buttons:{undo:{tooltip:"ngra"},redo:{tooltip:"Gr om"}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:"Horisontell linje"}}},Italic:{buttons:{italic:{tooltip:"Kursiv"}}},OrderedList:{buttons:{orderedList:{tooltip:"Nummerlista"}}},Paragraph:{buttons:{paragraph:{tooltip:"Stycke"}}},Strike:{buttons:{strike:{tooltip:"Genomstruken"}}},Underline:{buttons:{underline:{tooltip:"Understruken"}}},Heading:{buttons:{heading:{tooltip:function(t){return"Rubrikniv "+t.level}}}},Link:{buttons:{isActive:{tooltip:"ndra lnk"},notActive:{tooltip:"Lgg till lnk"}},window:{title:"Lnkinstllningar",form:{hrefLabel:"Href"},buttons:{close:"Stng",remove:"Ta bort",apply:"Applicera"}}},Image:{buttons:{tooltip:"Bild"},window:{title:"Lgg till bild",or:"ELLER",form:{sourceLink:"Bild-URL"},buttons:{close:"Stng",apply:"Applicera"}}},TodoList:{buttons:{todoList:{tooltip:"Att gra-lista"}}}}},cs:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:"Blokov citace"}}},Bold:{buttons:{bold:{tooltip:"Tun"}}},BulletList:{buttons:{bulletList:{tooltip:"Bodov seznam"}}},Code:{buttons:{code:{tooltip:"Kd"}}},CodeBlock:{buttons:{codeBlock:{tooltip:"Blok kdu"}}},History:{buttons:{undo:{tooltip:"Zpt"},redo:{tooltip:"Vped"}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:"Horizontln oddlova"}}},Italic:{buttons:{italic:{tooltip:"Kurzva"}}},OrderedList:{buttons:{orderedList:{tooltip:"slovan seznam"}}},Paragraph:{buttons:{paragraph:{tooltip:"Odstavec"}}},Strike:{buttons:{strike:{tooltip:"Pekrtnut"}}},Underline:{buttons:{underline:{tooltip:"Podren"}}},Heading:{buttons:{heading:{tooltip:function(t){return t.level+". rove nadpisu"}}}},Link:{buttons:{isActive:{tooltip:"Zmnit odkaz"},notActive:{tooltip:"Pidat odkaz"}},window:{title:"Sprva odkazu",form:{hrefLabel:"Odkaz"},buttons:{close:"Zavt",remove:"Odebrat",apply:"Pout"}}},Image:{buttons:{tooltip:"Obrzek"},window:{title:"Pidat obrzek",form:{sourceLink:"Adresa obrzku",altText:"Alternativn text",addImage:"Pidat obrzek"},imageUpload:{instruction:"Vyberte soubor(y) nebo je(j) pethnte sem."},buttons:{close:"Zavt",apply:"Pout"}}},TodoList:{buttons:{todoList:{tooltip:"Seznam TODO"}}}}},it:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:"Citazione"}}},Bold:{buttons:{bold:{tooltip:"Grassetto"}}},BulletList:{buttons:{bulletList:{tooltip:"Elenco puntato"}}},Code:{buttons:{code:{tooltip:"Codice"}}},CodeBlock:{buttons:{codeBlock:{tooltip:"Blocco codice"}}},History:{buttons:{undo:{tooltip:"Annulla"},redo:{tooltip:"Ripristina"}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:"Linea orizzontale"}}},Italic:{buttons:{italic:{tooltip:"Corsivo"}}},OrderedList:{buttons:{orderedList:{tooltip:"Elenco numerato"}}},Paragraph:{buttons:{paragraph:{tooltip:"Paragrafo"}}},Strike:{buttons:{strike:{tooltip:"Barrato"}}},Underline:{buttons:{underline:{tooltip:"Sottolineato"}}},Heading:{buttons:{heading:{tooltip:function(t){return t.level+" livello intestazione"}}}},Link:{buttons:{isActive:{tooltip:"Modifica collegamento"},notActive:{tooltip:"Aggiungi collegamento"}},window:{title:"Gestione collegamento",form:{hrefLabel:"Indirizzo"},buttons:{close:"Chiudi",remove:"Rimuovi",apply:"Applica"}}},Image:{buttons:{tooltip:"Immagine"},window:{title:"Aggiungi Immagine",form:{sourceLink:"Indirizzo Immagine",altText:"Testo Alternativo",addImage:"Aggiungi Immagine"},imageUpload:{instruction:"Seleziona file o trascinalo(i) qui."},buttons:{close:"Chiudi",apply:"Applica"}}},TodoList:{buttons:{todoList:{tooltip:"Cose da fare"}}}}},el:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:""}}},Bold:{buttons:{bold:{tooltip:" "}}},BulletList:{buttons:{bulletList:{tooltip:"  "}}},Code:{buttons:{code:{tooltip:""}}},CodeBlock:{buttons:{codeBlock:{tooltip:" "}}},History:{buttons:{undo:{tooltip:""},redo:{tooltip:" "}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:" "}}},Italic:{buttons:{italic:{tooltip:" "}}},OrderedList:{buttons:{orderedList:{tooltip:"  "}}},Paragraph:{buttons:{paragraph:{tooltip:""}}},Strike:{buttons:{strike:{tooltip:""}}},Underline:{buttons:{underline:{tooltip:""}}},Heading:{buttons:{heading:{tooltip:function(t){return t.level+"  "}}}},Link:{buttons:{isActive:{tooltip:" "},notActive:{tooltip:" "}},window:{title:" ",form:{hrefLabel:""},buttons:{close:"",remove:"",apply:""}}},Image:{buttons:{tooltip:""},window:{title:" ",form:{sourceLink:" ",altText:" ",addImage:" "},imageUpload:{instruction:"      ."},buttons:{close:"",apply:""}}},TodoList:{buttons:{todoList:{tooltip:" "}}}}}};function qr(t,e,n){void 0===n&&(n=null);var r=n||ah.vuetifyLang||Fr;Hr[r]||(sr.warn('The current language "'+r+'" is not yet available. Using language "'+'en" by default. Contribution to github is welcome.'),r=Fr);var o,i=Hr[r];try{if(void 0===(o=t.split(".").reduce((function(t,e){return t[e]}),i)))throw new Error(t+" is undefined.")}catch(n){return sr.warn('Cannot get translation "'+t+'" for language "'+r+'". Fallback "'+'en" is used instead. Contribution to github is welcome.'),qr(t,e,Fr)}return o instanceof Function?o(e):o}var Wr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),Object.defineProperty(e.prototype,"$i18n",{get:function(){return{getMsg:qr}},enumerable:!0,configurable:!0}),_([Jn],e)}(o.a),Jr="undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof navigator,Kr=function(){for(var t=["Edge","Trident","Firefox"],e=0;e<t.length;e+=1)if(Jr&&navigator.userAgent.indexOf(t[e])>=0)return 1;return 0}(),Ur=Jr&&window.Promise?function(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then((function(){e=!1,t()})))}}:function(t){var e=!1;return function(){e||(e=!0,setTimeout((function(){e=!1,t()}),Kr))}};function Gr(t){return t&&"[object Function]"==={}.toString.call(t)}function Xr(t,e){if(1!==t.nodeType)return[];var n=t.ownerDocument.defaultView.getComputedStyle(t,null);return e?n[e]:n}function Yr(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function Zr(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var e=Xr(t),n=e.overflow,r=e.overflowX,o=e.overflowY;return/(auto|scroll|overlay)/.test(n+o+r)?t:Zr(Yr(t))}function Qr(t){return t&&t.referenceNode?t.referenceNode:t}var to=Jr&&!(!window.MSInputMethodContext||!document.documentMode),eo=Jr&&/MSIE 10/.test(navigator.userAgent);function no(t){return 11===t?to:10===t?eo:to||eo}function ro(t){if(!t)return document.documentElement;for(var e=no(10)?document.body:null,n=t.offsetParent||null;n===e&&t.nextElementSibling;)n=(t=t.nextElementSibling).offsetParent;var r=n&&n.nodeName;return r&&"BODY"!==r&&"HTML"!==r?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===Xr(n,"position")?ro(n):n:t?t.ownerDocument.documentElement:document.documentElement}function oo(t){return null!==t.parentNode?oo(t.parentNode):t}function io(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return document.documentElement;var n=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?t:e,o=n?e:t,i=document.createRange();i.setStart(r,0),i.setEnd(o,0);var s,a,l=i.commonAncestorContainer;if(t!==l&&e!==l||r.contains(o))return"BODY"===(a=(s=l).nodeName)||"HTML"!==a&&ro(s.firstElementChild)!==s?ro(l):l;var c=oo(t);return c.host?io(c.host,e):io(t,oo(e).host)}function so(t){var e="top"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top")?"scrollTop":"scrollLeft",n=t.nodeName;if("BODY"===n||"HTML"===n){var r=t.ownerDocument.documentElement;return(t.ownerDocument.scrollingElement||r)[e]}return t[e]}function ao(t,e){var n="x"===e?"Left":"Top",r="Left"===n?"Right":"Bottom";return parseFloat(t["border"+n+"Width"])+parseFloat(t["border"+r+"Width"])}function lo(t,e,n,r){return Math.max(e["offset"+t],e["scroll"+t],n["client"+t],n["offset"+t],n["scroll"+t],no(10)?parseInt(n["offset"+t])+parseInt(r["margin"+("Height"===t?"Top":"Left")])+parseInt(r["margin"+("Height"===t?"Bottom":"Right")]):0)}function co(t){var e=t.body,n=t.documentElement,r=no(10)&&getComputedStyle(n);return{height:lo("Height",e,n,r),width:lo("Width",e,n,r)}}var po=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},uo=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),ho=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},fo=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function vo(t){return fo({},t,{right:t.left+t.width,bottom:t.top+t.height})}function mo(t){var e={};try{if(no(10)){e=t.getBoundingClientRect();var n=so(t,"top"),r=so(t,"left");e.top+=n,e.left+=r,e.bottom+=n,e.right+=r}else e=t.getBoundingClientRect()}catch(t){}var o={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},i="HTML"===t.nodeName?co(t.ownerDocument):{},s=i.width||t.clientWidth||o.width,a=i.height||t.clientHeight||o.height,l=t.offsetWidth-s,c=t.offsetHeight-a;if(l||c){var p=Xr(t);l-=ao(p,"x"),c-=ao(p,"y"),o.width-=l,o.height-=c}return vo(o)}function go(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=no(10),o="HTML"===e.nodeName,i=mo(t),s=mo(e),a=Zr(t),l=Xr(e),c=parseFloat(l.borderTopWidth),p=parseFloat(l.borderLeftWidth);n&&o&&(s.top=Math.max(s.top,0),s.left=Math.max(s.left,0));var u=vo({top:i.top-s.top-c,left:i.left-s.left-p,width:i.width,height:i.height});if(u.marginTop=0,u.marginLeft=0,!r&&o){var d=parseFloat(l.marginTop),h=parseFloat(l.marginLeft);u.top-=c-d,u.bottom-=c-d,u.left-=p-h,u.right-=p-h,u.marginTop=d,u.marginLeft=h}return(r&&!n?e.contains(a):e===a&&"BODY"!==a.nodeName)&&(u=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=so(e,"top"),o=so(e,"left"),i=n?-1:1;return t.top+=r*i,t.bottom+=r*i,t.left+=o*i,t.right+=o*i,t}(u,e)),u}function yo(t){if(!t||!t.parentElement||no())return document.documentElement;for(var e=t.parentElement;e&&"none"===Xr(e,"transform");)e=e.parentElement;return e||document.documentElement}function bo(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i={top:0,left:0},s=o?yo(t):io(t,Qr(e));if("viewport"===r)i=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.ownerDocument.documentElement,r=go(t,n),o=Math.max(n.clientWidth,window.innerWidth||0),i=Math.max(n.clientHeight,window.innerHeight||0),s=e?0:so(n),a=e?0:so(n,"left");return vo({top:s-r.top+r.marginTop,left:a-r.left+r.marginLeft,width:o,height:i})}(s,o);else{var a=void 0;"scrollParent"===r?"BODY"===(a=Zr(Yr(e))).nodeName&&(a=t.ownerDocument.documentElement):a="window"===r?t.ownerDocument.documentElement:r;var l=go(a,s,o);if("HTML"!==a.nodeName||function t(e){var n=e.nodeName;if("BODY"===n||"HTML"===n)return!1;if("fixed"===Xr(e,"position"))return!0;var r=Yr(e);return!!r&&t(r)}(s))i=l;else{var c=co(t.ownerDocument),p=c.height,u=c.width;i.top+=l.top-l.marginTop,i.bottom=p+l.top,i.left+=l.left-l.marginLeft,i.right=u+l.left}}var d="number"==typeof(n=n||0);return i.left+=d?n:n.left||0,i.top+=d?n:n.top||0,i.right-=d?n:n.right||0,i.bottom-=d?n:n.bottom||0,i}function wo(t,e,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===t.indexOf("auto"))return t;var s=bo(n,r,i,o),a={top:{width:s.width,height:e.top-s.top},right:{width:s.right-e.right,height:s.height},bottom:{width:s.width,height:s.bottom-e.bottom},left:{width:e.left-s.left,height:s.height}},l=Object.keys(a).map((function(t){return fo({key:t},a[t],{area:(e=a[t],e.width*e.height)});var e})).sort((function(t,e){return e.area-t.area})),c=l.filter((function(t){var e=t.width,r=t.height;return e>=n.clientWidth&&r>=n.clientHeight})),p=c.length>0?c[0].key:l[0].key,u=t.split("-")[1];return p+(u?"-"+u:"")}function xo(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return go(n,r?yo(e):io(e,Qr(n)),r)}function So(t){var e=t.ownerDocument.defaultView.getComputedStyle(t),n=parseFloat(e.marginTop||0)+parseFloat(e.marginBottom||0),r=parseFloat(e.marginLeft||0)+parseFloat(e.marginRight||0);return{width:t.offsetWidth+r,height:t.offsetHeight+n}}function ko(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,(function(t){return e[t]}))}function Co(t,e,n){n=n.split("-")[0];var r=So(t),o={width:r.width,height:r.height},i=-1!==["right","left"].indexOf(n),s=i?"top":"left",a=i?"left":"top",l=i?"height":"width",c=i?"width":"height";return o[s]=e[s]+e[l]/2-r[l]/2,o[a]=n===a?e[a]-r[c]:e[ko(a)],o}function Oo(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function Mo(t,e,n){return(void 0===n?t:t.slice(0,function(t,e,n){if(Array.prototype.findIndex)return t.findIndex((function(t){return t[e]===n}));var r=Oo(t,(function(t){return t[e]===n}));return t.indexOf(r)}(t,"name",n))).forEach((function(t){t.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var n=t.function||t.fn;t.enabled&&Gr(n)&&(e.offsets.popper=vo(e.offsets.popper),e.offsets.reference=vo(e.offsets.reference),e=n(e,t))})),e}function To(t,e){return t.some((function(t){var n=t.name;return t.enabled&&n===e}))}function _o(t){for(var e=[!1,"ms","Webkit","Moz","O"],n=t.charAt(0).toUpperCase()+t.slice(1),r=0;r<e.length;r++){var o=e[r],i=o?""+o+n:t;if(void 0!==document.body.style[i])return i}return null}function Ao(t){var e=t.ownerDocument;return e?e.defaultView:window}function No(){var t,e;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(t=this.reference,e=this.state,Ao(t).removeEventListener("resize",e.updateBound),e.scrollParents.forEach((function(t){t.removeEventListener("scroll",e.updateBound)})),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e))}function Eo(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}function Ro(t,e){Object.keys(e).forEach((function(n){var r="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&Eo(e[n])&&(r="px"),t.style[n]=e[n]+r}))}var Do=Jr&&/Firefox/i.test(navigator.userAgent);function Io(t,e,n){var r=Oo(t,(function(t){return t.name===e})),o=!!r&&t.some((function(t){return t.name===n&&t.enabled&&t.order<r.order}));if(!o){var i="`"+e+"`",s="`"+n+"`";console.warn(s+" modifier is required by "+i+" modifier in order to work, be sure to include it before "+i+"!")}return o}var Po=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],$o=Po.slice(3);function Lo(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=$o.indexOf(t),r=$o.slice(n+1).concat($o.slice(0,n));return e?r.reverse():r}var zo="flip",Bo="clockwise",jo="counterclockwise";var Vo={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(t){var e=t.placement,n=e.split("-")[0],r=e.split("-")[1];if(r){var o=t.offsets,i=o.reference,s=o.popper,a=-1!==["bottom","top"].indexOf(n),l=a?"left":"top",c=a?"width":"height",p={start:ho({},l,i[l]),end:ho({},l,i[l]+i[c]-s[c])};t.offsets.popper=fo({},s,p[r])}return t}},offset:{order:200,enabled:!0,fn:function(t,e){var n,r=e.offset,o=t.placement,i=t.offsets,s=i.popper,a=i.reference,l=o.split("-")[0];return n=Eo(+r)?[+r,0]:function(t,e,n,r){var o=[0,0],i=-1!==["right","left"].indexOf(r),s=t.split(/(\+|\-)/).map((function(t){return t.trim()})),a=s.indexOf(Oo(s,(function(t){return-1!==t.search(/,|\s/)})));s[a]&&-1===s[a].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,c=-1!==a?[s.slice(0,a).concat([s[a].split(l)[0]]),[s[a].split(l)[1]].concat(s.slice(a+1))]:[s];return(c=c.map((function(t,r){var o=(1===r?!i:i)?"height":"width",s=!1;return t.reduce((function(t,e){return""===t[t.length-1]&&-1!==["+","-"].indexOf(e)?(t[t.length-1]=e,s=!0,t):s?(t[t.length-1]+=e,s=!1,t):t.concat(e)}),[]).map((function(t){return function(t,e,n,r){var o=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),i=+o[1],s=o[2];if(!i)return t;if(0===s.indexOf("%")){var a=void 0;switch(s){case"%p":a=n;break;case"%":case"%r":default:a=r}return vo(a)[e]/100*i}return"vh"===s||"vw"===s?("vh"===s?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*i:i}(t,o,e,n)}))}))).forEach((function(t,e){t.forEach((function(n,r){Eo(n)&&(o[e]+=n*("-"===t[r-1]?-1:1))}))})),o}(r,s,a,l),"left"===l?(s.top+=n[0],s.left-=n[1]):"right"===l?(s.top+=n[0],s.left+=n[1]):"top"===l?(s.left+=n[0],s.top-=n[1]):"bottom"===l&&(s.left+=n[0],s.top+=n[1]),t.popper=s,t},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(t,e){var n=e.boundariesElement||ro(t.instance.popper);t.instance.reference===n&&(n=ro(n));var r=_o("transform"),o=t.instance.popper.style,i=o.top,s=o.left,a=o[r];o.top="",o.left="",o[r]="";var l=bo(t.instance.popper,t.instance.reference,e.padding,n,t.positionFixed);o.top=i,o.left=s,o[r]=a,e.boundaries=l;var c=e.priority,p=t.offsets.popper,u={primary:function(t){var n=p[t];return p[t]<l[t]&&!e.escapeWithReference&&(n=Math.max(p[t],l[t])),ho({},t,n)},secondary:function(t){var n="right"===t?"left":"top",r=p[n];return p[t]>l[t]&&!e.escapeWithReference&&(r=Math.min(p[n],l[t]-("right"===t?p.width:p.height))),ho({},n,r)}};return c.forEach((function(t){var e=-1!==["left","top"].indexOf(t)?"primary":"secondary";p=fo({},p,u[e](t))})),t.offsets.popper=p,t},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(t){var e=t.offsets,n=e.popper,r=e.reference,o=t.placement.split("-")[0],i=Math.floor,s=-1!==["top","bottom"].indexOf(o),a=s?"right":"bottom",l=s?"left":"top",c=s?"width":"height";return n[a]<i(r[l])&&(t.offsets.popper[l]=i(r[l])-n[c]),n[l]>i(r[a])&&(t.offsets.popper[l]=i(r[a])),t}},arrow:{order:500,enabled:!0,fn:function(t,e){var n;if(!Io(t.instance.modifiers,"arrow","keepTogether"))return t;var r=e.element;if("string"==typeof r){if(!(r=t.instance.popper.querySelector(r)))return t}else if(!t.instance.popper.contains(r))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var o=t.placement.split("-")[0],i=t.offsets,s=i.popper,a=i.reference,l=-1!==["left","right"].indexOf(o),c=l?"height":"width",p=l?"Top":"Left",u=p.toLowerCase(),d=l?"left":"top",h=l?"bottom":"right",f=So(r)[c];a[h]-f<s[u]&&(t.offsets.popper[u]-=s[u]-(a[h]-f)),a[u]+f>s[h]&&(t.offsets.popper[u]+=a[u]+f-s[h]),t.offsets.popper=vo(t.offsets.popper);var v=a[u]+a[c]/2-f/2,m=Xr(t.instance.popper),g=parseFloat(m["margin"+p]),y=parseFloat(m["border"+p+"Width"]),b=v-t.offsets.popper[u]-g-y;return b=Math.max(Math.min(s[c]-f,b),0),t.arrowElement=r,t.offsets.arrow=(ho(n={},u,Math.round(b)),ho(n,d,""),n),t},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(t,e){if(To(t.instance.modifiers,"inner"))return t;if(t.flipped&&t.placement===t.originalPlacement)return t;var n=bo(t.instance.popper,t.instance.reference,e.padding,e.boundariesElement,t.positionFixed),r=t.placement.split("-")[0],o=ko(r),i=t.placement.split("-")[1]||"",s=[];switch(e.behavior){case zo:s=[r,o];break;case Bo:s=Lo(r);break;case jo:s=Lo(r,!0);break;default:s=e.behavior}return s.forEach((function(a,l){if(r!==a||s.length===l+1)return t;r=t.placement.split("-")[0],o=ko(r);var c=t.offsets.popper,p=t.offsets.reference,u=Math.floor,d="left"===r&&u(c.right)>u(p.left)||"right"===r&&u(c.left)<u(p.right)||"top"===r&&u(c.bottom)>u(p.top)||"bottom"===r&&u(c.top)<u(p.bottom),h=u(c.left)<u(n.left),f=u(c.right)>u(n.right),v=u(c.top)<u(n.top),m=u(c.bottom)>u(n.bottom),g="left"===r&&h||"right"===r&&f||"top"===r&&v||"bottom"===r&&m,y=-1!==["top","bottom"].indexOf(r),b=!!e.flipVariations&&(y&&"start"===i&&h||y&&"end"===i&&f||!y&&"start"===i&&v||!y&&"end"===i&&m),w=!!e.flipVariationsByContent&&(y&&"start"===i&&f||y&&"end"===i&&h||!y&&"start"===i&&m||!y&&"end"===i&&v),x=b||w;(d||g||x)&&(t.flipped=!0,(d||g)&&(r=s[l+1]),x&&(i=function(t){return"end"===t?"start":"start"===t?"end":t}(i)),t.placement=r+(i?"-"+i:""),t.offsets.popper=fo({},t.offsets.popper,Co(t.instance.popper,t.offsets.reference,t.placement)),t=Mo(t.instance.modifiers,t,"flip"))})),t},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(t){var e=t.placement,n=e.split("-")[0],r=t.offsets,o=r.popper,i=r.reference,s=-1!==["left","right"].indexOf(n),a=-1===["top","left"].indexOf(n);return o[s?"left":"top"]=i[n]-(a?o[s?"width":"height"]:0),t.placement=ko(e),t.offsets.popper=vo(o),t}},hide:{order:800,enabled:!0,fn:function(t){if(!Io(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,n=Oo(t.instance.modifiers,(function(t){return"preventOverflow"===t.name})).boundaries;if(e.bottom<n.top||e.left>n.right||e.top>n.bottom||e.right<n.left){if(!0===t.hide)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(!1===t.hide)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}},computeStyle:{order:850,enabled:!0,fn:function(t,e){var n=e.x,r=e.y,o=t.offsets.popper,i=Oo(t.instance.modifiers,(function(t){return"applyStyle"===t.name})).gpuAcceleration;void 0!==i&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var s,a,l=void 0!==i?i:e.gpuAcceleration,c=ro(t.instance.popper),p=mo(c),u={position:o.position},d=function(t,e){var n=t.offsets,r=n.popper,o=n.reference,i=Math.round,s=Math.floor,a=function(t){return t},l=i(o.width),c=i(r.width),p=-1!==["left","right"].indexOf(t.placement),u=-1!==t.placement.indexOf("-"),d=e?p||u||l%2==c%2?i:s:a,h=e?i:a;return{left:d(l%2==1&&c%2==1&&!u&&e?r.left-1:r.left),top:h(r.top),bottom:h(r.bottom),right:d(r.right)}}(t,window.devicePixelRatio<2||!Do),h="bottom"===n?"top":"bottom",f="right"===r?"left":"right",v=_o("transform");if(a="bottom"===h?"HTML"===c.nodeName?-c.clientHeight+d.bottom:-p.height+d.bottom:d.top,s="right"===f?"HTML"===c.nodeName?-c.clientWidth+d.right:-p.width+d.right:d.left,l&&v)u[v]="translate3d("+s+"px, "+a+"px, 0)",u[h]=0,u[f]=0,u.willChange="transform";else{var m="bottom"===h?-1:1,g="right"===f?-1:1;u[h]=a*m,u[f]=s*g,u.willChange=h+", "+f}var y={"x-placement":t.placement};return t.attributes=fo({},y,t.attributes),t.styles=fo({},u,t.styles),t.arrowStyles=fo({},t.offsets.arrow,t.arrowStyles),t},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(t){var e,n;return Ro(t.instance.popper,t.styles),e=t.instance.popper,n=t.attributes,Object.keys(n).forEach((function(t){!1!==n[t]?e.setAttribute(t,n[t]):e.removeAttribute(t)})),t.arrowElement&&Object.keys(t.arrowStyles).length&&Ro(t.arrowElement,t.arrowStyles),t},onLoad:function(t,e,n,r,o){var i=xo(o,e,t,n.positionFixed),s=wo(n.placement,i,e,t,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return e.setAttribute("x-placement",s),Ro(e,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},Fo=function(){function t(e,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};po(this,t),this.scheduleUpdate=function(){return requestAnimationFrame(r.update)},this.update=Ur(this.update.bind(this)),this.options=fo({},t.Defaults,o),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=e&&e.jquery?e[0]:e,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(fo({},t.Defaults.modifiers,o.modifiers)).forEach((function(e){r.options.modifiers[e]=fo({},t.Defaults.modifiers[e]||{},o.modifiers?o.modifiers[e]:{})})),this.modifiers=Object.keys(this.options.modifiers).map((function(t){return fo({name:t},r.options.modifiers[t])})).sort((function(t,e){return t.order-e.order})),this.modifiers.forEach((function(t){t.enabled&&Gr(t.onLoad)&&t.onLoad(r.reference,r.popper,r.options,t,r.state)})),this.update();var i=this.options.eventsEnabled;i&&this.enableEventListeners(),this.state.eventsEnabled=i}return uo(t,[{key:"update",value:function(){return function(){if(!this.state.isDestroyed){var t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=xo(this.state,this.popper,this.reference,this.options.positionFixed),t.placement=wo(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.positionFixed=this.options.positionFixed,t.offsets.popper=Co(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",t=Mo(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,To(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[_o("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return function(){this.state.eventsEnabled||(this.state=function(t,e,n,r){n.updateBound=r,Ao(t).addEventListener("resize",n.updateBound,{passive:!0});var o=Zr(t);return function t(e,n,r,o){var i="BODY"===e.nodeName,s=i?e.ownerDocument.defaultView:e;s.addEventListener(n,r,{passive:!0}),i||t(Zr(s.parentNode),n,r,o),o.push(s)}(o,"scroll",n.updateBound,n.scrollParents),n.scrollElement=o,n.eventsEnabled=!0,n}(this.reference,this.options,this.state,this.scheduleUpdate))}.call(this)}},{key:"disableEventListeners",value:function(){return No.call(this)}}]),t}();Fo.Utils=("undefined"!=typeof window?window:t).PopperUtils,Fo.placements=Po,Fo.Defaults=Vo;var Ho,qo=lr({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("editor-menu-bubble",{attrs:{editor:t.editor},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"tiptap-vuetify-editor-pop",attrs:{role:"tooltip"}},[n("div",{staticClass:"tiptap-vuetify-editor-pop__popper"},[n("actions-render",{attrs:{actions:t.actions,context:e,editor:t.editor,dark:!0}}),t._v(" "),n("div",{attrs:{"x-arrow":""}})],1)])]}}])})},staticRenderFns:[]},void 0,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.mounted=function(){var t=function(){function t(){var t=this;this.range=null,this.rect=null,this.timeoutMousemove=null,this.updateRect();var e,n,r=function(e,n){var r=document.getSelection();t.range=r&&r.rangeCount&&r.getRangeAt(0),t.updateRect(n)},o=document.querySelector(".tiptap-vuetify-editor .ProseMirror");o.addEventListener("mouseup",r),o.addEventListener("input",r),o.addEventListener("keydown",(function(t){return r(0,!0)})),o.addEventListener("mousemove",(e=function(){r()},100,n=!1,function(){n||(e.apply(this,arguments),n=!0,setTimeout((function(){return n=!1}),100))})),window.addEventListener("scroll",r),document.scrollingElement.addEventListener("scroll",r)}return t.prototype.updateRect=function(t){void 0===t&&(t=!1),!t&&this.range?this.rect=this.range.getBoundingClientRect():this.rect={top:0,left:0,right:0,bottom:0,width:0,height:0},this.rectChangedCallback(this.rect)},t.prototype.rectChangedCallback=function(t){},t.prototype.getBoundingClientRect=function(){return this.rect},Object.defineProperty(t.prototype,"clientWidth",{get:function(){return this.rect.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clientHeight",{get:function(){return this.rect.height},enumerable:!0,configurable:!0}),t}();setTimeout((function(){var e=document.querySelector(".tiptap-vuetify-editor-pop"),n=new t,r=new Fo(n,e,{placement:"top",modifiers:{offset:{offset:"0,5"}},positionFixed:!0});n.rectChangedCallback=function(t){t.width>0?(r.scheduleUpdate(),e.firstElementChild.classList.add("tiptap-vuetify-editor-pop__popper--visible")):e.firstElementChild.classList.remove("tiptap-vuetify-editor-pop__popper--visible")}}),1e3)},_([Un({type:Object,required:!0}),A("design:type",i.a)],e.prototype,"editor",void 0),_([Un({type:Array,default:function(){return[]}}),A("design:type",Array)],e.prototype,"actions",void 0),_([Jn({components:{ActionsRender:dr,EditorMenuBubble:i.d,VCard:p.a}})],e)}(Fn(Wr)),void 0,!1,void 0,void 0,void 0);!function(t){t.toolbar="toolbar",t.bubbleMenu="bubbleMenu"}(Ho||(Ho={}));var Wo,Jo=lr({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.editor?n("div",{staticClass:"tiptap-vuetify-editor",class:{"tiptap-vuetify-editor--disabled":t.$props[t.PROPS.DISABLED]}},[t.availableActions.bubbleMenu.length&&t.editor.options.editable?n("bubble",{attrs:{editor:t.editor,actions:t.availableActions.bubbleMenu}}):t._e(),t._v(" "),t.$props[t.PROPS.TYPE]===t.EDITOR_TYPES_ENUM.card?n("VCard",t._b({},"VCard",t.$props[t.PROPS.CARD_PROPS],!1),[t._t("toolbar-before"),t._v(" "),t.availableActions.toolbar.length?n("toolbar",{attrs:{editor:t.editor,actions:t.availableActions.toolbar,"toolbar-attributes":t.$props[t.PROPS.TOOLBAR_ATTRIBUTES],disabled:t.$props[t.PROPS.DISABLED]},scopedSlots:t._u([t.$scopedSlots.toolbar?{key:"default",fn:function(e){return[t._t("toolbar",null,null,e)]}}:null],null,!0)}):t._e(),t._v(" "),t._t("toolbar-after"),t._v(" "),n("editor-content",{staticClass:"tiptap-vuetify-editor__content",class:{"tiptap-vuetify-editor__content--disabled":t.$props[t.PROPS.DISABLED]},style:t.contentDynamicStyles,attrs:{editor:t.editor}}),t._v(" "),t._t("footer")],2):t._e()],1):t._e()},staticRenderFns:[]},void 0,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PROPS=ir,e.EDITOR_TYPES_ENUM=nr,e.editor=null,e.availableActions={toolbar:[],bubbleMenu:[]},e.emitAfterOnUpdate=!1,e}var n,r,o,s,a,l,c,u,d,h,f,v;return M(e,t),Object.defineProperty(e.prototype,"contentDynamicStyles",{get:function(){var t=function(t){if(!t)return t;var e=parseInt(t,10),n=t.slice(e.toString().length);return e+(n||"px")};return{minHeight:t(this[ir.MIN_HEIGHT]),maxHeight:t(this[ir.MAX_HEIGHT])}},enumerable:!0,configurable:!0}),e.prototype.onDisabledChange=function(t){this.editor&&this.editor.setOptions({editable:!t})},e.prototype.onValueChange=function(t){this.emitAfterOnUpdate?this.emitAfterOnUpdate=!1:this.editor&&this.editor.setContent(t)},e.prototype.mounted=function(){var t=this,e=[],n=[],r={renderIn:Ho.toolbar,options:{}};this[ir.EXTENSIONS].forEach((function(o){var i,s,a,l;if(Array.isArray(o))a=(i=R(o,2))[0],l=i[1];else{if(!o.prototype.availableActions)throw new Error('Incorrect extension declaration passed to "extensions" prop (array). It looks like the array\'s element is in the wrong format.');a=o}var c=T(T({},r),l),p=new a(c.options);(s=t.availableActions[c.renderIn]).push.apply(s,D(p.availableActions)),p.nativeExtensionInstance&&e.push(p.nativeExtensionInstance),n.push(p)}));var o=D(this[ir.NATIVE_EXTENSIONS],e);this[ir.PLACEHOLDER]&&o.push(new C.o({emptyNodeClass:"tiptap-vuetify-editor__paragraph--is-empty",emptyNodeText:this[ir.PLACEHOLDER],showOnlyWhenEditable:!0})),this.editor=new i.a(T(T({editable:!this[ir.DISABLED],extensions:o},this[ir.EDITOR_PROPERTIES]),{editorProps:T(T({},this[ir.EDITOR_PROPERTIES].editorProps),{handleKeyDown:function(e,n){t[ir.EDITOR_PROPERTIES].editorProps&&t[ir.EDITOR_PROPERTIES].editorProps.handleKeyDown&&t[ir.EDITOR_PROPERTIES].editorProps.handleKeyDown(e,n),t.$emit("keydown",n,e)}}),content:this[ir.VALUE],onUpdate:this.onUpdate.bind(this),onBlur:this.onBlur.bind(this),onFocus:this.onFocus.bind(this)})),this.$emit("init",{editor:this.editor}),n.forEach((function(e){return e.onEditorInit&&e.onEditorInit(t.editor)}))},e.prototype.onUpdate=function(t){var e;this.emitAfterOnUpdate=!0,e="html"===this[ir.OUTPUT_FORMAT]?t.getHTML():t.getJSON(),this.$emit("input",e,t)},e.prototype.onBlur=function(t){var e=t.event,n=t.view;this.$emit("blur",e,n)},e.prototype.onFocus=function(t){var e=t.event,n=t.view;this.$emit("focus",e,n)},e.prototype.beforeDestroy=function(){this.editor&&this.editor.destroy()},n=ir.DISABLED,r=ir.VALUE,o=ir.EXTENSIONS,s=ir.PLACEHOLDER,a=ir.CARD_PROPS,l=ir.OUTPUT_FORMAT,c=ir.TOOLBAR_ATTRIBUTES,u=ir.EDITOR_PROPERTIES,d=ir.NATIVE_EXTENSIONS,h=ir.TYPE,f=ir.MIN_HEIGHT,v=ir.MAX_HEIGHT,_([Un({type:Boolean,default:!1}),A("design:type",Boolean)],e.prototype,n,void 0),_([Un({type:[String,Object],default:""}),A("design:type",String)],e.prototype,r,void 0),_([Un({type:Array,default:function(){return[]}}),A("design:type",Array)],e.prototype,o,void 0),_([Un({type:String}),A("design:type",String)],e.prototype,s,void 0),_([Un({type:Object,default:function(){return{}}}),A("design:type",Object)],e.prototype,a,void 0),_([Un({type:String,default:"html"}),A("design:type",String)],e.prototype,l,void 0),_([Un({type:[Array,Object],default:function(){return{}}}),A("design:type",Object)],e.prototype,c,void 0),_([Un({type:Object,default:function(){return{}}}),A("design:type",Object)],e.prototype,u,void 0),_([Un({type:Array,default:function(){return[]}}),A("design:type",Array)],e.prototype,d,void 0),_([Un({type:String,default:nr.card}),A("design:type",String)],e.prototype,h,void 0),_([Un({type:[String,Number]}),A("design:type",Object)],e.prototype,f,void 0),_([Un({type:[String,Number]}),A("design:type",Object)],e.prototype,v,void 0),_([Gn("disabled"),A("design:type",Function),A("design:paramtypes",[Object]),A("design:returntype",void 0)],e.prototype,"onDisabledChange",null),_([Gn("value"),A("design:type",Function),A("design:paramtypes",[Object]),A("design:returntype",void 0)],e.prototype,"onValueChange",null),_([Jn({components:{Bubble:qo,EditorContent:i.b,Toolbar:hr,VCard:p.a}})],e)}(o.a),void 0,!1,void 0,void 0,void 0),Ko={close:(Wo={},Wo.md=new or("close"),Wo.fa=new or("fas fa-times"),Wo.mdi=new or("mdi-close"),Wo.mdiSvg=new or("M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"),Wo)},Uo=Ce.map,Go=He("map"),Xo=Ae("map");pe({target:"Array",proto:!0,forced:!Go||!Xo},{map:function(t){return Uo(this,t,arguments.length>1?arguments[1]:void 0)}});var Yo=function(){function t(t,e){this.text=qr(t,e)}return t.prototype.toString=function(){return this.text},t}(),Zo=function(t,e){this.options=t,this.extensionClass=e,this.nativeExtensionInstance=null,e&&(this.nativeExtensionInstance=new e(t))},Qo=function(t){function e(e){return t.call(this,e,C.g)||this}return M(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){return this.options.levels.map((function(t){var e;return{render:new pr({tooltip:new Yo("extensions.Heading.buttons.heading.tooltip",{level:t}),icons:(e={},e.md=new Yn("H"+t),e.fa=new Yn("H"+t),e.mdi=new Yn("H"+t),e.mdiSvg=new Yn("H"+t),e),nativeExtensionName:"heading",onClickOptions:{level:t},isActiveOptions:{level:t}})}}))},enumerable:!0,configurable:!0}),e}(Zo),ti=function(t){function e(e){return t.call(this,e,C.b)||this}return M(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){var t;return[{render:new pr({tooltip:new Yo("extensions.Bold.buttons.bold.tooltip"),icons:(t={},t.md=new or("format_bold"),t.fa=new or("fas fa-bold"),t.mdi=new or("mdi-format-bold"),t.mdiSvg=new or("M13.5,15.5H10V12.5H13.5A1.5,1.5 0 0,1 15,14A1.5,1.5 0 0,1 13.5,15.5M10,6.5H13A1.5,1.5 0 0,1 14.5,8A1.5,1.5 0 0,1 13,9.5H10M15.6,10.79C16.57,10.11 17.25,9 17.25,8C17.25,5.74 15.5,4 13.25,4H7V18H14.04C16.14,18 17.75,16.3 17.75,14.21C17.75,12.69 16.89,11.39 15.6,10.79Z"),t),nativeExtensionName:"bold"})}]},enumerable:!0,configurable:!0}),e}(Zo),ei=function(t){function e(e){return t.call(this,e,C.k)||this}return M(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){var t;return[{render:new pr({tooltip:new Yo("extensions.Italic.buttons.italic.tooltip"),icons:(t={},t.md=new or("format_italic"),t.fa=new or("fas fa-italic"),t.mdi=new or("mdi-format-italic"),t.mdiSvg=new or("M10,4V7H12.21L8.79,15H6V18H14V15H11.79L15.21,7H18V4H10Z"),t),nativeExtensionName:"italic"})}]},enumerable:!0,configurable:!0}),e}(Zo),ni=function(t){function e(e){return t.call(this,e,C.p)||this}return M(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){var t;return[{render:new pr({tooltip:new Yo("extensions.Strike.buttons.strike.tooltip"),icons:(t={},t.md=new or("format_strikethrough"),t.fa=new or("fas fa-strikethrough"),t.mdi=new or("mdi-format-strikethrough"),t.mdiSvg=new or("M3,14H21V12H3M5,4V7H10V10H14V7H19V4M10,19H14V16H10V19Z"),t),nativeExtensionName:"strike"})}]},enumerable:!0,configurable:!0}),e}(Zo),ri=function(t){function e(e){return t.call(this,e,C.v)||this}return M(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){var t;return[{render:new pr({tooltip:new Yo("extensions.Underline.buttons.underline.tooltip"),icons:(t={},t.md=new or("format_underline"),t.fa=new or("fas fa-underline"),t.mdi=new or("mdi-format-underline"),t.mdiSvg=new or("M5,21H19V19H5V21M12,17A6,6 0 0,0 18,11V3H15.5V11A3.5,3.5 0 0,1 12,14.5A3.5,3.5 0 0,1 8.5,11V3H6V11A6,6 0 0,0 12,17Z"),t),nativeExtensionName:"underline"})}]},enumerable:!0,configurable:!0}),e}(Zo),oi=function(t){function e(e){return t.call(this,e,C.d)||this}return M(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){var t;return[{render:new pr({tooltip:new Yo("extensions.Code.buttons.code.tooltip"),icons:(t={},t.md=new or("code"),t.fa=new or("fas fa-code"),t.mdi=new or("mdi-code-tags"),t.mdiSvg=new or("M14.6,16.6L19.2,12L14.6,7.4L16,6L22,12L16,18L14.6,16.6M9.4,16.6L4.8,12L9.4,7.4L8,6L2,12L8,18L9.4,16.6Z"),t),nativeExtensionName:"code"})}]},enumerable:!0,configurable:!0}),e}(Zo),ii=function(t){function e(e){return t.call(this,e,C.e)||this}return M(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){var t;return[{render:new pr({tooltip:new Yo("extensions.CodeBlock.buttons.codeBlock.tooltip"),icons:(t={},t.md=new or("code"),t.fa=new or("fas fa-code"),t.mdi=new or("mdi-code-tags"),t.mdiSvg=new or("M14.6,16.6L19.2,12L14.6,7.4L16,6L22,12L16,18L14.6,16.6M9.4,16.6L4.8,12L9.4,7.4L8,6L2,12L8,18L9.4,16.6Z"),t),nativeExtensionName:"code_block"})}]},enumerable:!0,configurable:!0}),e}(Zo),si=function(t){function e(e){return t.call(this,e,null)||this}return M(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){var t;return[{render:new pr({tooltip:new Yo("extensions.Paragraph.buttons.paragraph.tooltip"),icons:(t={},t.md=new or("format_textdirection_l_to_r"),t.fa=new or("fas fa-paragraph"),t.mdi=new or("mdi-format-paragraph"),t.mdiSvg=new or("M13,4A4,4 0 0,1 17,8A4,4 0 0,1 13,12H11V18H9V4H13M13,10A2,2 0 0,0 15,8A2,2 0 0,0 13,6H11V10H13Z"),t),nativeExtensionName:"paragraph"})}]},enumerable:!0,configurable:!0}),e}(Zo),ai=function(t){function e(e){return t.call(this,e,C.c)||this}return M(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){var t;return[{render:new pr({tooltip:new Yo("extensions.BulletList.buttons.bulletList.tooltip"),icons:(t={},t.md=new or("format_list_bulleted"),t.fa=new or("fas fa-list-ul"),t.mdi=new or("mdi-format-list-bulleted"),t.mdiSvg=new or("M7,5H21V7H7V5M7,13V11H21V13H7M4,4.5A1.5,1.5 0 0,1 5.5,6A1.5,1.5 0 0,1 4,7.5A1.5,1.5 0 0,1 2.5,6A1.5,1.5 0 0,1 4,4.5M4,10.5A1.5,1.5 0 0,1 5.5,12A1.5,1.5 0 0,1 4,13.5A1.5,1.5 0 0,1 2.5,12A1.5,1.5 0 0,1 4,10.5M7,19V17H21V19H7M4,16.5A1.5,1.5 0 0,1 5.5,18A1.5,1.5 0 0,1 4,19.5A1.5,1.5 0 0,1 2.5,18A1.5,1.5 0 0,1 4,16.5Z"),t),nativeExtensionName:"bullet_list"})}]},enumerable:!0,configurable:!0}),e}(Zo),li=function(t){function e(e){return t.call(this,e,C.n)||this}return M(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){var t;return[{render:new pr({tooltip:new Yo("extensions.OrderedList.buttons.orderedList.tooltip"),icons:(t={},t.md=new or("format_list_numbered"),t.fa=new or("fas fa-list-ol"),t.mdi=new or("mdi-format-list-numbered"),t.mdiSvg=new or("M7,13V11H21V13H7M7,19V17H21V19H7M7,7V5H21V7H7M3,8V5H2V4H4V8H3M2,17V16H5V20H2V19H4V18.5H3V17.5H4V17H2M4.25,10A0.75,0.75 0 0,1 5,10.75C5,10.95 4.92,11.14 4.79,11.27L3.12,13H5V14H2V13.08L4,11H2V10H4.25Z"),t),nativeExtensionName:"ordered_list"})}]},enumerable:!0,configurable:!0}),e}(Zo),ci=function(t){function e(e){return t.call(this,e,C.m)||this}return M(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){return[]},enumerable:!0,configurable:!0}),e}(Zo),pi=function(t){function e(e){return t.call(this,e,C.a)||this}return M(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){var t;return[{render:new pr({tooltip:new Yo("extensions.Blockquote.buttons.blockquote.tooltip"),icons:(t={},t.md=new or("format_quote"),t.fa=new or("fas fa-quote-right"),t.mdi=new or("mdi-format-quote-close"),t.mdiSvg=new or("M14,17H17L19,13V7H13V13H16M6,17H9L11,13V7H5V13H8L6,17Z"),t),nativeExtensionName:"blockquote"})}]},enumerable:!0,configurable:!0}),e}(Zo),ui=function(t){function e(e){return t.call(this,e,C.f)||this}return M(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){return[]},enumerable:!0,configurable:!0}),e}(Zo),di=function(t){function e(e){return t.call(this,e,C.i)||this}return M(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){var t;return[{render:new pr({tooltip:new Yo("extensions.HorizontalRule.buttons.horizontalRule.tooltip"),icons:(t={},t.md=new Yn(""),t.fa=new or("fas fa-minus"),t.mdi=new or("mdi-minus"),t.mdiSvg=new or("M19,13H5V11H19V13Z"),t),nativeExtensionName:"horizontal_rule"})}]},enumerable:!0,configurable:!0}),e}(Zo),hi=function(t){function e(e){return t.call(this,e,C.h)||this}return M(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){var t,e;return this.options&&this.options.noActions?[]:[{render:new pr({tooltip:new Yo("extensions.History.buttons.undo.tooltip"),icons:(t={},t.md=new or("undo"),t.fa=new or("fas fa-undo"),t.mdi=new or("mdi-undo"),t.mdiSvg=new or("M12.5,8C9.85,8 7.45,9 5.6,10.6L2,7V16H11L7.38,12.38C8.77,11.22 10.54,10.5 12.5,10.5C16.04,10.5 19.05,12.81 20.1,16L22.47,15.22C21.08,11.03 17.15,8 12.5,8Z"),t),nativeExtensionName:"undo"})},{render:new pr({tooltip:new Yo("extensions.History.buttons.redo.tooltip"),icons:(e={},e.md=new or("redo"),e.fa=new or("fas fa-redo"),e.mdi=new or("mdi-redo"),e.mdiSvg=new or("M18.4,10.6C16.55,9 14.15,8 11.5,8C6.85,8 2.92,11.03 1.54,15.22L3.9,16C4.95,12.81 7.95,10.5 11.5,10.5C13.45,10.5 15.23,11.22 16.62,12.38L13,16H22V7L18.4,10.6Z"),e),nativeExtensionName:"redo"})}]},enumerable:!0,configurable:!0}),e}(Zo),fi="value",vi="context",mi="editor",gi="nativeExtensionName",yi="href",bi=lr({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{value:t.value,"max-width":"500px"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v("\n        "+t._s(t.$i18n.getMsg("extensions.Link.window.title"))+"\n      ")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{icon:""},on:{click:t.close}},[n("v-icon",[t._v(t._s(t.COMMON_ICONS.close[t.$tiptapVuetify.iconsGroup]))])],1)],1),t._v(" "),n("v-card-text",[n("v-text-field",{attrs:{label:t.$i18n.getMsg("extensions.Link.window.form.hrefLabel")},model:{value:t.form.href,callback:function(e){t.$set(t.form,"href",e)},expression:"form.href"}})],1),t._v(" "),n("v-card-actions",[n("v-btn",{attrs:{text:""},on:{click:t.close}},[t._v("\n        "+t._s(t.$i18n.getMsg("extensions.Link.window.buttons.close"))+"\n      ")]),t._v(" "),n("v-btn",{attrs:{disabled:t.isDisabled,color:t.isRemove?"error":"primary",text:""},on:{click:t.apply}},[t._v("\n        "+t._s(t.$i18n.getMsg("extensions.Link.window.buttons."+(t.isRemove?"remove":"apply")))+"\n      ")])],1)],1)],1)},staticRenderFns:[]},void 0,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.COMMON_ICONS=Ko,e.form={href:e[yi],blank:!1},e}var n,r,o,i,s;return M(e,t),Object.defineProperty(e.prototype,"isRemove",{get:function(){return this[yi]&&!this.form.href},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDisabled",{get:function(){return this[yi]===this.form.href||!this[yi]&&!this.form.href},enumerable:!0,configurable:!0}),e.prototype.apply=function(){this[vi].commands[this[gi]]({href:this.form.href}),this.close(),this[mi].focus()},e.prototype.close=function(){this.$destroy(),this.$el.parentNode.removeChild(this.$el)},n=fi,r=gi,o=vi,i=mi,s=yi,_([Un({type:Boolean,default:!1}),A("design:type",Boolean)],e.prototype,n,void 0),_([Un({type:String,required:!0}),A("design:type",String)],e.prototype,r,void 0),_([Un({type:Object,required:!0}),A("design:type",Object)],e.prototype,o,void 0),_([Un({type:Object,required:!0}),A("design:type",Object)],e.prototype,i,void 0),_([Un({type:String}),A("design:type",Object)],e.prototype,s,void 0),_([Jn({components:{VDialog:u.a,VCard:p.a,VCardTitle:d.d,VCardText:d.c,VCardActions:d.a,VBtn:a.a,VSpacer:h.a,VIcon:l.a,VTextField:f.a}})],e)}(Fn(Wr)),void 0,!1,void 0,void 0,void 0),wi=function(t){function e(e){return t.call(this,e,C.l)||this}return M(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){var t;return[{render:new pr({tooltip:function(t,e){return new Yo(e.isActive(t)?"extensions.Link.buttons.isActive.tooltip":"extensions.Link.buttons.notActive.tooltip")},icons:(t={},t.md=new or("link"),t.fa=new or("fas fa-link"),t.mdi=new or("mdi-link"),t.mdiSvg=new or("M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z"),t),nativeExtensionName:"link",onClick:function(t){var e=t.context,n=t.editor,r=e.getMarkAttrs("link").href,i=new(o.a.extend(bi))({vuetify:o.a.prototype.tiptapVuetifyPlugin.vuetify,propsData:{value:!0,nativeExtensionName:"link",context:e,editor:n,href:r}});i.$mount(),document.querySelector("body").appendChild(i.$el)}})}]},enumerable:!0,configurable:!0}),e}(Zo),xi=be("isConcatSpreadable"),Si=Ve>=51||!B((function(){var t=[];return t[xi]=!1,t.concat()[0]!==t})),ki=He("concat"),Ci=function(t){if(!Y(t))return!1;var e=t[xi];return void 0!==e?!!e:he(t)};pe({target:"Array",proto:!0,forced:!Si||!ki},{concat:function(t){var e,n,r,o,i,s=de(this),a=xe(s,0),l=0;for(e=-1,r=arguments.length;e<r;e++)if(Ci(i=-1===e?s:arguments[e])){if(l+(o=Ft(i.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<o;n++,l++)n in i&&$e(a,l,i[n])}else{if(l>=9007199254740991)throw TypeError("Maximum allowed index exceeded");$e(a,l++,i)}return a.length=l,a}});var Oi=Ce.filter,Mi=He("filter"),Ti=Ae("filter");pe({target:"Array",proto:!0,forced:!Mi||!Ti},{filter:function(t){return Oi(this,t,arguments.length>1?arguments[1]:void 0)}});var _i=be("unscopables"),Ai=Array.prototype;null==Ai[_i]&&ct.f(Ai,_i,{configurable:!0,value:on(null)});var Ni=function(t){Ai[_i][t]=!0},Ei=Kt.includes,Ri=Ae("indexOf",{ACCESSORS:!0,1:0});pe({target:"Array",proto:!0,forced:!Ri},{includes:function(t){return Ei(this,t,arguments.length>1?arguments[1]:void 0)}}),Ni("includes");var Di=be("match");pe({target:"String",proto:!0,forced:!function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[Di]=!1,"/./"[t](e)}catch(t){}}return!1}("includes")},{includes:function(t){return!!~String(G(this)).indexOf(function(t){if(Dr(t))throw TypeError("The method doesn't accept regular expressions");return t}(t),arguments.length>1?arguments[1]:void 0)}});var Ii="select-file",Pi="tiptap-vuetify-image-upload-area-holder",$i=lr({render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tiptap-vuetify-image-upload-area"},[e("input",{attrs:{id:"tiptap-vuetify-image-upload-area__input-file",type:"file",accept:"image/*",multiple:""}}),this._v(" "),e("label",{staticClass:"tiptap-vuetify-image-upload-area-holder",attrs:{for:"tiptap-vuetify-image-upload-area__input-file"}},[e("div",[e("svg",{staticClass:"tiptap-vuetify-image-upload-area-holder__icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"43",viewBox:"0 0 50 43"}},[e("path",{attrs:{d:"M48.4 26.5c-.9 0-1.7.7-1.7 1.7v11.6h-43.3v-11.6c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v13.2c0 .9.7 1.7 1.7 1.7h46.7c.9 0 1.7-.7 1.7-1.7v-13.2c0-1-.7-1.7-1.7-1.7zm-24.5 6.1c.3.3.8.5 1.2.5.4 0 .9-.2 1.2-.5l10-11.6c.7-.7.7-1.7 0-2.4s-1.7-.7-2.4 0l-7.1 8.3v-25.3c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v25.3l-7.1-8.3c-.7-.7-1.7-.7-2.4 0s-.7 1.7 0 2.4l10 11.6z"}})]),this._v(" "),e("br"),e("br"),this._v(" "),e("h3",[this._v(this._s(this.$i18n.getMsg("extensions.Image.window.imageUpload.instruction")))])])])])},staticRenderFns:[]},void 0,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.mounted=function(){var t=this,e=this.$el.querySelector("."+Pi);this.$el.querySelector("#tiptap-vuetify-image-upload-area__input-file").addEventListener("change",(function(n){n.target instanceof HTMLInputElement&&(t.filesSelected(n.target.files),e.classList.remove(Pi+"--dragover"),n.target.value="")})),e.addEventListener("dragover",(function(){return e.classList.add(Pi+"--dragover"),!1}));var n=function(){return e.classList.remove(Pi+"--dragover"),!1};e.addEventListener("dragleave",n),e.addEventListener("dragend",n),e.addEventListener("drop",(function(e){e.preventDefault(),t.filesSelected(e.dataTransfer.files)}))},e.prototype.filesSelected=function(t){var e=this;D(t).forEach((function(t){var n=new FileReader;n.addEventListener("load",(function(n){e.$emit(Ii,{src:n.target.result.toString(),alt:t.name})})),n.readAsDataURL(t)}))},_([Jn],e)}(Fn(Wr)),void 0,!1,void 0,void 0,void 0),Li=lr({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-text-field",{attrs:{label:t.$i18n.getMsg("extensions.Image.window.form.sourceLink")},model:{value:t.form.src,callback:function(e){t.$set(t.form,"src",e)},expression:"form.src"}}),t._v(" "),n("v-text-field",{attrs:{label:t.$i18n.getMsg("extensions.Image.window.form.altText")},model:{value:t.form.alt,callback:function(e){t.$set(t.form,"alt",e)},expression:"form.alt"}}),t._v(" "),n("v-btn",{on:{click:t.addImage}},[t._v("\n    "+t._s(t.$i18n.getMsg("extensions.Image.window.form.addImage"))+"\n  ")])],1)},staticRenderFns:[]},void 0,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.form={src:null,alt:null},e}return M(e,t),e.prototype.addImage=function(){this.$emit(Ii,{src:this.form.src,alt:this.form.alt}),this.form.src=null,this.form.alt=null},_([Jn({components:{VTextField:f.a}})],e)}(Fn(Wr)),"data-v-c4747a2a",!1,void 0,void 0,void 0);let zi=!1;try{if("undefined"!=typeof window){const t=Object.defineProperty({},"passive",{get:()=>{zi=!0}});window.addEventListener("testListener",t,t),window.removeEventListener("testListener",t,t)}}catch(rr){console.warn(rr)}Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34});const Bi=/-(\w)/g,ji=t=>t.replace(Bi,(t,e)=>e?e.toUpperCase():""),Vi=/;(?![^(]*\))/g,Fi=/:(.*)/;function Hi(t){const e={};for(const n of t.split(Vi)){let[t,r]=n.split(Fi);(t=t.trim())&&("string"==typeof r&&(r=r.trim()),e[ji(t)]=r)}return e}function qi(t,e,n="in-out"){return{name:t,functional:!0,props:{mode:{type:String,default:n}},render:(n,r)=>n("transition",function(){const t={};let e,n,r=arguments.length;for(;r--;)for(e of Object.keys(arguments[r]))switch(e){case"class":case"style":case"directives":if(Array.isArray(t[e])||(t[e]=[]),"style"===e){let t;t=Array.isArray(arguments[r].style)?arguments[r].style:[arguments[r].style];for(let e=0;e<t.length;e++){const n=t[e];"string"==typeof n&&(t[e]=Hi(n))}arguments[r].style=t}t[e]=t[e].concat(arguments[r][e]);break;case"staticClass":if(!arguments[r][e])break;void 0===t[e]&&(t[e]=""),t[e]&&(t[e]+=" "),t[e]+=arguments[r][e].trim();break;case"on":case"nativeOn":t[e]||(t[e]={});t[e];for(n of Object.keys(arguments[r][e]||{}))i.b[n]?i.b[n]=Array().concat(i.b[n],arguments[r][e][n]):i.b[n]=arguments[r][e][n];break;case"attrs":case"props":case"domProps":case"scopedSlots":case"staticStyle":case"hook":case"transition":t[e]||(t[e]={}),t[e]={...arguments[r][e],...t[e]};break;case"slot":case"key":case"ref":case"tag":case"show":case"keepAlive":default:t[e]||(t[e]=arguments[r][e])}return t}(r.data,{props:{name:t},on:e}),r.children)}}function Wi(t="",e=!1){const n=e?"width":"height",r="offset"+((o=n).charAt(0).toUpperCase()+o.slice(1));var o;return{beforeEnter(t){t._parent=t.parentNode,t._initialStyle={transition:t.style.transition,visibility:t.style.visibility,overflow:t.style.overflow,[n]:t.style[n]}},enter(e){const o=e._initialStyle,i=e[r]+"px";e.style.setProperty("transition","none","important"),e.style.visibility="hidden",e.style.visibility=o.visibility,e.style.overflow="hidden",e.style[n]="0",e.offsetHeight,e.style.transition=o.transition,t&&e._parent&&e._parent.classList.add(t),requestAnimationFrame(()=>{e.style[n]=i})},afterEnter:s,enterCancelled:s,leave(t){t._initialStyle={transition:"",visibility:"",overflow:t.style.overflow,[n]:t.style[n]},t.style.overflow="hidden",t.style[n]=t[r]+"px",t.offsetHeight,requestAnimationFrame(()=>t.style[n]="0")},afterLeave:i,leaveCancelled:i};function i(e){t&&e._parent&&e._parent.classList.remove(t),s(e)}function s(t){const e=t._initialStyle[n];t.style.overflow=t._initialStyle.overflow,null!=e&&(t.style[n]=e),delete t._initialStyle}}const Ji=qi("expand-transition",Wi());qi("expand-x-transition",Wi("",!0));var Ki,Ui,Gi,Xi="context",Yi="imageSources",Zi="imageSourcesOverride",Qi="nativeExtensionName",ts=lr({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{value:t.value,"max-width":"500px"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v("\n        "+t._s(t.$i18n.getMsg("extensions.Image.window.title"))+"\n      ")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{icon:""},on:{click:t.close}},[n("v-icon",[t._v(t._s(t.COMMON_ICONS.close[t.$tiptapVuetify.iconsGroup]))])],1)],1),t._v(" "),n("v-card-text",[n("v-expand-transition",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.previewSources.length,expression:"previewSources.length"}]},[n("v-row",{attrs:{"no-gutters":"",justify:"center",align:"center"}},t._l(t.previewSources,(function(e,r){return n("v-col",{key:"preview"+r,attrs:{cols:"4"}},[n("v-img",{staticClass:"text-right",attrs:{src:e.src,alt:e.alt}},[n("v-btn",{attrs:{icon:"",small:"",dark:""},on:{click:function(n){return t.removeSource(e)}}},[n("v-icon",{attrs:{small:""}},[t._v("\n                    close\n                  ")])],1)],1),t._v(" "),n("v-text-field",{attrs:{label:"Alt Text"},model:{value:e.alt,callback:function(n){t.$set(e,"alt",n)},expression:"source.alt"}})],1)})),1)],1)])],1),t._v(" "),n("v-tabs",{attrs:{"fixed-tabs":""}},[t._l(t.imageTabs,(function(e,r){return[n("v-tab",{key:"tab-"+r,attrs:{href:"#tab-"+r}},[t._v("\n          "+t._s(e.name)+"\n        ")]),t._v(" "),n("v-tab-item",{key:"tab-item-"+r,attrs:{value:"tab-"+r}},[n(e.component,{tag:"component",staticClass:"pa-4",on:{"select-file":t.onFileSelect}})],1)]}))],2),t._v(" "),n("v-card-actions",[n("v-btn",{attrs:{text:""},on:{click:t.close}},[t._v("\n        "+t._s(t.$i18n.getMsg("extensions.Image.window.buttons.close"))+"\n      ")]),t._v(" "),n("v-btn",{attrs:{disabled:t.isDisabled,text:""},on:{click:t.apply}},[t._v("\n        "+t._s(t.$i18n.getMsg("extensions.Image.window.buttons.apply"))+"\n      ")])],1)],1)],1)},staticRenderFns:[]},void 0,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.COMMON_ICONS=Ko,e.defaultImageTabs=[{name:"URL",component:Li},{name:"Upload",component:$i}],e.inputPreviewSources=[],e}return M(e,t),Object.defineProperty(e.prototype,"imageTabs",{get:function(){return this[Yi]?this[Zi]?this[Yi]:this.defaultImageTabs.concat(this[Yi]):this.defaultImageTabs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"previewSources",{get:function(){return this.inputPreviewSources.filter(Boolean)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDisabled",{get:function(){return!this.previewSources.length},enumerable:!0,configurable:!0}),e.prototype.removeSource=function(t){this.inputPreviewSources.includes(t)&&(this.inputPreviewSources=this.inputPreviewSources.filter((function(e){return e!==t})))},e.prototype.onFileSelect=function(t){if(null!==t.src&&""!==t.src){var e=this.findFile(t);null!==e?e.alt=t.alt:this.inputPreviewSources.push(t)}},e.prototype.findFile=function(t){var e=this.inputPreviewSources.filter((function(e){return e.src===t.src}));return e.length>0?e[0]:null},e.prototype.apply=function(){var t=this;this.previewSources.forEach((function(e){t[Xi].commands[t[Qi]](e)})),this.close(),this.editor.focus()},e.prototype.close=function(){this.$destroy(),this.$el.parentNode.removeChild(this.$el)},"value",Qi,Xi,"editor",Yi,Zi,_([Un({type:Boolean,default:!1}),A("design:type",Boolean)],e.prototype,"value",void 0),_([Un({type:String,required:!0}),A("design:type",String)],e.prototype,"nativeExtensionName",void 0),_([Un({type:Object,required:!0}),A("design:type",Object)],e.prototype,"context",void 0),_([Un({type:Object,required:!0}),A("design:type",Object)],e.prototype,"editor",void 0),_([Un({type:Array,required:!1}),A("design:type",Object)],e.prototype,"imageSources",void 0),_([Un({type:Boolean,required:!1}),A("design:type",Object)],e.prototype,"imageSourcesOverride",void 0),_([Jn({components:{VRow:v.a,VCol:m.a,VExpandTransition:Ji,ImageForm:Li,ImageUploadArea:$i,VImg:g.a,VDialog:u.a,VCard:p.a,VCardTitle:d.d,VCardText:d.c,VCardActions:d.a,VBtn:a.a,VSpacer:h.a,VIcon:l.a,VTextField:f.a,VTabs:y.a,VTab:b.a,VTabsSlider:w.a,VTabItem:x.a,VTabsItems:S.a}})],e)}(Fn(Wr)),void 0,!1,void 0,void 0,void 0),es=(function(t){function e(e){return t.call(this,e,C.j)||this}M(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){var t,e=this.options;return[{render:new pr({tooltip:new Yo("extensions.Image.buttons.tooltip"),icons:(t={},t.md=new or("image"),t.fa=new or("fas fa-image"),t.mdi=new or("mdi-image"),t.mdiSvg=new or("M8.5,13.5L11,16.5L14.5,12L19,18H5M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19Z"),t),nativeExtensionName:"image",onClick:function(t){var n=t.context,r=t.editor;return N(this,void 0,void 0,(function(){var t,i;return E(this,(function(s){return t=o.a.extend(ts),(i=new t({vuetify:o.a.prototype.tiptapVuetifyPlugin.vuetify,propsData:{value:!0,nativeExtensionName:"image",context:n,editor:r,imageSources:e.imageSources,imageSourcesOverride:e.imageSourcesOverride}})).$mount(),document.querySelector("body").appendChild(i.$el),[2]}))}))}})}]},enumerable:!0,configurable:!0})}(Zo),function(t){function e(e){return t.call(this,e,C.u)||this}M(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){var t;return[{render:new pr({tooltip:new Yo("extensions.TodoList.buttons.todoList.tooltip"),icons:(t={},t.md=new or("check_box"),t.fa=new or("fas fa-tasks"),t.mdi=new or("mdi-format-list-checks"),t.mdiSvg=new or("M3,5H9V11H3V5M5,7V9H7V7H5M11,7H21V9H11V7M11,15H21V17H11V15M5,20L1.5,16.5L2.91,15.09L5,17.17L9.59,12.59L11,14L5,20Z"),t),nativeExtensionName:"todo_list"})}]},enumerable:!0,configurable:!0})}(Zo),!B((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))),ns=Ot("IE_PROTO"),rs=Object.prototype,is=es?Object.getPrototypeOf:function(t){return t=de(t),tt(t,ns)?t[ns]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?rs:null},ss=be("iterator"),as=!1;[].keys&&("next"in(Gi=[].keys())?(Ui=is(is(Gi)))!==Object.prototype&&(Ki=Ui):as=!0),null==Ki&&(Ki={}),tt(Ki,ss)||pt(Ki,ss,(function(){return this}));var ls={IteratorPrototype:Ki,BUGGY_SAFARI_ITERATORS:as},cs=ct.f,ps=be("toStringTag"),us=function(t,e,n){t&&!tt(t=n?t:t.prototype,ps)&&cs(t,ps,{configurable:!0,value:e})},ds=ls.IteratorPrototype,hs=ls.IteratorPrototype,fs=ls.BUGGY_SAFARI_ITERATORS,vs=be("iterator"),ms=function(){return this},gs=Dt.set,ys=Dt.getterFor("Array Iterator"),bs=function(t,e,n,r,o,i,s){!function(t,e,n){t.prototype=on(ds,{next:q(1,n)}),us(t,"Array Iterator",!1)}(n,0,(function(){var t=ys(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}));var a,l,c,p=function(t){if(t===o&&f)return f;if(!fs&&t in d)return d[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},u=!1,d=t.prototype,h=d[vs]||d["@@iterator"]||d[o],f=!fs&&h||p(o),v=d.entries||h;if(v&&(a=is(v.call(new t)),hs!==Object.prototype&&a.next&&(is(a)!==hs&&(Xe?Xe(a,hs):"function"!=typeof a[vs]&&pt(a,vs,ms)),us(a,"Array Iterator",!0))),h&&"values"!==h.name&&(u=!0,f=function(){return h.call(this)}),d[vs]!==f&&pt(d,vs,f),void(l={values:p("values"),keys:p("keys"),entries:p("entries")}))for(c in l)!fs&&!u&&c in d||It(d,c,l[c]);else pe({target:e,proto:!0,forced:fs||u},l);return l}(Array,"Array",(function(t,e){gs(this,{type:"Array Iterator",target:X(t),index:0,kind:e})}),0,"values");Ni("keys"),Ni("values"),Ni("entries");var ws=be("iterator"),xs=be("toStringTag"),Ss=bs.values;for(var ks in In){var Cs=z[ks],Os=Cs&&Cs.prototype;if(Os){if(Os[ws]!==Ss)try{pt(Os,ws,Ss)}catch(rr){Os[ws]=Ss}if(Os[xs]||pt(Os,xs,ks),In[ks])for(var Ms in bs)if(Os[Ms]!==bs[Ms])try{pt(Os,Ms,bs[Ms])}catch(rr){Os[Ms]=bs[Ms]}}}function Ts(t){this.content=t}Ts.prototype={constructor:Ts,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,o=r.find(t),i=r.content.slice();return-1==o?i.push(n||t,e):(i[o+1]=e,n&&(i[o]=n)),new Ts(i)},remove:function(t){var e=this.find(t);if(-1==e)return this;var n=this.content.slice();return n.splice(e,2),new Ts(n)},addToStart:function(t,e){return new Ts([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Ts(n)},addBefore:function(t,e,n){var r=this.remove(e),o=r.content.slice(),i=r.find(t);return o.splice(-1==i?o.length:i,0,e,n),new Ts(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return(t=Ts.from(t)).size?new Ts(t.content.concat(this.subtract(t).content)):this},append:function(t){return(t=Ts.from(t)).size?new Ts(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Ts.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},get size(){return this.content.length>>1}},Ts.from=function(t){if(t instanceof Ts)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Ts(e)};var _s=Ts,As=function(t,e){if(this.content=t,this.size=e||0,null==e)for(var n=0;n<t.length;n++)this.size+=t[n].nodeSize},Ns={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};As.prototype.nodesBetween=function(t,e,n,r,o){void 0===r&&(r=0);for(var i=0,s=0;s<e;i++){var a=this.content[i],l=s+a.nodeSize;if(l>t&&!1!==n(a,r+s,o,i)&&a.content.size){var c=s+1;a.nodesBetween(Math.max(0,t-c),Math.min(a.content.size,e-c),n,r+c)}s=l}},As.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)},As.prototype.textBetween=function(t,e,n,r){var o="",i=!0;return this.nodesBetween(t,e,(function(s,a){s.isText?(o+=s.text.slice(Math.max(t,a)-a,e-a),i=!n):s.isLeaf&&r?(o+=r,i=!n):!i&&s.isBlock&&(o+=n,i=!0)}),0),o},As.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,n=t.firstChild,r=this.content.slice(),o=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),o=1);o<t.content.length;o++)r.push(t.content[o]);return new As(r,this.size+t.size)},As.prototype.cut=function(t,e){if(null==e&&(e=this.size),0==t&&e==this.size)return this;var n=[],r=0;if(e>t)for(var o=0,i=0;i<e;o++){var s=this.content[o],a=i+s.nodeSize;a>t&&((i<t||a>e)&&(s=s.isText?s.cut(Math.max(0,t-i),Math.min(s.text.length,e-i)):s.cut(Math.max(0,t-i-1),Math.min(s.content.size,e-i-1))),n.push(s),r+=s.nodeSize),i=a}return new As(n,r)},As.prototype.cutByIndex=function(t,e){return t==e?As.empty:0==t&&e==this.content.length?this:new As(this.content.slice(t,e))},As.prototype.replaceChild=function(t,e){var n=this.content[t];if(n==e)return this;var r=this.content.slice(),o=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new As(r,o)},As.prototype.addToStart=function(t){return new As([t].concat(this.content),this.size+t.nodeSize)},As.prototype.addToEnd=function(t){return new As(this.content.concat(t),this.size+t.nodeSize)},As.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0},Ns.firstChild.get=function(){return this.content.length?this.content[0]:null},Ns.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},Ns.childCount.get=function(){return this.content.length},As.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},As.prototype.maybeChild=function(t){return this.content[t]},As.prototype.forEach=function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}},As.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),function t(e,n,r){for(var o=0;;o++){if(o==e.childCount||o==n.childCount)return e.childCount==n.childCount?null:r;var i=e.child(o),s=n.child(o);if(i!=s){if(!i.sameMarkup(s))return r;if(i.isText&&i.text!=s.text){for(var a=0;i.text[a]==s.text[a];a++)r++;return r}if(i.content.size||s.content.size){var l=t(i.content,s.content,r+1);if(null!=l)return l}r+=i.nodeSize}else r+=i.nodeSize}}(this,t,e)},As.prototype.findDiffEnd=function(t,e,n){return void 0===e&&(e=this.size),void 0===n&&(n=t.size),function t(e,n,r,o){for(var i=e.childCount,s=n.childCount;;){if(0==i||0==s)return i==s?null:{a:r,b:o};var a=e.child(--i),l=n.child(--s),c=a.nodeSize;if(a!=l){if(!a.sameMarkup(l))return{a:r,b:o};if(a.isText&&a.text!=l.text){for(var p=0,u=Math.min(a.text.length,l.text.length);p<u&&a.text[a.text.length-p-1]==l.text[l.text.length-p-1];)p++,r--,o--;return{a:r,b:o}}if(a.content.size||l.content.size){var d=t(a.content,l.content,r-1,o-1);if(d)return d}r-=c,o-=c}else r-=c,o-=c}}(this,t,e,n)},As.prototype.findIndex=function(t,e){if(void 0===e&&(e=-1),0==t)return Rs(0,t);if(t==this.size)return Rs(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var o=r+this.child(n).nodeSize;if(o>=t)return o==t||e>0?Rs(n+1,o):Rs(n,r);r=o}},As.prototype.toString=function(){return"<"+this.toStringInner()+">"},As.prototype.toStringInner=function(){return this.content.join(", ")},As.prototype.toJSON=function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null},As.fromJSON=function(t,e){if(!e)return As.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new As(e.map(t.nodeFromJSON))},As.fromArray=function(t){if(!t.length)return As.empty;for(var e,n=0,r=0;r<t.length;r++){var o=t[r];n+=o.nodeSize,r&&o.isText&&t[r-1].sameMarkup(o)?(e||(e=t.slice(0,r)),e[e.length-1]=o.withText(e[e.length-1].text+o.text)):e&&e.push(o)}return new As(e||t,n)},As.from=function(t){if(!t)return As.empty;if(t instanceof As)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new As([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(As.prototype,Ns);var Es={index:0,offset:0};function Rs(t,e){return Es.index=t,Es.offset=e,Es}function Ds(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!Ds(t[r],e[r]))return!1}else{for(var o in t)if(!(o in e)||!Ds(t[o],e[o]))return!1;for(var i in e)if(!(i in t))return!1}return!0}As.empty=new As([],0);var Is=function(t,e){this.type=t,this.attrs=e};function Ps(t){var e=Error.call(this,t);return e.__proto__=Ps.prototype,e}Is.prototype.addToSet=function(t){for(var e,n=!1,r=0;r<t.length;r++){var o=t[r];if(this.eq(o))return t;if(this.type.excludes(o.type))e||(e=t.slice(0,r));else{if(o.type.excludes(this.type))return t;!n&&o.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(o)}}return e||(e=t.slice()),n||e.push(this),e},Is.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t},Is.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1},Is.prototype.eq=function(t){return this==t||this.type==t.type&&Ds(this.attrs,t.attrs)},Is.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t},Is.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type "+e.type+" in this schema");return n.create(e.attrs)},Is.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0},Is.setFrom=function(t){if(!t||0==t.length)return Is.none;if(t instanceof Is)return[t];var e=t.slice();return e.sort((function(t,e){return t.type.rank-e.type.rank})),e},Is.none=[],Ps.prototype=Object.create(Error.prototype),Ps.prototype.constructor=Ps,Ps.prototype.name="ReplaceError";var $s=function(t,e,n){this.content=t,this.openStart=e,this.openEnd=n},Ls={size:{configurable:!0}};function zs(t,e){if(!e.type.compatibleContent(t.type))throw new Ps("Cannot join "+e.type.name+" onto "+t.type.name)}function Bs(t,e,n){var r=t.node(n);return zs(r,e.node(n)),r}function js(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Vs(t,e,n,r){var o=(e||t).node(n),i=0,s=e?e.index(n):o.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(js(t.nodeAfter,r),i++));for(var a=i;a<s;a++)js(o.child(a),r);e&&e.depth==n&&e.textOffset&&js(e.nodeBefore,r)}function Fs(t,e){if(!t.type.validContent(e))throw new Ps("Invalid content for node "+t.type.name);return t.copy(e)}function Hs(t,e,n){var r=[];return Vs(null,t,n,r),t.depth>n&&js(Fs(Bs(t,e,n+1),Hs(t,e,n+1)),r),Vs(e,null,n,r),new As(r)}Ls.size.get=function(){return this.content.size-this.openStart-this.openEnd},$s.prototype.insertAt=function(t,e){var n=function t(e,n,r,o){var i=e.findIndex(n),s=i.index,a=i.offset,l=e.maybeChild(s);if(a==n||l.isText)return o&&!o.canReplace(s,s,r)?null:e.cut(0,n).append(r).append(e.cut(n));var c=t(l.content,n-a-1,r);return c&&e.replaceChild(s,l.copy(c))}(this.content,t+this.openStart,e,null);return n&&new $s(n,this.openStart,this.openEnd)},$s.prototype.removeBetween=function(t,e){return new $s(function t(e,n,r){var o=e.findIndex(n),i=o.index,s=o.offset,a=e.maybeChild(i),l=e.findIndex(r),c=l.index,p=l.offset;if(s==n||a.isText){if(p!=r&&!e.child(c).isText)throw new RangeError("Removing non-flat range");return e.cut(0,n).append(e.cut(r))}if(i!=c)throw new RangeError("Removing non-flat range");return e.replaceChild(i,a.copy(t(a.content,n-s-1,r-s-1)))}(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)},$s.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd},$s.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},$s.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t},$s.fromJSON=function(t,e){if(!e)return $s.empty;var n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new $s(As.fromJSON(t,e.content),e.openStart||0,e.openEnd||0)},$s.maxOpen=function(t,e){void 0===e&&(e=!0);for(var n=0,r=0,o=t.firstChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.firstChild)n++;for(var i=t.lastChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.lastChild)r++;return new $s(t,n,r)},Object.defineProperties($s.prototype,Ls),$s.empty=new $s(As.empty,0,0);var qs=function(t,e,n){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=n},Ws={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};qs.prototype.resolveDepth=function(t){return null==t?this.depth:t<0?this.depth+t:t},Ws.parent.get=function(){return this.node(this.depth)},Ws.doc.get=function(){return this.node(0)},qs.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},qs.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},qs.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},qs.prototype.start=function(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1},qs.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},qs.prototype.before=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},qs.prototype.after=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},Ws.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},Ws.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r},Ws.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},qs.prototype.marks=function(){var t=this.parent,e=this.index();if(0==t.content.size)return Is.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){var o=n;n=r,r=o}for(var i=n.marks,s=0;s<i.length;s++)!1!==i[s].type.spec.inclusive||r&&i[s].isInSet(r.marks)||(i=i[s--].removeFromSet(i));return i},qs.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,r=t.parent.maybeChild(t.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n},qs.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0},qs.prototype.blockRange=function(t,e){if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new Gs(this,t,n)},qs.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},qs.prototype.max=function(t){return t.pos>this.pos?t:this},qs.prototype.min=function(t){return t.pos<this.pos?t:this},qs.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset},qs.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var n=[],r=0,o=e,i=t;;){var s=i.content.findIndex(o),a=s.index,l=s.offset,c=o-l;if(n.push(i,a,r+l),!c)break;if((i=i.child(a)).isText)break;o=c-1,r+=l+1}return new qs(e,n,o)},qs.resolveCached=function(t,e){for(var n=0;n<Js.length;n++){var r=Js[n];if(r.pos==e&&r.doc==t)return r}var o=Js[Ks]=qs.resolve(t,e);return Ks=(Ks+1)%Us,o},Object.defineProperties(qs.prototype,Ws);var Js=[],Ks=0,Us=12,Gs=function(t,e,n){this.$from=t,this.$to=e,this.depth=n},Xs={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};Xs.start.get=function(){return this.$from.before(this.depth+1)},Xs.end.get=function(){return this.$to.after(this.depth+1)},Xs.parent.get=function(){return this.$from.node(this.depth)},Xs.startIndex.get=function(){return this.$from.index(this.depth)},Xs.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(Gs.prototype,Xs);var Ys=Object.create(null),Zs=function(t,e,n,r){this.type=t,this.attrs=e,this.content=n||As.empty,this.marks=r||Is.none},Qs={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};Qs.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},Qs.childCount.get=function(){return this.content.childCount},Zs.prototype.child=function(t){return this.content.child(t)},Zs.prototype.maybeChild=function(t){return this.content.maybeChild(t)},Zs.prototype.forEach=function(t){this.content.forEach(t)},Zs.prototype.nodesBetween=function(t,e,n,r){void 0===r&&(r=0),this.content.nodesBetween(t,e,n,r,this)},Zs.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},Qs.textContent.get=function(){return this.textBetween(0,this.content.size,"")},Zs.prototype.textBetween=function(t,e,n,r){return this.content.textBetween(t,e,n,r)},Qs.firstChild.get=function(){return this.content.firstChild},Qs.lastChild.get=function(){return this.content.lastChild},Zs.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},Zs.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},Zs.prototype.hasMarkup=function(t,e,n){return this.type==t&&Ds(this.attrs,e||t.defaultAttrs||Ys)&&Is.sameSet(this.marks,n||Is.none)},Zs.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},Zs.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},Zs.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},Zs.prototype.slice=function(t,e,n){if(void 0===e&&(e=this.content.size),void 0===n&&(n=!1),t==e)return $s.empty;var r=this.resolve(t),o=this.resolve(e),i=n?0:r.sharedDepth(e),s=r.start(i),a=r.node(i).content.cut(r.pos-s,o.pos-s);return new $s(a,r.depth-i,o.depth-i)},Zs.prototype.replace=function(t,e,n){return function(t,e,n){if(n.openStart>t.depth)throw new Ps("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Ps("Inconsistent open depths");return function t(e,n,r,o){var i=e.index(o),s=e.node(o);if(i==n.index(o)&&o<e.depth-r.openStart){var a=t(e,n,r,o+1);return s.copy(s.content.replaceChild(i,a))}if(r.content.size){if(r.openStart||r.openEnd||e.depth!=o||n.depth!=o){var l=function(t,e){for(var n=e.depth-t.openStart,r=e.node(n).copy(t.content),o=n-1;o>=0;o--)r=e.node(o).copy(As.from(r));return{start:r.resolveNoCache(t.openStart+n),end:r.resolveNoCache(r.content.size-t.openEnd-n)}}(r,e);return Fs(s,function t(e,n,r,o,i){var s=e.depth>i&&Bs(e,n,i+1),a=o.depth>i&&Bs(r,o,i+1),l=[];return Vs(null,e,i,l),s&&a&&n.index(i)==r.index(i)?(zs(s,a),js(Fs(s,t(e,n,r,o,i+1)),l)):(s&&js(Fs(s,Hs(e,n,i+1)),l),Vs(n,r,i,l),a&&js(Fs(a,Hs(r,o,i+1)),l)),Vs(o,null,i,l),new As(l)}(e,l.start,l.end,n,o))}var c=e.parent,p=c.content;return Fs(c,p.cut(0,e.parentOffset).append(r.content).append(p.cut(n.parentOffset)))}return Fs(s,Hs(e,n,o))}(t,e,n,0)}(this.resolve(t),this.resolve(e),n)},Zs.prototype.nodeAt=function(t){for(var e=this;;){var n=e.content.findIndex(t),r=n.index,o=n.offset;if(!(e=e.maybeChild(r)))return null;if(o==t||e.isText)return e;t-=o+1}},Zs.prototype.childAfter=function(t){var e=this.content.findIndex(t),n=e.index,r=e.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},Zs.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,r=e.offset;if(r<t)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}},Zs.prototype.resolve=function(t){return qs.resolveCached(this,t)},Zs.prototype.resolveNoCache=function(t){return qs.resolve(this,t)},Zs.prototype.rangeHasMark=function(t,e,n){var r=!1;return e>t&&this.nodesBetween(t,e,(function(t){return n.isInSet(t.marks)&&(r=!0),!r})),r},Qs.isBlock.get=function(){return this.type.isBlock},Qs.isTextblock.get=function(){return this.type.isTextblock},Qs.inlineContent.get=function(){return this.type.inlineContent},Qs.isInline.get=function(){return this.type.isInline},Qs.isText.get=function(){return this.type.isText},Qs.isLeaf.get=function(){return this.type.isLeaf},Qs.isAtom.get=function(){return this.type.isAtom},Zs.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),ea(this.marks,t)},Zs.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e},Zs.prototype.canReplace=function(t,e,n,r,o){void 0===n&&(n=As.empty),void 0===r&&(r=0),void 0===o&&(o=n.childCount);var i=this.contentMatchAt(t).matchFragment(n,r,o),s=i&&i.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(var a=r;a<o;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0},Zs.prototype.canReplaceWith=function(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(t).matchType(n),i=o&&o.matchFragment(this.content,e);return!!i&&i.validEnd},Zs.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},Zs.prototype.defaultContentType=function(t){return this.contentMatchAt(t).defaultType},Zs.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));this.content.forEach((function(t){return t.check()}))},Zs.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((function(t){return t.toJSON()}))),t},Zs.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var r=As.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)},Object.defineProperties(Zs.prototype,Qs);var ta=function(t){function e(e,n,r,o){if(t.call(this,e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return e.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):ea(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},e.prototype.textBetween=function(t,e){return this.text.slice(t,e)},n.nodeSize.get=function(){return this.text.length},e.prototype.mark=function(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)},e.prototype.withText=function(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)},e.prototype.cut=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.text.length),0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))},e.prototype.eq=function(t){return this.sameMarkup(t)&&this.text==t.text},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.text=this.text,e},Object.defineProperties(e.prototype,n),e}(Zs);function ea(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var na=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},ra={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};na.parse=function(t,e){var n=new oa(t,e);if(null==n.next)return na.empty;var r=sa(n);n.next&&n.err("Unexpected trailing text");var o=function(t){var e=Object.create(null);return function n(r){var o=[];r.forEach((function(e){t[e].forEach((function(e){var n=e.term,r=e.to;if(n){var i=o.indexOf(n),s=i>-1&&o[i+1];da(t,r).forEach((function(t){s||o.push(n,s=[]),-1==s.indexOf(t)&&s.push(t)}))}}))}));for(var i=e[r.join(",")]=new na(r.indexOf(t.length-1)>-1),s=0;s<o.length;s+=2){var a=o[s+1].sort(ua);i.next.push(o[s],e[a.join(",")]||n(a))}return i}(da(t,0))}(function(t){var e=[[]];return o(function t(e,i){if("choice"==e.type)return e.exprs.reduce((function(e,n){return e.concat(t(n,i))}),[]);if("seq"==e.type)for(var s=0;;s++){var a=t(e.exprs[s],i);if(s==e.exprs.length-1)return a;o(a,i=n())}else{if("star"==e.type){var l=n();return r(i,l),o(t(e.expr,l),l),[r(l)]}if("plus"==e.type){var c=n();return o(t(e.expr,i),c),o(t(e.expr,c),c),[r(c)]}if("opt"==e.type)return[r(i)].concat(t(e.expr,i));if("range"==e.type){for(var p=i,u=0;u<e.min;u++){var d=n();o(t(e.expr,p),d),p=d}if(-1==e.max)o(t(e.expr,p),p);else for(var h=e.min;h<e.max;h++){var f=n();r(p,f),o(t(e.expr,p),f),p=f}return[r(p)]}if("name"==e.type)return[r(i,null,e.value)]}}(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){var o={term:r,to:n};return e[t].push(o),o}function o(t,e){t.forEach((function(t){return t.to=e}))}}(r));return function(t,e){for(var n=0,r=[t];n<r.length;n++){for(var o=r[n],i=!o.validEnd,s=[],a=0;a<o.next.length;a+=2){var l=o.next[a],c=o.next[a+1];s.push(l.name),!i||l.isText||l.hasRequiredAttrs()||(i=!1),-1==r.indexOf(c)&&r.push(c)}i&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position")}}(o,n),o},na.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null},na.prototype.matchFragment=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.childCount);for(var r=this,o=e;r&&o<n;o++)r=r.matchType(t.child(o).type);return r},ra.inlineContent.get=function(){var t=this.next[0];return!!t&&t.isInline},ra.defaultType.get=function(){for(var t=0;t<this.next.length;t+=2){var e=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}},na.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var n=0;n<t.next.length;n+=2)if(this.next[e]==t.next[n])return!0;return!1},na.prototype.fillBefore=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=0);var r=[this];return function o(i,s){var a=i.matchFragment(t,n);if(a&&(!e||a.validEnd))return As.from(s.map((function(t){return t.createAndFill()})));for(var l=0;l<i.next.length;l+=2){var c=i.next[l],p=i.next[l+1];if(!c.isText&&!c.hasRequiredAttrs()&&-1==r.indexOf(p)){r.push(p);var u=o(p,s.concat(c));if(u)return u}}}(this,[])},na.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n},na.prototype.computeWrapping=function(t){for(var e=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),o=r.match;if(o.matchType(t)){for(var i=[],s=r;s.type;s=s.via)i.push(s.type);return i.reverse()}for(var a=0;a<o.next.length;a+=2){var l=o.next[a];l.isLeaf||l.hasRequiredAttrs()||l.name in e||r.type&&!o.next[a+1].validEnd||(n.push({match:l.contentMatch,type:l,via:r}),e[l.name]=!0)}}},ra.edgeCount.get=function(){return this.next.length>>1},na.prototype.edge=function(t){var e=t<<1;if(e>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}},na.prototype.toString=function(){var t=[];return function e(n){t.push(n);for(var r=1;r<n.next.length;r+=2)-1==t.indexOf(n.next[r])&&e(n.next[r])}(this),t.map((function(e,n){for(var r=n+(e.validEnd?"*":" ")+" ",o=0;o<e.next.length;o+=2)r+=(o?", ":"")+e.next[o].name+"->"+t.indexOf(e.next[o+1]);return r})).join("\n")},Object.defineProperties(na.prototype,ra),na.empty=new na(!0);var oa=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.unshift()},ia={next:{configurable:!0}};function sa(t){var e=[];do{e.push(aa(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function aa(t){var e=[];do{e.push(la(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function la(t){for(var e=function(t){if(t.eat("(")){var e=sa(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=function(t,e){var n=t.nodeTypes,r=n[e];if(r)return[r];var o=[];for(var i in n){var s=n[i];s.groups.indexOf(e)>-1&&o.push(s)}return 0==o.length&&t.err("No node type or group '"+e+"' found"),o}(t,t.next).map((function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}}));return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=pa(t,e)}return e}function ca(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function pa(t,e){var n=ca(t),r=n;return t.eat(",")&&(r="}"!=t.next?ca(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function ua(t,e){return e-t}function da(t,e){var n=[];return function e(r){var o=t[r];if(1==o.length&&!o[0].term)return e(o[0].to);n.push(r);for(var i=0;i<o.length;i++){var s=o[i],a=s.term,l=s.to;a||-1!=n.indexOf(l)||e(l)}}(e),n.sort(ua)}function ha(t){var e=Object.create(null);for(var n in t){var r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function fa(t,e){var n=Object.create(null);for(var r in t){var o=e&&e[r];if(void 0===o){var i=t[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function va(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new ya(t[n]);return e}ia.next.get=function(){return this.tokens[this.pos]},oa.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)},oa.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")},Object.defineProperties(oa.prototype,ia);var ma=function(t,e,n){this.name=t,this.schema=e,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=va(n.attrs),this.defaultAttrs=ha(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t},ga={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};ga.isInline.get=function(){return!this.isBlock},ga.isTextblock.get=function(){return this.isBlock&&this.inlineContent},ga.isLeaf.get=function(){return this.contentMatch==na.empty},ga.isAtom.get=function(){return this.isLeaf||this.spec.atom},ma.prototype.hasRequiredAttrs=function(t){for(var e in this.attrs)if(this.attrs[e].isRequired&&(!t||!(e in t)))return!0;return!1},ma.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)},ma.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:fa(this.attrs,t)},ma.prototype.create=function(t,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Zs(this,this.computeAttrs(t),As.from(e),Is.setFrom(n))},ma.prototype.createChecked=function(t,e,n){if(e=As.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new Zs(this,this.computeAttrs(t),e,Is.setFrom(n))},ma.prototype.createAndFill=function(t,e,n){if(t=this.computeAttrs(t),(e=As.from(e)).size){var r=this.contentMatch.fillBefore(e);if(!r)return null;e=r.append(e)}var o=this.contentMatch.matchFragment(e).fillBefore(As.empty,!0);return o?new Zs(this,t,e.append(o),Is.setFrom(n)):null},ma.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0},ma.prototype.allowsMarkType=function(t){return null==this.markSet||this.markSet.indexOf(t)>-1},ma.prototype.allowsMarks=function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0},ma.prototype.allowedMarks=function(t){if(null==this.markSet)return t;for(var e,n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:Is.empty:t},ma.compile=function(t,e){var n=Object.create(null);t.forEach((function(t,r){return n[t]=new ma(t,e,r)}));var r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var o in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(ma.prototype,ga);var ya=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},ba={isRequired:{configurable:!0}};ba.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(ya.prototype,ba);var wa=function(t,e,n,r){this.name=t,this.schema=n,this.spec=r,this.attrs=va(r.attrs),this.rank=e,this.excluded=null;var o=ha(this.attrs);this.instance=o&&new Is(this,o)};wa.prototype.create=function(t){return!t&&this.instance?this.instance:new Is(this,fa(this.attrs,t))},wa.compile=function(t,e){var n=Object.create(null),r=0;return t.forEach((function(t,o){return n[t]=new wa(t,r++,e,o)})),n},wa.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t.slice(0,e).concat(t.slice(e+1));return t},wa.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]},wa.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var xa=function(t){for(var e in this.spec={},t)this.spec[e]=t[e];this.spec.nodes=_s.from(t.nodes),this.spec.marks=_s.from(t.marks),this.nodes=ma.compile(this.spec.nodes,this),this.marks=wa.compile(this.spec.marks,this);var n=Object.create(null);for(var r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");var o=this.nodes[r],i=o.spec.content||"",s=o.spec.marks;o.contentMatch=n[i]||(n[i]=na.parse(i,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet="_"==s?null:s?Sa(this,s.split(" ")):""!=s&&o.inlineContent?null:[]}for(var a in this.marks){var l=this.marks[a],c=l.spec.excludes;l.excluded=null==c?[l]:""==c?[]:Sa(this,c.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function Sa(t,e){for(var n=[],r=0;r<e.length;r++){var o=e[r],i=t.marks[o],s=i;if(i)n.push(i);else for(var a in t.marks){var l=t.marks[a];("_"==o||l.spec.group&&l.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}xa.prototype.node=function(t,e,n,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof ma))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)},xa.prototype.text=function(t,e){var n=this.nodes.text;return new ta(n,n.defaultAttrs,t,Is.setFrom(e))},xa.prototype.mark=function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)},xa.prototype.nodeFromJSON=function(t){return Zs.fromJSON(this,t)},xa.prototype.markFromJSON=function(t){return Is.fromJSON(this,t)},xa.prototype.nodeType=function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e};var ka=function(t,e){var n=this;this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach((function(t){t.tag?n.tags.push(t):t.style&&n.styles.push(t)}))};ka.prototype.parse=function(t,e){void 0===e&&(e={});var n=new Aa(this,e,!1);return n.addAll(t,null,e.from,e.to),n.finish()},ka.prototype.parseSlice=function(t,e){void 0===e&&(e={});var n=new Aa(this,e,!0);return n.addAll(t,null,e.from,e.to),$s.maxOpen(n.finish())},ka.prototype.matchTag=function(t,e){for(var n=0;n<this.tags.length;n++){var r=this.tags[n];if(Ea(t,r.tag)&&(void 0===r.namespace||t.namespaceURI==r.namespace)&&(!r.context||e.matchesContext(r.context))){if(r.getAttrs){var o=r.getAttrs(t);if(!1===o)continue;r.attrs=o}return r}}},ka.prototype.matchStyle=function(t,e,n){for(var r=0;r<this.styles.length;r++){var o=this.styles[r];if(!(0!=o.style.indexOf(t)||o.context&&!n.matchesContext(o.context)||o.style.length>t.length&&(61!=o.style.charCodeAt(t.length)||o.style.slice(t.length+1)!=e))){if(o.getAttrs){var i=o.getAttrs(e);if(!1===i)continue;o.attrs=i}return o}}},ka.schemaRules=function(t){var e=[];function n(t){for(var n=null==t.priority?50:t.priority,r=0;r<e.length;r++){var o=e[r];if((null==o.priority?50:o.priority)<n)break}e.splice(r,0,t)}var r,o=function(e){var r=t.marks[e].spec.parseDOM;r&&r.forEach((function(t){n(t=Ra(t)),t.mark=e}))};for(var i in t.marks)o(i);for(var s in t.nodes)r=void 0,(r=t.nodes[s].spec.parseDOM)&&r.forEach((function(t){n(t=Ra(t)),t.node=s}));return e},ka.fromSchema=function(t){return t.cached.domParser||(t.cached.domParser=new ka(t,ka.schemaRules(t)))};var Ca={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Oa={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Ma={ol:!0,ul:!0};function Ta(t){return(t?1:0)|("full"===t?2:0)}var _a=function(t,e,n,r,o,i){this.type=t,this.attrs=e,this.solid=r,this.match=o||(4&i?null:t.contentMatch),this.options=i,this.content=[],this.marks=n,this.activeMarks=Is.none};_a.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(As.from(t));if(!e){var n,r=this.type.contentMatch;return(n=r.findWrapping(t.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)},_a.prototype.finish=function(t){if(!(1&this.options)){var e,n=this.content[this.content.length-1];n&&n.isText&&(e=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length)))}var r=As.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(As.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r};var Aa=function(t,e,n){this.parser=t,this.options=e,this.isOpen=n,this.pendingMarks=[];var r,o=e.topNode,i=Ta(e.preserveWhitespace)|(n?4:0);r=o?new _a(o.type,o.attrs,Is.none,!0,e.topMatch||o.type.contentMatch,i):new _a(n?null:t.schema.topNodeType,null,Is.none,!0,null,i),this.nodes=[r],this.open=0,this.find=e.findPositions,this.needsBlock=!1},Na={top:{configurable:!0},currentPos:{configurable:!0}};function Ea(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Ra(t){var e={};for(var n in t)e[n]=t[n];return e}Na.top.get=function(){return this.nodes[this.open]},Aa.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),n=e?this.readStyles(function(t){for(var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];e=n.exec(t);)r.push(e[1],e[2].trim());return r}(e)):null;if(null!=n)for(var r=0;r<n.length;r++)this.addPendingMark(n[r]);if(this.addElement(t),null!=n)for(var o=0;o<n.length;o++)this.removePendingMark(n[o])}},Aa.prototype.addTextNode=function(t){var e=t.nodeValue,n=this.top;if((n.type?n.type.inlineContent:n.content.length&&n.content[0].isInline)||/[^ \t\r\n\u000c]/.test(e)){if(1&n.options)2&n.options||(e=e.replace(/\r?\n|\r/g," "));else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],o=t.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)},Aa.prototype.addElement=function(t){var e=t.nodeName.toLowerCase();Ma.hasOwnProperty(e)&&function(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&Ma.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}(t);var n=this.options.ruleFromNode&&this.options.ruleFromNode(t)||this.parser.matchTag(t,this);if(n?n.ignore:Oa.hasOwnProperty(e))this.findInside(t);else if(!n||n.skip){n&&n.skip.nodeType&&(t=n.skip);var r,o=this.top,i=this.needsBlock;if(Ca.hasOwnProperty(e))r=!0,o.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),r&&this.sync(o),this.needsBlock=i}else this.addElementByRule(t,n)},Aa.prototype.leafFallback=function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))},Aa.prototype.readStyles=function(t){for(var e=Is.none,n=0;n<t.length;n+=2){var r=this.parser.matchStyle(t[n],t[n+1],this);if(r){if(r.ignore)return null;e=this.parser.schema.marks[r.mark].create(r.attrs).addToSet(e)}}return e},Aa.prototype.addElementByRule=function(t,e){var n,r,o,i=this;e.node?(r=this.parser.schema.nodes[e.node]).isLeaf?this.insertNode(r.create(e.attrs))||this.leafFallback(t):n=this.enter(r,e.attrs,e.preserveWhitespace):(o=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(o));var s=this.top;if(r&&r.isLeaf)this.findInside(t);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((function(t){return i.insertNode(t)}));else{var a=e.contentElement;"string"==typeof a?a=t.querySelector(a):"function"==typeof a&&(a=a(t)),a||(a=t),this.findAround(t,a,!0),this.addAll(a,n)}n&&(this.sync(s),this.open--),o&&this.removePendingMark(o)},Aa.prototype.addAll=function(t,e,n,r){for(var o=n||0,i=n?t.childNodes[n]:t.firstChild,s=null==r?null:t.childNodes[r];i!=s;i=i.nextSibling,++o)this.findAtPoint(t,o),this.addDOM(i),e&&Ca.hasOwnProperty(i.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,o)},Aa.prototype.findPlace=function(t){for(var e,n,r=this.open;r>=0;r--){var o=this.nodes[r],i=o.findWrapping(t);if(i&&(!e||e.length>i.length)&&(e=i,n=o,!i.length))break;if(o.solid)break}if(!e)return!1;this.sync(n);for(var s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0},Aa.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;this.applyPendingMarks(n),n.match&&(n.match=n.match.matchType(t.type));for(var r=n.activeMarks,o=0;o<t.marks.length;o++)n.type&&!n.type.allowsMarkType(t.marks[o].type)||(r=t.marks[o].addToSet(r));return n.content.push(t.mark(r)),!0}return!1},Aa.prototype.applyPendingMarks=function(t){for(var e=0;e<this.pendingMarks.length;e++){var n=this.pendingMarks[e];t.type&&!t.type.allowsMarkType(n.type)||n.isInSet(t.activeMarks)||(t.activeMarks=n.addToSet(t.activeMarks),this.pendingMarks.splice(e--,1))}},Aa.prototype.enter=function(t,e,n){var r=this.findPlace(t.create(e));return r&&(this.applyPendingMarks(this.top),this.enterInner(t,e,!0,n)),r},Aa.prototype.enterInner=function(t,e,n,r){this.closeExtra();var o=this.top;o.match=o.match&&o.match.matchType(t,e);var i=null==r?-5&o.options:Ta(r);4&o.options&&0==o.content.length&&(i|=4),this.nodes.push(new _a(t,e,o.activeMarks,n,null,i)),this.open++},Aa.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}},Aa.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},Aa.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return void(this.open=e)},Aa.prototype.addPendingMark=function(t){this.pendingMarks.push(t)},Aa.prototype.removePendingMark=function(t){var e=this.pendingMarks.lastIndexOf(t);if(e>-1)this.pendingMarks.splice(e,1);else{var n=this.top;n.activeMarks=t.removeFromSet(n.activeMarks)}},Na.currentPos.get=function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t},Aa.prototype.findAtPoint=function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)},Aa.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)},Aa.prototype.findAround=function(t,e,n){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++)null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node)&&e.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)},Aa.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))},Aa.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),r=this.options.context,o=!(this.isOpen||r&&r.parent.type!=this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),s=function(t,a){for(;t>=0;t--){var l=n[t];if(""==l){if(t==n.length-1||0==t)continue;for(;a>=i;a--)if(s(t-1,a))return!0;return!1}var c=a>0||0==a&&o?e.nodes[a].type:r&&a>=i?r.node(a-i).type:null;if(!c||c.name!=l&&-1==c.groups.indexOf(l))return!1;a--}return!0};return s(n.length-1,this.open)},Aa.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}},Object.defineProperties(Aa.prototype,Na);var Da=function(t,e){this.nodes=t||{},this.marks=e||{}};function Ia(t){var e={};for(var n in t){var r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Pa(t){return t.document||window.document}Da.prototype.serializeFragment=function(t,e,n){var r=this;void 0===e&&(e={}),n||(n=Pa(e).createDocumentFragment());var o=n,i=null;return t.forEach((function(t){if(i||t.marks.length){i||(i=[]);for(var n=0,s=0;n<i.length&&s<t.marks.length;){var a=t.marks[s];if(r.marks[a.type.name]){if(!a.eq(i[n])||!1===a.type.spec.spanning)break;n+=2,s++}else s++}for(;n<i.length;)o=i.pop(),i.pop();for(;s<t.marks.length;){var l=t.marks[s++],c=r.serializeMark(l,t.isInline,e);c&&(i.push(l,o),o.appendChild(c.dom),o=c.contentDOM||c.dom)}}o.appendChild(r.serializeNode(t,e))})),n},Da.prototype.serializeNode=function(t,e){void 0===e&&(e={});var n=Da.renderSpec(Pa(e),this.nodes[t.type.name](t)),r=n.dom,o=n.contentDOM;if(o){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");e.onContent?e.onContent(t,o,e):this.serializeFragment(t.content,e,o)}return r},Da.prototype.serializeNodeAndMarks=function(t,e){void 0===e&&(e={});for(var n=this.serializeNode(t,e),r=t.marks.length-1;r>=0;r--){var o=this.serializeMark(t.marks[r],t.isInline,e);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n},Da.prototype.serializeMark=function(t,e,n){void 0===n&&(n={});var r=this.marks[t.type.name];return r&&Da.renderSpec(Pa(n),r(t,e))},Da.renderSpec=function(t,e){if("string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};var n=t.createElement(e[0]),r=null,o=e[1],i=1;if(o&&"object"==typeof o&&null==o.nodeType&&!Array.isArray(o))for(var s in i=2,o)null!=o[s]&&n.setAttribute(s,o[s]);for(var a=i;a<e.length;a++){var l=e[a];if(0===l){if(a<e.length-1||a>i)throw new RangeError("Content hole must be the only child of its parent node");return{dom:n,contentDOM:n}}var c=Da.renderSpec(t,l),p=c.dom,u=c.contentDOM;if(n.appendChild(p),u){if(r)throw new RangeError("Multiple content holes");r=u}}return{dom:n,contentDOM:r}},Da.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new Da(this.nodesFromSchema(t),this.marksFromSchema(t)))},Da.nodesFromSchema=function(t){var e=Ia(t.nodes);return e.text||(e.text=function(t){return t.text}),e},Da.marksFromSchema=function(t){return Ia(t.marks)};var $a=Object.freeze({__proto__:null,ContentMatch:na,DOMParser:ka,DOMSerializer:Da,Fragment:As,Mark:Is,MarkType:wa,Node:Zs,NodeRange:Gs,NodeType:ma,ReplaceError:Ps,ResolvedPos:qs,Schema:xa,Slice:$s}),La=Math.pow(2,16);function za(t){return 65535&t}var Ba=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=null),this.pos=t,this.deleted=e,this.recover=n},ja=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};ja.prototype.recover=function(t){var e=0,n=za(t);if(!this.inverted)for(var r=0;r<n;r++)e+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+e+function(t){return(t-(65535&t))/La}(t)},ja.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},ja.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},ja.prototype._map=function(t,e,n){for(var r=0,o=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?r:0);if(a>t)break;var l=this.ranges[s+o],c=this.ranges[s+i],p=a+l;if(t<=p){var u=a+r+((l?t==a?-1:t==p?1:e:e)<0?0:c);return n?u:new Ba(u,e<0?t!=a:t!=p,s/3+(t-a)*La)}r+=c-l}return n?t+r:new Ba(t+r)},ja.prototype.touches=function(t,e){for(var n=0,r=za(e),o=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?n:0);if(a>t)break;var l=this.ranges[s+o];if(t<=a+l&&s==3*r)return!0;n+=this.ranges[s+i]-l}return!1},ja.prototype.forEach=function(t){for(var e=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],s=i-(this.inverted?o:0),a=i+(this.inverted?0:o),l=this.ranges[r+e],c=this.ranges[r+n];t(s,s+l,a,a+c),o+=c-l}},ja.prototype.invert=function(){return new ja(this.ranges,!this.inverted)},ja.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},ja.offset=function(t){return 0==t?ja.empty:new ja(t<0?[0,-t,0]:[0,0,t])},ja.empty=new ja([]);var Va=function(t,e,n,r){this.maps=t||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=e};function Fa(t){var e=Error.call(this,t);return e.__proto__=Fa.prototype,e}Va.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new Va(this.maps,this.mirror,t,e)},Va.prototype.copy=function(){return new Va(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},Va.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},Va.prototype.appendMapping=function(t){for(var e=0,n=this.maps.length;e<t.maps.length;e++){var r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?n+r:null)}},Va.prototype.getMirror=function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]},Va.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},Va.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){var r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&r>e?n-r-1:null)}},Va.prototype.invert=function(){var t=new Va;return t.appendMappingInverted(this),t},Va.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t},Va.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},Va.prototype._map=function(t,e,n){for(var r=!1,o=null,i=this.from;i<this.to;i++){var s=this.maps[i],a=o&&o[i];if(null!=a&&s.touches(t,a))t=s.recover(a);else{var l=s.mapResult(t,e);if(null!=l.recover){var c=this.getMirror(i);if(null!=c&&c>i&&c<this.to){if(l.deleted){i=c,t=this.maps[c].recover(l.recover);continue}(o||(o=Object.create(null)))[c]=l.recover}}l.deleted&&(r=!0),t=l.pos}}return n?t:new Ba(t,r)},Fa.prototype=Object.create(Error.prototype),Fa.prototype.constructor=Fa,Fa.prototype.name="TransformError";var Ha=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Va},qa={before:{configurable:!0},docChanged:{configurable:!0}};function Wa(){throw new Error("Override me")}qa.before.get=function(){return this.docs.length?this.docs[0]:this.doc},Ha.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new Fa(e.failed);return this},Ha.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},qa.docChanged.get=function(){return this.steps.length>0},Ha.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(Ha.prototype,qa);var Ja=Object.create(null),Ka=function(){};Ka.prototype.apply=function(t){return Wa()},Ka.prototype.getMap=function(){return ja.empty},Ka.prototype.invert=function(t){return Wa()},Ka.prototype.map=function(t){return Wa()},Ka.prototype.merge=function(t){return null},Ka.prototype.toJSON=function(){return Wa()},Ka.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=Ja[e.stepType];if(!n)throw new RangeError("No step type "+e.stepType+" defined");return n.fromJSON(t,e)},Ka.jsonID=function(t,e){if(t in Ja)throw new RangeError("Duplicate use of step JSON ID "+t);return Ja[t]=e,e.prototype.jsonID=t,e};var Ua=function(t,e){this.doc=t,this.failed=e};Ua.ok=function(t){return new Ua(t,null)},Ua.fail=function(t){return new Ua(null,t)},Ua.fromReplace=function(t,e,n,r){try{return Ua.ok(t.replace(e,n,r))}catch(t){if(t instanceof Ps)return Ua.fail(t.message);throw t}};var Ga=function(t){function e(e,n,r,o){t.call(this),this.from=e,this.to=n,this.slice=r,this.structure=!!o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){return this.structure&&Ya(t,this.from,this.to)?Ua.fail("Structure replace would overwrite content"):Ua.fromReplace(t,this.from,this.to,this.slice)},e.prototype.getMap=function(){return new ja([this.from,this.to-this.from,this.slice.size])},e.prototype.invert=function(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new e(n.pos,Math.max(n.pos,r.pos),this.slice)},e.prototype.merge=function(t){if(!(t instanceof e)||t.structure!=this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var n=this.slice.size+t.slice.size==0?$s.empty:new $s(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,n,this.structure)}var r=this.slice.size+t.slice.size==0?$s.empty:new $s(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),r,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(n.from,n.to,$s.fromJSON(t,n.slice),!!n.structure)},e}(Ka);Ka.jsonID("replace",Ga);var Xa=function(t){function e(e,n,r,o,i,s,a){t.call(this),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=!!a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){if(this.structure&&(Ya(t,this.from,this.gapFrom)||Ya(t,this.gapTo,this.to)))return Ua.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return Ua.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,e.content);return n?Ua.fromReplace(t,this.from,this.to,n):Ua.fail("Content does not fit in gap")},e.prototype.getMap=function(){return new ja([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},e.prototype.invert=function(t){var n=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),o=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return n.deleted&&r.deleted||o<n.pos||i>r.pos?null:new e(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(n.from,n.to,n.gapFrom,n.gapTo,$s.fromJSON(t,n.slice),n.insert,!!n.structure)},e}(Ka);function Ya(t,e,n){for(var r=t.resolve(e),o=n-e,i=r.depth;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0)for(var s=r.node(i).maybeChild(r.indexAfter(i));o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}return!1}function Za(t,e,n){return(0==e||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Qa(t){for(var e=t.parent.content.cutByIndex(t.startIndex,t.endIndex),n=t.depth;;--n){var r=t.$from.node(n),o=t.$from.index(n),i=t.$to.indexAfter(n);if(n<t.depth&&r.canReplace(o,i,e))return n;if(0==n||r.type.spec.isolating||!Za(r,o,i))break}}function tl(t,e,n,r){void 0===n&&(n=1);var o=t.resolve(e),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var a=o.depth-1,l=n-2;a>i;a--,l--){var c=o.node(a),p=o.index(a);if(c.type.spec.isolating)return!1;var u=c.content.cutByIndex(p,c.childCount),d=r&&r[l]||c;if(d!=c&&(u=u.replaceChild(0,d.type.create(d.attrs))),!c.canReplace(p+1,c.childCount)||!d.type.validContent(u))return!1}var h=o.indexAfter(i),f=r&&r[0];return o.node(i).canReplaceWith(h,h,f?f.type:o.node(i+1).type)}function el(t,e){var n,r,o=t.resolve(e),i=o.index();return n=o.nodeBefore,r=o.nodeAfter,n&&r&&!n.isLeaf&&n.canAppend(r)&&o.parent.canReplace(i,i+1)}function nl(t,e,n){for(var r=[],o=0;o<t.childCount;o++){var i=t.child(o);i.content.size&&(i=i.copy(nl(i.content,e,i))),i.isInline&&(i=e(i,n,o)),r.push(i)}return As.fromArray(r)}Ka.jsonID("replaceAround",Xa),Ha.prototype.lift=function(t,e){for(var n=t.$from,r=t.$to,o=t.depth,i=n.before(o+1),s=r.after(o+1),a=i,l=s,c=As.empty,p=0,u=o,d=!1;u>e;u--)d||n.index(u)>0?(d=!0,c=As.from(n.node(u).copy(c)),p++):a--;for(var h=As.empty,f=0,v=o,m=!1;v>e;v--)m||r.after(v+1)<r.end(v)?(m=!0,h=As.from(r.node(v).copy(h)),f++):l++;return this.step(new Xa(a,l,i,s,new $s(c.append(h),p,f),c.size-p,!0))},Ha.prototype.wrap=function(t,e){for(var n=As.empty,r=e.length-1;r>=0;r--)n=As.from(e[r].type.create(e[r].attrs,n));var o=t.start,i=t.end;return this.step(new Xa(o,i,o,i,new $s(n,0,0),e.length,!0))},Ha.prototype.setBlockType=function(t,e,n,r){var o=this;if(void 0===e&&(e=t),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var i=this.steps.length;return this.doc.nodesBetween(t,e,(function(t,e){if(t.isTextblock&&!t.hasMarkup(n,r)&&function(t,e,n){var r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(o.doc,o.mapping.slice(i).map(e),n)){o.clearIncompatible(o.mapping.slice(i).map(e,1),n);var s=o.mapping.slice(i),a=s.map(e,1),l=s.map(e+t.nodeSize,1);return o.step(new Xa(a,l,a+1,l-1,new $s(As.from(n.create(r,null,t.marks)),0,0),1,!0)),!1}})),this},Ha.prototype.setNodeMarkup=function(t,e,n,r){var o=this.doc.nodeAt(t);if(!o)throw new RangeError("No node at given position");e||(e=o.type);var i=e.create(n,null,r||o.marks);if(o.isLeaf)return this.replaceWith(t,t+o.nodeSize,i);if(!e.validContent(o.content))throw new RangeError("Invalid content for node type "+e.name);return this.step(new Xa(t,t+o.nodeSize,t+1,t+o.nodeSize-1,new $s(As.from(i),0,0),1,!0))},Ha.prototype.split=function(t,e,n){void 0===e&&(e=1);for(var r=this.doc.resolve(t),o=As.empty,i=As.empty,s=r.depth,a=r.depth-e,l=e-1;s>a;s--,l--){o=As.from(r.node(s).copy(o));var c=n&&n[l];i=As.from(c?c.type.create(c.attrs,i):r.node(s).copy(i))}return this.step(new Ga(t,t,new $s(o.append(i),e,e),!0))},Ha.prototype.join=function(t,e){void 0===e&&(e=1);var n=new Ga(t-e,t+e,$s.empty,!0);return this.step(n)};var rl=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),r=t.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new $s(nl(n.content,(function(t,n){return n.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t}),o),n.openStart,n.openEnd);return Ua.fromReplace(t,this.from,this.to,i)},e.prototype.invert=function(){return new ol(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(Ka);Ka.jsonID("addMark",rl);var ol=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),r=new $s(nl(n.content,(function(t){return t.mark(e.mark.removeFromSet(t.marks))})),n.openStart,n.openEnd);return Ua.fromReplace(t,this.from,this.to,r)},e.prototype.invert=function(){return new rl(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(Ka);function il(t,e,n){var r=function t(e,n,r,o,i,s,a){var l,c=e.childCount,p=c-(a>0?1:0),u=s<0?n:r.node(i);l=s<0?u.contentMatchAt(p):1==c&&a>0?u.contentMatchAt(s?r.index(i):r.indexAfter(i)):u.contentMatchAt(r.indexAfter(i)).matchFragment(e,c>0&&s?1:0,p);var d=o.node(i);if(a>0&&i<o.depth){var h=d.content.cutByIndex(o.indexAfter(i)).addToStart(e.lastChild),f=l.fillBefore(h,!0);if(f&&f.size&&s>0&&1==c&&(f=null),f){var v=t(e.lastChild.content,e.lastChild,r,o,i+1,1==c?s-1:-1,a-1);if(v){var m=e.lastChild.copy(v);return f.size?e.cutByIndex(0,c-1).append(f).addToEnd(m):e.replaceChild(c-1,m)}}}a>0&&(l=l.matchType((1==c&&s>0?r.node(i+1):e.lastChild).type));var g=o.index(i);if(g==d.childCount&&!d.type.compatibleContent(n.type))return null;for(var y=l.fillBefore(d.content,!0,g),b=g;y&&b<d.content.childCount;b++)u.type.allowsMarks(d.content.child(b).marks)||(y=null);if(!y)return null;if(a>0){var w=function t(e,n,r,o,i){var s,a=e.content,l=a.childCount;if(s=i>=0?r.node(o).contentMatchAt(r.indexAfter(o)).matchFragment(a,i>0?1:0,l):e.contentMatchAt(l),n>0){var c=t(a.lastChild,n-1,r,o+1,1==l?i-1:-1);a=a.replaceChild(l-1,c)}return e.copy(a.append(s.fillBefore(As.empty,!0)))}(e.lastChild,a-1,r,i+1,1==c?s-1:-1);e=e.replaceChild(c-1,w)}return e=e.append(y),o.depth>i&&(e=e.addToEnd(function t(e,n){var r=e.node(n),o=r.contentMatchAt(0).fillBefore(r.content,!0,e.index(n));return e.depth>n&&(o=o.addToEnd(t(e,n+1))),r.copy(o)}(o,i+1))),e}(n.content,t.node(0),t,e,0,n.openStart,n.openEnd);return r?function(t,e,n){for(;e>0&&n>0&&1==t.childCount;)t=t.firstChild.content,e--,n--;return new $s(t,e,n)}(r,n.openStart,e.depth):null}function sl(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}Ka.jsonID("removeMark",ol),Ha.prototype.addMark=function(t,e,n){var r=this,o=[],i=[],s=null,a=null;return this.doc.nodesBetween(t,e,(function(r,l,c){if(r.isInline){var p=r.marks;if(!n.isInSet(p)&&c.type.allowsMarkType(n.type)){for(var u=Math.max(l,t),d=Math.min(l+r.nodeSize,e),h=n.addToSet(p),f=0;f<p.length;f++)p[f].isInSet(h)||(s&&s.to==u&&s.mark.eq(p[f])?s.to=d:o.push(s=new ol(u,d,p[f])));a&&a.to==u?a.to=d:i.push(a=new rl(u,d,n))}}})),o.forEach((function(t){return r.step(t)})),i.forEach((function(t){return r.step(t)})),this},Ha.prototype.removeMark=function(t,e,n){var r=this;void 0===n&&(n=null);var o=[],i=0;return this.doc.nodesBetween(t,e,(function(r,s){if(r.isInline){i++;var a=null;if(n instanceof wa){var l=n.isInSet(r.marks);l&&(a=[l])}else n?n.isInSet(r.marks)&&(a=[n]):a=r.marks;if(a&&a.length)for(var c=Math.min(s+r.nodeSize,e),p=0;p<a.length;p++){for(var u=a[p],d=void 0,h=0;h<o.length;h++){var f=o[h];f.step==i-1&&u.eq(o[h].style)&&(d=f)}d?(d.to=c,d.step=i):o.push({style:u,from:Math.max(s,t),to:c,step:i})}}})),o.forEach((function(t){return r.step(new ol(t.from,t.to,t.style))})),this},Ha.prototype.clearIncompatible=function(t,e,n){void 0===n&&(n=e.contentMatch);for(var r=this.doc.nodeAt(t),o=[],i=t+1,s=0;s<r.childCount;s++){var a=r.child(s),l=i+a.nodeSize,c=n.matchType(a.type,a.attrs);if(c){n=c;for(var p=0;p<a.marks.length;p++)e.allowsMarkType(a.marks[p].type)||this.step(new ol(i,l,a.marks[p]))}else o.push(new Ga(i,l,$s.empty));i=l}if(!n.validEnd){var u=n.fillBefore(As.empty,!0);this.replace(i,i,new $s(u,0,0))}for(var d=o.length-1;d>=0;d--)this.step(o[d]);return this},Ha.prototype.replace=function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=$s.empty);var r=function(t,e,n,r){if(void 0===n&&(n=e),void 0===r&&(r=$s.empty),e==n&&!r.size)return null;var o=t.resolve(e),i=t.resolve(n);if(sl(o,i,r))return new Ga(e,n,r);var s=function(t,e){var n=function t(e,n,r,o){var i=As.empty,s=0,a=r[n];if(e.depth>n){var l=t(e,n+1,r,o||a);s=l.openEnd+1,i=As.from(e.node(n+1).copy(l.content))}return a&&(i=i.append(a.content),s=a.openEnd),o&&(i=i.append(e.node(n).contentMatchAt(e.indexAfter(n)).fillBefore(As.empty,!0)),s=0),{content:i,openEnd:s}}(t,0,e,!1),r=n.content,o=n.openEnd;return new $s(r,t.depth,o||0)}(o,function(t,e){for(var n=new al(t),r=1;e.size&&r<=3;r++){var o=n.placeSlice(e.content,e.openStart,e.openEnd,r);3==r&&o!=e&&o.size&&(r=0),e=o}for(;n.open.length;)n.closeNode();return n.placed}(o,r)),a=il(o,i,s);if(!a)return null;if(s.size!=a.size&&function(t,e,n){if(!e.parent.isTextblock)return!1;var r,o=n.openEnd?function(t,e){for(var n=1;n<e;n++)t=t.lastChild.content;return t.lastChild}(n.content,n.openEnd):t.node(t.depth-(n.openStart-n.openEnd));if(!o.isTextblock)return!1;for(var i=e.index();i<e.parent.childCount;i++)if(!o.type.allowsMarks(e.parent.child(i).marks))return!1;return n.openEnd?r=o.contentMatchAt(o.childCount):(r=o.contentMatchAt(o.childCount),n.size&&(r=r.matchFragment(n.content,n.openStart?1:0))),(r=r.matchFragment(e.parent.content,e.index()))&&r.validEnd}(o,i,s)){for(var l=i.depth,c=i.after(l);l>1&&c==i.end(--l);)++c;var p=il(o,t.resolve(c),s);if(p)return new Xa(e,c,n,i.end(),p,s.size)}return a.size||e!=n?new Ga(e,n,a):null}(this.doc,t,e,n);return r&&this.step(r),this},Ha.prototype.replaceWith=function(t,e,n){return this.replace(t,e,new $s(As.from(n),0,0))},Ha.prototype.delete=function(t,e){return this.replace(t,e,$s.empty)},Ha.prototype.insert=function(t,e){return this.replaceWith(t,t,e)};var al=function(t){this.open=[];for(var e=0;e<=t.depth;e++){var n=t.node(e),r=n.contentMatchAt(t.indexAfter(e));this.open.push({parent:n,match:r,content:As.empty,wrapper:!1,openEnd:0,depth:e})}this.placed=[]};function ll(t,e,n){var r=t.content;if(e>1){var o=ll(t.firstChild,e-1,1==t.childCount?n-1:0);r=t.content.replaceChild(0,o)}var i=t.type.contentMatch.fillBefore(r,0==n);return t.copy(i.append(r))}function cl(t,e,n,r,o){if(e<n){var i=t.firstChild;t=t.replaceChild(0,i.copy(cl(i.content,e+1,n,r,i)))}if(e>r){var s=o.contentMatchAt(0),a=s.fillBefore(t).append(t);t=a.append(s.matchFragment(a).fillBefore(As.empty,!0))}return t}function pl(t,e){for(var n=[],r=Math.min(t.depth,e.depth);r>=0;r--){var o=t.start(r);if(o<t.pos-(t.depth-r)||e.end(r)>e.pos+(e.depth-r)||t.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;o==e.start(r)&&n.push(r)}return n}al.prototype.placeSlice=function(t,e,n,r,o){if(e>0){var i=t.firstChild,s=this.placeSlice(i.content,Math.max(0,e-1),n&&1==t.childCount?n-1:0,r,i);s.content!=i.content&&(s.content.size?(t=t.replaceChild(0,i.copy(s.content)),e=s.openStart+1):(1==t.childCount&&(n=0),t=t.cutByIndex(1),e=0))}var a=this.placeContent(t,e,n,r,o);if(r>2&&a.size&&0==e){var l=a.content.firstChild,c=1==a.content.childCount;this.placeContent(l.content,0,n&&c?n-1:0,r,l),a=c?As.empty:new $s(a.content.cutByIndex(1),0,n)}return a},al.prototype.placeContent=function(t,e,n,r,o){for(var i=0;i<t.childCount;i++){for(var s=t.child(i),a=!1,l=i==t.childCount-1,c=this.open.length-1;c>=0;c--){var p=this.open[c],u=void 0;if(r>1&&(u=p.match.findWrapping(s.type))&&(!o||!u.length||u[u.length-1]!=o.type)){for(;this.open.length-1>c;)this.closeNode();for(var d=0;d<u.length;d++)p.match=p.match.matchType(u[d]),c++,p={parent:u[d].create(),match:u[d].contentMatch,content:As.empty,wrapper:!0,openEnd:0,depth:c+d},this.open.push(p)}var h=p.match.matchType(s.type);if(!h){var f=p.match.fillBefore(As.from(s));if(!f){if(o&&p.match.matchType(o.type))break;continue}for(var v=0;v<f.childCount;v++){var m=f.child(v);this.addNode(p,m,0),h=p.match.matchFragment(m)}}for(;this.open.length-1>c;)this.closeNode();s=s.mark(p.parent.type.allowedMarks(s.marks)),e&&(s=ll(s,e,l?n:0),e=0),this.addNode(p,s,l?n:0),p.match=h,l&&(n=0),a=!0;break}if(!a)break}return this.open.length>1&&(i>0&&i==t.childCount||o&&this.open[this.open.length-1].parent.type==o.type)&&this.closeNode(),new $s(t.cutByIndex(i),e,n)},al.prototype.addNode=function(t,e,n){var r,o;t.content=(r=t.content,o=t.openEnd,o?r.replaceChild(r.childCount-1,function t(e,n){var r=e.content;if(n>1){var o=t(e.lastChild,n-1);r=e.content.replaceChild(e.childCount-1,o)}var i=e.contentMatchAt(e.childCount).fillBefore(As.empty,!0);return e.copy(r.append(i))}(r.lastChild,o)):r).addToEnd(e),t.openEnd=n},al.prototype.closeNode=function(){var t=this.open.pop();0==t.content.size||(t.wrapper?this.addNode(this.open[this.open.length-1],t.parent.copy(t.content),t.openEnd+1):this.placed[t.depth]={depth:t.depth,content:t.content,openEnd:t.openEnd})},Ha.prototype.replaceRange=function(t,e,n){if(!n.size)return this.deleteRange(t,e);var r=this.doc.resolve(t),o=this.doc.resolve(e);if(sl(r,o,n))return this.step(new Ga(t,e,n));var i=pl(r,this.doc.resolve(e));0==i[i.length-1]&&i.pop();var s=-(r.depth+1);i.unshift(s);for(var a=r.depth,l=r.pos-1;a>0;a--,l--){var c=r.node(a).type.spec;if(c.defining||c.isolating)break;i.indexOf(a)>-1?s=a:r.before(a)==l&&i.splice(1,0,-a)}for(var p=i.indexOf(s),u=[],d=n.openStart,h=n.content,f=0;;f++){var v=h.firstChild;if(u.push(v),f==n.openStart)break;h=v.content}d>0&&u[d-1].type.spec.defining&&r.node(p).type!=u[d-1].type?d-=1:d>=2&&u[d-1].isTextblock&&u[d-2].type.spec.defining&&r.node(p).type!=u[d-2].type&&(d-=2);for(var m=n.openStart;m>=0;m--){var g=(m+d+1)%(n.openStart+1),y=u[g];if(y)for(var b=0;b<i.length;b++){var w=i[(b+p)%i.length],x=!0;w<0&&(x=!1,w=-w);var S=r.node(w-1),k=r.index(w-1);if(S.canReplaceWith(k,k,y.type,y.marks))return this.replace(r.before(w),x?o.after(w):e,new $s(cl(n.content,0,n.openStart,g),g,n.openEnd))}}for(var C=this.steps.length,O=i.length-1;O>=0&&(this.replace(t,e,n),!(this.steps.length>C));O--){var M=i[O];O<0||(t=r.before(M),e=o.after(M))}return this},Ha.prototype.replaceRangeWith=function(t,e,n){if(!n.isInline&&t==e&&this.doc.resolve(t).parent.content.size){var r=function(t,e,n){var r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}}(this.doc,t,n.type);null!=r&&(t=e=r)}return this.replaceRange(t,e,new $s(As.from(n),0,0))},Ha.prototype.deleteRange=function(t,e){for(var n=this.doc.resolve(t),r=this.doc.resolve(e),o=pl(n,r),i=0;i<o.length;i++){var s=o[i],a=i==o.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),r.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),r.indexAfter(s-1))))return this.delete(n.before(s),r.after(s))}for(var l=1;l<=n.depth&&l<=r.depth;l++)if(t-n.start(l)==n.depth-l&&e>n.end(l)&&r.end(l)-e!=r.depth-l)return this.delete(n.before(l),e);return this.delete(t,e)};var ul=Object.create(null),dl=function(t,e,n){this.ranges=n||[new fl(t.min(e),t.max(e))],this.$anchor=t,this.$head=e},hl={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};hl.anchor.get=function(){return this.$anchor.pos},hl.head.get=function(){return this.$head.pos},hl.from.get=function(){return this.$from.pos},hl.to.get=function(){return this.$to.pos},hl.$from.get=function(){return this.ranges[0].$from},hl.$to.get=function(){return this.ranges[0].$to},hl.empty.get=function(){for(var t=this.ranges,e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0},dl.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},dl.prototype.replace=function(t,e){void 0===e&&(e=$s.empty);for(var n=e.content.lastChild,r=null,o=0;o<e.openEnd;o++)r=n,n=n.lastChild;for(var i=t.steps.length,s=this.ranges,a=0;a<s.length;a++){var l=s[a],c=l.$from,p=l.$to,u=t.mapping.slice(i);t.replaceRange(u.map(c.pos),u.map(p.pos),a?$s.empty:e),0==a&&Sl(t,i,(n?n.isInline:r&&r.isTextblock)?-1:1)}},dl.prototype.replaceWith=function(t,e){for(var n=t.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],s=i.$from,a=i.$to,l=t.mapping.slice(n),c=l.map(s.pos),p=l.map(a.pos);o?t.deleteRange(c,p):(t.replaceRangeWith(c,p,e),Sl(t,n,e.isInline?-1:1))}},dl.findFrom=function(t,e,n){var r=t.parent.inlineContent?new vl(t):xl(t.node(0),t.parent,t.pos,t.index(),e,n);if(r)return r;for(var o=t.depth-1;o>=0;o--){var i=e<0?xl(t.node(0),t.node(o),t.before(o+1),t.index(o),e,n):xl(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,e,n);if(i)return i}},dl.near=function(t,e){return void 0===e&&(e=1),this.findFrom(t,e)||this.findFrom(t,-e)||new bl(t.node(0))},dl.atStart=function(t){return xl(t,t,0,0,1)||new bl(t)},dl.atEnd=function(t){return xl(t,t,t.content.size,t.childCount,-1)||new bl(t)},dl.fromJSON=function(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=ul[e.type];if(!n)throw new RangeError("No selection type "+e.type+" defined");return n.fromJSON(t,e)},dl.jsonID=function(t,e){if(t in ul)throw new RangeError("Duplicate use of selection JSON ID "+t);return ul[t]=e,e.prototype.jsonID=t,e},dl.prototype.getBookmark=function(){return vl.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(dl.prototype,hl),dl.prototype.visible=!0;var fl=function(t,e){this.$from=t,this.$to=e},vl=function(t){function e(e,n){void 0===n&&(n=e),t.call(this,e,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},e.prototype.map=function(n,r){var o=n.resolve(r.map(this.head));if(!o.parent.inlineContent)return t.near(o);var i=n.resolve(r.map(this.anchor));return new e(i.parent.inlineContent?i:o,o)},e.prototype.replace=function(e,n){if(void 0===n&&(n=$s.empty),t.prototype.replace.call(this,e,n),n==$s.empty){var r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor&&t.head==this.head},e.prototype.getBookmark=function(){return new ml(this.anchor,this.head)},e.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},e.fromJSON=function(t,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new e(t.resolve(n.anchor),t.resolve(n.head))},e.create=function(t,e,n){void 0===n&&(n=e);var r=t.resolve(e);return new this(r,n==e?r:t.resolve(n))},e.between=function(n,r,o){var i=n.pos-r.pos;if(o&&!i||(o=i>=0?1:-1),!r.parent.inlineContent){var s=t.findFrom(r,o,!0)||t.findFrom(r,-o,!0);if(!s)return t.near(r,o);r=s.$head}return n.parent.inlineContent||(0==i||(n=(t.findFrom(n,-o,!0)||t.findFrom(n,o,!0)).$anchor).pos<r.pos!=i<0)&&(n=r),new e(n,r)},Object.defineProperties(e.prototype,n),e}(dl);dl.jsonID("text",vl);var ml=function(t,e){this.anchor=t,this.head=e};ml.prototype.map=function(t){return new ml(t.map(this.anchor),t.map(this.head))},ml.prototype.resolve=function(t){return vl.between(t.resolve(this.anchor),t.resolve(this.head))};var gl=function(t){function e(e){var n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);t.call(this,e,r),this.node=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(n,r){var o=r.mapResult(this.anchor),i=o.deleted,s=o.pos,a=n.resolve(s);return i?t.near(a):new e(a)},e.prototype.content=function(){return new $s(As.from(this.node),0,0)},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor},e.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},e.prototype.getBookmark=function(){return new yl(this.anchor)},e.fromJSON=function(t,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new e(t.resolve(n.anchor))},e.create=function(t,e){return new this(t.resolve(e))},e.isSelectable=function(t){return!t.isText&&!1!==t.type.spec.selectable},e}(dl);gl.prototype.visible=!1,dl.jsonID("node",gl);var yl=function(t){this.anchor=t};yl.prototype.map=function(t){var e=t.mapResult(this.anchor),n=e.deleted,r=e.pos;return n?new ml(r,r):new yl(r)},yl.prototype.resolve=function(t){var e=t.resolve(this.anchor),n=e.nodeAfter;return n&&gl.isSelectable(n)?new gl(e):dl.near(e)};var bl=function(t){function e(e){t.call(this,e.resolve(0),e.resolve(e.content.size))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toJSON=function(){return{type:"all"}},e.fromJSON=function(t){return new e(t)},e.prototype.map=function(t){return new e(t)},e.prototype.eq=function(t){return t instanceof e},e.prototype.getBookmark=function(){return wl},e}(dl);dl.jsonID("all",bl);var wl={map:function(){return this},resolve:function(t){return new bl(t)}};function xl(t,e,n,r,o,i){if(e.inlineContent)return vl.create(t,n);for(var s=r-(o>0?0:1);o>0?s<e.childCount:s>=0;s+=o){var a=e.child(s);if(a.isAtom){if(!i&&gl.isSelectable(a))return gl.create(t,n-(o<0?a.nodeSize:0))}else{var l=xl(t,a,n+o,o<0?a.childCount:0,o,i);if(l)return l}n+=a.nodeSize*o}}function Sl(t,e,n){var r=t.steps.length-1;if(!(r<e)){var o,i=t.steps[r];(i instanceof Ga||i instanceof Xa)&&(t.mapping.maps[r].forEach((function(t,e,n,r){null==o&&(o=r)})),t.setSelection(dl.near(t.doc.resolve(o),n)))}}var kl=function(t){function e(e){t.call(this,e.doc),this.time=Date.now(),this.curSelection=e.selection,this.curSelectionFor=0,this.storedMarks=e.storedMarks,this.updated=0,this.meta=Object.create(null)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},e.prototype.setSelection=function(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},n.selectionSet.get=function(){return(1&this.updated)>0},e.prototype.setStoredMarks=function(t){return this.storedMarks=t,this.updated|=2,this},e.prototype.ensureMarks=function(t){return Is.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this},e.prototype.addStoredMark=function(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))},e.prototype.removeStoredMark=function(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(2&this.updated)>0},e.prototype.addStep=function(e,n){t.prototype.addStep.call(this,e,n),this.updated=-3&this.updated,this.storedMarks=null},e.prototype.setTime=function(t){return this.time=t,this},e.prototype.replaceSelection=function(t){return this.selection.replace(this,t),this},e.prototype.replaceSelectionWith=function(t,e){var n=this.selection;return!1!==e&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||Is.none))),n.replaceWith(this,t),this},e.prototype.deleteSelection=function(){return this.selection.replace(this),this},e.prototype.insertText=function(t,e,n){void 0===n&&(n=e);var r=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(r.text(t),!0):this.deleteSelection();if(!t)return this.deleteRange(e,n);var o=this.storedMarks;if(!o){var i=this.doc.resolve(e);o=n==e?i.marks():i.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(e,n,r.text(t,o)),this.selection.empty||this.setSelection(dl.near(this.selection.$to)),this},e.prototype.setMeta=function(t,e){return this.meta["string"==typeof t?t:t.key]=e,this},e.prototype.getMeta=function(t){return this.meta["string"==typeof t?t:t.key]},n.isGeneric.get=function(){for(var t in this.meta)return!1;return!0},e.prototype.scrollIntoView=function(){return this.updated|=4,this},n.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(e.prototype,n),e}(Ha);function Cl(t,e){return e&&t?t.bind(e):t}var Ol=function(t,e,n){this.name=t,this.init=Cl(e.init,n),this.apply=Cl(e.apply,n)},Ml=[new Ol("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new Ol("selection",{init:function(t,e){return t.selection||dl.atStart(e.doc)},apply:function(t){return t.selection}}),new Ol("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Ol("scrollToSelection",{init:function(){return 0},apply:function(t,e){return t.scrolledIntoView?e+1:e}})],Tl=function(t,e){var n=this;this.schema=t,this.fields=Ml.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),e&&e.forEach((function(t){if(n.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");n.plugins.push(t),n.pluginsByKey[t.key]=t,t.spec.state&&n.fields.push(new Ol(t.key,t.spec.state,t))}))},_l=function(t){this.config=t},Al={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};Al.schema.get=function(){return this.config.schema},Al.plugins.get=function(){return this.config.plugins},_l.prototype.apply=function(t){return this.applyTransaction(t).state},_l.prototype.filterTransaction=function(t,e){void 0===e&&(e=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=e){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,t,this))return!1}return!0},_l.prototype.applyTransaction=function(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};for(var e=[t],n=this.applyInner(t),r=null;;){for(var o=!1,i=0;i<this.config.plugins.length;i++){var s=this.config.plugins[i];if(s.spec.appendTransaction){var a=r?r[i].n:0,l=r?r[i].state:this,c=a<e.length&&s.spec.appendTransaction.call(s,a?e.slice(a):e,l,n);if(c&&n.filterTransaction(c,i)){if(c.setMeta("appendedTransaction",t),!r){r=[];for(var p=0;p<this.config.plugins.length;p++)r.push(p<i?{state:n,n:e.length}:{state:this,n:0})}e.push(c),n=n.applyInner(c),o=!0}r&&(r[i]={state:n,n:e.length})}}if(!o)return{state:n,transactions:e}}},_l.prototype.applyInner=function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var e=new _l(this.config),n=this.config.fields,r=0;r<n.length;r++){var o=n[r];e[o.name]=o.apply(t,this[o.name],this,e)}for(var i=0;i<Nl.length;i++)Nl[i](this,t,e);return e},Al.tr.get=function(){return new kl(this)},_l.create=function(t){for(var e=new Tl(t.schema||t.doc.type.schema,t.plugins),n=new _l(e),r=0;r<e.fields.length;r++)n[e.fields[r].name]=e.fields[r].init(t,n);return n},_l.prototype.reconfigure=function(t){for(var e=new Tl(t.schema||this.schema,t.plugins),n=e.fields,r=new _l(e),o=0;o<n.length;o++){var i=n[o].name;r[i]=this.hasOwnProperty(i)?this[i]:n[o].init(t,r)}return r},_l.prototype.toJSON=function(t){var e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map((function(t){return t.toJSON()}))),t&&"object"==typeof t)for(var n in t){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=t[n],o=r.spec.state;o&&o.toJSON&&(e[n]=o.toJSON.call(r,this[r.key]))}return e},_l.fromJSON=function(t,e,n){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var r=new Tl(t.schema,t.plugins),o=new _l(r);return r.fields.forEach((function(r){if("doc"==r.name)o.doc=Zs.fromJSON(t.schema,e.doc);else if("selection"==r.name)o.selection=dl.fromJSON(o.doc,e.selection);else if("storedMarks"==r.name)e.storedMarks&&(o.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(n)for(var i in n){var s=n[i],a=s.spec.state;if(s.key==r.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(e,i))return void(o[r.name]=a.fromJSON.call(s,t,e[i],o))}o[r.name]=r.init(t,o)}})),o},_l.addApplyListener=function(t){Nl.push(t)},_l.removeApplyListener=function(t){var e=Nl.indexOf(t);e>-1&&Nl.splice(e,1)},Object.defineProperties(_l.prototype,Al);var Nl=[],El=function(t){this.props={},t.props&&function t(e,n,r){for(var o in e){var i=e[o];i instanceof Function?i=i.bind(n):"handleDOMEvents"==o&&(i=t(i,n,{})),r[o]=i}return r}(t.props,this,this.props),this.spec=t,this.key=t.key?t.key.key:Dl("plugin")};El.prototype.getState=function(t){return t[this.key]};var Rl=Object.create(null);function Dl(t){return t in Rl?t+"$"+ ++Rl[t]:(Rl[t]=0,t+"$")}var Il=function(t){void 0===t&&(t="key"),this.key=Dl(t)};Il.prototype.get=function(t){return t.config.pluginsByKey[this.key]},Il.prototype.getState=function(t){return t[this.key]};var Pl=Object.freeze({__proto__:null,AllSelection:bl,EditorState:_l,NodeSelection:gl,Plugin:El,PluginKey:Il,Selection:dl,SelectionRange:fl,TextSelection:vl,Transaction:kl});function $l(t,e){return!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0)}function Ll(t,e){for(;t;t="start"==e?t.firstChild:t.lastChild)if(t.isTextblock)return!0;return!1}function zl(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function Bl(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){var n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}function jl(t,e,n){var r,o,i=e.nodeBefore,s=e.nodeAfter;if(i.type.spec.isolating||s.type.spec.isolating)return!1;if(function(t,e,n){var r=e.nodeBefore,o=e.nodeAfter,i=e.index();return!(!(r&&o&&r.type.compatibleContent(o.type))||(!r.content.size&&e.parent.canReplace(i-1,i)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),0):!e.parent.canReplace(i,i+1)||!o.isTextblock&&!el(t.doc,e.pos)||(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),0)))}(t,e,n))return!0;if(e.parent.canReplace(e.index(),e.index()+1)&&(r=(o=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&o.matchType(r[0]||s.type).validEnd){if(n){for(var a=e.pos+s.nodeSize,l=As.empty,c=r.length-1;c>=0;c--)l=As.from(r[c].create(null,l));l=As.from(i.copy(l));var p=t.tr.step(new Xa(e.pos-1,a,e.pos,a,new $s(l,1,0),r.length,!0)),u=a+2*r.length;el(p.doc,u)&&p.join(u),n(p.scrollIntoView())}return!0}var d=dl.findFrom(e,1),h=d&&d.$from.blockRange(d.$to),f=h&&Qa(h);return null!=f&&f>=e.depth&&(n&&n(t.tr.lift(h,f).scrollIntoView()),!0)}function Vl(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return function(e,n,r){for(var o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}var Fl=Vl($l,(function(t,e,n){var r=t.selection.$cursor;if(!r||(n?!n.endOfTextblock("backward",t):r.parentOffset>0))return!1;var o=zl(r);if(!o){var i=r.blockRange(),s=i&&Qa(i);return null!=s&&(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)}var a=o.nodeBefore;if(!a.type.spec.isolating&&jl(t,o,e))return!0;if(0==r.parent.content.size&&(Ll(a,"end")||gl.isSelectable(a))){if(e){var l=t.tr.deleteRange(r.before(),r.after());l.setSelection(Ll(a,"end")?dl.findFrom(l.doc.resolve(l.mapping.map(o.pos,-1)),-1):gl.create(l.doc,o.pos-a.nodeSize)),e(l.scrollIntoView())}return!0}return!(!a.isAtom||o.depth!=r.depth-1||(e&&e(t.tr.delete(o.pos-a.nodeSize,o.pos).scrollIntoView()),0))}),(function(t,e,n){var r=t.selection.$cursor;if(!r||(n?!n.endOfTextblock("backward",t):r.parentOffset>0))return!1;var o=zl(r),i=o&&o.nodeBefore;return!(!i||!gl.isSelectable(i)||(e&&e(t.tr.setSelection(gl.create(t.doc,o.pos-i.nodeSize)).scrollIntoView()),0))})),Hl=Vl($l,(function(t,e,n){var r=t.selection.$cursor;if(!r||(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size))return!1;var o=Bl(r);if(!o)return!1;var i=o.nodeAfter;if(jl(t,o,e))return!0;if(0==r.parent.content.size&&(Ll(i,"start")||gl.isSelectable(i))){if(e){var s=t.tr.deleteRange(r.before(),r.after());s.setSelection(Ll(i,"start")?dl.findFrom(s.doc.resolve(s.mapping.map(o.pos)),1):gl.create(s.doc,s.mapping.map(o.pos))),e(s.scrollIntoView())}return!0}return!(!i.isAtom||o.depth!=r.depth-1||(e&&e(t.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),0))}),(function(t,e,n){var r=t.selection.$cursor;if(!r||(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size))return!1;var o=Bl(r),i=o&&o.nodeAfter;return!(!i||!gl.isSelectable(i)||(e&&e(t.tr.setSelection(gl.create(t.doc,o.pos)).scrollIntoView()),0))})),ql={Enter:Vl((function(t,e){var n=t.selection,r=n.$head,o=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(o)||(e&&e(t.tr.insertText("\n").scrollIntoView()),0))}),(function(t,e){var n=t.selection,r=n.$from,o=n.$to;if(r.parent.inlineContent||o.parent.inlineContent)return!1;var i=r.parent.contentMatchAt(o.indexAfter()).defaultType;if(!i||!i.isTextblock)return!1;if(e){var s=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,a=t.tr.insert(s,i.createAndFill());a.setSelection(vl.create(a.doc,s+1)),e(a.scrollIntoView())}return!0}),(function(t,e){var n=t.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var r=n.before();if(tl(t.doc,r))return e&&e(t.tr.split(r).scrollIntoView()),!0}var o=n.blockRange(),i=o&&Qa(o);return null!=i&&(e&&e(t.tr.lift(o,i).scrollIntoView()),!0)}),(function(t,e){var n=t.selection,r=n.$from,o=n.$to;if(t.selection instanceof gl&&t.selection.node.isBlock)return!(!r.parentOffset||!tl(t.doc,r.pos)||(e&&e(t.tr.split(r.pos).scrollIntoView()),0));if(!r.parent.isBlock)return!1;if(e){var i=o.parentOffset==o.parent.content.size,s=t.tr;t.selection instanceof vl&&s.deleteSelection();var a=0==r.depth?null:r.node(-1).contentMatchAt(r.indexAfter(-1)).defaultType,l=i&&a?[{type:a}]:null,c=tl(s.doc,s.mapping.map(r.pos),1,l);l||c||!tl(s.doc,s.mapping.map(r.pos),1,a&&[{type:a}])||(l=[{type:a}],c=!0),c&&(s.split(s.mapping.map(r.pos),1,l),i||r.parentOffset||r.parent.type==a||!r.node(-1).canReplace(r.index(-1),r.indexAfter(-1),As.from(a.create(),r.parent))||s.setNodeMarkup(s.mapping.map(r.before()),a)),e(s.scrollIntoView())}return!0})),"Mod-Enter":function(t,e){var n=t.selection,r=n.$head,o=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(o))return!1;var i=r.node(-1),s=r.indexAfter(-1),a=i.contentMatchAt(s).defaultType;if(!i.canReplaceWith(s,s,a))return!1;if(e){var l=r.after(),c=t.tr.replaceWith(l,l,a.createAndFill());c.setSelection(dl.near(c.doc.resolve(l),1)),e(c.scrollIntoView())}return!0},Backspace:Fl,"Mod-Backspace":Fl,Delete:Hl,"Mod-Delete":Hl,"Mod-a":function(t,e){return e&&e(t.tr.setSelection(new bl(t.doc))),!0}},Wl={"Ctrl-h":ql.Backspace,"Alt-Backspace":ql["Mod-Backspace"],"Ctrl-d":ql.Delete,"Ctrl-Alt-Backspace":ql["Mod-Delete"],"Alt-Delete":ql["Mod-Delete"],"Alt-d":ql["Mod-Delete"]};for(var Jl in ql)Wl[Jl]=ql[Jl];function Kl(t){return function(e,n){var r=e.selection,o=r.$from,i=r.$to,s=o.blockRange(i,(function(e){return e.childCount&&e.firstChild.type==t}));return!!s&&(!n||(o.node(s.depth-1).type==t?function(t,e,n,r){var o=t.tr,i=r.end,s=r.$to.end(r.depth);return i<s&&(o.step(new Xa(i-1,s,i,s,new $s(As.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Gs(o.doc.resolve(r.$from.pos),o.doc.resolve(s),r.depth)),e(o.lift(r,Qa(r)).scrollIntoView()),!0}(e,n,t,s):function(t,e,n){for(var r=t.tr,o=n.parent,i=n.end,s=n.endIndex-1,a=n.startIndex;s>a;s--)i-=o.child(s).nodeSize,r.delete(i-1,i+1);var l=r.doc.resolve(n.start),c=l.nodeAfter,p=0==n.startIndex,u=n.endIndex==o.childCount,d=l.node(-1),h=l.index(-1);if(!d.canReplace(h+(p?0:1),h+1,c.content.append(u?As.empty:As.from(o))))return!1;var f=l.pos,v=f+c.nodeSize;return r.step(new Xa(f-(p?1:0),v+(u?1:0),f+1,v-1,new $s((p?As.empty:As.from(o.copy(As.empty))).append(u?As.empty:As.from(o.copy(As.empty))),p?0:1,u?0:1),p?0:1)),e(r.scrollIntoView()),!0}(e,n,s)))}}function Ul(t){return function(e,n){var r=e.selection,o=r.$from,i=r.$to,s=o.blockRange(i,(function(e){return e.childCount&&e.firstChild.type==t}));if(!s)return!1;var a=s.startIndex;if(0==a)return!1;var l=s.parent,c=l.child(a-1);if(c.type!=t)return!1;if(n){var p=c.lastChild&&c.lastChild.type==l.type,u=As.from(p?t.create():null),d=new $s(As.from(t.create(null,As.from(l.type.create(null,u)))),p?3:1,0),h=s.start,f=s.end;n(e.tr.step(new Xa(h-(p?3:1),f,h,f,d,1,!0)).scrollIntoView())}return!0}}"undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&os.platform();for(var Gl={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},Xl=Gl,Yl={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:";",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},Zl="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),Ql="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),tc="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),ec="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),nc="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),rc=Zl&&(ec||+Zl[1]<57)||tc&&ec,oc=0;oc<10;oc++)Gl[48+oc]=Gl[96+oc]=String(oc);for(oc=1;oc<=24;oc++)Gl[oc+111]="F"+oc;for(oc=65;oc<=90;oc++)Gl[oc]=String.fromCharCode(oc+32),Yl[oc]=String.fromCharCode(oc);for(var ic in Gl)Yl.hasOwnProperty(ic)||(Yl[ic]=Gl[ic]);var sc="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function ac(t){var e,n,r,o,i=t.split(/-(?!$)/),s=i[i.length-1];"Space"==s&&(s=" ");for(var a=0;a<i.length-1;a++){var l=i[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))e=!0;else if(/^(c|ctrl|control)$/i.test(l))n=!0;else if(/^s(hift)?$/i.test(l))r=!0;else{if(!/^mod$/i.test(l))throw new Error("Unrecognized modifier name: "+l);sc?o=!0:n=!0}}return e&&(s="Alt-"+s),n&&(s="Ctrl-"+s),o&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function lc(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==n&&e.shiftKey&&(t="Shift-"+t),t}var cc={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var pc=/Edge\/(\d+)/.exec(navigator.userAgent),uc=/MSIE \d/.test(navigator.userAgent),dc=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);cc.mac=/Mac/.test(navigator.platform);var hc=cc.ie=!!(uc||dc||pc);cc.ie_version=uc?document.documentMode||6:dc?+dc[1]:pc?+pc[1]:null,cc.gecko=!hc&&/gecko\/(\d+)/i.test(navigator.userAgent),cc.gecko_version=cc.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var fc=!hc&&/Chrome\/(\d+)/.exec(navigator.userAgent);cc.chrome=!!fc,cc.chrome_version=fc&&+fc[1],cc.ios=!hc&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),cc.android=/Android \d/.test(navigator.userAgent),cc.webkit=!hc&&"WebkitAppearance"in document.documentElement.style,cc.safari=/Apple Computer/.test(navigator.vendor),cc.webkit_version=cc.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var vc=function(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e},mc=function(t){var e=t.parentNode;return e&&11==e.nodeType?e.host:e},gc=function(t,e,n){var r=document.createRange();return r.setEnd(t,null==n?t.nodeValue.length:n),r.setStart(t,e||0),r},yc=function(t,e,n,r){return n&&(wc(t,e,n,r,-1)||wc(t,e,n,r,1))},bc=/^(img|br|input|textarea|hr)$/i;function wc(t,e,n,r,o){for(;;){if(t==n&&e==r)return!0;if(e==(o<0?0:xc(t))){var i=t.parentNode;if(1!=i.nodeType||Sc(t)||bc.test(t.nodeName)||"false"==t.contentEditable)return!1;e=vc(t)+(o<0?0:1),t=i}else{if(1!=t.nodeType)return!1;if("false"==(t=t.childNodes[e+(o<0?-1:0)]).contentEditable)return!1;e=o<0?xc(t):0}}}function xc(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function Sc(t){for(var e,n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}var kc=function(t){var e=t.isCollapsed;return e&&cc.chrome&&t.rangeCount&&!t.getRangeAt(0).collapsed&&(e=!1),e};function Cc(t,e){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function Oc(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function Mc(t,e){return"number"==typeof t?t:t[e]}function Tc(t,e,n){for(var r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument,s=i.defaultView,a=n||t.dom;a;a=mc(a))if(1==a.nodeType){var l=a==i.body||1!=a.nodeType,c=l?Oc(s):a.getBoundingClientRect(),p=0,u=0;if(e.top<c.top+Mc(r,"top")?u=-(c.top-e.top+Mc(o,"top")):e.bottom>c.bottom-Mc(r,"bottom")&&(u=e.bottom-c.bottom+Mc(o,"bottom")),e.left<c.left+Mc(r,"left")?p=-(c.left-e.left+Mc(o,"left")):e.right>c.right-Mc(r,"right")&&(p=e.right-c.right+Mc(o,"right")),(p||u)&&(l?s.scrollBy(p,u):(u&&(a.scrollTop+=u),p&&(a.scrollLeft+=p))),l)break}}function _c(t){for(var e=[],n=t.ownerDocument;t&&(e.push({dom:t,top:t.scrollTop,left:t.scrollLeft}),t!=n);t=mc(t));return e}function Ac(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=r.dom,i=r.top,s=r.left;o.scrollTop!=i+e&&(o.scrollTop=i+e),o.scrollLeft!=s&&(o.scrollLeft=s)}}var Nc=null;function Ec(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function Rc(t,e){var n,r,o,i,s=t.root;if(s.caretPositionFromPoint)try{var a=s.caretPositionFromPoint(e.left,e.top);a&&(o=(n=a).offsetNode,i=n.offset)}catch(t){}if(!o&&s.caretRangeFromPoint){var l=s.caretRangeFromPoint(e.left,e.top);l&&(o=(r=l).startContainer,i=r.startOffset)}var c,p=s.elementFromPoint(e.left,e.top+1);if(!p||!t.dom.contains(1!=p.nodeType?p.parentNode:p)){var u=t.dom.getBoundingClientRect();if(!Ec(e,u))return null;if(!(p=function t(e,n,r){var o=e.childNodes.length;if(o&&r.top<r.bottom)for(var i=Math.max(0,Math.min(o-1,Math.floor(o*(n.top-r.top)/(r.bottom-r.top))-2)),s=i;;){var a=e.childNodes[s];if(1==a.nodeType)for(var l=a.getClientRects(),c=0;c<l.length;c++){var p=l[c];if(Ec(n,p))return t(a,n,p)}if((s=(s+1)%o)==i)break}return e}(t.dom,e,u)))return null}if(p=function(t,e){var n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}(p,e),o){if(cc.gecko&&1==o.nodeType&&(i=Math.min(i,o.childNodes.length))<o.childNodes.length){var d,h=o.childNodes[i];"IMG"==h.nodeName&&(d=h.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&i++}o==t.dom&&i==o.childNodes.length-1&&1==o.lastChild.nodeType&&e.top>o.lastChild.getBoundingClientRect().bottom?c=t.state.doc.content.size:0!=i&&1==o.nodeType&&"BR"==o.childNodes[i-1].nodeName||(c=function(t,e,n,r){for(var o=-1,i=e;i!=t.dom;){var s=t.docView.nearestDesc(i,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>r.left||a.top>r.top)o=s.posBefore;else{if(!(a.right<r.left||a.bottom<r.top))break;o=s.posAfter}}i=s.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n)}(t,o,i,e))}null==c&&(c=function(t,e,n){var r=function t(e,n){for(var r,o,i=2e8,s=0,a=n.top,l=n.top,c=e.firstChild,p=0;c;c=c.nextSibling,p++){var u=void 0;if(1==c.nodeType)u=c.getClientRects();else{if(3!=c.nodeType)continue;u=gc(c).getClientRects()}for(var d=0;d<u.length;d++){var h=u[d];if(h.top<=a&&h.bottom>=l){a=Math.max(h.bottom,a),l=Math.min(h.top,l);var f=h.left>n.left?h.left-n.left:h.right<n.left?n.left-h.right:0;if(f<i){r=c,i=f,o=f&&3==r.nodeType?{left:h.right<n.left?h.right:h.left,top:n.top}:n,1==c.nodeType&&f&&(s=p+(n.left>=(h.left+h.right)/2?1:0));continue}}!r&&(n.left>=h.right&&n.top>=h.top||n.left>=h.left&&n.top>=h.bottom)&&(s=p+1)}}return r&&3==r.nodeType?function(t,e){for(var n=t.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);var i=Dc(r,1);if(i.top!=i.bottom&&Ec(e,i))return{node:t,offset:o+(e.left>=(i.left+i.right)/2?1:0)}}return{node:t,offset:0}}(r,o):!r||i&&1==r.nodeType?{node:e,offset:s}:t(r,o)}(e,n),o=r.node,i=r.offset,s=-1;if(1==o.nodeType&&!o.firstChild){var a=o.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return t.docView.posFromDOM(o,i,s)}(t,p,e));var f=t.docView.nearestDesc(p,!0);return{pos:c,inside:f?f.posAtStart-f.border:-1}}function Dc(t,e){var n=t.getClientRects();return n.length?n[e<0?0:n.length-1]:t.getBoundingClientRect()}function Ic(t,e){var n=t.docView.domFromPos(e),r=n.node,o=n.offset;if(3==r.nodeType&&(cc.chrome||cc.gecko)){var i=Dc(gc(r,o,o),0);if(cc.gecko&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){var s=Dc(gc(r,o-1,o-1),-1);if(Math.abs(s.left-i.left)<1&&s.top==i.top){var a=Dc(gc(r,o,o+1),-1);return Pc(a,a.left<s.left)}}return i}if(1==r.nodeType&&!t.state.doc.resolve(e).parent.inlineContent){var l,c=!0;if(o<r.childNodes.length){var p=r.childNodes[o];1==p.nodeType&&(l=p.getBoundingClientRect())}if(!l&&o){var u=r.childNodes[o-1];1==u.nodeType&&(l=u.getBoundingClientRect(),c=!1)}return function(t,e){if(0==t.height)return t;var n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}(l||r.getBoundingClientRect(),c)}for(var d=-1;d<2;d+=2)if(d<0&&o){var h=void 0,f=3==r.nodeType?gc(r,o-1,o):3==(h=r.childNodes[o-1]).nodeType?gc(h):1==h.nodeType&&"BR"!=h.nodeName?h:null;if(f){var v=Dc(f,1);if(v.top<v.bottom)return Pc(v,!1)}}else if(d>0&&o<xc(r)){var m=void 0,g=3==r.nodeType?gc(r,o,o+1):3==(m=r.childNodes[o]).nodeType?gc(m):1==m.nodeType?m:null;if(g){var y=Dc(g,-1);if(y.top<y.bottom)return Pc(y,!0)}}return Pc(Dc(3==r.nodeType?gc(r):r,0),!1)}function Pc(t,e){if(0==t.width)return t;var n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function $c(t,e,n){var r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o.focus()}}var Lc=/[\u0590-\u08ac]/,zc=null,Bc=null,jc=!1;var Vc=function(t,e,n,r){this.parent=t,this.children=e,this.dom=n,n.pmViewDesc=this,this.contentDOM=r,this.dirty=0},Fc={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0}};Vc.prototype.matchesWidget=function(){return!1},Vc.prototype.matchesMark=function(){return!1},Vc.prototype.matchesNode=function(){return!1},Vc.prototype.matchesHack=function(){return!1},Fc.beforePosition.get=function(){return!1},Vc.prototype.parseRule=function(){return null},Vc.prototype.stopEvent=function(){return!1},Fc.size.get=function(){for(var t=0,e=0;e<this.children.length;e++)t+=this.children[e].size;return t},Fc.border.get=function(){return 0},Vc.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var t=0;t<this.children.length;t++)this.children[t].destroy()},Vc.prototype.posBeforeChild=function(t){for(var e=0,n=this.posAtStart;e<this.children.length;e++){var r=this.children[e];if(r==t)return n;n+=r.size}},Fc.posBefore.get=function(){return this.parent.posBeforeChild(this)},Fc.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},Fc.posAfter.get=function(){return this.posBefore+this.size},Fc.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},Vc.prototype.localPosFromDOM=function(t,e,n){if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(n<0){var r,o;if(t==this.contentDOM)r=t.childNodes[e-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;r=t.previousSibling}for(;r&&(!(o=r.pmViewDesc)||o.parent!=this);)r=r.previousSibling;return r?this.posBeforeChild(o)+o.size:this.posAtStart}var i,s;if(t==this.contentDOM)i=t.childNodes[e];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;i=t.nextSibling}for(;i&&(!(s=i.pmViewDesc)||s.parent!=this);)i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}var a;if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(var l=t;;l=l.parentNode){if(l==this.dom){a=!1;break}if(l.parentNode.firstChild!=l)break}if(null==a&&e==t.childNodes.length)for(var c=t;;c=c.parentNode){if(c==this.dom){a=!0;break}if(c.parentNode.lastChild!=c)break}}return(null==a?n>0:a)?this.posAtEnd:this.posAtStart},Vc.prototype.nearestDesc=function(t,e){for(var n=!0,r=t;r;r=r.parentNode){var o=this.getDesc(r);if(o&&(!e||o.node)){if(!n||!o.nodeDOM||(1==o.nodeDOM.nodeType?o.nodeDOM.contains(t):o.nodeDOM==t))return o;n=!1}}},Vc.prototype.getDesc=function(t){for(var e=t.pmViewDesc,n=e;n;n=n.parent)if(n==this)return e},Vc.prototype.posFromDOM=function(t,e,n){for(var r=t;;r=r.parentNode){var o=this.getDesc(r);if(o)return o.localPosFromDOM(t,e,n)}},Vc.prototype.descAt=function(t){for(var e=0,n=0;e<this.children.length;e++){var r=this.children[e],o=n+r.size;if(n==t&&o!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(t<o)return r.descAt(t-n-r.border);n=o}},Vc.prototype.domFromPos=function(t){if(!this.contentDOM)return{node:this.dom,offset:0};for(var e=0,n=0;;n++){if(e==t){for(;n<this.children.length&&(this.children[n].beforePosition||this.children[n].dom.parentNode!=this.contentDOM);)n++;return{node:this.contentDOM,offset:n==this.children.length?this.contentDOM.childNodes.length:vc(this.children[n].dom)}}if(n==this.children.length)throw new Error("Invalid position "+t);var r=this.children[n],o=e+r.size;if(t<o)return r.domFromPos(t-e-r.border);e=o}},Vc.prototype.parseRange=function(t,e,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,o=-1,i=n,s=0;;s++){var a=this.children[s],l=i+a.size;if(-1==r&&t<=l){var c=i+a.border;if(t>=c&&e<=l-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(t,e,c);t=i;for(var p=s;p>0;p--){var u=this.children[p-1];if(u.size&&u.dom.parentNode==this.contentDOM&&!u.emptyChildAt(1)){r=vc(u.dom)+1;break}t-=u.size}-1==r&&(r=0)}if(r>-1&&e<=l){e=l;for(var d=s+1;d<this.children.length;d++){var h=this.children[d];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){o=vc(h.dom);break}e+=h.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=l}return{node:this.contentDOM,from:t,to:e,fromOffset:r,toOffset:o}},Vc.prototype.emptyChildAt=function(t){if(this.border||!this.contentDOM||!this.children.length)return!1;var e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)},Vc.prototype.domAfterPos=function(t){var e=this.domFromPos(t),n=e.node,r=e.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]},Vc.prototype.setSelection=function(t,e,n,r){for(var o=Math.min(t,e),i=Math.max(t,e),s=0,a=0;s<this.children.length;s++){var l=this.children[s],c=a+l.size;if(o>a&&i<c)return l.setSelection(t-a-l.border,e-a-l.border,n,r);a=c}var p=this.domFromPos(t),u=this.domFromPos(e),d=n.getSelection(),h=document.createRange();if(r||!yc(p.node,p.offset,d.anchorNode,d.anchorOffset)||!yc(u.node,u.offset,d.focusNode,d.focusOffset)){if(d.extend)h.setEnd(p.node,p.offset),h.collapse(!1);else{if(t>e){var f=p;p=u,u=f}h.setEnd(u.node,u.offset),h.setStart(p.node,p.offset)}d.removeAllRanges(),d.addRange(h),d.extend&&d.extend(u.node,u.offset)}},Vc.prototype.ignoreMutation=function(t){return!this.contentDOM&&"selection"!=t.type},Fc.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},Vc.prototype.markDirty=function(t,e){for(var n=0,r=0;r<this.children.length;r++){var o=this.children[r],i=n+o.size;if(n==i?t<=i&&e>=n:t<i&&e>n){var s=n+o.border,a=i-o.border;if(t>=s&&e<=a)return this.dirty=t==n||e==i?2:1,void(t!=s||e!=a||!o.contentLost&&o.dom.parentNode==this.contentDOM?o.markDirty(t-s,e-s):o.dirty=3);o.dirty=3}n=i}this.dirty=2},Vc.prototype.markParentsDirty=function(){for(var t=this.parent;t;t=t.parent)t.dirty<2&&(t.dirty=2)},Object.defineProperties(Vc.prototype,Fc);var Hc=[],qc=function(t){function e(e,n,r,o){var i,s=n.type.toDOM;if("function"==typeof s&&(s=s(r,(function(){return i?i.parent?i.parent.posBeforeChild(i):void 0:o}))),!n.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}t.call(this,e,Hc,s,null),this.widget=n,i=this}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={beforePosition:{configurable:!0}};return n.beforePosition.get=function(){return this.widget.type.side<0},e.prototype.matchesWidget=function(t){return 0==this.dirty&&t.type.eq(this.widget.type)},e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.stopEvent=function(t){var e=this.widget.spec.stopEvent;return!!e&&e(t)},Object.defineProperties(e.prototype,n),e}(Vc),Wc=function(t){function e(e,n,r,o){t.call(this,e,Hc,n,null),this.textDOM=r,this.text=o}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},e.prototype.localPosFromDOM=function(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e},e.prototype.domFromPos=function(t){return{node:this.textDOM,offset:t}},e.prototype.ignoreMutation=function(t){return"characterData"===t.type&&t.target.nodeValue==t.oldValue},Object.defineProperties(e.prototype,n),e}(Vc),Jc=function(t){function e(e,n,r,o){t.call(this,e,[],r,o),this.mark=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.create=function(t,n,r,o){var i=o.nodeViews[n.type.name],s=i&&i(n,o,r);return s&&s.dom||(s=Da.renderSpec(document,n.type.spec.toDOM(n,r))),new e(t,n,s.dom,s.contentDOM||s.dom)},e.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},e.prototype.matchesMark=function(t){return 3!=this.dirty&&this.mark.eq(t)},e.prototype.markDirty=function(e,n){if(t.prototype.markDirty.call(this,e,n),0!=this.dirty){for(var r=this.parent;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=0}},e.prototype.slice=function(t,n,r){var o=e.create(this.parent,this.mark,!0,r),i=this.children,s=this.size;n<s&&(i=lp(i,n,s,r)),t>0&&(i=lp(i,0,t,r));for(var a=0;a<i.length;a++)i[a].parent=o;return o.children=i,o},e}(Vc),Kc=function(t){function e(e,n,r,o,i,s,a,l,c){t.call(this,e,n.isLeaf?Hc:[],i,s),this.nodeDOM=a,this.node=n,this.outerDeco=r,this.innerDeco=o,s&&this.updateChildren(l,c)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={size:{configurable:!0},border:{configurable:!0}};return e.create=function(t,n,r,o,i,s){var a,l,c=i.nodeViews[n.type.name],p=c&&c(n,i,(function(){return l?l.parent?l.parent.posBeforeChild(l):void 0:s}),r),u=p&&p.dom,d=p&&p.contentDOM;if(n.isText)if(u){if(3!=u.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else u=document.createTextNode(n.text);else u||(u=(a=Da.renderSpec(document,n.type.spec.toDOM(n))).dom,d=a.contentDOM);d||n.isText||"BR"==u.nodeName||(u.hasAttribute("contenteditable")||(u.contentEditable=!1),n.type.spec.draggable&&(u.draggable=!0));var h=u;return u=rp(u,r,n),p?l=new Yc(t,n,r,o,u,d,h,p,i,s+1):n.isText?new Gc(t,n,r,o,u,h,i):new e(t,n,r,o,u,d,h,i,s+1)},e.prototype.parseRule=function(){var t=this;if(this.node.type.spec.reparseInView)return null;var e={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(e.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?e.contentElement=this.contentDOM:e.getContent=function(){return t.contentDOM?As.empty:t.node.content},e},e.prototype.matchesNode=function(t,e,n){return 0==this.dirty&&t.eq(this.node)&&op(e,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},e.prototype.updateChildren=function(t,e){var n=this,r=this.node.inlineContent,o=e,i=r&&t.composing&&this.localCompositionNode(t,e),s=new sp(this,i&&i.node);!function(t,e,n,r){var o=e.locals(t),i=0;if(0!=o.length)for(var s=0,a=[],l=null,c=0;;){if(s<o.length&&o[s].to==i){for(var p=o[s++],u=void 0;s<o.length&&o[s].to==i;)(u||(u=[p])).push(o[s++]);if(u){u.sort(ap);for(var d=0;d<u.length;d++)n(u[d],c,!!l)}else n(p,c,!!l)}var h=void 0,f=void 0;if(l)f=-1,h=l,l=null;else{if(!(c<t.childCount))break;f=c,h=t.child(c++)}for(var v=0;v<a.length;v++)a[v].to<=i&&a.splice(v--,1);for(;s<o.length&&o[s].from==i;)a.push(o[s++]);var m=i+h.nodeSize;if(h.isText){var g=m;s<o.length&&o[s].from<g&&(g=o[s].from);for(var y=0;y<a.length;y++)a[y].to<g&&(g=a[y].to);g<m&&(l=h.cut(g-i),h=h.cut(0,g-i),m=g,f=-1)}r(h,a.length?a.slice():Hc,e.forChild(i,h),f),i=m}else for(var b=0;b<t.childCount;b++){var w=t.child(b);r(w,o,e.forChild(i,w),b),i+=w.nodeSize}}(this.node,this.innerDeco,(function(e,i,a){e.spec.marks?s.syncToMarks(e.spec.marks,r,t):e.type.side>=0&&!a&&s.syncToMarks(i==n.node.childCount?Is.none:n.node.child(i).marks,r,t),s.placeWidget(e,t,o)}),(function(e,n,i,a){s.syncToMarks(e.marks,r,t),s.findNodeMatch(e,n,i,a)||s.updateNextNode(e,n,i,t,a)||s.addNode(e,n,i,t,o),o+=e.nodeSize})),s.syncToMarks(Hc,r,t),this.node.isTextblock&&s.addTextblockHacks(),s.destroyRest(),(s.changed||2==this.dirty)&&(i&&this.protectLocalComposition(t,i),this.renderChildren())},e.prototype.renderChildren=function(){!function t(e,n){for(var r=e.firstChild,o=0;o<n.length;o++){var i=n[o],s=i.dom;if(s.parentNode==e){for(;s!=r;)r=ip(r);r=r.nextSibling}else e.insertBefore(s,r);if(i instanceof Jc){var a=r?r.previousSibling:e.lastChild;t(i.contentDOM,i.children),r=a?a.nextSibling:e.firstChild}}for(;r;)r=ip(r)}(this.contentDOM,this.children),cc.ios&&function(t){if("UL"==t.nodeName||"OL"==t.nodeName){var e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}(this.dom)},e.prototype.localCompositionNode=function(t,e){var n=t.state.selection,r=n.from,o=n.to;if(!(!(t.state.selection instanceof vl)||r<e||o>e+this.node.content.size)){var i=t.root.getSelection(),s=function(t,e){for(;;){if(3==t.nodeType)return t;if(1==t.nodeType&&e>0){if(t.childNodes.length>e&&3==t.childNodes[e].nodeType)return t.childNodes[e];e=xc(t=t.childNodes[e-1])}else{if(!(1==t.nodeType&&e<t.childNodes.length))return null;t=t.childNodes[e],e=0}}}(i.focusNode,i.focusOffset);if(s&&this.dom.contains(s.parentNode)){var a=s.nodeValue,l=function(t,e,n,r){for(var o="",i=0,s=0;i<t.childCount;i++){var a=t.child(i),l=s+a.nodeSize;if(a.isText){if(o+=a.text,l>=r){for(var c=l-o.length,p=o.lastIndexOf(e);p>-1&&c+p>n;)p=o.lastIndexOf(e,p-1);if(p>-1&&c+p+e.length>=r)return c+p;if(l>r)break}}else o="";s=l}return-1}(this.node.content,a,r-e,o-e);return l<0?null:{node:s,pos:l,text:a}}}},e.prototype.protectLocalComposition=function(t,e){var n=e.node,r=e.pos,o=e.text;if(!this.getDesc(n)){for(var i=n;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=null)}var s=new Wc(this,i,n,o);t.compositionNodes.push(s),this.children=lp(this.children,r,r+o.length,t,s)}},e.prototype.update=function(t,e,n,r){return!(3==this.dirty||!t.sameMarkup(this.node)||(this.updateInner(t,e,n,r),0))},e.prototype.updateInner=function(t,e,n,r){this.updateOuterDeco(e),this.node=t,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0},e.prototype.updateOuterDeco=function(t){if(!op(t,this.outerDeco)){var e=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=ep(this.dom,this.nodeDOM,tp(this.outerDeco,this.node,e),tp(t,this.node,e)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=t}},e.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},e.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!1)},Object.defineProperties(e.prototype,n),e}(Vc);function Uc(t,e,n,r,o){return rp(r,e,t),new Kc(null,t,e,n,r,r,r,o,0)}var Gc=function(t){function e(e,n,r,o,i,s,a){t.call(this,e,n,r,o,i,null,s,a)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseRule=function(){return{skip:this.nodeDOM.parentNode||!0}},e.prototype.update=function(t,e){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!t.sameMarkup(this.node)||(this.updateOuterDeco(e),0==this.dirty&&t.text==this.node.text||t.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=t.text),this.node=t,this.dirty=0,0))},e.prototype.inParent=function(){for(var t=this.parent.contentDOM,e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1},e.prototype.domFromPos=function(t){return{node:this.nodeDOM,offset:t}},e.prototype.localPosFromDOM=function(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):t.prototype.localPosFromDOM.call(this,e,n,r)},e.prototype.ignoreMutation=function(t){return"characterData"!=t.type&&"selection"!=t.type},e.prototype.slice=function(t,n,r){var o=this.node.cut(t,n),i=document.createTextNode(o.text);return new e(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)},e}(Kc),Xc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.matchesHack=function(){return 0==this.dirty},e}(Vc),Yc=function(t){function e(e,n,r,o,i,s,a,l,c,p){t.call(this,e,n,r,o,i,s,a,c,p),this.spec=l}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(e,n,r,o){if(3==this.dirty)return!1;if(this.spec.update){var i=this.spec.update(e,n);return i&&this.updateInner(e,n,r,o),i}return!(!this.contentDOM&&!e.isLeaf)&&t.prototype.update.call(this,e,n,r,o)},e.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():t.prototype.selectNode.call(this)},e.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():t.prototype.deselectNode.call(this)},e.prototype.setSelection=function(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r):t.prototype.setSelection.call(this,e,n,r,o)},e.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),t.prototype.destroy.call(this)},e.prototype.stopEvent=function(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)},e.prototype.ignoreMutation=function(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):t.prototype.ignoreMutation.call(this,e)},e}(Kc);function Zc(t){t&&(this.nodeName=t)}Zc.prototype=Object.create(null);var Qc=[new Zc];function tp(t,e,n){if(0==t.length)return Qc;for(var r=n?Qc[0]:new Zc,o=[r],i=0;i<t.length;i++){var s=t[i].type.attrs,a=r;if(s)for(var l in s.nodeName&&o.push(a=new Zc(s.nodeName)),s){var c=s[l];null!=c&&(n&&1==o.length&&o.push(a=r=new Zc(e.isInline?"span":"div")),"class"==l?a.class=(a.class?a.class+" ":"")+c:"style"==l?a.style=(a.style?a.style+";":"")+c:"nodeName"!=l&&(a[l]=c))}}return o}function ep(t,e,n,r){if(n==Qc&&r==Qc)return e;for(var o=e,i=0;i<r.length;i++){var s=r[i],a=n[i];if(i){var l=void 0;a&&a.nodeName==s.nodeName&&o!=t&&(l=o.parentNode)&&l.tagName.toLowerCase()==s.nodeName||((l=document.createElement(s.nodeName)).appendChild(o),a=Qc[0]),o=l}np(o,a||Qc[0],s)}return o}function np(t,e,n){for(var r in e)"class"==r||"style"==r||"nodeName"==r||r in n||t.removeAttribute(r);for(var o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=e[o]&&t.setAttribute(o,n[o]);if(e.class!=n.class){for(var i=e.class?e.class.split(" "):Hc,s=n.class?n.class.split(" "):Hc,a=0;a<i.length;a++)-1==s.indexOf(i[a])&&t.classList.remove(i[a]);for(var l=0;l<s.length;l++)-1==i.indexOf(s[l])&&t.classList.add(s[l])}if(e.style!=n.style){if(e.style)for(var c,p=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;c=p.exec(e.style);)t.style.removeProperty(c[1]);n.style&&(t.style.cssText+=n.style)}}function rp(t,e,n){return ep(t,t,Qc,tp(e,n,1!=t.nodeType))}function op(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function ip(t){var e=t.nextSibling;return t.parentNode.removeChild(t),e}var sp=function(t,e){this.top=t,this.lock=e,this.index=0,this.stack=[],this.changed=!1;var n=function(t,e){for(var n=[],r=t.childCount,o=e.length-1;r>0&&o>=0;o--){var i=e[o],s=i.node;if(s){if(s!=t.child(r-1))break;n.push(i),--r}}return{nodes:n.reverse(),offset:r}}(t.node.content,t.children);this.preMatched=n.nodes,this.preMatchOffset=n.offset};function ap(t,e){return t.type.side-e.type.side}function lp(t,e,n,r,o){for(var i=[],s=0,a=0;s<t.length;s++){var l=t[s],c=a,p=a+=l.size;c>=n||p<=e?i.push(l):(c<e&&i.push(l.slice(0,e-c,r)),o&&(i.push(o),o=null),p>n&&i.push(l.slice(n-c,l.size,r)))}return i}function cp(t,e){var n=t.selection,r=n.$anchor,o=n.$head,i=e>0?r.max(o):r.min(o),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&dl.findFrom(s,e)}function pp(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function up(t,e,n){var r=t.state.selection;if(r instanceof vl){if(!r.empty||n.indexOf("s")>-1)return!1;if(t.endOfTextblock(e>0?"right":"left")){var o=cp(t.state,e);return!!(o&&o instanceof gl)&&pp(t,o)}var i,s=r.$head,a=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!a||a.isText)return!1;var l=e<0?s.pos-a.nodeSize:s.pos;return!!(a.isAtom||(i=t.docView.descAt(l))&&!i.contentDOM)&&(gl.isSelectable(a)?pp(t,new gl(e<0?t.state.doc.resolve(s.pos-a.nodeSize):s)):!!cc.webkit&&pp(t,new vl(t.state.doc.resolve(e<0?l:l+a.nodeSize))))}if(r instanceof gl&&r.node.isInline)return pp(t,new vl(e>0?r.$to:r.$from));var c=cp(t.state,e);return!!c&&pp(t,c)}function dp(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function hp(t){var e=t.pmViewDesc;return e&&0==e.size&&(t.nextSibling||"BR"!=t.nodeName)}function fp(t){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n){var o,i,s=!1;for(cc.gecko&&1==n.nodeType&&r<dp(n)&&hp(n.childNodes[r])&&(s=!0);;)if(r>0){if(1!=n.nodeType)break;var a=n.childNodes[r-1];if(hp(a))o=n,i=--r;else{if(3!=a.nodeType)break;r=(n=a).nodeValue.length}}else{if(mp(n))break;for(var l=n.previousSibling;l&&hp(l);)o=n.parentNode,i=vc(l),l=l.previousSibling;if(l)r=dp(n=l);else{if((n=n.parentNode)==t.dom)break;r=0}}s?gp(t,e,n,r):o&&gp(t,e,o,i)}}function vp(t){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n){for(var o,i,s=dp(n);;)if(r<s){if(1!=n.nodeType)break;if(!hp(n.childNodes[r]))break;o=n,i=++r}else{if(mp(n))break;for(var a=n.nextSibling;a&&hp(a);)o=a.parentNode,i=vc(a)+1,a=a.nextSibling;if(a)r=0,s=dp(n=a);else{if((n=n.parentNode)==t.dom)break;r=s=0}}o&&gp(t,e,o,i)}}function mp(t){var e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function gp(t,e,n,r){if(kc(e)){var o=document.createRange();o.setEnd(n,r),o.setStart(n,r),e.removeAllRanges(),e.addRange(o)}else e.extend&&e.extend(n,r);t.domObserver.setCurSelection()}function yp(t,e,n){var r=t.state.selection;if(r instanceof vl&&!r.empty||n.indexOf("s")>-1)return!1;var o=r.$from,i=r.$to;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){var s=cp(t.state,e);if(s&&s instanceof gl)return pp(t,s)}if(!o.parent.inlineContent){var a=dl.findFrom(e<0?o:i,e);return!a||pp(t,a)}return!1}function bp(t,e){if(!(t.state.selection instanceof vl))return!0;var n=t.state.selection,r=n.$head,o=n.$anchor,i=n.empty;if(!r.sameParent(o))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;var s=!r.textOffset&&(e<0?r.nodeBefore:r.nodeAfter);if(s&&!s.isText){var a=t.state.tr;return e<0?a.delete(r.pos-s.nodeSize,r.pos):a.delete(r.pos,r.pos+s.nodeSize),t.dispatch(a),!0}return!1}function wp(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function xp(t,e){var n=t.state.selection;if(Mp(t,n),t.editable?t.hasFocus():Ap(t)&&document.activeElement.contains(t.dom)){if(t.domObserver.disconnectSelection(),t.cursorWrapper)!function(t){var e=t.root.getSelection(),n=document.createRange(),r=t.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setEnd(r.parentNode,vc(r)+1):n.setEnd(r,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!o&&!t.state.selection.visible&&cc.ie&&cc.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}(t);else{var r,o,i=n.anchor,s=n.head;!Sp||n instanceof vl||(n.$from.parent.inlineContent||(r=kp(t,n.from)),n.empty||n.$from.parent.inlineContent||(o=kp(t,n.to))),t.docView.setSelection(i,s,t.root,e),Sp&&(r&&Op(r),o&&Op(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):i!=s&&(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(t){var e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.hideSelectionGuard);var n=t.root.getSelection(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==o||(e.removeEventListener("selectionchange",t.hideSelectionGuard),t.dom.classList.remove("ProseMirror-hideselection"))})}(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}sp.prototype.getPreMatch=function(t){return t>=this.preMatchOffset?this.preMatched[t-this.preMatchOffset]:null},sp.prototype.destroyBetween=function(t,e){if(t!=e){for(var n=t;n<e;n++)this.top.children[n].destroy();this.top.children.splice(t,e-t),this.changed=!0}},sp.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},sp.prototype.syncToMarks=function(t,e,n){for(var r=0,o=this.stack.length>>1,i=Math.min(o,t.length);r<i&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(t[r])&&!1!==t[r].type.spec.spanning;)r++;for(;r<o;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<t.length;){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(t[o])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var l=Jc.create(this.top,t[o],e,n);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,o++}},sp.prototype.findNodeMatch=function(t,e,n,r){var o=-1,i=r<0?void 0:this.getPreMatch(r),s=this.top.children;if(i&&i.matchesNode(t,e,n))o=s.indexOf(i);else for(var a=this.index,l=Math.min(s.length,a+5);a<l;a++){var c=s[a];if(c.matchesNode(t,e,n)&&this.preMatched.indexOf(c)<0){o=a;break}}return!(o<0||(this.destroyBetween(this.index,o),this.index++,0))},sp.prototype.updateNextNode=function(t,e,n,r,o){if(this.index==this.top.children.length)return!1;var i=this.top.children[this.index];if(i instanceof Kc){var s=this.preMatched.indexOf(i);if(s>-1&&s+this.preMatchOffset!=o)return!1;var a=i.dom;if((!this.lock||!(a==this.lock||1==a.nodeType&&a.contains(this.lock.parentNode))||t.isText&&i.node&&i.node.isText&&i.nodeDOM.nodeValue==t.text&&3!=i.dirty&&op(e,i.outerDeco))&&i.update(t,e,n,r))return i.dom!=a&&(this.changed=!0),this.index++,!0}return!1},sp.prototype.addNode=function(t,e,n,r,o){this.top.children.splice(this.index++,0,Kc.create(this.top,t,e,n,r,o)),this.changed=!0},sp.prototype.placeWidget=function(t,e,n){if(this.index<this.top.children.length&&this.top.children[this.index].matchesWidget(t))this.index++;else{var r=new qc(this.top,t,e,n);this.top.children.splice(this.index++,0,r),this.changed=!0}},sp.prototype.addTextblockHacks=function(){for(var t=this.top.children[this.index-1];t instanceof Jc;)t=t.children[t.children.length-1];if(!t||!(t instanceof Gc)||/\n$/.test(t.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var e=document.createElement("br");this.top.children.splice(this.index++,0,new Xc(this.top,Hc,e,null)),this.changed=!0}};var Sp=cc.safari||cc.chrome&&cc.chrome_version<63;function kp(t,e){var n=t.docView.domFromPos(e),r=n.node,o=n.offset,i=o<r.childNodes.length?r.childNodes[o]:null,s=o?r.childNodes[o-1]:null;if((!i||"false"==i.contentEditable)&&(cc.safari||!s||"false"==s.contentEditable)){if(i)return Cp(i);if(s)return Cp(s)}}function Cp(t){return t.contentEditable="true",cc.safari&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function Op(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function Mp(t,e){if(e instanceof gl){var n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(Tp(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else Tp(t)}function Tp(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=null)}function _p(t,e,n,r){return t.someProp("createSelectionBetween",(function(r){return r(t,e,n)}))||vl.between(e,n,r)}function Ap(t){var e=t.root.getSelection();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(t){return!1}}function Np(t){var e=t.pmViewDesc;if(e)return e.parseRule();if("BR"==t.nodeName&&t.parentNode){if(cc.safari&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(t.parentNode.lastChild==t||cc.safari&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if("IMG"==t.nodeName&&t.getAttribute("mark-placeholder"))return{ignore:!0}}function Ep(t,e,n,r,o){if(e<0){var i=t.lastSelectionTime>Date.now()-50?t.lastSelectionOrigin:null,s=function(t,e){var n,r,o=t.root.getSelection(),i=t.state.doc,s=t.docView.nearestDesc(o.focusNode),a=s&&0==s.size,l=t.docView.posFromDOM(o.focusNode,o.focusOffset),c=i.resolve(l);if(kc(o)){for(n=c;s&&!s.node;)s=s.parent;if(s&&s.node.isAtom&&gl.isSelectable(s.node)&&s.parent&&(!s.node.isInline||!function(t,e){for(var n=t.focusNode,r=t.focusOffset,o=r;n;){if(n==e)return 0==r||o==xc(e);o=(r=vc(n))+1,n=n.parentNode}}(o,s.dom))){var p=s.posBefore;r=new gl(l==p?c:i.resolve(p))}}else n=i.resolve(t.docView.posFromDOM(o.anchorNode,o.anchorOffset));return r||(r=_p(t,n,c,"pointer"==e||t.state.selection.head<c.pos&&!a?1:-1)),r}(t,i);if(!t.state.selection.eq(s)){var a=t.state.tr.setSelection(s);"pointer"==i?a.setMeta("pointer",!0):"key"==i&&a.scrollIntoView(),t.dispatch(a)}}else{var l=t.state.doc.resolve(e),c=l.sharedDepth(n);e=l.before(c+1),n=t.state.doc.resolve(n).after(c+1);var p,u,d=t.state.selection,h=function(t,e,n){var r=t.docView.parseRange(e,n),o=r.node,i=r.fromOffset,s=r.toOffset,a=r.from,l=r.to,c=t.root.getSelection(),p=null,u=c.anchorNode;if(u&&t.dom.contains(1==u.nodeType?u:u.parentNode)&&(p=[{node:u,offset:c.anchorOffset}],kc(c)||p.push({node:c.focusNode,offset:c.focusOffset})),cc.chrome&&8===t.lastKeyCode)for(var d=s;d>i;d--){var h=o.childNodes[d-1],f=h.pmViewDesc;if("BR"==h.nodeType&&!f){s=d;break}if(!f||f.size)break}var v=t.state.doc,m=t.someProp("domParser")||ka.fromSchema(t.state.schema),g=v.resolve(a),y=null,b=m.parse(o,{topNode:g.parent,topMatch:g.parent.contentMatchAt(g.index()),topOpen:!0,from:i,to:s,preserveWhitespace:!g.parent.type.spec.code||"full",editableContent:!0,findPositions:p,ruleFromNode:Np,context:g});if(p&&null!=p[0].pos){var w=p[0].pos,x=p[1]&&p[1].pos;null==x&&(x=w),y={anchor:w+a,head:x+a}}return{doc:b,sel:y,from:a,to:l}}(t,e,n),f=t.state.doc,v=f.slice(h.from,h.to);8===t.lastKeyCode&&Date.now()-100<t.lastKeyCodeTime?(p=t.state.selection.to,u="end"):(p=t.state.selection.from,u="start"),t.lastKeyCode=null;var m=function(t,e,n,r,o){var i=t.findDiffStart(e,n);if(null==i)return null;var s=t.findDiffEnd(e,n+t.size,n+e.size),a=s.a,l=s.b;"end"==o&&(r-=a+Math.max(0,i-Math.min(a,l))-i);if(a<i&&t.size<e.size)l=(i-=r<=i&&r>=a?i-r:0)+(l-a),a=i;else if(l<i){a=(i-=r<=i&&r>=l?i-r:0)+(a-l),l=i}return{start:i,endA:a,endB:l}}(v.content,h.doc.content,h.from,p,u);if(!m){if(!(r&&d instanceof vl&&!d.empty&&d.$head.sameParent(d.$anchor))||t.composing||h.sel&&h.sel.anchor!=h.sel.head){if(h.sel){var g=Rp(t,t.state.doc,h.sel);g&&!g.eq(t.state.selection)&&t.dispatch(t.state.tr.setSelection(g))}return}m={start:d.from,endA:d.to,endB:d.to}}t.domChangeCount++,t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof vl&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),cc.ie&&cc.ie_version<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>h.from&&" "==h.doc.textBetween(m.start-h.from-1,m.start-h.from+1)&&(m.start--,m.endA--,m.endB--);var y,b=h.doc.resolveNoCache(m.start-h.from),w=h.doc.resolveNoCache(m.endB-h.from);if((cc.ios&&t.lastIOSEnter>Date.now()-100&&(!b.sameParent(w)||o.some((function(t){return"DIV"==t.nodeName})))||!b.sameParent(w)&&b.pos<h.doc.content.size&&(y=dl.findFrom(h.doc.resolve(b.pos+1),1,!0))&&y.head==w.pos)&&t.someProp("handleKeyDown",(function(e){return e(t,Cc(13,"Enter"))})))t.lastIOSEnter=0;else if(t.state.selection.anchor>m.start&&function(t,e,n,r,o){if(!r.parent.isTextblock||n-e<=o.pos-r.pos||Dp(r,!0,!1)<o.pos)return!1;var i=t.resolve(e);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var s=t.resolve(Dp(i,!0,!0));return!(!s.parent.isTextblock||s.pos>n||Dp(s,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(s.parent.content)}(f,m.start,m.endA,b,w)&&t.someProp("handleKeyDown",(function(e){return e(t,Cc(8,"Backspace"))})))cc.android&&cc.chrome&&t.domObserver.suppressSelectionUpdates();else{var x,S,k,C,O=m.start,M=m.endA;if(b.sameParent(w)&&b.parent.inlineContent)if(b.pos==w.pos)cc.ie&&cc.ie_version<=11&&0==b.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout((function(){return xp(t)}),20)),x=t.state.tr.delete(O,M),S=f.resolve(m.start).marksAcross(f.resolve(m.endA));else if(m.endA==m.endB&&(C=f.resolve(m.start))&&(k=function(t,e){for(var n,r,o,i=t.firstChild.marks,s=e.firstChild.marks,a=i,l=s,c=0;c<s.length;c++)a=s[c].removeFromSet(a);for(var p=0;p<i.length;p++)l=i[p].removeFromSet(l);if(1==a.length&&0==l.length)r=a[0],n="add",o=function(t){return t.mark(r.addToSet(t.marks))};else{if(0!=a.length||1!=l.length)return null;r=l[0],n="remove",o=function(t){return t.mark(r.removeFromSet(t.marks))}}for(var u=[],d=0;d<e.childCount;d++)u.push(o(e.child(d)));if(As.from(u).eq(t))return{mark:r,type:n}}(b.parent.content.cut(b.parentOffset,w.parentOffset),C.parent.content.cut(C.parentOffset,m.endA-C.start()))))x=t.state.tr,"add"==k.type?x.addMark(O,M,k.mark):x.removeMark(O,M,k.mark);else if(b.parent.child(b.index()).isText&&b.index()==w.index()-(w.textOffset?0:1)){var T=b.parent.textBetween(b.parentOffset,w.parentOffset);if(t.someProp("handleTextInput",(function(e){return e(t,O,M,T)})))return;x=t.state.tr.insertText(T,O,M)}if(x||(x=t.state.tr.replace(O,M,h.doc.slice(m.start-h.from,m.endB-h.from))),h.sel){var _=Rp(t,x.doc,h.sel);_&&!(cc.chrome&&cc.android&&t.composing&&_.empty&&_.head==O||cc.ie&&_.empty&&_.head==O)&&x.setSelection(_)}S&&x.ensureMarks(S),t.dispatch(x.scrollIntoView())}}}function Rp(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:_p(t,e.resolve(n.anchor),e.resolve(n.head))}function Dp(t,e,n){for(var r=t.depth,o=e?t.end():t.pos;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n)for(var i=t.node(r).maybeChild(t.indexAfter(r));i&&!i.isLeaf;)i=i.firstChild,o++;return o}function Ip(t,e){for(var n=[],r=e.content,o=e.openStart,i=e.openEnd;o>1&&i>1&&1==r.childCount&&1==r.firstChild.childCount;){o--,i--;var s=r.firstChild;n.push(s.type.name,s.type.hasRequiredAttrs()?s.attrs:null),r=s.content}var a=t.someProp("clipboardSerializer")||Da.fromSchema(t.state.schema),l=jp(),c=l.createElement("div");c.appendChild(a.serializeFragment(r,{document:l}));for(var p,u=c.firstChild;u&&1==u.nodeType&&(p=zp[u.nodeName.toLowerCase()]);){for(var d=p.length-1;d>=0;d--){for(var h=l.createElement(p[d]);c.firstChild;)h.appendChild(c.firstChild);c.appendChild(h)}u=c.firstChild}return u&&1==u.nodeType&&u.setAttribute("data-pm-slice",o+" "+i+" "+JSON.stringify(n)),{dom:c,text:t.someProp("clipboardTextSerializer",(function(t){return t(e)}))||e.content.textBetween(0,e.content.size,"\n\n")}}function Pp(t,e,n,r,o){var i,s,a=o.parent.type.spec.code;if(!n&&!e)return null;var l=e&&(r||a||!n);if(l){if(t.someProp("transformPastedText",(function(t){e=t(e)})),a)return new $s(As.from(t.state.schema.text(e)),0,0);var c=t.someProp("clipboardTextParser",(function(t){return t(e,o)}));c?s=c:(i=document.createElement("div"),e.trim().split(/(?:\r\n?|\n)+/).forEach((function(t){i.appendChild(document.createElement("p")).textContent=t})))}else t.someProp("transformPastedHTML",(function(t){n=t(n)})),i=function(t){var e=/(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));var n,r=jp().createElement("div"),o=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(t),i=0;(n=o&&zp[o[1].toLowerCase()])&&(t=n.map((function(t){return"<"+t+">"})).join("")+t+n.map((function(t){return"</"+t+">"})).reverse().join(""),i=n.length),r.innerHTML=t;for(var s=0;s<i;s++)r=r.firstChild;return r}(n);var p=i&&i.querySelector("[data-pm-slice]"),u=p&&/^(\d+) (\d+) (.*)/.exec(p.getAttribute("data-pm-slice"));if(!s){var d=t.someProp("clipboardParser")||t.someProp("domParser")||ka.fromSchema(t.state.schema);s=d.parseSlice(i,{preserveWhitespace:!(!l&&!u),context:o})}return s=u?function(t,e){if(!t.size)return t;var n,r=t.content.firstChild.type.schema;try{n=JSON.parse(e)}catch(e){return t}for(var o=t.content,i=t.openStart,s=t.openEnd,a=n.length-2;a>=0;a-=2){var l=r.nodes[n[a]];if(!l||l.hasRequiredAttrs())break;o=As.from(l.create(n[a+1],o)),i++,s++}return new $s(o,i,s)}(function(t,e,n){return e<t.openStart&&(t=new $s(Lp(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new $s(Lp(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}(s,+u[1],+u[2]),u[3]):$s.maxOpen(function(t,e){if(t.childCount<2)return t;for(var n=function(n){var r=e.node(n).contentMatchAt(e.index(n)),o=void 0,i=[];if(t.forEach((function(t){if(i){var e,n=r.findWrapping(t.type);if(!n)return i=null;if(e=i.length&&o.length&&function t(e,n,r,o,i){if(i<e.length&&i<n.length&&e[i]==n[i]){var s=t(e,n,r,o.lastChild,i+1);if(s)return o.copy(o.content.replaceChild(o.childCount-1,s));if(o.contentMatchAt(o.childCount).matchType(i==e.length-1?r.type:e[i+1]))return o.copy(o.content.append(As.from($p(r,e,i+1))))}}(n,o,t,i[i.length-1],0))i[i.length-1]=e;else{i.length&&(i[i.length-1]=function t(e,n){if(0==n)return e;var r=e.content.replaceChild(e.childCount-1,t(e.lastChild,n-1)),o=e.contentMatchAt(e.childCount).fillBefore(As.empty,!0);return e.copy(r.append(o))}(i[i.length-1],o.length));var s=$p(t,n);i.push(s),r=r.matchType(s.type,s.attrs),o=n}}})),i)return{v:As.from(i)}},r=e.depth;r>=0;r--){var o=n(r);if(o)return o.v}return t}(s.content,o),!1),t.someProp("transformPasted",(function(t){s=t(s)})),s}function $p(t,e,n){void 0===n&&(n=0);for(var r=e.length-1;r>=n;r--)t=e[r].create(null,As.from(t));return t}function Lp(t,e,n,r,o,i){var s=e<0?t.firstChild:t.lastChild,a=s.content;return o<r-1&&(a=Lp(a,e,n,r,o+1,i)),o>=n&&(a=e<0?s.contentMatchAt(0).fillBefore(a,t.childCount>1||i<=o).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(As.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(a))}var zp={thead:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Bp=null;function jp(){return Bp||(Bp=document.implementation.createHTMLDocument("title"))}var Vp={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Fp=cc.ie&&cc.ie_version<=11,Hp=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};Hp.prototype.set=function(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset},Hp.prototype.eq=function(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset};var qp=function(t,e){var n=this;this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=!1,this.observer=window.MutationObserver&&new window.MutationObserver((function(t){for(var e=0;e<t.length;e++)n.queue.push(t[e]);cc.ie&&cc.ie_version<=11&&t.some((function(t){return"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length}))?n.flushSoon():n.flush()})),this.currentSelection=new Hp,Fp&&(this.onCharData=function(t){n.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};qp.prototype.flushSoon=function(){var t=this;this.flushingSoon||(this.flushingSoon=!0,window.setTimeout((function(){t.flushingSoon=!1,t.flush()}),20))},qp.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,Vp),Fp&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},qp.prototype.stop=function(){var t=this;if(this.observer){var e=this.observer.takeRecords();if(e.length){for(var n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout((function(){return t.flush()}),20)}this.observer.disconnect()}Fp&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},qp.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},qp.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},qp.prototype.suppressSelectionUpdates=function(){var t=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return t.suppressingSelectionUpdates=!1}),50)},qp.prototype.onSelectionChange=function(){if((!(t=this.view).editable||t.root.activeElement==t.dom)&&Ap(t)){var t;if(this.suppressingSelectionUpdates)return xp(this.view);if(cc.ie&&cc.ie_version<=11&&!this.view.state.selection.empty){var e=this.view.root.getSelection();if(e.focusNode&&yc(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}},qp.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},qp.prototype.ignoreSelectionChange=function(t){if(0==t.rangeCount)return!0;var e=t.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(e);return n&&n.ignoreMutation({type:"selection",target:3==e.nodeType?e.parentNode:e})},qp.prototype.flush=function(){if(this.view.docView&&!this.flushingSoon){var t=this.observer?this.observer.takeRecords():[];this.queue.length&&(t=this.queue.concat(t),this.queue.length=0);var e=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(e)&&Ap(this.view)&&!this.ignoreSelectionChange(e),r=-1,o=-1,i=!1,s=[];if(this.view.editable)for(var a=0;a<t.length;a++){var l=this.registerMutation(t[a],s);l&&(r=r<0?l.from:Math.min(l.from,r),o=o<0?l.to:Math.max(l.to,o),l.typeOver&&!this.view.composing&&(i=!0))}if(cc.gecko&&s.length>1){var c=s.filter((function(t){return"BR"==t.nodeName}));if(2==c.length){var p=c[0],u=c[1];p.parentNode&&p.parentNode.parentNode==u.parentNode?u.remove():p.remove()}}(r>-1||n)&&(r>-1&&(this.view.docView.markDirty(r,o),function(t){Wp||(Wp=!0,"normal"==getComputedStyle(t.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))}(this.view)),this.handleDOMChange(r,o,i,s),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(e)||xp(this.view))}},qp.prototype.registerMutation=function(t,e){if(e.indexOf(t.target)>-1)return null;var n=this.view.docView.nearestDesc(t.target);if("attributes"==t.type&&(n==this.view.docView||"contenteditable"==t.attributeName||"style"==t.attributeName&&!t.oldValue&&!t.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(t))return null;if("childList"==t.type){var r=t.previousSibling,o=t.nextSibling;if(cc.ie&&cc.ie_version<=11&&t.addedNodes.length)for(var i=0;i<t.addedNodes.length;i++){var s=t.addedNodes[i],a=s.previousSibling,l=s.nextSibling;(!a||Array.prototype.indexOf.call(t.addedNodes,a)<0)&&(r=a),(!l||Array.prototype.indexOf.call(t.addedNodes,l)<0)&&(o=l)}for(var c=r&&r.parentNode==t.target?vc(r)+1:0,p=n.localPosFromDOM(t.target,c,-1),u=o&&o.parentNode==t.target?vc(o):t.target.childNodes.length,d=0;d<t.addedNodes.length;d++)e.push(t.addedNodes[d]);return{from:p,to:n.localPosFromDOM(t.target,u,1)}}return"attributes"==t.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}};var Wp=!1,Jp={},Kp={};function Up(t,e){t.lastSelectionOrigin=e,t.lastSelectionTime=Date.now()}function Gp(t){t.someProp("handleDOMEvents",(function(e){for(var n in e)t.eventHandlers[n]||t.dom.addEventListener(n,t.eventHandlers[n]=function(e){return Xp(t,e)})}))}function Xp(t,e){return t.someProp("handleDOMEvents",(function(n){var r=n[e.type];return!!r&&(r(t,e)||e.defaultPrevented)}))}function Yp(t){return{left:t.clientX,top:t.clientY}}function Zp(t,e,n,r,o){if(-1==r)return!1;for(var i=t.state.doc.resolve(r),s=function(r){if(t.someProp(e,(function(e){return r>i.depth?e(t,n,i.nodeAfter,i.before(r),o,!0):e(t,n,i.node(r),i.before(r),o,!1)})))return{v:!0}},a=i.depth+1;a>0;a--){var l=s(a);if(l)return l.v}return!1}function Qp(t,e,n){t.focused||t.focus();var r=t.state.tr.setSelection(e);"pointer"==n&&r.setMeta("pointer",!0),t.dispatch(r)}function tu(t,e,n,r){return Zp(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",(function(n){return n(t,e,r)}))||function(t,e){var n=t.state.doc;if(-1==e)return!!n.inlineContent&&(Qp(t,vl.create(n,0,n.content.size),"pointer"),!0);for(var r=n.resolve(e),o=r.depth+1;o>0;o--){var i=o>r.depth?r.nodeAfter:r.node(o),s=r.before(o);if(i.inlineContent)Qp(t,vl.create(n,s+1,s+1+i.content.size),"pointer");else{if(!gl.isSelectable(i))continue;Qp(t,gl.create(n,s),"pointer")}return!0}}(t,n)}function eu(t){return au(t)}Kp.keydown=function(t,e){t.shiftKey=16==e.keyCode||e.shiftKey,ou(t,e)||(t.lastKeyCode=e.keyCode,t.lastKeyCodeTime=Date.now(),!cc.ios||13!=e.keyCode||e.ctrlKey||e.altKey||e.metaKey?t.someProp("handleKeyDown",(function(n){return n(t,e)}))||function(t,e){var n=e.keyCode,r=function(t){var e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}(e);return 8==n||cc.mac&&72==n&&"c"==r?bp(t,-1)||fp(t):46==n||cc.mac&&68==n&&"c"==r?bp(t,1)||vp(t):13==n&&!cc.ios||27==n||(37==n?up(t,-1,r)||fp(t):39==n?up(t,1,r)||vp(t):38==n?yp(t,-1,r)||fp(t):40==n?function(t){if(cc.chrome&&!(t.state.selection.$head.parentOffset>0)){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var o=n.firstChild;wp(t,o,!0),setTimeout((function(){return wp(t,o,!1)}),20)}}}(t)||yp(t,1,r)||vp(t):r==(cc.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}(t,e)?e.preventDefault():Up(t,"key"):t.lastIOSEnter=Date.now())},Kp.keyup=function(t,e){16==e.keyCode&&(t.shiftKey=!1)},Kp.keypress=function(t,e){if(!(ou(t,e)||!e.charCode||e.ctrlKey&&!e.altKey||cc.mac&&e.metaKey))if(t.someProp("handleKeyPress",(function(n){return n(t,e)})))e.preventDefault();else{var n=t.state.selection;if(!(n instanceof vl&&n.$from.sameParent(n.$to))){var r=String.fromCharCode(e.charCode);t.someProp("handleTextInput",(function(e){return e(t,n.$from.pos,n.$to.pos,r)}))||t.dispatch(t.state.tr.insertText(r).scrollIntoView()),e.preventDefault()}}};var nu=cc.mac?"metaKey":"ctrlKey";Jp.mousedown=function(t,e){t.shiftKey=e.shiftKey;var n=eu(t),r=Date.now(),o="singleClick";r-t.lastClick.time<500&&function(t,e){var n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}(e,t.lastClick)&&!e[nu]&&("singleClick"==t.lastClick.type?o="doubleClick":"doubleClick"==t.lastClick.type&&(o="tripleClick")),t.lastClick={time:r,x:e.clientX,y:e.clientY,type:o};var i=t.posAtCoords(Yp(e));i&&("singleClick"==o?t.mouseDown=new ru(t,i,e,n):("doubleClick"==o?function(t,e,n,r){return Zp(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",(function(n){return n(t,e,r)}))}:tu)(t,i.pos,i.inside,e)?e.preventDefault():Up(t,"pointer"))};var ru=function(t,e,n,r){var o,i,s=this;if(this.view=t,this.startDoc=t.state.doc,this.pos=e,this.event=n,this.flushed=r,this.selectNode=n[nu],this.allowDefault=n.shiftKey,e.inside>-1)o=t.state.doc.nodeAt(e.inside),i=e.inside;else{var a=t.state.doc.resolve(e.pos);o=a.parent,i=a.depth?a.before():0}this.mightDrag=null;var l=r?null:n.target,c=l?t.docView.nearestDesc(l,!0):null;this.target=c?c.dom:null,(o.type.spec.draggable&&!1!==o.type.spec.selectable||t.state.selection instanceof gl&&i==t.state.selection.from)&&(this.mightDrag={node:o,pos:i,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&cc.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){return s.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),Up(t,"pointer")};function ou(t,e){return!!t.composing||!!(cc.safari&&Math.abs(e.timeStamp-t.compositionEndedAt)<500)&&(t.compositionEndedAt=-2e8,!0)}ru.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!1),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},ru.prototype.up=function(t){if(this.done(),this.view.dom.contains(3==t.target.nodeType?t.target.parentNode:t.target)){var e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(Yp(t))),this.allowDefault||!e?Up(this.view,"pointer"):function(t,e,n,r,o){return Zp(t,"handleClickOn",e,n,r)||t.someProp("handleClick",(function(n){return n(t,e,r)}))||(o?function(t,e){if(-1==e)return!1;var n,r,o=t.state.selection;o instanceof gl&&(n=o.node);for(var i=t.state.doc.resolve(e),s=i.depth+1;s>0;s--){var a=s>i.depth?i.nodeAfter:i.node(s);if(gl.isSelectable(a)){r=n&&o.$from.depth>0&&s>=o.$from.depth&&i.before(o.$from.depth+1)==o.$from.pos?i.before(o.$from.depth):i.before(s);break}}return null!=r&&(Qp(t,gl.create(t.state.doc,r),"pointer"),!0)}(t,n):function(t,e){if(-1==e)return!1;var n=t.state.doc.resolve(e),r=n.nodeAfter;return!!(r&&r.isAtom&&gl.isSelectable(r))&&(Qp(t,new gl(n),"pointer"),!0)}(t,n))}(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():!this.flushed&&(!cc.chrome||this.view.state.selection instanceof vl||e.pos!=this.view.state.selection.from&&e.pos!=this.view.state.selection.to)?Up(this.view,"pointer"):(Qp(this.view,dl.near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault())}},ru.prototype.move=function(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0),Up(this.view,"pointer")},Jp.touchdown=function(t){eu(t),Up(t,"pointer")},Jp.contextmenu=function(t){return eu(t)};var iu=cc.android?5e3:-1;function su(t,e){clearTimeout(t.composingTimeout),e>-1&&(t.composingTimeout=setTimeout((function(){return au(t)}),e))}function au(t,e){for(t.composing=!1;t.compositionNodes.length>0;)t.compositionNodes.pop().markParentsDirty();return!(!e&&!t.docView.dirty||(t.updateState(t.state),0))}Kp.compositionstart=Kp.compositionupdate=function(t){if(!t.composing){t.domObserver.flush();var e=t.state,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(t){return!1===t.type.spec.inclusive}))))t.markCursor=t.state.storedMarks||n.marks(),au(t,!0),t.markCursor=null;else if(au(t),cc.gecko&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=t.root.getSelection(),o=r.focusNode,i=r.focusOffset;o&&1==o.nodeType&&0!=i;){var s=i<0?o.lastChild:o.childNodes[i-1];if(!s)break;if(3==s.nodeType){r.collapse(s,s.nodeValue.length);break}o=s,i=-1}t.composing=!0}su(t,iu)},Kp.compositionend=function(t,e){t.composing&&(t.composing=!1,t.compositionEndedAt=e.timeStamp,su(t,20))};var lu=cc.ie&&cc.ie_version<15||cc.ios&&cc.webkit_version<604;function cu(t,e,n,r){var o=Pp(t,e,n,t.shiftKey,t.state.selection.$from);if(!t.someProp("handlePaste",(function(e){return e(t,r,o||$s.empty)}))&&o){var i=function(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}(o),s=i?t.state.tr.replaceSelectionWith(i,t.shiftKey):t.state.tr.replaceSelection(o);t.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste"))}}Jp.copy=Kp.cut=function(t,e){var n=t.state.selection,r="cut"==e.type;if(!n.empty){var o=lu?null:e.clipboardData,i=Ip(t,n.content()),s=i.dom,a=i.text;o?(e.preventDefault(),o.clearData(),o.setData("text/html",s.innerHTML),o.setData("text/plain",a)):function(t,e){var n=t.dom.ownerDocument,r=n.body.appendChild(n.createElement("div"));r.appendChild(e),r.style.cssText="position: fixed; left: -10000px; top: 10px";var o=getSelection(),i=n.createRange();i.selectNodeContents(e),t.dom.blur(),o.removeAllRanges(),o.addRange(i),setTimeout((function(){n.body.removeChild(r),t.focus()}),50)}(t,s),r&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},Kp.paste=function(t,e){var n=lu?null:e.clipboardData,r=n&&n.getData("text/html"),o=n&&n.getData("text/plain");n&&(r||o||n.files.length)?(cu(t,o,r,e),e.preventDefault()):function(t,e){var n=t.dom.ownerDocument,r=t.shiftKey||t.state.selection.$from.parent.type.spec.code,o=n.body.appendChild(n.createElement(r?"textarea":"div"));r||(o.contentEditable="true"),o.style.cssText="position: fixed; left: -10000px; top: 10px",o.focus(),setTimeout((function(){t.focus(),n.body.removeChild(o),r?cu(t,o.value,null,e):cu(t,o.textContent,o.innerHTML,e)}),50)}(t,e)};var pu=function(t,e){this.slice=t,this.move=e},uu=cc.mac?"altKey":"ctrlKey";for(var du in Jp.dragstart=function(t,e){var n=t.mouseDown;if(n&&n.done(),e.dataTransfer){var r=t.state.selection,o=r.empty?null:t.posAtCoords(Yp(e));if(o&&o.pos>=r.from&&o.pos<=(r instanceof gl?r.to-1:r.to));else if(n&&n.mightDrag)t.dispatch(t.state.tr.setSelection(gl.create(t.state.doc,n.mightDrag.pos)));else if(e.target&&1==e.target.nodeType){var i=t.docView.nearestDesc(e.target,!0);if(!i||!i.node.type.spec.draggable||i==t.docView)return;t.dispatch(t.state.tr.setSelection(gl.create(t.state.doc,i.posBefore)))}var s=t.state.selection.content(),a=Ip(t,s),l=a.dom,c=a.text;e.dataTransfer.clearData(),e.dataTransfer.setData(lu?"Text":"text/html",l.innerHTML),lu||e.dataTransfer.setData("text/plain",c),t.dragging=new pu(s,!e[uu])}},Jp.dragend=function(t){window.setTimeout((function(){return t.dragging=null}),50)},Kp.dragover=Kp.dragenter=function(t,e){return e.preventDefault()},Kp.drop=function(t,e){var n=t.dragging;if(t.dragging=null,e.dataTransfer){var r=t.posAtCoords(Yp(e));if(r){var o=t.state.doc.resolve(r.pos);if(o){var i=n&&n.slice||Pp(t,e.dataTransfer.getData(lu?"Text":"text/plain"),lu?null:e.dataTransfer.getData("text/html"),!1,o);if(i&&(e.preventDefault(),!t.someProp("handleDrop",(function(r){return r(t,e,i,n&&n.move)})))){var s=i?function(t,e,n){var r=t.resolve(e);if(!n.content.size)return e;for(var o=n.content,i=0;i<n.openStart;i++)o=o.firstChild.content;for(var s=1;s<=(0==n.openStart&&n.size?2:1);s++)for(var a=r.depth;a>=0;a--){var l=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,c=r.index(a)+(l>0?1:0);if(1==s?r.node(a).canReplace(c,c,o):r.node(a).contentMatchAt(c).findWrapping(o.firstChild.type))return 0==l?r.pos:l<0?r.before(a+1):r.after(a+1)}return null}(t.state.doc,o.pos,i):o.pos;null==s&&(s=o.pos);var a=t.state.tr;n&&n.move&&a.deleteSelection();var l=a.mapping.map(s),c=0==i.openStart&&0==i.openEnd&&1==i.content.childCount,p=a.doc;if(c?a.replaceRangeWith(l,l,i.content.firstChild):a.replaceRange(l,l,i),!a.doc.eq(p)){var u=a.doc.resolve(l);c&&gl.isSelectable(i.content.firstChild)&&u.nodeAfter&&u.nodeAfter.sameMarkup(i.content.firstChild)?a.setSelection(new gl(u)):a.setSelection(_p(t,u,a.doc.resolve(a.mapping.map(s)))),t.focus(),t.dispatch(a.setMeta("uiEvent","drop"))}}}}}},Jp.focus=function(t){t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0)},Jp.blur=function(t){t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),t.domObserver.currentSelection.set({}),t.focused=!1)},Jp.beforeinput=function(t,e){if(cc.chrome&&cc.android&&"deleteContentBackward"==e.inputType){var n=t.domChangeCount;setTimeout((function(){if(t.domChangeCount==n&&(t.dom.blur(),t.focus(),!t.someProp("handleKeyDown",(function(e){return e(t,Cc(8,"Backspace"))})))){var e=t.state.selection.$cursor;e&&e.pos>0&&t.dispatch(t.state.tr.delete(e.pos-1,e.pos).scrollIntoView())}}),50)}},Kp)Jp[du]=Kp[du];function hu(t,e){if(t==e)return!0;for(var n in t)if(t[n]!==e[n])return!1;for(var r in e)if(!(r in t))return!1;return!0}var fu=function(t,e){this.spec=e||wu,this.side=this.spec.side||0,this.toDOM=t};fu.prototype.map=function(t,e,n,r){var o=t.mapResult(e.from+r,this.side<0?-1:1),i=o.pos;return o.deleted?null:new gu(i-n,i-n,this)},fu.prototype.valid=function(){return!0},fu.prototype.eq=function(t){return this==t||t instanceof fu&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&hu(this.spec,t.spec))};var vu=function(t,e){this.spec=e||wu,this.attrs=t};vu.prototype.map=function(t,e,n,r){var o=t.map(e.from+r,this.spec.inclusiveStart?-1:1)-n,i=t.map(e.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new gu(o,i,this)},vu.prototype.valid=function(t,e){return e.from<e.to},vu.prototype.eq=function(t){return this==t||t instanceof vu&&hu(this.attrs,t.attrs)&&hu(this.spec,t.spec)},vu.is=function(t){return t.type instanceof vu};var mu=function(t,e){this.spec=e||wu,this.attrs=t};mu.prototype.map=function(t,e,n,r){var o=t.mapResult(e.from+r,1);if(o.deleted)return null;var i=t.mapResult(e.to+r,-1);return i.deleted||i.pos<=o.pos?null:new gu(o.pos-n,i.pos-n,this)},mu.prototype.valid=function(t,e){var n=t.content.findIndex(e.from),r=n.index,o=n.offset;return o==e.from&&o+t.child(r).nodeSize==e.to},mu.prototype.eq=function(t){return this==t||t instanceof mu&&hu(this.attrs,t.attrs)&&hu(this.spec,t.spec)};var gu=function(t,e,n){this.from=t,this.to=e,this.type=n},yu={spec:{configurable:!0}};gu.prototype.copy=function(t,e){return new gu(t,e,this.type)},gu.prototype.eq=function(t){return this.type.eq(t.type)&&this.from==t.from&&this.to==t.to},gu.prototype.map=function(t,e,n){return this.type.map(t,this,e,n)},gu.widget=function(t,e,n){return new gu(t,t,new fu(e,n))},gu.inline=function(t,e,n,r){return new gu(t,e,new vu(n,r))},gu.node=function(t,e,n,r){return new gu(t,e,new mu(n,r))},yu.spec.get=function(){return this.type.spec},Object.defineProperties(gu.prototype,yu);var bu=[],wu={},xu=function(t,e){this.local=t&&t.length?t:bu,this.children=e&&e.length?e:bu};xu.create=function(t,e){return e.length?Tu(e,t,0,wu):Su},xu.prototype.find=function(t,e,n){var r=[];return this.findInner(null==t?0:t,null==e?1e9:e,r,0,n),r},xu.prototype.findInner=function(t,e,n,r,o){for(var i=0;i<this.local.length;i++){var s=this.local[i];s.from<=e&&s.to>=t&&(!o||o(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<e&&this.children[a+1]>t){var l=this.children[a]+1;this.children[a+2].findInner(t-l,e-l,n,r+l,o)}},xu.prototype.map=function(t,e,n){return this==Su||0==t.maps.length?this:this.mapInner(t,e,0,0,n||wu)},xu.prototype.mapInner=function(t,e,n,r,o){for(var i,s=0;s<this.local.length;s++){var a=this.local[s].map(t,n,r);a&&a.type.valid(e,a)?(i||(i=[])).push(a):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?function(t,e,n,r,o,i,s){for(var a=t.slice(),l=function(t,e,n,r){for(var s=0;s<a.length;s+=3){var l=a[s+1],c=void 0;-1==l||t>l+i||(e>=a[s]+i?a[s+1]=-1:(c=r-n-(e-t)+(i-o))&&(a[s]+=c,a[s+1]+=c))}},c=0;c<n.maps.length;c++)n.maps[c].forEach(l);for(var p=!1,u=0;u<a.length;u+=3)if(-1==a[u+1]){var d=n.map(a[u]+i),h=d-o;if(h<0||h>=r.content.size){p=!0;continue}var f=n.map(t[u+1]+i,-1)-o,v=r.content.findIndex(h),m=v.index,g=v.offset,y=r.maybeChild(m);if(y&&g==h&&g+y.nodeSize==f){var b=a[u+2].mapInner(n,y,d+1,a[u]+i+1,s);b!=Su?(a[u]=h,a[u+1]=f,a[u+2]=b):(a[u+1]=-2,p=!0)}else p=!0}if(p){var w=Tu(function(t,e,n,r,o,i,s){function a(t,e){for(var i=0;i<t.local.length;i++){var l=t.local[i].map(r,o,e);l?n.push(l):s.onRemove&&s.onRemove(t.local[i].spec)}for(var c=0;c<t.children.length;c+=3)a(t.children[c+2],t.children[c]+e+1)}for(var l=0;l<t.length;l+=3)-1==t[l+1]&&a(t[l+2],e[l]+i+1);return n}(a,t,e||[],n,o,i,s),r,0,s);e=w.local;for(var x=0;x<a.length;x+=3)a[x+1]<0&&(a.splice(x,3),x-=3);for(var S=0,k=0;S<w.children.length;S+=3){for(var C=w.children[S];k<a.length&&a[k]<C;)k+=3;a.splice(k,0,w.children[S],w.children[S+1],w.children[S+2])}}return new xu(e&&e.sort(_u),a)}(this.children,i,t,e,n,r,o):i?new xu(i.sort(_u)):Su},xu.prototype.add=function(t,e){return e.length?this==Su?xu.create(t,e):this.addInner(t,e,0):this},xu.prototype.addInner=function(t,e,n){var r,o=this,i=0;t.forEach((function(t,s){var a,l=s+n;if(a=Ou(e,t,l)){for(r||(r=o.children.slice());i<r.length&&r[i]<s;)i+=3;r[i]==s?r[i+2]=r[i+2].addInner(t,a,l+1):r.splice(i,0,s,s+t.nodeSize,Tu(a,t,l+1,wu)),i+=3}}));var s=Cu(i?Mu(e):e,-n);return new xu(s.length?this.local.concat(s).sort(_u):this.local,r||this.children)},xu.prototype.remove=function(t){return 0==t.length||this==Su?this:this.removeInner(t,0)},xu.prototype.removeInner=function(t,e){for(var n=this.children,r=this.local,o=0;o<n.length;o+=3){for(var i=void 0,s=n[o]+e,a=n[o+1]+e,l=0,c=void 0;l<t.length;l++)(c=t[l])&&c.from>s&&c.to<a&&(t[l]=null,(i||(i=[])).push(c));if(i){n==this.children&&(n=this.children.slice());var p=n[o+2].removeInner(i,s+1);p!=Su?n[o+2]=p:(n.splice(o,3),o-=3)}}if(r.length)for(var u=0,d=void 0;u<t.length;u++)if(d=t[u])for(var h=0;h<r.length;h++)r[h].type.eq(d.type)&&(r==this.local&&(r=this.local.slice()),r.splice(h--,1));return n==this.children&&r==this.local?this:r.length||n.length?new xu(r,n):Su},xu.prototype.forChild=function(t,e){if(this==Su)return this;if(e.isLeaf)return xu.empty;for(var n,r,o=0;o<this.children.length;o+=3)if(this.children[o]>=t){this.children[o]==t&&(n=this.children[o+2]);break}for(var i=t+1,s=i+e.content.size,a=0;a<this.local.length;a++){var l=this.local[a];if(l.from<s&&l.to>i&&l.type instanceof vu){var c=Math.max(i,l.from)-i,p=Math.min(s,l.to)-i;c<p&&(r||(r=[])).push(l.copy(c,p))}}if(r){var u=new xu(r.sort(_u));return n?new ku([u,n]):u}return n||Su},xu.prototype.eq=function(t){if(this==t)return!0;if(!(t instanceof xu)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(var e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0},xu.prototype.locals=function(t){return Au(this.localsInner(t))},xu.prototype.localsInner=function(t){if(this==Su)return bu;if(t.inlineContent||!this.local.some(vu.is))return this.local;for(var e=[],n=0;n<this.local.length;n++)this.local[n].type instanceof vu||e.push(this.local[n]);return e};var Su=new xu;xu.empty=Su,xu.removeOverlap=Au;var ku=function(t){this.members=t};function Cu(t,e){if(!e||!t.length)return t;for(var n=[],r=0;r<t.length;r++){var o=t[r];n.push(new gu(o.from+e,o.to+e,o.type))}return n}function Ou(t,e,n){if(e.isLeaf)return null;for(var r=n+e.nodeSize,o=null,i=0,s=void 0;i<t.length;i++)(s=t[i])&&s.from>n&&s.to<r&&((o||(o=[])).push(s),t[i]=null);return o}function Mu(t){for(var e=[],n=0;n<t.length;n++)null!=t[n]&&e.push(t[n]);return e}function Tu(t,e,n,r){var o=[],i=!1;e.forEach((function(e,s){var a=Ou(t,e,s+n);if(a){i=!0;var l=Tu(a,e,n+s+1,r);l!=Su&&o.push(s,s+e.nodeSize,l)}}));for(var s=Cu(i?Mu(t):t,-n).sort(_u),a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new xu(s,o):Su}function _u(t,e){return t.from-e.from||t.to-e.to}function Au(t){for(var e=t,n=0;n<e.length-1;n++){var r=e[n];if(r.from!=r.to)for(var o=n+1;o<e.length;o++){var i=e[o];if(i.from!=r.from){i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),Nu(e,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(e==t&&(e=t.slice()),e[o]=i.copy(i.from,r.to),Nu(e,o+1,i.copy(r.to,i.to)))}}return e}function Nu(t,e,n){for(;e<t.length&&_u(n,t[e])>0;)e++;t.splice(e,0,n)}function Eu(t){var e=[];return t.someProp("decorations",(function(n){var r=n(t.state);r&&r!=Su&&e.push(r)})),t.cursorWrapper&&e.push(xu.create(t.state.doc,[t.cursorWrapper.deco])),ku.from(e)}ku.prototype.forChild=function(t,e){if(e.isLeaf)return xu.empty;for(var n=[],r=0;r<this.members.length;r++){var o=this.members[r].forChild(t,e);o!=Su&&(o instanceof ku?n=n.concat(o.members):n.push(o))}return ku.from(n)},ku.prototype.eq=function(t){if(!(t instanceof ku)||t.members.length!=this.members.length)return!1;for(var e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0},ku.prototype.locals=function(t){for(var e,n=!0,r=0;r<this.members.length;r++){var o=this.members[r].localsInner(t);if(o.length)if(e){n&&(e=e.slice(),n=!1);for(var i=0;i<o.length;i++)e.push(o[i])}else e=o}return e?Au(n?e:e.sort(_u)):bu},ku.from=function(t){switch(t.length){case 0:return Su;case 1:return t[0];default:return new ku(t)}};var Ru,Du,Iu=function(t,e){this._props=e,this.state=e.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):t.apply?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=zu(this),this.markCursor=null,this.cursorWrapper=null,Lu(this),this.nodeViews=Bu(this),this.docView=Uc(this.state.doc,$u(this),Eu(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(t){t.shiftKey=!1,t.mouseDown=null,t.lastKeyCode=null,t.lastKeyCodeTime=0,t.lastClick={time:0,x:0,y:0,type:""},t.lastSelectionOrigin=null,t.lastSelectionTime=0,t.lastIOSEnter=0,t.composing=!1,t.composingTimeout=null,t.compositionNodes=[],t.compositionEndedAt=-2e8,t.domObserver=new qp(t,(function(e,n,r,o){return Ep(t,e,n,r,o)})),t.domObserver.start(),t.domChangeCount=0,t.eventHandlers=Object.create(null);var e=function(e){var n=Jp[e];t.dom.addEventListener(e,t.eventHandlers[e]=function(e){!function(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(var n=e.target;n!=t.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}(t,e)||Xp(t,e)||!t.editable&&e.type in Kp||n(t,e)})};for(var n in Jp)e(n);cc.safari&&t.dom.addEventListener("input",(function(){return null})),Gp(t)}(this),this.pluginViews=[],this.updatePluginViews()},Pu={props:{configurable:!0},root:{configurable:!0}};function $u(t){var e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(t.state)),n)for(var r in n)"class"==r?e.class+=" "+n[r]:e[r]||"contenteditable"==r||"nodeName"==r||(e[r]=String(n[r]))})),[gu.node(0,t.state.doc.content.size,e)]}function Lu(t){var e=t.state.selection,n=e.$head,r=e.$anchor,o=e.visible;if(t.markCursor){var i=document.createElement("img");i.setAttribute("mark-placeholder","true"),t.cursorWrapper={dom:i,deco:gu.widget(n.pos,i,{raw:!0,marks:t.markCursor})}}else if(o||n.pos!=r.pos)t.cursorWrapper=null;else{var s;!t.cursorWrapper||t.cursorWrapper.dom.childNodes.length?((s=document.createElement("div")).style.position="absolute",s.style.left="-100000px"):t.cursorWrapper.deco.pos!=n.pos&&(s=t.cursorWrapper.dom),s&&(t.cursorWrapper={dom:s,deco:gu.widget(n.pos,s,{raw:!0})})}}function zu(t){return!t.someProp("editable",(function(e){return!1===e(t.state)}))}function Bu(t){var e={};return t.someProp("nodeViews",(function(t){for(var n in t)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n])})),e}if(Pu.props.get=function(){if(this._props.state!=this.state){var t=this._props;for(var e in this._props={},t)this._props[e]=t[e];this._props.state=this.state}return this._props},Iu.prototype.update=function(t){t.handleDOMEvents!=this._props.handleDOMEvents&&Gp(this),this._props=t,this.updateStateInner(t.state,!0)},Iu.prototype.setProps=function(t){var e={};for(var n in this._props)e[n]=this._props[n];for(var r in e.state=this.state,t)e[r]=t[r];this.update(e)},Iu.prototype.updateState=function(t){this.updateStateInner(t,this.state.plugins!=t.plugins)},Iu.prototype.updateStateInner=function(t,e){var n=this,r=this.state,o=!1;if(this.state=t,e){var i=Bu(this);(function(t,e){var n=0,r=0;for(var o in t){if(t[o]!=e[o])return!0;n++}for(var i in e)r++;return n!=r})(i,this.nodeViews)&&(this.nodeViews=i,o=!0),Gp(this)}this.editable=zu(this),Lu(this);var s,a,l,c,p,u,d,h,f,v,m=Eu(this),g=$u(this),y=e?"reset":t.scrollToSelection>r.scrollToSelection?"to selection":"preserve",b=o||!this.docView.matchesNode(t.doc,g,m),w=b||!t.selection.eq(r.selection),x="preserve"==y&&w&&null==this.dom.style.overflowAnchor&&function(t){for(var e,n,r=t.dom.getBoundingClientRect(),o=Math.max(0,r.top),i=(r.left+r.right)/2,s=o+1;s<Math.min(innerHeight,r.bottom);s+=5){var a=t.root.elementFromPoint(i,s);if(a!=t.dom&&t.dom.contains(a)){var l=a.getBoundingClientRect();if(l.top>=o-20){e=a,n=l.top;break}}}return{refDOM:e,refTop:n,stack:_c(t.dom)}}(this);if(w){this.domObserver.stop();var S=b&&(cc.ie||cc.chrome)&&!r.selection.empty&&!t.selection.empty&&(c=r.selection,p=t.selection,u=Math.min(c.$anchor.sharedDepth(c.head),p.$anchor.sharedDepth(p.head)),c.$anchor.node(u)!=p.$anchor.node(u));b&&(!o&&this.docView.update(t.doc,g,m,this)||(this.docView.destroy(),this.docView=Uc(t.doc,g,m,this.dom,this))),S||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&(s=this,a=s.docView.domFromPos(s.state.selection.anchor),l=s.root.getSelection(),yc(a.node,a.offset,l.anchorNode,l.anchorOffset)))?xp(this,S):(Mp(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(r),"reset"==y)this.dom.scrollTop=0;else if("to selection"==y){var k=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(t){return t(n)}))||(t.selection instanceof gl?Tc(this,this.docView.domAfterPos(t.selection.from).getBoundingClientRect(),k):Tc(this,this.coordsAtPos(t.selection.head),k))}else x&&(h=(d=x).refDOM,f=d.refTop,Ac(d.stack,0==(v=h?h.getBoundingClientRect().top:0)?0:v-f))},Iu.prototype.destroyPluginViews=function(){for(var t;t=this.pluginViews.pop();)t.destroy&&t.destroy()},Iu.prototype.updatePluginViews=function(t){if(t&&t.plugins==this.state.plugins)for(var e=0;e<this.pluginViews.length;e++){var n=this.pluginViews[e];n.update&&n.update(this,t)}else{this.destroyPluginViews();for(var r=0;r<this.state.plugins.length;r++){var o=this.state.plugins[r];o.spec.view&&this.pluginViews.push(o.spec.view(this))}}},Iu.prototype.someProp=function(t,e){var n,r=this._props&&this._props[t];if(null!=r&&(n=e?e(r):r))return n;var o=this.state.plugins;if(o)for(var i=0;i<o.length;i++){var s=o[i].props[t];if(null!=s&&(n=e?e(s):s))return n}},Iu.prototype.hasFocus=function(){return this.root.activeElement==this.dom},Iu.prototype.focus=function(){this.domObserver.stop(),this.editable&&function(t){if(t.setActive)return t.setActive();if(Nc)return t.focus(Nc);var e=_c(t);t.focus(null==Nc?{get preventScroll(){return Nc={preventScroll:!0},!0}}:void 0),Nc||(Nc=!1,Ac(e,0))}(this.dom),xp(this),this.domObserver.start()},Pu.root.get=function(){var t=this._root;if(null==t)for(var e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=function(){return document.getSelection()}),this._root=e;return t||document},Iu.prototype.posAtCoords=function(t){return Rc(this,t)},Iu.prototype.coordsAtPos=function(t){return Ic(this,t)},Iu.prototype.domAtPos=function(t){return this.docView.domFromPos(t)},Iu.prototype.nodeDOM=function(t){var e=this.docView.descAt(t);return e?e.nodeDOM:null},Iu.prototype.posAtDOM=function(t,e,n){void 0===n&&(n=-1);var r=this.docView.posFromDOM(t,e,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r},Iu.prototype.endOfTextblock=function(t,e){return function(t,e,n){return zc==e&&Bc==n?jc:(zc=e,Bc=n,jc="up"==n||"down"==n?function(t,e,n){var r=e.selection,o="up"==n?r.$anchor.min(r.$head):r.$anchor.max(r.$head);return $c(t,e,(function(){for(var e=t.docView.domFromPos(o.pos).node;;){var r=t.docView.nearestDesc(e,!0);if(!r)break;if(r.node.isBlock){e=r.dom;break}e=r.dom.parentNode}for(var i=Ic(t,o.pos),s=e.firstChild;s;s=s.nextSibling){var a=void 0;if(1==s.nodeType)a=s.getClientRects();else{if(3!=s.nodeType)continue;a=gc(s,0,s.nodeValue.length).getClientRects()}for(var l=0;l<a.length;l++){var c=a[l];if(c.bottom>c.top&&("up"==n?c.bottom<i.top+1:c.top>i.bottom-1))return!1}}return!0}))}(t,e,n):function(t,e,n){var r=e.selection.$head;if(!r.parent.isTextblock)return!1;var o=r.parentOffset,i=!o,s=o==r.parent.content.size,a=getSelection();return Lc.test(r.parent.textContent)&&a.modify?$c(t,e,(function(){var e=a.getRangeAt(0),o=a.focusNode,i=a.focusOffset,s=a.caretBidiLevel;a.modify("move",n,"character");var l=!(r.depth?t.docView.domAfterPos(r.before()):t.dom).contains(1==a.focusNode.nodeType?a.focusNode:a.focusNode.parentNode)||o==a.focusNode&&i==a.focusOffset;return a.removeAllRanges(),a.addRange(e),null!=s&&(a.caretBidiLevel=s),l})):"left"==n||"backward"==n?i:s}(t,e,n))}(this,e||this.state,t)},Iu.prototype.destroy=function(){this.docView&&(function(t){for(var e in t.domObserver.stop(),t.eventHandlers)t.dom.removeEventListener(e,t.eventHandlers[e]);clearTimeout(t.composingTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Eu(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},Iu.prototype.dispatchEvent=function(t){return function(t,e){Xp(t,e)||!Jp[e.type]||!t.editable&&e.type in Kp||Jp[e.type](t,e)}(this,t)},Iu.prototype.dispatch=function(t){var e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))},Object.defineProperties(Iu.prototype,Pu),"undefined"!=typeof WeakMap){var ju=new WeakMap;Ru=function(t){return ju.get(t)},Du=function(t,e){return ju.set(t,e),e}}else{var Vu=[],Fu=0;Ru=function(t){for(var e=0;e<Vu.length;e+=2)if(Vu[e]==t)return Vu[e+1]},Du=function(t,e){return 10==Fu&&(Fu=0),Vu[Fu++]=t,Vu[Fu++]=e}}var Hu=function(t,e,n,r){this.left=t,this.top=e,this.right=n,this.bottom=r},qu=function(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r};function Wu(t){if(t.colwidth)return t.colwidth.slice();for(var e=[],n=0;n<t.colspan;n++)e.push(0);return e}qu.prototype.findCell=function(t){for(var e=0;e<this.map.length;e++){var n=this.map[e];if(n==t){for(var r=e%this.width,o=e/this.width|0,i=r+1,s=o+1,a=1;i<this.width&&this.map[e+a]==n;a++)i++;for(var l=1;s<this.height&&this.map[e+this.width*l]==n;l++)s++;return new Hu(r,o,i,s)}}throw new RangeError("No cell with offset "+t+" found")},qu.prototype.colCount=function(t){for(var e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError("No cell with offset "+t+" found")},qu.prototype.nextCell=function(t,e,n){var r=this.findCell(t),o=r.left,i=r.right,s=r.top,a=r.bottom;return"horiz"==e?(n<0?0==o:i==this.width)?null:this.map[s*this.width+(n<0?o-1:i)]:(n<0?0==s:a==this.height)?null:this.map[o+this.width*(n<0?s-1:a)]},qu.prototype.rectBetween=function(t,e){var n=this.findCell(t),r=n.left,o=n.right,i=n.top,s=n.bottom,a=this.findCell(e),l=a.left,c=a.right,p=a.top,u=a.bottom;return new Hu(Math.min(r,l),Math.min(i,p),Math.max(o,c),Math.max(s,u))},qu.prototype.cellsInRect=function(t){for(var e=[],n={},r=t.top;r<t.bottom;r++)for(var o=t.left;o<t.right;o++){var i=r*this.width+o,s=this.map[i];n[s]||(n[s]=!0,o==t.left&&o&&this.map[i-1]==s||r==t.top&&r&&this.map[i-this.width]==s||e.push(s))}return e},qu.prototype.positionAt=function(t,e,n){for(var r=0,o=0;;r++){var i=o+n.child(r).nodeSize;if(r==t){for(var s=e+t*this.width,a=(t+1)*this.width;s<a&&this.map[s]<o;)s++;return s==a?i-1:this.map[s]}o=i}},qu.get=function(t){return Ru(t)||Du(t,function(t){if("table"!=t.type.spec.tableRole)throw new RangeError("Not a table node: "+t.type.name);for(var e=function(t){for(var e=-1,n=!1,r=0;r<t.childCount;r++){var o=t.child(r),i=0;if(n)for(var s=0;s<r;s++)for(var a=t.child(s),l=0;l<a.childCount;l++){var c=a.child(l);s+c.attrs.rowspan>r&&(i+=c.attrs.colspan)}for(var p=0;p<o.childCount;p++){var u=o.child(p);i+=u.attrs.colspan,u.attrs.rowspan>1&&(n=!0)}-1==e?e=i:e!=i&&(e=Math.max(e,i))}return e}(t),n=t.childCount,r=[],o=0,i=null,s=[],a=0,l=e*n;a<l;a++)r[a]=0;for(var c=0,p=0;c<n;c++){var u=t.child(c);p++;for(var d=0;;d++){for(;o<r.length&&0!=r[o];)o++;if(d==u.childCount)break;for(var h=u.child(d),f=h.attrs,v=f.colspan,m=f.rowspan,g=f.colwidth,y=0;y<m;y++){if(y+c>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:p,n:m-y});break}for(var b=o+y*e,w=0;w<v;w++){0==r[b+w]?r[b+w]=p:(i||(i=[])).push({type:"collision",row:c,pos:p,n:v-w});var x=g&&g[w];if(x){var S=(b+w)%e*2,k=s[S];null==k||k!=x&&1==s[S+1]?(s[S]=x,s[S+1]=1):k==x&&s[S+1]++}}}o+=v,p+=h.nodeSize}for(var C=(c+1)*e,O=0;o<C;)0==r[o++]&&O++;O&&(i||(i=[])).push({type:"missing",row:c,n:O}),p++}for(var M=new qu(e,n,r,i),T=!1,_=0;!T&&_<s.length;_+=2)null!=s[_]&&s[_+1]<n&&(T=!0);return T&&function(t,e,n){t.problems||(t.problems=[]);for(var r=0,o={};r<t.map.length;r++){var i=t.map[r];if(!o[i]){o[i]=!0;for(var s=n.nodeAt(i),a=null,l=0;l<s.attrs.colspan;l++){var c=e[2*((r+l)%t.width)];null==c||s.attrs.colwidth&&s.attrs.colwidth[l]==c||((a||(a=Wu(s.attrs)))[l]=c)}a&&t.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:a})}}}(M,s,t),M}(t))};var Ju=new Il("selectingCells");function Ku(t){for(var e=t.depth-1;e>0;e--)if("row"==t.node(e).type.spec.tableRole)return t.node(0).resolve(t.before(e+1));return null}function Uu(t){for(var e=t.selection.$head,n=e.depth;n>0;n--)if("row"==e.node(n).type.spec.tableRole)return!0;return!1}function Gu(t){var e=t.selection;return e.$anchorCell?e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell:e.node&&"cell"==e.node.type.spec.tableRole?e.$anchor:Ku(e.$head)||function(t){for(var e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){var r=e.type.spec.tableRole;if("cell"==r||"header_cell"==r)return t.doc.resolve(n)}for(var o=t.nodeBefore,i=t.pos;o;o=o.lastChild,i--){var s=o.type.spec.tableRole;if("cell"==s||"header_cell"==s)return t.doc.resolve(i-o.nodeSize)}}(e.$head)}function Xu(t){return"row"==t.parent.type.spec.tableRole&&t.nodeAfter}function Yu(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function Zu(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function Qu(t,e,n){var r=t.start(-1),o=qu.get(t.node(-1)).nextCell(t.pos-r,e,n);return null==o?null:t.node(0).resolve(r+o)}function td(t,e,n){var r={};for(var o in t)r[o]=t[o];return r[e]=n,r}function ed(t,e,n){void 0===n&&(n=1);var r=td(t,"colspan",t.colspan-n);return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some((function(t){return t>0}))||(r.colwidth=null)),r}function nd(t,e,n){void 0===n&&(n=1);var r=td(t,"colspan",t.colspan+n);if(r.colwidth){r.colwidth=r.colwidth.slice();for(var o=0;o<n;o++)r.colwidth.splice(e,0,0)}return r}var rd=function(t){function e(e,n){void 0===n&&(n=e);var r=e.node(-1),o=qu.get(r),i=e.start(-1),s=o.rectBetween(e.pos-i,n.pos-i),a=e.node(0),l=o.cellsInRect(s).filter((function(t){return t!=n.pos-i}));l.unshift(n.pos-i);var c=l.map((function(t){var e=r.nodeAt(t),n=t+i+1;return new fl(a.resolve(n),a.resolve(n+e.content.size))}));t.call(this,c[0].$from,c[0].$to,c),this.$anchorCell=e,this.$headCell=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(t,n){var r=t.resolve(n.map(this.$anchorCell.pos)),o=t.resolve(n.map(this.$headCell.pos));if(Xu(r)&&Xu(o)&&Zu(r,o)){var i=this.$anchorCell.node(-1)!=r.node(-1);return i&&this.isRowSelection()?e.rowSelection(r,o):i&&this.isColSelection()?e.colSelection(r,o):new e(r,o)}return vl.between(r,o)},e.prototype.content=function(){for(var t=this.$anchorCell.node(-1),e=qu.get(t),n=this.$anchorCell.start(-1),r=e.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),o={},i=[],s=r.top;s<r.bottom;s++){for(var a=[],l=s*e.width+r.left,c=r.left;c<r.right;c++,l++){var p=e.map[l];if(!o[p]){o[p]=!0;var u=e.findCell(p),d=t.nodeAt(p),h=r.left-u.left,f=u.right-r.right;if(h>0||f>0){var v=d.attrs;h>0&&(v=ed(v,0,h)),f>0&&(v=ed(v,v.colspan-f,f)),d=u.left<r.left?d.type.createAndFill(v):d.type.create(v,d.content)}if(u.top<r.top||u.bottom>r.bottom){var m=td(d.attrs,"rowspan",Math.min(u.bottom,r.bottom)-Math.max(u.top,r.top));d=u.top<r.top?d.type.createAndFill(m):d.type.create(m,d.content)}a.push(d)}}i.push(t.child(s).copy(As.from(a)))}var g=this.isColSelection()&&this.isRowSelection()?t:i;return new $s(As.from(g),1,1)},e.prototype.replace=function(e,n){void 0===n&&(n=$s.empty);for(var r=e.steps.length,o=this.ranges,i=0;i<o.length;i++){var s=o[i],a=s.$from,l=s.$to,c=e.mapping.slice(r);e.replace(c.map(a.pos),c.map(l.pos),i?$s.empty:n)}var p=t.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);p&&e.setSelection(p)},e.prototype.replaceWith=function(t,e){this.replace(t,new $s(As.from(e),0,0))},e.prototype.forEachCell=function(t){for(var e=this.$anchorCell.node(-1),n=qu.get(e),r=this.$anchorCell.start(-1),o=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r)),i=0;i<o.length;i++)t(e.nodeAt(o[i]),r+o[i])},e.prototype.isColSelection=function(){var t=this.$anchorCell.index(-1),e=this.$headCell.index(-1);if(Math.min(t,e)>0)return!1;var n=t+this.$anchorCell.nodeAfter.attrs.rowspan,r=e+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,r)==this.$headCell.node(-1).childCount},e.colSelection=function(t,n){void 0===n&&(n=t);var r=qu.get(t.node(-1)),o=t.start(-1),i=r.findCell(t.pos-o),s=r.findCell(n.pos-o),a=t.node(0);return i.top<=s.top?(i.top>0&&(t=a.resolve(o+r.map[i.left])),s.bottom<r.height&&(n=a.resolve(o+r.map[r.width*(r.height-1)+s.right-1]))):(s.top>0&&(n=a.resolve(o+r.map[s.left])),i.bottom<r.height&&(t=a.resolve(o+r.map[r.width*(r.height-1)+i.right-1]))),new e(t,n)},e.prototype.isRowSelection=function(){var t=qu.get(this.$anchorCell.node(-1)),e=this.$anchorCell.start(-1),n=t.colCount(this.$anchorCell.pos-e),r=t.colCount(this.$headCell.pos-e);if(Math.min(n,r)>0)return!1;var o=n+this.$anchorCell.nodeAfter.attrs.colspan,i=r+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,i)==t.width},e.prototype.eq=function(t){return t instanceof e&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos},e.rowSelection=function(t,n){void 0===n&&(n=t);var r=qu.get(t.node(-1)),o=t.start(-1),i=r.findCell(t.pos-o),s=r.findCell(n.pos-o),a=t.node(0);return i.left<=s.left?(i.left>0&&(t=a.resolve(o+r.map[i.top*r.width])),s.right<r.width&&(n=a.resolve(o+r.map[r.width*(s.top+1)-1]))):(s.left>0&&(n=a.resolve(o+r.map[s.top*r.width])),i.right<r.width&&(t=a.resolve(o+r.map[r.width*(i.top+1)-1]))),new e(t,n)},e.prototype.toJSON=function(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}},e.fromJSON=function(t,n){return new e(t.resolve(n.anchor),t.resolve(n.head))},e.create=function(t,n,r){return void 0===r&&(r=n),new e(t.resolve(n),t.resolve(r))},e.prototype.getBookmark=function(){return new od(this.$anchorCell.pos,this.$headCell.pos)},e}(dl);rd.prototype.visible=!1,dl.jsonID("cell",rd);var od=function(t,e){this.anchor=t,this.head=e};function id(t){if(!(t.selection instanceof rd))return null;var e=[];return t.selection.forEachCell((function(t,n){e.push(gu.node(n,n+t.nodeSize,{class:"selectedCell"}))})),xu.create(t.doc,e)}function sd(t,e){var n=t.getAttribute("data-colwidth"),r=n&&/^\d+(,\d+)*$/.test(n)?n.split(",").map((function(t){return Number(t)})):null,o=Number(t.getAttribute("colspan")||1),i={colspan:o,rowspan:Number(t.getAttribute("rowspan")||1),colwidth:r&&r.length==o?r:null};for(var s in e){var a=e[s].getFromDOM,l=a&&a(t);null!=l&&(i[s]=l)}return i}function ad(t,e){var n={};for(var r in 1!=t.attrs.colspan&&(n.colspan=t.attrs.colspan),1!=t.attrs.rowspan&&(n.rowspan=t.attrs.rowspan),t.attrs.colwidth&&(n["data-colwidth"]=t.attrs.colwidth.join(",")),e){var o=e[r].setDOMAttr;o&&o(t.attrs[r],n)}return n}function ld(t){var e=t.cached.tableNodeTypes;if(!e)for(var n in e=t.cached.tableNodeTypes={},t.nodes){var r=t.nodes[n],o=r.spec.tableRole;o&&(e[o]=r)}return e}function cd(t){if(!t.size)return null;for(var e=t.content,n=t.openStart,r=t.openEnd;1==e.childCount&&(n>0&&r>0||"table"==e.firstChild.type.spec.tableRole);)n--,r--,e=e.firstChild.content;var o=e.firstChild,i=o.type.spec.tableRole,s=o.type.schema,a=[];if("row"==i)for(var l=0;l<e.childCount;l++){var c=e.child(l).content,p=l?0:Math.max(0,n-1),u=l<e.childCount-1?0:Math.max(0,r-1);(p||u)&&(c=pd(ld(s).row,new $s(c,p,u)).content),a.push(c)}else{if("cell"!=i&&"header_cell"!=i)return null;a.push(n||r?pd(ld(s).row,new $s(e,n,r)).content:e)}return function(t,e){for(var n=[],r=0;r<e.length;r++)for(var o=e[r],i=o.childCount-1;i>=0;i--)for(var s=o.child(i).attrs,a=s.rowspan,l=s.colspan,c=r;c<r+a;c++)n[c]=(n[c]||0)+l;for(var p=0,u=0;u<n.length;u++)p=Math.max(p,n[u]);for(var d=0;d<n.length;d++)if(d>=e.length&&e.push(As.empty),n[d]<p){for(var h=ld(t).cell.createAndFill(),f=[],v=n[d];v<p;v++)f.push(h);e[d]=e[d].append(As.from(f))}return{height:e.length,width:p,rows:e}}(s,a)}function pd(t,e){var n=t.createAndFill();return new Ha(n).replace(0,n.content.size,e).doc}function ud(t,e,n){var r=t.width,o=t.height,i=t.rows;if(r!=e){for(var s=[],a=[],l=0;l<i.length;l++){for(var c=i[l],p=[],u=s[l]||0,d=0;u<e;d++){var h=c.child(d%c.childCount);u+h.attrs.colspan>e&&(h=h.type.create(ed(h.attrs,h.attrs.colspan,u+h.attrs.colspan-e),h.content)),p.push(h),u+=h.attrs.colspan;for(var f=1;f<h.attrs.rowspan;f++)s[l+f]=(s[l+f]||0)+h.attrs.colspan}a.push(As.from(p))}i=a,r=e}if(o!=n){for(var v=[],m=0,g=0;m<n;m++,g++){for(var y=[],b=i[g%o],w=0;w<b.childCount;w++){var x=b.child(w);m+x.attrs.rowspan>n&&(x=x.type.create(td(x.attrs,"rowspan",n-x.attrs.rowspan),x.content)),y.push(x)}v.push(As.from(y))}i=v,o=n}return{width:r,height:o,rows:i}}function dd(t,e,n,r,o,i,s,a){if(0==s||s==e.height)return!1;for(var l=!1,c=o;c<i;c++){var p=s*e.width+c,u=e.map[p];if(e.map[p-e.width]==u){l=!0;var d=n.nodeAt(u),h=e.findCell(u),f=h.top,v=h.left;t.setNodeMarkup(t.mapping.slice(a).map(u+r),null,td(d.attrs,"rowspan",s-f)),t.insert(t.mapping.slice(a).map(e.positionAt(s,v,n)),d.type.createAndFill(td(d.attrs,"rowspan",f+d.attrs.rowspan-s))),c+=d.attrs.colspan-1}}return l}function hd(t,e,n,r,o,i,s,a){if(0==s||s==e.width)return!1;for(var l=!1,c=o;c<i;c++){var p=c*e.width+s,u=e.map[p];if(e.map[p-1]==u){l=!0;var d=n.nodeAt(u),h=e.colCount(u),f=t.mapping.slice(a).map(u+r);t.setNodeMarkup(f,null,ed(d.attrs,s-h,d.attrs.colspan-(s-h))),t.insert(f+d.nodeSize,d.type.createAndFill(ed(d.attrs,0,s-h))),c+=d.attrs.rowspan-1}}return l}function fd(t,e,n,r,o){var i=n?t.doc.nodeAt(n-1):t.doc,s=qu.get(i),a=r.top,l=r.left,c=l+o.width,p=a+o.height,u=t.tr,d=0;function h(){i=n?u.doc.nodeAt(n-1):u.doc,s=qu.get(i),d=u.mapping.maps.length}(function(t,e,n,r,o,i,s){var a,l,c=ld(t.doc.type.schema);if(o>e.width)for(var p=0,u=0;p<e.height;p++){var d=n.child(p);u+=d.nodeSize;var h,f=[];h=null==d.lastChild||d.lastChild.type==c.cell?a||(a=c.cell.createAndFill()):l||(l=c.header_cell.createAndFill());for(var v=e.width;v<o;v++)f.push(h);t.insert(t.mapping.slice(s).map(u-1+r),f)}if(i>e.height){for(var m=[],g=0,y=(e.height-1)*e.width;g<Math.max(e.width,o);g++){var b=!(g>=e.width)&&n.nodeAt(e.map[y+g]).type==c.header_cell;m.push(b?l||(l=c.header_cell.createAndFill()):a||(a=c.cell.createAndFill()))}for(var w=c.row.create(null,As.from(m)),x=[],S=e.height;S<i;S++)x.push(w);t.insert(t.mapping.slice(s).map(r+n.nodeSize-2),x)}return!(!a&&!l)})(u,s,i,n,c,p,d)&&h(),dd(u,s,i,n,l,c,a,d)&&h(),dd(u,s,i,n,l,c,p,d)&&h(),hd(u,s,i,n,a,p,l,d)&&h(),hd(u,s,i,n,a,p,c,d)&&h();for(var f=a;f<p;f++){var v=s.positionAt(f,l,i),m=s.positionAt(f,c,i);u.replace(u.mapping.slice(d).map(v+n),u.mapping.slice(d).map(m+n),new $s(o.rows[f-a],0,0))}h(),u.setSelection(new rd(u.doc.resolve(n+s.positionAt(a,l,i)),u.doc.resolve(n+s.positionAt(p-1,c-1,i)))),e(u)}od.prototype.map=function(t){return new od(t.map(this.anchor),t.map(this.head))},od.prototype.resolve=function(t){var e=t.resolve(this.anchor),n=t.resolve(this.head);return"row"==e.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&e.index()<e.parent.childCount&&n.index()<n.parent.childCount&&Zu(e,n)?new rd(e,n):dl.near(n,1)};var vd,md,gd=(vd={ArrowLeft:bd("horiz",-1),ArrowRight:bd("horiz",1),ArrowUp:bd("vert",-1),ArrowDown:bd("vert",1),"Shift-ArrowLeft":wd("horiz",-1),"Shift-ArrowRight":wd("horiz",1),"Shift-ArrowUp":wd("vert",-1),"Shift-ArrowDown":wd("vert",1),Backspace:xd,"Mod-Backspace":xd,Delete:xd,"Mod-Delete":xd},md=function(t){var e=Object.create(null);for(var n in t)e[ac(n)]=t[n];return e}(vd),function(t,e){var n,r=function(t){var e=!(rc&&(t.ctrlKey||t.altKey||t.metaKey)||(Ql||nc)&&t.shiftKey&&t.key&&1==t.key.length)&&t.key||(t.shiftKey?Yl:Gl)[t.keyCode]||t.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}(e),o=1==r.length&&" "!=r,i=md[lc(r,e,!o)];if(i&&i(t.state,t.dispatch,t))return!0;if(o&&(e.shiftKey||e.altKey||e.metaKey)&&(n=Xl[e.keyCode])&&n!=r){var s=md[lc(n,e,!0)];if(s&&s(t.state,t.dispatch,t))return!0}else if(o&&e.shiftKey){var a=md[lc(r,e,!0)];if(a&&a(t.state,t.dispatch,t))return!0}return!1});function yd(t,e,n){return!n.eq(t.selection)&&(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function bd(t,e){return function(n,r,o){var i=n.selection;if(i instanceof rd)return yd(n,r,dl.near(i.$headCell,e));if("horiz"!=t&&!i.empty)return!1;var s=Od(o,t,e);if(null==s)return!1;if("horiz"==t)return yd(n,r,dl.near(n.doc.resolve(i.head+e),e));var a,l=n.doc.resolve(s),c=Qu(l,t,e);return a=c?dl.near(c,1):e<0?dl.near(n.doc.resolve(l.before(-1)),-1):dl.near(n.doc.resolve(l.after(-1)),1),yd(n,r,a)}}function wd(t,e){return function(n,r,o){var i=n.selection;if(!(i instanceof rd)){var s=Od(o,t,e);if(null==s)return!1;i=new rd(n.doc.resolve(s))}var a=Qu(i.$headCell,t,e);return!!a&&yd(n,r,new rd(i.$anchorCell,a))}}function xd(t,e){var n=t.selection;if(!(n instanceof rd))return!1;if(e){var r=t.tr,o=ld(t.schema).cell.createAndFill().content;n.forEachCell((function(t,e){t.content.eq(o)||r.replace(r.mapping.map(e+1),r.mapping.map(e+t.nodeSize-1),new $s(o,0,0))})),r.docChanged&&e(r)}return!0}function Sd(t,e){var n=Ku(t.state.doc.resolve(e));return!!n&&(t.dispatch(t.state.tr.setSelection(new rd(n))),!0)}function kd(t,e,n){if(!Uu(t.state))return!1;var r=cd(n),o=t.state.selection;if(o instanceof rd){r||(r={width:1,height:1,rows:[As.from(pd(ld(t.state.schema).cell,n))]});var i=o.$anchorCell.node(-1),s=o.$anchorCell.start(-1),a=qu.get(i).rectBetween(o.$anchorCell.pos-s,o.$headCell.pos-s);return r=ud(r,a.right-a.left,a.bottom-a.top),fd(t.state,t.dispatch,s,a,r),!0}if(r){var l=Gu(t.state),c=l.start(-1);return fd(t.state,t.dispatch,c,qu.get(l.node(-1)).findCell(l.pos-c),r),!0}return!1}function Cd(t,e){if(!e.ctrlKey&&!e.metaKey){var n,r=Md(t,e.target);if(e.shiftKey&&t.state.selection instanceof rd)o(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&null!=(n=Ku(t.state.selection.$anchor))&&Td(t,e).pos!=n.pos)o(n,e),e.preventDefault();else if(!r)return;t.root.addEventListener("mouseup",i),t.root.addEventListener("dragstart",i),t.root.addEventListener("mousemove",s)}function o(e,n){var r=Td(t,n),o=null==Ju.getState(t.state);if(!r||!Zu(e,r)){if(!o)return;r=e}var i=new rd(e,r);if(o||!t.state.selection.eq(i)){var s=t.state.tr.setSelection(i);o&&s.setMeta(Ju,e.pos),t.dispatch(s)}}function i(){t.root.removeEventListener("mouseup",i),t.root.removeEventListener("dragstart",i),t.root.removeEventListener("mousemove",s),null!=Ju.getState(t.state)&&t.dispatch(t.state.tr.setMeta(Ju,-1))}function s(n){var s,a=Ju.getState(t.state);if(null!=a)s=t.state.doc.resolve(a);else if(Md(t,n.target)!=r&&!(s=Td(t,e)))return i();s&&o(s,n)}}function Od(t,e,n){if(!(t.state.selection instanceof vl))return null;for(var r=t.state.selection.$head,o=r.depth-1;o>=0;o--){var i=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:i.childCount))return null;if("cell"==i.type.spec.tableRole||"header_cell"==i.type.spec.tableRole){var s=r.before(o),a="vert"==e?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(a)?s:null}}return null}function Md(t,e){for(;e&&e!=t.dom;e=e.parentNode)if("TD"==e.nodeName||"TH"==e.nodeName)return e}function Td(t,e){var n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?Ku(t.state.doc.resolve(n.pos)):null}var _d=new Il("fix-tables");function Ad(t,e){var n,r=function(e,r){"table"==e.type.spec.tableRole&&(n=function(t,e,n,r){var o=qu.get(e);if(!o.problems)return r;r||(r=t.tr);for(var i,s,a=[],l=0;l<o.height;l++)a.push(0);for(var c=0;c<o.problems.length;c++){var p=o.problems[c];if("collision"==p.type){for(var u=e.nodeAt(p.pos),d=0;d<u.attrs.rowspan;d++)a[p.row+d]+=p.n;r.setNodeMarkup(r.mapping.map(n+1+p.pos),null,ed(u.attrs,u.attrs.colspan-p.n,p.n))}else if("missing"==p.type)a[p.row]+=p.n;else if("overlong_rowspan"==p.type){var h=e.nodeAt(p.pos);r.setNodeMarkup(r.mapping.map(n+1+p.pos),null,td(h.attrs,"rowspan",h.attrs.rowspan-p.n))}else if("colwidth mismatch"==p.type){var f=e.nodeAt(p.pos);r.setNodeMarkup(r.mapping.map(n+1+p.pos),null,td(f.attrs,"colwidth",p.colwidth))}}for(var v=0;v<a.length;v++)a[v]&&(null==i&&(i=v),s=v);for(var m=0,g=n+1;m<o.height;m++){var y=e.child(m),b=g+y.nodeSize,w=a[m];if(w>0){var x="cell";y.firstChild&&(x=y.firstChild.type.spec.tableRole);for(var S=[],k=0;k<w;k++)S.push(ld(t.schema)[x].createAndFill());var C=0!=m&&i!=m-1||s!=m?b-1:g+1;r.insert(r.mapping.map(C),S)}g=b}return r.setMeta(_d,{fixTables:!0})}(t,e,r,n))};return e?e.doc!=t.doc&&function t(e,n,r,o){var i=e.childCount,s=n.childCount;t:for(var a=0,l=0;a<s;a++){for(var c=n.child(a),p=l,u=Math.min(i,a+3);p<u;p++)if(e.child(p)==c){l=p+1,r+=c.nodeSize;continue t}o(c,r),l<i&&e.child(l).sameMarkup(c)?t(e.child(l),c,r+1,o):c.nodesBetween(0,c.content.size,o,r+1),r+=c.nodeSize}}(e.doc,t.doc,0,r):t.doc.descendants(r),n}function Nd(t){var e,n=t.selection,r=Gu(t),o=r.node(-1),i=r.start(-1),s=qu.get(o);return(e=n instanceof rd?s.rectBetween(n.$anchorCell.pos-i,n.$headCell.pos-i):s.findCell(r.pos-i)).tableStart=i,e.map=s,e.table=o,e}function Ed(t,e,n){var r=e.map,o=e.tableStart,i=e.table,s=n>0?-1:0;(function(t,e,n){for(var r=ld(e.type.schema).header_cell,o=0;o<t.height;o++)if(e.nodeAt(t.map[n+o*t.width]).type!=r)return!1;return!0})(r,i,n+s)&&(s=0==n||n==r.width?null:0);for(var a=0;a<r.height;a++){var l=a*r.width+n;if(n>0&&n<r.width&&r.map[l-1]==r.map[l]){var c=r.map[l],p=i.nodeAt(c);t.setNodeMarkup(t.mapping.map(o+c),null,nd(p.attrs,n-r.colCount(c))),a+=p.attrs.rowspan-1}else{var u=null==s?ld(i.type.schema).cell:i.nodeAt(r.map[l+s]).type,d=r.positionAt(a,n,i);t.insert(t.mapping.map(o+d),u.createAndFill())}}return t}function Rd(t,e,n){for(var r=e.map,o=e.table,i=e.tableStart,s=t.mapping.maps.length,a=0;a<r.height;){var l=a*r.width+n,c=r.map[l],p=o.nodeAt(c);if(n>0&&r.map[l-1]==c||n<r.width-1&&r.map[l+1]==c)t.setNodeMarkup(t.mapping.slice(s).map(i+c),null,ed(p.attrs,n-r.colCount(c)));else{var u=t.mapping.slice(s).map(i+c);t.delete(u,u+p.nodeSize)}a+=p.attrs.rowspan}}function Dd(t,e,n){for(var r=ld(e.type.schema).header_cell,o=0;o<t.width;o++)if(e.nodeAt(t.map[o+n*t.width]).type!=r)return!1;return!0}function Id(t,e,n){for(var r=e.map,o=e.tableStart,i=e.table,s=o,a=0;a<n;a++)s+=i.child(a).nodeSize;var l=[],c=n>0?-1:0;Dd(r,i,n+c)&&(c=0==n||n==r.height?null:0);for(var p=0,u=r.width*n;p<r.width;p++,u++)if(n>0&&n<r.height&&r.map[u]==r.map[u-r.width]){var d=r.map[u],h=i.nodeAt(d).attrs;t.setNodeMarkup(o+d,null,td(h,"rowspan",h.rowspan+1)),p+=h.colspan-1}else{var f=null==c?ld(i.type.schema).cell:i.nodeAt(r.map[u+c*r.width]).type;l.push(f.createAndFill())}return t.insert(s,ld(i.type.schema).row.create(null,l)),t}function Pd(t,e,n){for(var r=e.map,o=e.table,i=e.tableStart,s=0,a=0;a<n;a++)s+=o.child(a).nodeSize;var l=s+o.child(n).nodeSize,c=t.mapping.maps.length;t.delete(s+i,l+i);for(var p=0,u=n*r.width;p<r.width;p++,u++){var d=r.map[u];if(n>0&&d==r.map[u-r.width]){var h=o.nodeAt(d).attrs;t.setNodeMarkup(t.mapping.slice(c).map(d+i),null,td(h,"rowspan",h.rowspan-1)),p+=h.colspan-1}else if(n<r.width&&d==r.map[u+r.width]){var f=o.nodeAt(d),v=f.type.create(td(f.attrs,"rowspan",f.attrs.rowspan-1),f.content),m=r.positionAt(n+1,p,o);t.insert(t.mapping.slice(c).map(i+m),v),p+=f.attrs.colspan-1}}}function $d(t){var e=t.content;return 1==e.childCount&&e.firstChild.isTextblock&&0==e.firstChild.childCount}function Ld(t){return function(e,n){var r,o,i=e.selection;if(i instanceof rd){if(i.$anchorCell.pos!=i.$headCell.pos)return!1;r=i.$anchorCell.nodeAfter,o=i.$anchorCell.pos}else{if(!(r=function(t){for(var e=t.depth;e>0;e--){var n=t.node(e).type.spec.tableRole;if("cell"===n||"header_cell"===n)return t.node(e)}return null}(i.$from)))return!1;o=Ku(i.$from).pos}if(1==r.attrs.colspan&&1==r.attrs.rowspan)return!1;if(n){var s=r.attrs,a=[],l=s.colwidth;s.rowspan>1&&(s=td(s,"rowspan",1)),s.colspan>1&&(s=td(s,"colspan",1));for(var c,p=Nd(e),u=e.tr,d=0;d<p.right-p.left;d++)a.push(l?td(s,"colwidth",l&&l[d]?[l[d]]:null):s);for(var h=p.top;h<p.bottom;h++){var f=p.map.positionAt(h,p.left,p.table);h==p.top&&(f+=r.nodeSize);for(var v=p.left,m=0;v<p.right;v++,m++)v==p.left&&h==p.top||u.insert(c=u.mapping.map(f+p.tableStart,1),t({node:r,row:h,col:v}).createAndFill(a[m]))}u.setNodeMarkup(o,t({node:r,row:p.top,col:p.left}),a[0]),i instanceof rd&&u.setSelection(new rd(u.doc.resolve(i.$anchorCell.pos),c&&u.doc.resolve(c))),n(u)}return!0}}function zd(t,e,n){for(var r=e.map.cellsInRect({left:0,top:0,right:"row"==t?e.map.width:1,bottom:"column"==t?e.map.height:1}),o=0;o<r.length;o++){var i=e.table.nodeAt(r[o]);if(i&&i.type!==n.header_cell)return!1}return!0}function Bd(t,e){return(e=e||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(t){return function(e,n){if(!Uu(e))return!1;if(n){for(var r=ld(e.schema),o=Nd(e),i=e.tr,s=o.map.cellsInRect("column"==t?new Hu(o.left,0,o.right,o.map.height):"row"==t?new Hu(0,o.top,o.map.width,o.bottom):o),a=s.map((function(t){return o.table.nodeAt(t)})),l=0;l<s.length;l++)a[l].type==r.header_cell&&i.setNodeMarkup(o.tableStart+s[l],r.cell,a[l].attrs);if(0==i.steps.length)for(var c=0;c<s.length;c++)i.setNodeMarkup(o.tableStart+s[c],r.header_cell,a[c].attrs);n(i)}return!0}}(t):function(e,n){if(!Uu(e))return!1;if(n){var r=ld(e.schema),o=Nd(e),i=e.tr,s=zd("row",o,r),a=zd("column",o,r),l=("column"===t?s:"row"===t&&a)?1:0,c="column"==t?new Hu(0,l,1,o.map.height):"row"==t?new Hu(l,0,o.map.width,1):o,p="column"==t?a?r.cell:r.header_cell:"row"==t?s?r.cell:r.header_cell:r.cell;o.map.cellsInRect(c).forEach((function(t){var e=t+o.tableStart,n=i.doc.nodeAt(e);n&&i.setNodeMarkup(e,p,n.attrs)})),n(i)}return!0}}var jd=Bd("row",{useDeprecatedLogic:!0}),Vd=Bd("column",{useDeprecatedLogic:!0}),Fd=Bd("cell",{useDeprecatedLogic:!0}),Hd=function(t,e){this.node=t,this.cellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),qd(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))};function qd(t,e,n,r,o,i){for(var s=0,a=!0,l=e.firstChild,c=t.firstChild,p=0,u=0;p<c.childCount;p++)for(var d=c.child(p).attrs,h=d.colspan,f=d.colwidth,v=0;v<h;v++,u++){var m=o==u?i:f&&f[v],g=m?m+"px":"";s+=m||r,m||(a=!1),l?(l.style.width!=g&&(l.style.width=g),l=l.nextSibling):e.appendChild(document.createElement("col")).style.width=g}for(;l;){var y=l.nextSibling;l.parentNode.removeChild(l),l=y}a?(n.style.width=s+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=s+"px")}Hd.prototype.update=function(t){return t.type==this.node.type&&(this.node=t,qd(t,this.colgroup,this.table,this.cellMinWidth),!0)},Hd.prototype.ignoreMutation=function(t){return"attributes"==t.type&&(t.target==this.table||this.colgroup.contains(t.target))};var Wd=new Il("tableColumnResizing"),Jd=function(t,e){this.activeHandle=t,this.dragging=e};function Kd(t,e,n){var r=t.posAtCoords({left:e.clientX,top:e.clientY}).pos,o=Ku(t.state.doc.resolve(r));if(!o)return-1;if("right"==n)return o.pos;var i=qu.get(o.node(-1)),s=o.start(-1),a=i.map.indexOf(o.pos-s);return a%i.width==0?-1:s+i.map[a-1]}function Ud(t,e,n){var r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function Gd(t,e){t.dispatch(t.state.tr.setMeta(Wd,{setHandle:e}))}function Xd(t){for(var e=[],n=0;n<t;n++)e.push(0);return e}Jd.prototype.apply=function(t){var e=this,n=t.getMeta(Wd);if(n&&null!=n.setHandle)return new Jd(n.setHandle,null);if(n&&void 0!==n.setDragging)return new Jd(e.activeHandle,n.setDragging);if(e.activeHandle>-1&&t.docChanged){var r=t.mapping.map(e.activeHandle,-1);Xu(t.doc.resolve(r))||(r=null),e=new Jd(r,e.dragging)}return e};var Yd,Zd=Object.freeze({__proto__:null,CellSelection:rd,TableMap:qu,__clipCells:ud,__insertCells:fd,__pastedCells:cd,addColumn:Ed,addColumnAfter:function(t,e){if(!Uu(t))return!1;if(e){var n=Nd(t);e(Ed(t.tr,n,n.right))}return!0},addColumnBefore:function(t,e){if(!Uu(t))return!1;if(e){var n=Nd(t);e(Ed(t.tr,n,n.left))}return!0},addRow:Id,addRowAfter:function(t,e){if(!Uu(t))return!1;if(e){var n=Nd(t);e(Id(t.tr,n,n.bottom))}return!0},addRowBefore:function(t,e){if(!Uu(t))return!1;if(e){var n=Nd(t);e(Id(t.tr,n,n.top))}return!0},cellAround:Ku,colCount:function(t){return qu.get(t.node(-1)).colCount(t.pos-t.start(-1))},columnResizing:function(t){void 0===t&&(t={});var e=t.handleWidth;void 0===e&&(e=5);var n=t.cellMinWidth;void 0===n&&(n=25);var r=t.View;void 0===r&&(r=Hd);var o=t.lastColumnResizable;return void 0===o&&(o=!0),new El({key:Wd,state:{init:function(t,e){return this.spec.props.nodeViews[ld(e.schema).table.name]=function(t,e){return new r(t,n,e)},new Jd(-1,!1)},apply:function(t,e){return e.apply(t)}},props:{attributes:function(t){return Wd.getState(t).activeHandle>-1?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove:function(t,n){!function(t,e,n,r,o){var i=Wd.getState(t.state);if(!i.dragging){var s=function(t){for(;t&&"TD"!=t.nodeName&&"TH"!=t.nodeName;)t=t.classList.contains("ProseMirror")?null:t.parentNode;return t}(e.target),a=-1;if(s){var l=s.getBoundingClientRect(),c=l.left,p=l.right;e.clientX-c<=n?a=Kd(t,e,"left"):p-e.clientX<=n&&(a=Kd(t,e,"right"))}if(a!=i.activeHandle){if(!o&&-1!==a){var u=t.state.doc.resolve(a),d=u.node(-1),h=qu.get(d),f=u.start(-1);if(h.colCount(u.pos-f)+u.nodeAfter.attrs.colspan-1==h.width-1)return}Gd(t,a)}}}(t,n,e,0,o)},mouseleave:function(t){!function(t){var e=Wd.getState(t.state);e.activeHandle>-1&&!e.dragging&&Gd(t,-1)}(t)},mousedown:function(t,e){!function(t,e,n){var r=Wd.getState(t.state);if(-1==r.activeHandle||r.dragging)return!1;var o=t.state.doc.nodeAt(r.activeHandle),i=function(t,e,n){var r=n.colspan,o=n.colwidth,i=o&&o[o.length-1];if(i)return i;var s=t.domAtPos(e),a=s.node.childNodes[s.offset].offsetWidth,l=r;if(o)for(var c=0;c<r;c++)o[c]&&(a-=o[c],l--);return a/l}(t,r.activeHandle,o.attrs);function s(e){window.removeEventListener("mouseup",s),window.removeEventListener("mousemove",a);var r=Wd.getState(t.state);r.dragging&&(function(t,e,n){for(var r=t.state.doc.resolve(e),o=r.node(-1),i=qu.get(o),s=r.start(-1),a=i.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,l=t.state.tr,c=0;c<i.height;c++){var p=c*i.width+a;if(!c||i.map[p]!=i.map[p-i.width]){var u=i.map[p],d=o.nodeAt(u).attrs,h=1==d.colspan?0:a-i.colCount(u);if(!d.colwidth||d.colwidth[h]!=n){var f=d.colwidth?d.colwidth.slice():Xd(d.colspan);f[h]=n,l.setNodeMarkup(s+u,null,td(d,"colwidth",f))}}}l.docChanged&&t.dispatch(l)}(t,r.activeHandle,Ud(r.dragging,e,n)),t.dispatch(t.state.tr.setMeta(Wd,{setDragging:null})))}function a(e){if(!e.which)return s(e);var r=Wd.getState(t.state),o=Ud(r.dragging,e,n);!function(t,e,n,r){for(var o=t.state.doc.resolve(e),i=o.node(-1),s=o.start(-1),a=qu.get(i).colCount(o.pos-s)+o.nodeAfter.attrs.colspan-1,l=t.domAtPos(o.start(-1)).node;"TABLE"!=l.nodeName;)l=l.parentNode;qd(i,l.firstChild,l,r,a,n)}(t,r.activeHandle,o,n)}t.dispatch(t.state.tr.setMeta(Wd,{setDragging:{startX:e.clientX,startWidth:i}})),window.addEventListener("mouseup",s),window.addEventListener("mousemove",a),e.preventDefault()}(t,e,n)}},decorations:function(t){var e=Wd.getState(t);if(e.activeHandle>-1)return function(t,e){for(var n=[],r=t.doc.resolve(e),o=r.node(-1),i=qu.get(o),s=r.start(-1),a=i.colCount(r.pos-s)+r.nodeAfter.attrs.colspan,l=0;l<i.height;l++){var c=a+l*i.width-1;if(!(a!=i.width&&i.map[c]==i.map[c+1]||0!=l&&i.map[c-1]==i.map[c-1-i.width])){var p=i.map[c],u=s+p+o.nodeAt(p).nodeSize-1,d=document.createElement("div");d.className="column-resize-handle",n.push(gu.widget(u,d))}}return xu.create(t.doc,n)}(t,e.activeHandle)},nodeViews:{}}})},columnResizingPluginKey:Wd,deleteColumn:function(t,e){if(!Uu(t))return!1;if(e){var n=Nd(t),r=t.tr;if(0==n.left&&n.right==n.map.width)return!1;for(var o=n.right-1;Rd(r,n,o),o!=n.left;o--)n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=qu.get(n.table);e(r)}return!0},deleteRow:function(t,e){if(!Uu(t))return!1;if(e){var n=Nd(t),r=t.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(var o=n.bottom-1;Pd(r,n,o),o!=n.top;o--)n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=qu.get(n.table);e(r)}return!0},deleteTable:function(t,e){for(var n=t.selection.$anchor,r=n.depth;r>0;r--)if("table"==n.node(r).type.spec.tableRole)return e&&e(t.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1},findCell:function(t){return qu.get(t.node(-1)).findCell(t.pos-t.start(-1))},fixTables:Ad,fixTablesKey:_d,goToNextCell:function(t){return function(e,n){if(!Uu(e))return!1;var r=function(t,e){if(e<0){var n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(var r=t.index(-1)-1,o=t.before();r>=0;r--){var i=t.node(-1).child(r);if(i.childCount)return o-1-i.lastChild.nodeSize;o-=i.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;for(var s=t.node(-1),a=t.indexAfter(-1),l=t.after();a<s.childCount;a++){var c=s.child(a);if(c.childCount)return l+1;l+=c.nodeSize}}}(Gu(e),t);if(null!=r){if(n){var o=e.doc.resolve(r);n(e.tr.setSelection(vl.between(o,Yu(o))).scrollIntoView())}return!0}}},handlePaste:kd,inSameTable:Zu,isInTable:Uu,mergeCells:function(t,e){var n=t.selection;if(!(n instanceof rd)||n.$anchorCell.pos==n.$headCell.pos)return!1;var r=Nd(t),o=r.map;if(function(t,e){for(var n=t.width,r=t.height,o=t.map,i=e.top*n+e.left,s=i,a=(e.bottom-1)*n+e.left,l=i+(e.right-e.left-1),c=e.top;c<e.bottom;c++){if(e.left>0&&o[s]==o[s-1]||e.right<n&&o[l]==o[l+1])return!0;s+=n,l+=n}for(var p=e.left;p<e.right;p++){if(e.top>0&&o[i]==o[i-n]||e.bottom<r&&o[a]==o[a+n])return!0;i++,a++}return!1}(o,r))return!1;if(e){for(var i,s,a=t.tr,l={},c=As.empty,p=r.top;p<r.bottom;p++)for(var u=r.left;u<r.right;u++){var d=o.map[p*o.width+u],h=r.table.nodeAt(d);if(!l[d])if(l[d]=!0,null==i)i=d,s=h;else{$d(h)||(c=c.append(h.content));var f=a.mapping.map(d+r.tableStart);a.delete(f,f+h.nodeSize)}}if(a.setNodeMarkup(i+r.tableStart,null,td(nd(s.attrs,s.attrs.colspan,r.right-r.left-s.attrs.colspan),"rowspan",r.bottom-r.top)),c.size){var v=i+1+s.content.size,m=$d(s)?i+1:v;a.replaceWith(m+r.tableStart,v+r.tableStart,c)}a.setSelection(new rd(a.doc.resolve(i+r.tableStart))),e(a)}return!0},moveCellForward:Yu,nextCell:Qu,removeColumn:Rd,removeRow:Pd,rowIsHeader:Dd,selectedRect:Nd,selectionCell:Gu,setCellAttr:function(t,e){return function(n,r){if(!Uu(n))return!1;var o=Gu(n);if(o.nodeAfter.attrs[t]===e)return!1;if(r){var i=n.tr;n.selection instanceof rd?n.selection.forEachCell((function(n,r){n.attrs[t]!==e&&i.setNodeMarkup(r,null,td(n.attrs,t,e))})):i.setNodeMarkup(o.pos,null,td(o.nodeAfter.attrs,t,e)),r(i)}return!0}},splitCell:function(t,e){var n=ld(t.schema);return Ld((function(t){var e=t.node;return n[e.type.spec.tableRole]}))(t,e)},splitCellWithType:Ld,tableEditing:function(t){void 0===t&&(t={});var e=t.allowTableNodeSelection;return void 0===e&&(e=!1),new El({key:Ju,state:{init:function(){return null},apply:function(t,e){var n=t.getMeta(Ju);if(null!=n)return-1==n?null:n;if(null==e||!t.docChanged)return e;var r=t.mapping.mapResult(e),o=r.deleted,i=r.pos;return o?null:i}},props:{decorations:id,handleDOMEvents:{mousedown:Cd},createSelectionBetween:function(t){if(null!=Ju.getState(t.state))return t.state.selection},handleTripleClick:Sd,handleKeyDown:gd,handlePaste:kd},appendTransaction:function(t,n,r){return function(t,e,n){var r,o,i=(e||t).selection,s=(e||t).doc;if(i instanceof gl&&(o=i.node.type.spec.tableRole)){if("cell"==o||"header_cell"==o)r=rd.create(s,i.from);else if("row"==o){var a=s.resolve(i.from+1);r=rd.rowSelection(a,a)}else if(!n){var l=qu.get(i.node),c=i.from+1,p=c+l.map[l.width*l.height-1];r=rd.create(s,c+1,p)}}else i instanceof vl&&function(t){var e=t.$from,n=t.$to;if(e.pos==n.pos||e.pos<e.pos-6)return!1;for(var r=e.pos,o=n.pos,i=e.depth;i>=0&&!(e.after(i+1)<e.end(i));i--,r++);for(var s=n.depth;s>=0&&!(n.before(s+1)>n.start(s));s--,o--);return r==o&&/row|table/.test(e.node(i).type.spec.tableRole)}(i)?r=vl.create(s,i.from):i instanceof vl&&function(t){for(var e,n,r=t.$from,o=t.$to,i=r.depth;i>0;i--){var s=r.node(i);if("cell"===s.type.spec.tableRole||"header_cell"===s.type.spec.tableRole){e=s;break}}for(var a=o.depth;a>0;a--){var l=o.node(a);if("cell"===l.type.spec.tableRole||"header_cell"===l.type.spec.tableRole){n=l;break}}return e!==n&&0===o.parentOffset}(i)&&(r=vl.create(s,i.$from.start(),i.$from.end()));return r&&(e||(e=t.tr)).setSelection(r),e}(r,Ad(r,n),e)}})},tableEditingKey:Ju,tableNodes:function(t){var e=t.cellAttributes||{},n={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(var r in e)n[r]={default:e[r].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:t.tableGroup,parseDOM:[{tag:"table"}],toDOM:function(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM:function(){return["tr",0]}},table_cell:{content:t.cellContent,attrs:n,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:function(t){return sd(t,e)}}],toDOM:function(t){return["td",ad(t,e),0]}},table_header:{content:t.cellContent,attrs:n,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:function(t){return sd(t,e)}}],toDOM:function(t){return["th",ad(t,e),0]}}}},toggleHeader:Bd,toggleHeaderCell:Fd,toggleHeaderColumn:Vd,toggleHeaderRow:jd,updateColumnsOnResize:qd}),Qd=$($a),th=$(Zd),eh=P((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){return function(n){Array.isArray(t)||(t=[t]);for(var r=0,o=t.length;r<o;r++){var i=_(t[r])(n.selection);if(i){var s=u(i.pos,e)(n);if(s!==n)return s}}return n}},r=function(t){return function(e){if(l(e.selection)){var n=e.selection,r=n.$from,o=n.$to;if(t instanceof Qd.Fragment&&r.parent.canReplace(r.index(),r.indexAfter(),t)||r.parent.canReplaceWith(r.index(),r.indexAfter(),t.type))return p(e.replaceWith(r.pos,o.pos,t).setSelection(new Pl.NodeSelection(e.doc.resolve(r.pos))))}return e}},o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(n){var r=Pl.Selection.findFrom(n.doc.resolve(t),e,!0);return r?n.setSelection(r):n}},i=function(t){return t.type&&t.type.spec.selectable},s=function(t,e,n){return function(t){return i(t)&&t.type.isLeaf}(t)?n.setSelection(new Pl.NodeSelection(n.doc.resolve(e))):o(e)(n)},a=function(t,e,o){return function(a){var c="number"==typeof e,u=a.selection.$from,d=c?a.doc.resolve(e):l(a.selection)?a.doc.resolve(u.pos+1):u,h=d.parent;if(l(a.selection)&&o&&a!==(a=r(t)(a)))return a;if(m(h)&&a!==(a=n(h.type,t)(a))){var f=i(t)?d.before(d.depth):d.pos;return s(t,f,a)}if(v(d,t)){a.insert(d.pos,t);var g=c?d.pos:i(t)?a.selection.$anchor.pos-1:a.selection.$anchor.pos;return p(s(t,g,a))}for(var y=d.depth;y>0;y--){var b=d.after(y),w=a.doc.resolve(b);if(v(w,t))return a.insert(b,t),p(s(t,b,a))}return a}},l=function(t){return t instanceof Pl.NodeSelection},c=function(t,e){return Array.isArray(t)&&t.indexOf(e.type)>-1||e.type===t},p=function(t){return Object.assign(Object.create(t),t).setTime(Date.now())},u=function(t,e){return function(n){var r=n.doc.nodeAt(t),i=n.doc.resolve(t);if(d(i,e)){var s=(n=n.replaceWith(t,t+r.nodeSize,e)).selection.$from.pos-1;return n=o(Math.max(s,0),-1)(n),n=o(n.selection.$from.start())(n),p(n)}return n}},d=function(t,e){var n=t.node(t.depth);return n&&n.type.validContent(e instanceof Qd.Fragment?e:Qd.Fragment.from(e))},h=function(t){return function(e){var n=e.doc.nodeAt(t);return p(e.delete(t,t+n.nodeSize))}},f=function(t){if(t.cached.tableNodeTypes)return t.cached.tableNodeTypes;var e={};return Object.keys(t.nodes).forEach((function(n){var r=t.nodes[n];r.spec.tableRole&&(e[r.spec.tableRole]=r)})),t.cached.tableNodeTypes=e,e},v=function(t,e){var n=t.index();return e instanceof Qd.Fragment?t.parent.canReplace(n,n,e):e instanceof Qd.Node&&t.parent.canReplaceWith(n,n,e.type)},m=function(t){return!t||"paragraph"===t.type.name&&2===t.nodeSize},g=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e?t.createChecked(null,e):t.createAndFill()},y=function(t){return function(e){for(var n=th.TableMap.get(e.$anchorCell.node(-1)),r=e.$anchorCell.start(-1),o=n.cellsInRect(t),i=n.cellsInRect(n.rectBetween(e.$anchorCell.pos-r,e.$headCell.pos-r)),s=0,a=o.length;s<a;s++)if(-1===i.indexOf(o[s]))return!1;return!0}},b=function(t){return t[0].map((function(e,n){return t.map((function(t){return t[n]}))}))},w=function(t){for(var e=th.TableMap.get(t),n=[],r=0;r<e.height;r++){for(var o=[],i={},s=0;s<e.width;s++){var a=e.map[r*e.width+s],l=t.nodeAt(a),c=e.findCell(a);i[a]||c.top!==r?o.push(null):(i[a]=!0,o.push(l))}n.push(o)}return n},x=function(t,e){for(var n=[],r=th.TableMap.get(t),o=0;o<r.height;o++){for(var i=t.child(o),s=[],a=0;a<r.width;a++)if(e[o][a]){var l=r.map[o*r.width+a],c=e[o][a],p=t.nodeAt(l).type.createChecked(Object.assign({},c.attrs),c.content,c.marks);s.push(p)}n.push(i.type.createChecked(i.attrs,s,i.marks))}return t.type.createChecked(t.attrs,n,t.marks)},S=function(t,e,n,r){var o=e[0]>n[0]?-1:1,i=t.splice(e[0],e.length),s=i.length%2==0?1:0,a=void 0;return a=-1===r&&1===o?n[0]-1:1===r&&-1===o?n[n.length-1]-s+1:-1===o?n[0]:n[n.length-1]-s,t.splice.apply(t,[a,0].concat(i)),t},k=function(t,e,n,r){var o="Target position is invalid, you can't move the "+r+" "+t+" to "+e+", the target can't be split. You could use tryToFit option.";if(1==(t>e?-1:1)){if(-1!==n.slice(0,n.length-1).indexOf(e))throw new Error(o)}else if(-1!==n.slice(1).indexOf(e))throw new Error(o);return!0},C=function(t){return function(e){var n=e.$from;return O(n,t)}},O=function(t,e){for(var n=t.depth;n>0;n--){var r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}},M=function(t,e){return function(n){var r=C(t)(n);if(r)return N(r.pos,e)}},T=function(t){return function(e){return!!C(t)(e)}},_=function(t){return function(e){return C((function(e){return c(t,e)}))(e)}},A=function(t){var e=t.$from.nodeBefore,n=Pl.Selection.findFrom(t.$from,-1);if(n&&e){var r=_(e.type)(n);return r?r.pos:n.$from.pos}},N=function(t,e){var n=e(t),r=n.node.childNodes[n.offset];return n.node.nodeType===Node.TEXT_NODE?n.node.parentNode:r&&r.nodeType!==Node.TEXT_NODE?r:n.node},E=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t)throw new Error('Invalid "node" parameter');var n=[];return t.descendants((function(t,r){if(n.push({node:t,pos:r}),!e)return!1})),n},R=function(t,e,n){if(!t)throw new Error('Invalid "node" parameter');if(!e)throw new Error('Invalid "predicate" parameter');return E(t,n).filter((function(t){return e(t.node)}))},D=function(t,e,n){return R(t,(function(t){return t.type===e}),n)},I=function(t){return C((function(t){return t.type.spec.tableRole&&"table"===t.type.spec.tableRole}))(t)},P=function(t){return t instanceof th.CellSelection},$=function(t){if(P(t)){var e=th.TableMap.get(t.$anchorCell.node(-1));return y({left:0,right:e.width,top:0,bottom:e.height})(t)}return!1},L=function(t){return function(e){var n=I(e);if(n){var r=th.TableMap.get(n.node);return(Array.isArray(t)?t:Array.from([t])).reduce((function(t,e){if(e>=0&&e<=r.width-1){var o=r.cellsInRect({left:e,right:e+1,top:0,bottom:r.height});return t.concat(o.map((function(t){var e=n.node.nodeAt(t),r=t+n.start;return{pos:r,start:r+1,node:e}})))}}),[])}}},z=function(t){return function(e){var n=I(e);if(n){var r=th.TableMap.get(n.node);return(Array.isArray(t)?t:Array.from([t])).reduce((function(t,e){if(e>=0&&e<=r.height-1){var o=r.cellsInRect({left:0,right:r.width,top:e,bottom:e+1});return t.concat(o.map((function(t){var e=n.node.nodeAt(t),r=t+n.start;return{pos:r,start:r+1,node:e}})))}}),[])}}},B=function(t){return function(e,n){return function(r){var o=I(r.selection),i="row"===t;if(o){var s=th.TableMap.get(o.node);if(e>=0&&e<(i?s.height:s.width)){var a=i?0:e,l=i?e:0,c=i?s.width:e+1,u=i?e+1:s.height;if(n){var d=K(r.selection.$from);if(!d)return r;var h=s.findCell(d.pos-o.start);i?(l=Math.min(l,h.top),u=Math.max(u,h.bottom)):(a=Math.min(a,h.left),c=Math.max(c,h.right))}var f=s.cellsInRect({left:a,top:l,right:i?c:a+1,bottom:i?l+1:u}),v=u-l==1?f:s.cellsInRect({left:i?a:c-1,top:i?u-1:l,right:c,bottom:u}),m=o.start+f[0],g=o.start+v[v.length-1],y=r.doc.resolve(m),b=r.doc.resolve(g);return p(r.setSelection(new th.CellSelection(b,y)))}}return r}}},j=B("column"),V=B("row"),F=function(t){return function(e){var n=I(e.selection);if(n){var r=th.TableMap.get(n.node);if(t>=0&&t<=r.height){for(var o=n.node,i=f(o.type.schema),s=n.start,l=0;l<t+1;l++)s+=o.child(l).nodeSize;var c=o.child(t),p=[],u=0;if(c.forEach((function(t){1===t.attrs.rowspan&&(u+=t.attrs.colspan,p.push(i[t.type.spec.tableRole].createAndFill(t.attrs,t.marks)))})),u<r.width){for(var d=[],h=function(n){var r=G(n,(function(e,r){var o=e.node.attrs.rowspan;return o>1&&n+o>t}))(e);d.push.apply(d,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(r))},v=t;v>=0;v--)h(v);d.length&&d.forEach((function(t){e=J(t,{rowspan:t.node.attrs.rowspan+1})(e)}))}return a(i.row.create(c.attrs,p),s)(e)}}return e}},H=function(t){return function(e){var n=I(e.selection);if(n){var r=th.TableMap.get(n.node);if(0===t&&1===r.width)return W(e);if(t>=0&&t<=r.width)return th.removeColumn(e,{map:r,tableStart:n.start,table:n.node},t),p(e)}return e}},q=function(t){return function(e){var n=I(e.selection);if(n){var r=th.TableMap.get(n.node);if(0===t&&1===r.height)return W(e);if(t>=0&&t<=r.height)return th.removeRow(e,{map:r,tableStart:n.start,table:n.node},t),p(e)}return e}},W=function(t){for(var e=t.selection.$from,n=e.depth;n>0;n--)if("table"===e.node(n).type.spec.tableRole)return p(t.delete(e.before(n),e.after(n)));return t},J=function(t,e){return function(n){return t?(n.setNodeMarkup(t.pos,null,Object.assign({},t.node.attrs,e)),p(n)):n}},K=function(t){return O(t,(function(t){return t.type.spec.tableRole&&/cell/i.test(t.type.spec.tableRole)}))},U=function(t){var e=K(t);if(e){var n=function(t){return O(t,(function(t){return t.type.spec.tableRole&&/table/i.test(t.type.spec.tableRole)}))}(t),r=th.TableMap.get(n.node),o=e.pos-n.start;return r.rectBetween(o,o)}},G=function(t,e){return function(n){var r=[],o=z(t)(n.selection);if(o)for(var i=o.length-1;i>=0;i--)e(o[i],n)&&r.push(o[i]);return r}},X=function(t){return function(e){for(var n=t,r=t,o=function(t){var o=L(t)(e.selection);o&&o.forEach((function(e){var o=e.node.attrs.colspan+t-1;o>=n&&(n=t),o>r&&(r=o)}))},i=t;i>=0;i--)o(i);var s=function(t){var n=L(t)(e.selection);n&&n.forEach((function(e){var n=e.node.attrs.colspan+t-1;e.node.attrs.colspan>1&&n>r&&(r=n)}))};for(i=t;i<=r;i++)s(i);var a=[];for(i=n;i<=r;i++){var l=L(i)(e.selection);l&&l.length&&a.push(i)}n=a[0],r=a[a.length-1];for(var c=L(n)(e.selection),p=z(0)(e.selection),u=e.doc.resolve(c[c.length-1].pos),d=void 0,h=r;h>=n;h--){var f=L(h)(e.selection);if(f&&f.length){for(var v=p.length-1;v>=0;v--)if(p[v].pos===f[0].pos){d=f[0];break}if(d)break}}return{$anchor:u,$head:e.doc.resolve(d.pos),indexes:a}}},Y=function(t){return function(e){for(var n=t,r=t,o=function(t){z(t)(e.selection).forEach((function(e){var o=e.node.attrs.rowspan+t-1;o>=n&&(n=t),o>r&&(r=o)}))},i=t;i>=0;i--)o(i);var s=function(t){z(t)(e.selection).forEach((function(e){var n=e.node.attrs.rowspan+t-1;e.node.attrs.rowspan>1&&n>r&&(r=n)}))};for(i=t;i<=r;i++)s(i);var a=[];for(i=n;i<=r;i++){var l=z(i)(e.selection);l&&l.length&&a.push(i)}n=a[0],r=a[a.length-1];for(var c=z(n)(e.selection),p=L(0)(e.selection),u=e.doc.resolve(c[c.length-1].pos),d=void 0,h=r;h>=n;h--){var f=z(h)(e.selection);if(f&&f.length){for(var v=p.length-1;v>=0;v--)if(p[v].pos===f[0].pos){d=f[0];break}if(d)break}}return{$anchor:u,$head:e.doc.resolve(d.pos),indexes:a}}};e.isNodeSelection=l,e.canInsert=v,e.convertTableNodeToArrayOfRows=w,e.convertArrayOfRowsToTableNode=x,e.findParentNode=C,e.findParentNodeClosestToPos=O,e.findParentDomRef=M,e.hasParentNode=T,e.findParentNodeOfType=_,e.findParentNodeOfTypeClosestToPos=function(t,e){return O(t,(function(t){return c(e,t)}))},e.hasParentNodeOfType=function(t){return function(e){return T((function(e){return c(t,e)}))(e)}},e.findParentDomRefOfType=function(t,e){return function(n){return M((function(e){return c(t,e)}),e)(n)}},e.findSelectedNodeOfType=function(t){return function(e){if(l(e)){var n=e.node,r=e.$from;if(c(t,n))return{node:n,pos:r.pos,depth:r.depth}}}},e.findPositionOfNodeBefore=A,e.findDomRefAtPos=N,e.flatten=E,e.findChildren=R,e.findTextNodes=function(t,e){return R(t,(function(t){return t.isText}),e)},e.findInlineNodes=function(t,e){return R(t,(function(t){return t.isInline}),e)},e.findBlockNodes=function(t,e){return R(t,(function(t){return t.isBlock}),e)},e.findChildrenByAttr=function(t,e,n){return R(t,(function(t){return!!e(t.attrs)}),n)},e.findChildrenByType=D,e.findChildrenByMark=function(t,e,n){return R(t,(function(t){return e.isInSet(t.marks)}),n)},e.contains=function(t,e){return!!D(t,e).length},e.findTable=I,e.isCellSelection=P,e.getSelectionRect=function(t){if(P(t)){var e=t.$anchorCell.start(-1);return th.TableMap.get(t.$anchorCell.node(-1)).rectBetween(t.$anchorCell.pos-e,t.$headCell.pos-e)}},e.isColumnSelected=function(t){return function(e){if(P(e)){var n=th.TableMap.get(e.$anchorCell.node(-1));return y({left:t,right:t+1,top:0,bottom:n.height})(e)}return!1}},e.isRowSelected=function(t){return function(e){if(P(e)){var n=th.TableMap.get(e.$anchorCell.node(-1));return y({left:0,right:n.width,top:t,bottom:t+1})(e)}return!1}},e.isTableSelected=$,e.getCellsInColumn=L,e.getCellsInRow=z,e.getCellsInTable=function(t){var e=I(t);if(e){var n=th.TableMap.get(e.node);return n.cellsInRect({left:0,right:n.width,top:0,bottom:n.height}).map((function(t){var n=e.node.nodeAt(t),r=t+e.start;return{pos:r,start:r+1,node:n}}))}},e.selectColumn=j,e.selectRow=V,e.selectTable=function(t){var e=I(t.selection);if(e){var n=th.TableMap.get(e.node).map;if(n&&n.length){var r=e.start+n[0],o=e.start+n[n.length-1],i=t.doc.resolve(r),s=t.doc.resolve(o);return p(t.setSelection(new th.CellSelection(s,i)))}}return t},e.emptyCell=function(t,e){return function(n){if(t){var r=f(e).cell.createAndFill().content;if(!t.node.content.eq(r))return n.replaceWith(t.pos+1,t.pos+t.node.nodeSize,r),p(n)}return n}},e.addColumnAt=function(t){return function(e){var n=I(e.selection);if(n){var r=th.TableMap.get(n.node);if(t>=0&&t<=r.width)return p(th.addColumn(e,{map:r,tableStart:n.start,table:n.node},t))}return e}},e.moveRow=function(t,e,n){return function(r){var o=Object.assign({tryToFit:!1,direction:0},n),i=I(r.selection);if(!i)return r;var s=Y(t)(r).indexes,a=Y(e)(r).indexes;if(s.indexOf(e)>-1)return r;!o.tryToFit&&a.length>1&&k(t,e,a,"row");var l=function(t,e,n,r){var o=w(t.node);return o=S(o,e,n,r),x(t.node,o)}(i,s,a,o.direction);return p(r).replaceWith(i.pos,i.pos+i.node.nodeSize,l)}},e.moveColumn=function(t,e,n){return function(r){var o=Object.assign({tryToFit:!1,direction:0},n),i=I(r.selection);if(!i)return r;var s=X(t)(r).indexes,a=X(e)(r).indexes;if(s.indexOf(e)>-1)return r;!o.tryToFit&&a.length>1&&k(t,e,a,"column");var l=function(t,e,n,r){var o=b(w(t.node));return o=S(o,e,n,r),o=b(o),x(t.node,o)}(i,s,a,o.direction);return p(r).replaceWith(i.pos,i.pos+i.node.nodeSize,l)}},e.addRowAt=function(t,e){return function(n){var r=I(n.selection);if(r){var o=th.TableMap.get(r.node),i=t-1;if(e&&i>=0)return p(F(i)(n));if(t>=0&&t<=o.height)return p(th.addRow(n,{map:o,tableStart:r.start,table:r.node},t))}return n}},e.cloneRowAt=F,e.removeColumnAt=H,e.removeRowAt=q,e.removeTable=W,e.removeSelectedColumns=function(t){var e=t.selection;if($(e))return W(t);if(P(e)){var n=I(e);if(n){var r=th.TableMap.get(n.node),o=r.rectBetween(e.$anchorCell.pos-n.start,e.$headCell.pos-n.start);if(0==o.left&&o.right==r.width)return!1;for(var i=Object.assign({},o,{map:r,table:n.node,tableStart:n.start}),s=i.right-1;th.removeColumn(t,i,s),s!==i.left;s--)i.table=i.tableStart?t.doc.nodeAt(i.tableStart-1):t.doc,i.map=th.TableMap.get(i.table);return p(t)}}return t},e.removeSelectedRows=function(t){var e=t.selection;if($(e))return W(t);if(P(e)){var n=I(e);if(n){var r=th.TableMap.get(n.node),o=r.rectBetween(e.$anchorCell.pos-n.start,e.$headCell.pos-n.start);if(0==o.top&&o.bottom==r.height)return!1;for(var i=Object.assign({},o,{map:r,table:n.node,tableStart:n.start}),s=i.bottom-1;th.removeRow(t,i,s),s!==i.top;s--)i.table=i.tableStart?t.doc.nodeAt(i.tableStart-1):t.doc,i.map=th.TableMap.get(i.table);return p(t)}}return t},e.removeColumnClosestToPos=function(t){return function(e){var n=U(t);return n?H(n.left)(o(t.pos)(e)):e}},e.removeRowClosestToPos=function(t){return function(e){var n=U(t);return n?q(n.top)(o(t.pos)(e)):e}},e.forEachCellInColumn=function(t,e,n){return function(r){var o=L(t)(r.selection);if(o){for(var i=o.length-1;i>=0;i--)r=e(o[i],r);if(n){var s=r.doc.resolve(r.mapping.map(o[o.length-1].pos));r.setSelection(Pl.Selection.near(s))}return p(r)}return r}},e.forEachCellInRow=function(t,e,n){return function(r){var o=z(t)(r.selection);if(o){for(var i=o.length-1;i>=0;i--)r=e(o[i],r);if(n){var s=r.doc.resolve(r.mapping.map(o[o.length-1].pos));r.setSelection(Pl.Selection.near(s))}}return r}},e.setCellAttrs=J,e.createTable=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=f(t),s=i.cell,a=i.header_cell,l=i.row,c=i.table,p=[],u=[],d=0;d<n;d++)p.push(g(s,o)),r&&u.push(g(a,o));for(var h=[],v=0;v<e;v++)h.push(l.createChecked(null,r&&0===v?u:p));return c.createChecked(null,h)},e.findCellClosestToPos=K,e.findCellRectClosestToPos=U,e.getSelectionRangeInColumn=X,e.getSelectionRangeInRow=Y,e.removeParentNodeOfType=function(t){return function(e){var n=_(t)(e.selection);return n?h(n.pos)(e):e}},e.replaceParentNodeOfType=n,e.removeSelectedNode=function(t){if(l(t.selection)){var e=t.selection.$from.pos,n=t.selection.$to.pos;return p(t.delete(e,n))}return t},e.replaceSelectedNode=r,e.setTextSelection=o,e.safeInsert=a,e.setParentNodeMarkup=function(t,e,n,r){return function(o){var i=_(t)(o.selection);return i?p(o.setNodeMarkup(i.pos,e,Object.assign({},i.node.attrs,n),r)):o}},e.selectParentNodeOfType=function(t){return function(e){if(!l(e.selection)){var n=_(t)(e.selection);if(n)return p(e.setSelection(Pl.NodeSelection.create(e.doc,n.pos)))}return e}},e.removeNodeBefore=function(t){var e=A(t.selection);return"number"==typeof e?h(e)(t):t}}));(Yd=eh)&&Yd.__esModule&&Object.prototype.hasOwnProperty.call(Yd,"default")&&Yd.default,eh.isNodeSelection,eh.canInsert,eh.convertTableNodeToArrayOfRows,eh.convertArrayOfRowsToTableNode,eh.findParentNode,eh.findParentNodeClosestToPos,eh.findParentDomRef,eh.hasParentNode,eh.findParentNodeOfType,eh.findParentNodeOfTypeClosestToPos,eh.hasParentNodeOfType,eh.findParentDomRefOfType,eh.findSelectedNodeOfType,eh.findPositionOfNodeBefore,eh.findDomRefAtPos,eh.flatten,eh.findChildren,eh.findTextNodes,eh.findInlineNodes,eh.findBlockNodes,eh.findChildrenByAttr,eh.findChildrenByType,eh.findChildrenByMark,eh.contains,eh.findTable,eh.isCellSelection,eh.getSelectionRect,eh.isColumnSelected,eh.isRowSelected,eh.isTableSelected,eh.getCellsInColumn,eh.getCellsInRow,eh.getCellsInTable,eh.selectColumn,eh.selectRow,eh.selectTable,eh.emptyCell,eh.addColumnAt,eh.moveRow,eh.moveColumn,eh.addRowAt,eh.cloneRowAt,eh.removeColumnAt,eh.removeRowAt,eh.removeTable,eh.removeSelectedColumns,eh.removeSelectedRows,eh.removeColumnClosestToPos,eh.removeRowClosestToPos,eh.forEachCellInColumn,eh.forEachCellInRow,eh.setCellAttrs,eh.createTable,eh.findCellClosestToPos,eh.findCellRectClosestToPos,eh.getSelectionRangeInColumn,eh.getSelectionRangeInRow,eh.removeParentNodeOfType,eh.replaceParentNodeOfType,eh.removeSelectedNode,eh.replaceSelectedNode,eh.setTextSelection,eh.safeInsert,eh.setParentNodeMarkup,eh.selectParentNodeOfType,eh.removeNodeBefore;var nh,rh=lr({render:function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"tiptap-vuetify-todo-item-view",attrs:{"data-type":this.node.type.name,"data-done":this.node.attrs.done.toString(),"data-drag-handle":""}},[e("VCheckbox",{staticClass:"mr-2 mt-3 pt-1",attrs:{"input-value":this.node.attrs.done,"hide-details":""},on:{change:this.onChange}}),this._v(" "),e("div",{ref:"content",staticClass:"todo-content",attrs:{contenteditable:this.view.editable.toString()}})],1)},staticRenderFns:[]},void 0,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.onChange=function(){this.updateAttrs({done:!this.node.attrs.done})},_([Un({type:Object,required:!0}),A("design:type",Object)],e.prototype,"node",void 0),_([Un({type:Object,required:!0}),A("design:type",Object)],e.prototype,"view",void 0),_([Un({type:Function,required:!0}),A("design:type",Function)],e.prototype,"updateAttrs",void 0),_([Jn({components:{VCheckbox:k.a}})],e)}(o.a),void 0,!1,void 0,void 0,void 0),oh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"todo_item"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultOptions",{get:function(){return{nested:!1}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return rh},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){var t=this;return{attrs:{done:{default:!1}},draggable:!0,content:this.options.nested?"(paragraph|todo_list)+":"paragraph+",toDOM:function(e){var n=e.attrs.done;return["li",{"data-type":t.name,"data-done":n.toString()},["span",{class:"todo-checkbox",contenteditable:"false"}],["div",{class:"todo-content"},0]]},parseDOM:[{priority:51,tag:'[data-type="'+this.name+'"]',getAttrs:function(t){return{done:"true"===t.getAttribute("data-done")}}}]}},enumerable:!0,configurable:!0}),e.prototype.keys=function(t){var e,n=t.type;return{Enter:(e=n,function(t,n){var r=t.selection,o=r.$from,i=r.$to,s=r.node;if(s&&s.isBlock||o.depth<2||!o.sameParent(i))return!1;var a=o.node(-1);if(a.type!=e)return!1;if(0==o.parent.content.size){if(2==o.depth||o.node(-3).type!=e||o.index(-2)!=o.node(-2).childCount-1)return!1;if(n){for(var l=As.empty,c=o.index(-1)>0,p=o.depth-(c?1:2);p>=o.depth-3;p--)l=As.from(o.node(p).copy(l));l=l.append(As.from(e.createAndFill()));var u=t.tr.replace(o.before(c?null:-1),o.after(-3),new $s(l,c?3:2,2));u.setSelection(t.selection.constructor.near(u.doc.resolve(o.pos+(c?3:2)))),n(u.scrollIntoView())}return!0}var d=i.pos==o.end()?a.contentMatchAt(o.indexAfter(-1)).defaultType:null,h=t.tr.delete(o.pos,i.pos),f=d&&[{type:e},{type:d}];return f||(f=[{type:e},null]),!!function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=t.resolve(e),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var a=o.depth-1,l=n-2;a>i;a--,l--){var c=o.node(a),p=o.index(a);if(c.type.spec.isolating)return!1;var u=c.content.cutByIndex(p,c.childCount),d=r&&r[l]||c;if(d!=c&&(u=u.replaceChild(0,d.type.create(d.attrs))),!c.canReplace(p+1,c.childCount))return!1}var h=o.indexAfter(i),f=r&&r[0];return o.node(i).canReplaceWith(h,h,f?f.type:o.node(i+1).type)}(h.doc,o.pos,2,f)&&(n&&n(h.split(o.pos,2,f).scrollIntoView()),!0)}),Tab:this.options.nested?Ul(n):function(){},"Shift-Tab":Kl(n)}},e}(i.g),ih=(function(t){function e(e){return t.call(this,e,oh)||this}M(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){return[]},enumerable:!0,configurable:!0})}(Zo),"context"),sh=lr({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{value:t.value,"max-width":"500px"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v("\n        Tables\n      ")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{icon:""},on:{click:t.close}},[n("v-icon",[t._v(t._s(t.COMMON_ICONS.close[t.$tiptapVuetify.iconsGroup]))])],1)],1),t._v(" "),n("v-card-text",[n("v-text-field",{attrs:{label:"Rows count"},model:{value:t.form.rowsCount,callback:function(e){t.$set(t.form,"rowsCount",e)},expression:"form.rowsCount"}}),t._v(" "),n("v-text-field",{attrs:{label:"Cols count"},model:{value:t.form.colsCount,callback:function(e){t.$set(t.form,"colsCount",e)},expression:"form.colsCount"}}),t._v(" "),n("v-checkbox",{attrs:{label:"With header row"},model:{value:t.form.withHeaderRow,callback:function(e){t.$set(t.form,"withHeaderRow",e)},expression:"form.withHeaderRow"}})],1),t._v(" "),n("v-card-actions",[n("v-btn",{attrs:{text:""},on:{click:t.close}},[t._v("\n        Close\n      ")]),t._v(" "),n("v-btn",{attrs:{text:""},on:{click:t.apply}},[t._v("\n        Apply\n      ")])],1)],1)],1)},staticRenderFns:[]},void 0,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.COMMON_ICONS=Ko,e.form={rowsCount:2,colsCount:3,withHeaderRow:!1},e}return M(e,t),e.prototype.apply=function(){this[ih].commands.createTable({rowsCount:this.form.rowsCount,colsCount:this.form.colsCount,withHeaderRow:this.form.withHeaderRow}),this.close(),this.editor.focus()},e.prototype.close=function(){this.$destroy(),this.$el.parentNode.removeChild(this.$el)},"value","nativeExtensionName",ih,"editor","imageSourcesOverride",_([Un({type:Boolean,default:!1}),A("design:type",Boolean)],e.prototype,"value",void 0),_([Un({type:String,required:!0}),A("design:type",String)],e.prototype,"nativeExtensionName",void 0),_([Un({type:Object,required:!0}),A("design:type",Object)],e.prototype,"context",void 0),_([Un({type:Object,required:!0}),A("design:type",Object)],e.prototype,"editor",void 0),_([Un({type:Boolean,required:!1}),A("design:type",Object)],e.prototype,"imageSourcesOverride",void 0),_([Jn({components:{VRow:v.a,VCol:m.a,VDialog:u.a,VCard:p.a,VCardTitle:d.d,VCardText:d.c,VCardActions:d.a,VBtn:a.a,VSpacer:h.a,VIcon:l.a,VTextField:f.a,VCheckbox:k.a}})],e)}(Fn(Wr)),void 0,!1,void 0,void 0,void 0),ah=(function(t){function e(e){return t.call(this,e,C.q)||this}M(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){var t;return[{render:new pr({tooltip:"TODO",icons:(t={},t.md=new or("table"),t.fa=new or("fas fa-table"),t.mdi=new or("mdi-table"),t.mdiSvg=new or("M8.5,13.5L11,16.5L14.5,12L19,18H5M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19Z"),t),nativeExtensionName:"table",onClick:function(t){var e=t.context,n=t.editor;return N(this,void 0,void 0,(function(){var t,r;return E(this,(function(i){return t=o.a.extend(sh),(r=new t({vuetify:o.a.prototype.tiptapVuetifyPlugin.vuetify,propsData:{value:!0,nativeExtensionName:"table",context:e,editor:n}})).$mount(),document.querySelector("body").appendChild(r.$el),[2]}))}))}})}]},enumerable:!0,configurable:!0})}(Zo),function(t){function e(e){return t.call(this,e,C.r)||this}M(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){return[]},enumerable:!0,configurable:!0})}(Zo),function(t){function e(e){return t.call(this,e,C.s)||this}M(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){return[]},enumerable:!0,configurable:!0})}(Zo),function(t){function e(e){return t.call(this,e,C.t)||this}M(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){return[]},enumerable:!0,configurable:!0})}(Zo),new(function(){function t(){this.installed=!1}return Object.defineProperty(t.prototype,"vuetifyLang",{get:function(){return this.vuetify.framework.lang.current},enumerable:!0,configurable:!0}),t.prototype.install=function(t,e){if(e&&e.vuetify){var n=e.vuetify,r=e.iconsGroup,o=void 0===r?"md":r;t.prototype.tiptapVuetifyPlugin=ah,t.prototype.$tiptapVuetify={iconsGroup:o},this.vuetify=n,this.installed=!0}else sr.error('Please, specify in options the Vuetify Object ("vuetify" property)')},t}()));nh=null,"undefined"!=typeof window?nh=window:void 0!==t&&(nh=t),nh&&nh.Vue&&(nh.Vue.use(ah,T({vuetify:nh.vuetify},nh.tiptapVuetifyPluginOptions)),nh.Vue.component("tiptap-vuetify",Jo))}).call(this,n(51))},304:function(t,e,n){"use strict";n.r(e),n.d(e,"CellSelection",(function(){return I})),n.d(e,"TableMap",(function(){return f})),n.d(e,"TableView",(function(){return Mt})),n.d(e,"__clipCells",(function(){return B})),n.d(e,"__insertCells",(function(){return F})),n.d(e,"__pastedCells",(function(){return L})),n.d(e,"addColSpan",(function(){return R})),n.d(e,"addColumn",(function(){return rt})),n.d(e,"addColumnAfter",(function(){return it})),n.d(e,"addColumnBefore",(function(){return ot})),n.d(e,"addRow",(function(){return ct})),n.d(e,"addRowAfter",(function(){return ut})),n.d(e,"addRowBefore",(function(){return pt})),n.d(e,"cellAround",(function(){return x})),n.d(e,"colCount",(function(){return _})),n.d(e,"columnIsHeader",(function(){return D})),n.d(e,"columnResizing",(function(){return At})),n.d(e,"columnResizingPluginKey",(function(){return _t})),n.d(e,"deleteColumn",(function(){return at})),n.d(e,"deleteRow",(function(){return ht})),n.d(e,"deleteTable",(function(){return Ot})),n.d(e,"findCell",(function(){return T})),n.d(e,"fixTables",(function(){return et})),n.d(e,"fixTablesKey",(function(){return tt})),n.d(e,"goToNextCell",(function(){return Ct})),n.d(e,"handlePaste",(function(){return G})),n.d(e,"inSameTable",(function(){return M})),n.d(e,"isInTable",(function(){return S})),n.d(e,"mergeCells",(function(){return vt})),n.d(e,"moveCellForward",(function(){return O})),n.d(e,"nextCell",(function(){return A})),n.d(e,"pointsAtCell",(function(){return C})),n.d(e,"removeColSpan",(function(){return E})),n.d(e,"removeColumn",(function(){return st})),n.d(e,"removeRow",(function(){return dt})),n.d(e,"rowIsHeader",(function(){return lt})),n.d(e,"selectedRect",(function(){return nt})),n.d(e,"selectionCell",(function(){return k})),n.d(e,"setAttr",(function(){return N})),n.d(e,"setCellAttr",(function(){return yt})),n.d(e,"splitCell",(function(){return mt})),n.d(e,"splitCellWithType",(function(){return gt})),n.d(e,"tableEditing",(function(){return Pt})),n.d(e,"tableEditingKey",(function(){return w})),n.d(e,"tableNodeTypes",(function(){return b})),n.d(e,"tableNodes",(function(){return y})),n.d(e,"toggleHeader",(function(){return wt})),n.d(e,"toggleHeaderCell",(function(){return kt})),n.d(e,"toggleHeaderColumn",(function(){return St})),n.d(e,"toggleHeaderRow",(function(){return xt})),n.d(e,"updateColumnsOnResize",(function(){return Tt}));var r,o,i=n(279),s=n(280),a=n(297),l=n(286),c=n(281);if("undefined"!=typeof WeakMap){var p=new WeakMap;r=function(t){return p.get(t)},o=function(t,e){return p.set(t,e),e}}else{var u=[],d=0;r=function(t){for(var e=0;e<u.length;e+=2)if(u[e]==t)return u[e+1]},o=function(t,e){return 10==d&&(d=0),u[d++]=t,u[d++]=e}}var h=function(t,e,n,r){this.left=t,this.top=e,this.right=n,this.bottom=r},f=function(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r};function v(t){if(t.colwidth)return t.colwidth.slice();for(var e=[],n=0;n<t.colspan;n++)e.push(0);return e}function m(t,e){var n=t.getAttribute("data-colwidth"),r=n&&/^\d+(,\d+)*$/.test(n)?n.split(",").map((function(t){return Number(t)})):null,o=Number(t.getAttribute("colspan")||1),i={colspan:o,rowspan:Number(t.getAttribute("rowspan")||1),colwidth:r&&r.length==o?r:null};for(var s in e){var a=e[s].getFromDOM,l=a&&a(t);null!=l&&(i[s]=l)}return i}function g(t,e){var n={};for(var r in 1!=t.attrs.colspan&&(n.colspan=t.attrs.colspan),1!=t.attrs.rowspan&&(n.rowspan=t.attrs.rowspan),t.attrs.colwidth&&(n["data-colwidth"]=t.attrs.colwidth.join(",")),e){var o=e[r].setDOMAttr;o&&o(t.attrs[r],n)}return n}function y(t){var e=t.cellAttributes||{},n={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(var r in e)n[r]={default:e[r].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:t.tableGroup,parseDOM:[{tag:"table"}],toDOM:function(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM:function(){return["tr",0]}},table_cell:{content:t.cellContent,attrs:n,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:function(t){return m(t,e)}}],toDOM:function(t){return["td",g(t,e),0]}},table_header:{content:t.cellContent,attrs:n,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:function(t){return m(t,e)}}],toDOM:function(t){return["th",g(t,e),0]}}}}function b(t){var e=t.cached.tableNodeTypes;if(!e)for(var n in e=t.cached.tableNodeTypes={},t.nodes){var r=t.nodes[n],o=r.spec.tableRole;o&&(e[o]=r)}return e}f.prototype.findCell=function(t){for(var e=0;e<this.map.length;e++){var n=this.map[e];if(n==t){for(var r=e%this.width,o=e/this.width|0,i=r+1,s=o+1,a=1;i<this.width&&this.map[e+a]==n;a++)i++;for(var l=1;s<this.height&&this.map[e+this.width*l]==n;l++)s++;return new h(r,o,i,s)}}throw new RangeError("No cell with offset "+t+" found")},f.prototype.colCount=function(t){for(var e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError("No cell with offset "+t+" found")},f.prototype.nextCell=function(t,e,n){var r=this.findCell(t),o=r.left,i=r.right,s=r.top,a=r.bottom;return"horiz"==e?(n<0?0==o:i==this.width)?null:this.map[s*this.width+(n<0?o-1:i)]:(n<0?0==s:a==this.height)?null:this.map[o+this.width*(n<0?s-1:a)]},f.prototype.rectBetween=function(t,e){var n=this.findCell(t),r=n.left,o=n.right,i=n.top,s=n.bottom,a=this.findCell(e),l=a.left,c=a.right,p=a.top,u=a.bottom;return new h(Math.min(r,l),Math.min(i,p),Math.max(o,c),Math.max(s,u))},f.prototype.cellsInRect=function(t){for(var e=[],n={},r=t.top;r<t.bottom;r++)for(var o=t.left;o<t.right;o++){var i=r*this.width+o,s=this.map[i];n[s]||(n[s]=!0,o==t.left&&o&&this.map[i-1]==s||r==t.top&&r&&this.map[i-this.width]==s||e.push(s))}return e},f.prototype.positionAt=function(t,e,n){for(var r=0,o=0;;r++){var i=o+n.child(r).nodeSize;if(r==t){for(var s=e+t*this.width,a=(t+1)*this.width;s<a&&this.map[s]<o;)s++;return s==a?i-1:this.map[s]}o=i}},f.get=function(t){return r(t)||o(t,function(t){if("table"!=t.type.spec.tableRole)throw new RangeError("Not a table node: "+t.type.name);for(var e=function(t){for(var e=-1,n=!1,r=0;r<t.childCount;r++){var o=t.child(r),i=0;if(n)for(var s=0;s<r;s++)for(var a=t.child(s),l=0;l<a.childCount;l++){var c=a.child(l);s+c.attrs.rowspan>r&&(i+=c.attrs.colspan)}for(var p=0;p<o.childCount;p++){var u=o.child(p);i+=u.attrs.colspan,u.attrs.rowspan>1&&(n=!0)}-1==e?e=i:e!=i&&(e=Math.max(e,i))}return e}(t),n=t.childCount,r=[],o=0,i=null,s=[],a=0,l=e*n;a<l;a++)r[a]=0;for(var c=0,p=0;c<n;c++){var u=t.child(c);p++;for(var d=0;;d++){for(;o<r.length&&0!=r[o];)o++;if(d==u.childCount)break;for(var h=u.child(d),m=h.attrs,g=m.colspan,y=m.rowspan,b=m.colwidth,w=0;w<y;w++){if(w+c>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:p,n:y-w});break}for(var x=o+w*e,S=0;S<g;S++){0==r[x+S]?r[x+S]=p:(i||(i=[])).push({type:"collision",row:c,pos:p,n:g-S});var k=b&&b[S];if(k){var C=(x+S)%e*2,O=s[C];null==O||O!=k&&1==s[C+1]?(s[C]=k,s[C+1]=1):O==k&&s[C+1]++}}}o+=g,p+=h.nodeSize}for(var M=(c+1)*e,T=0;o<M;)0==r[o++]&&T++;T&&(i||(i=[])).push({type:"missing",row:c,n:T}),p++}for(var _=new f(e,n,r,i),A=!1,N=0;!A&&N<s.length;N+=2)null!=s[N]&&s[N+1]<n&&(A=!0);A&&function(t,e,n){t.problems||(t.problems=[]);for(var r=0,o={};r<t.map.length;r++){var i=t.map[r];if(!o[i]){o[i]=!0;for(var s=n.nodeAt(i),a=null,l=0;l<s.attrs.colspan;l++){var c=(r+l)%t.width,p=e[2*c];null==p||s.attrs.colwidth&&s.attrs.colwidth[l]==p||((a||(a=v(s.attrs)))[l]=p)}a&&t.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:a})}}}(_,s,t);return _}(t))};var w=new i.PluginKey("selectingCells");function x(t){for(var e=t.depth-1;e>0;e--)if("row"==t.node(e).type.spec.tableRole)return t.node(0).resolve(t.before(e+1));return null}function S(t){for(var e=t.selection.$head,n=e.depth;n>0;n--)if("row"==e.node(n).type.spec.tableRole)return!0;return!1}function k(t){var e=t.selection;return e.$anchorCell?e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell:e.node&&"cell"==e.node.type.spec.tableRole?e.$anchor:x(e.$head)||function(t){for(var e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){var r=e.type.spec.tableRole;if("cell"==r||"header_cell"==r)return t.doc.resolve(n)}for(var o=t.nodeBefore,i=t.pos;o;o=o.lastChild,i--){var s=o.type.spec.tableRole;if("cell"==s||"header_cell"==s)return t.doc.resolve(i-o.nodeSize)}}(e.$head)}function C(t){return"row"==t.parent.type.spec.tableRole&&t.nodeAfter}function O(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function M(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function T(t){return f.get(t.node(-1)).findCell(t.pos-t.start(-1))}function _(t){return f.get(t.node(-1)).colCount(t.pos-t.start(-1))}function A(t,e,n){var r=t.start(-1),o=f.get(t.node(-1)).nextCell(t.pos-r,e,n);return null==o?null:t.node(0).resolve(r+o)}function N(t,e,n){var r={};for(var o in t)r[o]=t[o];return r[e]=n,r}function E(t,e,n){void 0===n&&(n=1);var r=N(t,"colspan",t.colspan-n);return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some((function(t){return t>0}))||(r.colwidth=null)),r}function R(t,e,n){void 0===n&&(n=1);var r=N(t,"colspan",t.colspan+n);if(r.colwidth){r.colwidth=r.colwidth.slice();for(var o=0;o<n;o++)r.colwidth.splice(e,0,0)}return r}function D(t,e,n){for(var r=b(e.type.schema).header_cell,o=0;o<t.height;o++)if(e.nodeAt(t.map[n+o*t.width]).type!=r)return!1;return!0}var I=function(t){function e(e,n){void 0===n&&(n=e);var r=e.node(-1),o=f.get(r),s=e.start(-1),a=o.rectBetween(e.pos-s,n.pos-s),l=e.node(0),c=o.cellsInRect(a).filter((function(t){return t!=n.pos-s}));c.unshift(n.pos-s);var p=c.map((function(t){var e=r.nodeAt(t),n=t+s+1;return new i.SelectionRange(l.resolve(n),l.resolve(n+e.content.size))}));t.call(this,p[0].$from,p[0].$to,p),this.$anchorCell=e,this.$headCell=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(t,n){var r=t.resolve(n.map(this.$anchorCell.pos)),o=t.resolve(n.map(this.$headCell.pos));if(C(r)&&C(o)&&M(r,o)){var s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?e.rowSelection(r,o):s&&this.isColSelection()?e.colSelection(r,o):new e(r,o)}return i.TextSelection.between(r,o)},e.prototype.content=function(){for(var t=this.$anchorCell.node(-1),e=f.get(t),n=this.$anchorCell.start(-1),r=e.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),o={},i=[],a=r.top;a<r.bottom;a++){for(var l=[],c=a*e.width+r.left,p=r.left;p<r.right;p++,c++){var u=e.map[c];if(!o[u]){o[u]=!0;var d=e.findCell(u),h=t.nodeAt(u),v=r.left-d.left,m=d.right-r.right;if(v>0||m>0){var g=h.attrs;v>0&&(g=E(g,0,v)),m>0&&(g=E(g,g.colspan-m,m)),h=d.left<r.left?h.type.createAndFill(g):h.type.create(g,h.content)}if(d.top<r.top||d.bottom>r.bottom){var y=N(h.attrs,"rowspan",Math.min(d.bottom,r.bottom)-Math.max(d.top,r.top));h=d.top<r.top?h.type.createAndFill(y):h.type.create(y,h.content)}l.push(h)}}i.push(t.child(a).copy(s.Fragment.from(l)))}var b=this.isColSelection()&&this.isRowSelection()?t:i;return new s.Slice(s.Fragment.from(b),1,1)},e.prototype.replace=function(e,n){void 0===n&&(n=s.Slice.empty);for(var r=e.steps.length,o=this.ranges,i=0;i<o.length;i++){var a=o[i],l=a.$from,c=a.$to,p=e.mapping.slice(r);e.replace(p.map(l.pos),p.map(c.pos),i?s.Slice.empty:n)}var u=t.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);u&&e.setSelection(u)},e.prototype.replaceWith=function(t,e){this.replace(t,new s.Slice(s.Fragment.from(e),0,0))},e.prototype.forEachCell=function(t){for(var e=this.$anchorCell.node(-1),n=f.get(e),r=this.$anchorCell.start(-1),o=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r)),i=0;i<o.length;i++)t(e.nodeAt(o[i]),r+o[i])},e.prototype.isColSelection=function(){var t=this.$anchorCell.index(-1),e=this.$headCell.index(-1);if(Math.min(t,e)>0)return!1;var n=t+this.$anchorCell.nodeAfter.attrs.rowspan,r=e+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,r)==this.$headCell.node(-1).childCount},e.colSelection=function(t,n){void 0===n&&(n=t);var r=f.get(t.node(-1)),o=t.start(-1),i=r.findCell(t.pos-o),s=r.findCell(n.pos-o),a=t.node(0);return i.top<=s.top?(i.top>0&&(t=a.resolve(o+r.map[i.left])),s.bottom<r.height&&(n=a.resolve(o+r.map[r.width*(r.height-1)+s.right-1]))):(s.top>0&&(n=a.resolve(o+r.map[s.left])),i.bottom<r.height&&(t=a.resolve(o+r.map[r.width*(r.height-1)+i.right-1]))),new e(t,n)},e.prototype.isRowSelection=function(){var t=f.get(this.$anchorCell.node(-1)),e=this.$anchorCell.start(-1),n=t.colCount(this.$anchorCell.pos-e),r=t.colCount(this.$headCell.pos-e);if(Math.min(n,r)>0)return!1;var o=n+this.$anchorCell.nodeAfter.attrs.colspan,i=r+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,i)==t.width},e.prototype.eq=function(t){return t instanceof e&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos},e.rowSelection=function(t,n){void 0===n&&(n=t);var r=f.get(t.node(-1)),o=t.start(-1),i=r.findCell(t.pos-o),s=r.findCell(n.pos-o),a=t.node(0);return i.left<=s.left?(i.left>0&&(t=a.resolve(o+r.map[i.top*r.width])),s.right<r.width&&(n=a.resolve(o+r.map[r.width*(s.top+1)-1]))):(s.left>0&&(n=a.resolve(o+r.map[s.top*r.width])),i.right<r.width&&(t=a.resolve(o+r.map[r.width*(i.top+1)-1]))),new e(t,n)},e.prototype.toJSON=function(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}},e.fromJSON=function(t,n){return new e(t.resolve(n.anchor),t.resolve(n.head))},e.create=function(t,n,r){return void 0===r&&(r=n),new e(t.resolve(n),t.resolve(r))},e.prototype.getBookmark=function(){return new P(this.$anchorCell.pos,this.$headCell.pos)},e}(i.Selection);I.prototype.visible=!1,i.Selection.jsonID("cell",I);var P=function(t,e){this.anchor=t,this.head=e};function $(t){if(!(t.selection instanceof I))return null;var e=[];return t.selection.forEachCell((function(t,n){e.push(l.a.node(n,n+t.nodeSize,{class:"selectedCell"}))})),l.b.create(t.doc,e)}function L(t){if(!t.size)return null;for(var e=t.content,n=t.openStart,r=t.openEnd;1==e.childCount&&(n>0&&r>0||"table"==e.firstChild.type.spec.tableRole);)n--,r--,e=e.firstChild.content;var o=e.firstChild,i=o.type.spec.tableRole,a=o.type.schema,l=[];if("row"==i)for(var c=0;c<e.childCount;c++){var p=e.child(c).content,u=c?0:Math.max(0,n-1),d=c<e.childCount-1?0:Math.max(0,r-1);(u||d)&&(p=z(b(a).row,new s.Slice(p,u,d)).content),l.push(p)}else{if("cell"!=i&&"header_cell"!=i)return null;l.push(n||r?z(b(a).row,new s.Slice(e,n,r)).content:e)}return function(t,e){for(var n=[],r=0;r<e.length;r++)for(var o=e[r],i=o.childCount-1;i>=0;i--)for(var a=o.child(i).attrs,l=a.rowspan,c=a.colspan,p=r;p<r+l;p++)n[p]=(n[p]||0)+c;for(var u=0,d=0;d<n.length;d++)u=Math.max(u,n[d]);for(var h=0;h<n.length;h++)if(h>=e.length&&e.push(s.Fragment.empty),n[h]<u){for(var f=b(t).cell.createAndFill(),v=[],m=n[h];m<u;m++)v.push(f);e[h]=e[h].append(s.Fragment.from(v))}return{height:e.length,width:u,rows:e}}(a,l)}function z(t,e){var n=t.createAndFill();return new c.e(n).replace(0,n.content.size,e).doc}function B(t,e,n){var r=t.width,o=t.height,i=t.rows;if(r!=e){for(var a=[],l=[],c=0;c<i.length;c++){for(var p=i[c],u=[],d=a[c]||0,h=0;d<e;h++){var f=p.child(h%p.childCount);d+f.attrs.colspan>e&&(f=f.type.create(E(f.attrs,f.attrs.colspan,d+f.attrs.colspan-e),f.content)),u.push(f),d+=f.attrs.colspan;for(var v=1;v<f.attrs.rowspan;v++)a[c+v]=(a[c+v]||0)+f.attrs.colspan}l.push(s.Fragment.from(u))}i=l,r=e}if(o!=n){for(var m=[],g=0,y=0;g<n;g++,y++){for(var b=[],w=i[y%o],x=0;x<w.childCount;x++){var S=w.child(x);g+S.attrs.rowspan>n&&(S=S.type.create(N(S.attrs,"rowspan",Math.max(1,n-S.attrs.rowspan)),S.content)),b.push(S)}m.push(s.Fragment.from(b))}i=m,o=n}return{width:r,height:o,rows:i}}function j(t,e,n,r,o,i,s,a){if(0==s||s==e.height)return!1;for(var l=!1,c=o;c<i;c++){var p=s*e.width+c,u=e.map[p];if(e.map[p-e.width]==u){l=!0;var d=n.nodeAt(u),h=e.findCell(u),f=h.top,v=h.left;t.setNodeMarkup(t.mapping.slice(a).map(u+r),null,N(d.attrs,"rowspan",s-f)),t.insert(t.mapping.slice(a).map(e.positionAt(s,v,n)),d.type.createAndFill(N(d.attrs,"rowspan",f+d.attrs.rowspan-s))),c+=d.attrs.colspan-1}}return l}function V(t,e,n,r,o,i,s,a){if(0==s||s==e.width)return!1;for(var l=!1,c=o;c<i;c++){var p=c*e.width+s,u=e.map[p];if(e.map[p-1]==u){l=!0;var d=n.nodeAt(u),h=e.colCount(u),f=t.mapping.slice(a).map(u+r);t.setNodeMarkup(f,null,E(d.attrs,s-h,d.attrs.colspan-(s-h))),t.insert(f+d.nodeSize,d.type.createAndFill(E(d.attrs,0,s-h))),c+=d.attrs.rowspan-1}}return l}function F(t,e,n,r,o){var i=n?t.doc.nodeAt(n-1):t.doc,a=f.get(i),l=r.top,c=r.left,p=c+o.width,u=l+o.height,d=t.tr,h=0;function v(){i=n?d.doc.nodeAt(n-1):d.doc,a=f.get(i),h=d.mapping.maps.length}(function(t,e,n,r,o,i,a){var l,c,p=b(t.doc.type.schema);if(o>e.width)for(var u=0,d=0;u<e.height;u++){var h=n.child(u);d+=h.nodeSize;var f=[],v=void 0;v=null==h.lastChild||h.lastChild.type==p.cell?l||(l=p.cell.createAndFill()):c||(c=p.header_cell.createAndFill());for(var m=e.width;m<o;m++)f.push(v);t.insert(t.mapping.slice(a).map(d-1+r),f)}if(i>e.height){for(var g=[],y=0,w=(e.height-1)*e.width;y<Math.max(e.width,o);y++){var x=!(y>=e.width)&&n.nodeAt(e.map[w+y]).type==p.header_cell;g.push(x?c||(c=p.header_cell.createAndFill()):l||(l=p.cell.createAndFill()))}for(var S=p.row.create(null,s.Fragment.from(g)),k=[],C=e.height;C<i;C++)k.push(S);t.insert(t.mapping.slice(a).map(r+n.nodeSize-2),k)}return!(!l&&!c)})(d,a,i,n,p,u,h)&&v(),j(d,a,i,n,c,p,l,h)&&v(),j(d,a,i,n,c,p,u,h)&&v(),V(d,a,i,n,l,u,c,h)&&v(),V(d,a,i,n,l,u,p,h)&&v();for(var m=l;m<u;m++){var g=a.positionAt(m,c,i),y=a.positionAt(m,p,i);d.replace(d.mapping.slice(h).map(g+n),d.mapping.slice(h).map(y+n),new s.Slice(o.rows[m-l],0,0))}v(),d.setSelection(new I(d.doc.resolve(n+a.positionAt(l,c,i)),d.doc.resolve(n+a.positionAt(u-1,p-1,i)))),e(d)}P.prototype.map=function(t){return new P(t.map(this.anchor),t.map(this.head))},P.prototype.resolve=function(t){var e=t.resolve(this.anchor),n=t.resolve(this.head);return"row"==e.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&e.index()<e.parent.childCount&&n.index()<n.parent.childCount&&M(e,n)?new I(e,n):i.Selection.near(n,1)};var H=Object(a.a)({ArrowLeft:W("horiz",-1),ArrowRight:W("horiz",1),ArrowUp:W("vert",-1),ArrowDown:W("vert",1),"Shift-ArrowLeft":J("horiz",-1),"Shift-ArrowRight":J("horiz",1),"Shift-ArrowUp":J("vert",-1),"Shift-ArrowDown":J("vert",1),Backspace:K,"Mod-Backspace":K,Delete:K,"Mod-Delete":K});function q(t,e,n){return!n.eq(t.selection)&&(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function W(t,e){return function(n,r,o){var s=n.selection;if(s instanceof I)return q(n,r,i.Selection.near(s.$headCell,e));if("horiz"!=t&&!s.empty)return!1;var a=Y(o,t,e);if(null==a)return!1;if("horiz"==t)return q(n,r,i.Selection.near(n.doc.resolve(s.head+e),e));var l,c=n.doc.resolve(a),p=A(c,t,e);return l=p?i.Selection.near(p,1):e<0?i.Selection.near(n.doc.resolve(c.before(-1)),-1):i.Selection.near(n.doc.resolve(c.after(-1)),1),q(n,r,l)}}function J(t,e){return function(n,r,o){var i=n.selection;if(!(i instanceof I)){var s=Y(o,t,e);if(null==s)return!1;i=new I(n.doc.resolve(s))}var a=A(i.$headCell,t,e);return!!a&&q(n,r,new I(i.$anchorCell,a))}}function K(t,e){var n=t.selection;if(!(n instanceof I))return!1;if(e){var r=t.tr,o=b(t.schema).cell.createAndFill().content;n.forEachCell((function(t,e){t.content.eq(o)||r.replace(r.mapping.map(e+1),r.mapping.map(e+t.nodeSize-1),new s.Slice(o,0,0))})),r.docChanged&&e(r)}return!0}function U(t,e){var n=x(t.state.doc.resolve(e));return!!n&&(t.dispatch(t.state.tr.setSelection(new I(n))),!0)}function G(t,e,n){if(!S(t.state))return!1;var r=L(n),o=t.state.selection;if(o instanceof I){r||(r={width:1,height:1,rows:[s.Fragment.from(z(b(t.state.schema).cell,n))]});var i=o.$anchorCell.node(-1),a=o.$anchorCell.start(-1),l=f.get(i).rectBetween(o.$anchorCell.pos-a,o.$headCell.pos-a);return r=B(r,l.right-l.left,l.bottom-l.top),F(t.state,t.dispatch,a,l,r),!0}if(r){var c=k(t.state),p=c.start(-1);return F(t.state,t.dispatch,p,f.get(c.node(-1)).findCell(c.pos-p),r),!0}return!1}function X(t,e){if(!e.ctrlKey&&!e.metaKey){var n,r=Z(t,e.target);if(e.shiftKey&&t.state.selection instanceof I)o(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&null!=(n=x(t.state.selection.$anchor))&&Q(t,e).pos!=n.pos)o(n,e),e.preventDefault();else if(!r)return;t.root.addEventListener("mouseup",i),t.root.addEventListener("dragstart",i),t.root.addEventListener("mousemove",s)}function o(e,n){var r=Q(t,n),o=null==w.getState(t.state);if(!r||!M(e,r)){if(!o)return;r=e}var i=new I(e,r);if(o||!t.state.selection.eq(i)){var s=t.state.tr.setSelection(i);o&&s.setMeta(w,e.pos),t.dispatch(s)}}function i(){t.root.removeEventListener("mouseup",i),t.root.removeEventListener("dragstart",i),t.root.removeEventListener("mousemove",s),null!=w.getState(t.state)&&t.dispatch(t.state.tr.setMeta(w,-1))}function s(n){var s,a=w.getState(t.state);if(null!=a)s=t.state.doc.resolve(a);else if(Z(t,n.target)!=r&&!(s=Q(t,e)))return i();s&&o(s,n)}}function Y(t,e,n){if(!(t.state.selection instanceof i.TextSelection))return null;for(var r=t.state.selection.$head,o=r.depth-1;o>=0;o--){var s=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:s.childCount))return null;if("cell"==s.type.spec.tableRole||"header_cell"==s.type.spec.tableRole){var a=r.before(o),l="vert"==e?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(l)?a:null}}return null}function Z(t,e){for(;e&&e!=t.dom;e=e.parentNode)if("TD"==e.nodeName||"TH"==e.nodeName)return e}function Q(t,e){var n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?x(t.state.doc.resolve(n.pos)):null}var tt=new i.PluginKey("fix-tables");function et(t,e){var n,r=function(e,r){"table"==e.type.spec.tableRole&&(n=function(t,e,n,r){var o=f.get(e);if(!o.problems)return r;r||(r=t.tr);for(var i,s,a=[],l=0;l<o.height;l++)a.push(0);for(var c=0;c<o.problems.length;c++){var p=o.problems[c];if("collision"==p.type){for(var u=e.nodeAt(p.pos),d=0;d<u.attrs.rowspan;d++)a[p.row+d]+=p.n;r.setNodeMarkup(r.mapping.map(n+1+p.pos),null,E(u.attrs,u.attrs.colspan-p.n,p.n))}else if("missing"==p.type)a[p.row]+=p.n;else if("overlong_rowspan"==p.type){var h=e.nodeAt(p.pos);r.setNodeMarkup(r.mapping.map(n+1+p.pos),null,N(h.attrs,"rowspan",h.attrs.rowspan-p.n))}else if("colwidth mismatch"==p.type){var v=e.nodeAt(p.pos);r.setNodeMarkup(r.mapping.map(n+1+p.pos),null,N(v.attrs,"colwidth",p.colwidth))}}for(var m=0;m<a.length;m++)a[m]&&(null==i&&(i=m),s=m);for(var g=0,y=n+1;g<o.height;g++){var w=e.child(g),x=y+w.nodeSize,S=a[g];if(S>0){var k="cell";w.firstChild&&(k=w.firstChild.type.spec.tableRole);for(var C=[],O=0;O<S;O++)C.push(b(t.schema)[k].createAndFill());var M=0!=g&&i!=g-1||s!=g?x-1:y+1;r.insert(r.mapping.map(M),C)}y=x}return r.setMeta(tt,{fixTables:!0})}(t,e,r,n))};return e?e.doc!=t.doc&&function t(e,n,r,o){var i=e.childCount,s=n.childCount;t:for(var a=0,l=0;a<s;a++){for(var c=n.child(a),p=l,u=Math.min(i,a+3);p<u;p++)if(e.child(p)==c){l=p+1,r+=c.nodeSize;continue t}o(c,r),l<i&&e.child(l).sameMarkup(c)?t(e.child(l),c,r+1,o):c.nodesBetween(0,c.content.size,o,r+1),r+=c.nodeSize}}(e.doc,t.doc,0,r):t.doc.descendants(r),n}function nt(t){var e,n=t.selection,r=k(t),o=r.node(-1),i=r.start(-1),s=f.get(o);return(e=n instanceof I?s.rectBetween(n.$anchorCell.pos-i,n.$headCell.pos-i):s.findCell(r.pos-i)).tableStart=i,e.map=s,e.table=o,e}function rt(t,e,n){var r=e.map,o=e.tableStart,i=e.table,s=n>0?-1:0;D(r,i,n+s)&&(s=0==n||n==r.width?null:0);for(var a=0;a<r.height;a++){var l=a*r.width+n;if(n>0&&n<r.width&&r.map[l-1]==r.map[l]){var c=r.map[l],p=i.nodeAt(c);t.setNodeMarkup(t.mapping.map(o+c),null,R(p.attrs,n-r.colCount(c))),a+=p.attrs.rowspan-1}else{var u=null==s?b(i.type.schema).cell:i.nodeAt(r.map[l+s]).type,d=r.positionAt(a,n,i);t.insert(t.mapping.map(o+d),u.createAndFill())}}return t}function ot(t,e){if(!S(t))return!1;if(e){var n=nt(t);e(rt(t.tr,n,n.left))}return!0}function it(t,e){if(!S(t))return!1;if(e){var n=nt(t);e(rt(t.tr,n,n.right))}return!0}function st(t,e,n){for(var r=e.map,o=e.table,i=e.tableStart,s=t.mapping.maps.length,a=0;a<r.height;){var l=a*r.width+n,c=r.map[l],p=o.nodeAt(c);if(n>0&&r.map[l-1]==c||n<r.width-1&&r.map[l+1]==c)t.setNodeMarkup(t.mapping.slice(s).map(i+c),null,E(p.attrs,n-r.colCount(c)));else{var u=t.mapping.slice(s).map(i+c);t.delete(u,u+p.nodeSize)}a+=p.attrs.rowspan}}function at(t,e){if(!S(t))return!1;if(e){var n=nt(t),r=t.tr;if(0==n.left&&n.right==n.map.width)return!1;for(var o=n.right-1;st(r,n,o),o!=n.left;o--)n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=f.get(n.table);e(r)}return!0}function lt(t,e,n){for(var r=b(e.type.schema).header_cell,o=0;o<t.width;o++)if(e.nodeAt(t.map[o+n*t.width]).type!=r)return!1;return!0}function ct(t,e,n){for(var r=e.map,o=e.tableStart,i=e.table,s=o,a=0;a<n;a++)s+=i.child(a).nodeSize;var l=[],c=n>0?-1:0;lt(r,i,n+c)&&(c=0==n||n==r.height?null:0);for(var p=0,u=r.width*n;p<r.width;p++,u++)if(n>0&&n<r.height&&r.map[u]==r.map[u-r.width]){var d=r.map[u],h=i.nodeAt(d).attrs;t.setNodeMarkup(o+d,null,N(h,"rowspan",h.rowspan+1)),p+=h.colspan-1}else{var f=null==c?b(i.type.schema).cell:i.nodeAt(r.map[u+c*r.width]).type;l.push(f.createAndFill())}return t.insert(s,b(i.type.schema).row.create(null,l)),t}function pt(t,e){if(!S(t))return!1;if(e){var n=nt(t);e(ct(t.tr,n,n.top))}return!0}function ut(t,e){if(!S(t))return!1;if(e){var n=nt(t);e(ct(t.tr,n,n.bottom))}return!0}function dt(t,e,n){for(var r=e.map,o=e.table,i=e.tableStart,s=0,a=0;a<n;a++)s+=o.child(a).nodeSize;var l=s+o.child(n).nodeSize,c=t.mapping.maps.length;t.delete(s+i,l+i);for(var p=0,u=n*r.width;p<r.width;p++,u++){var d=r.map[u];if(n>0&&d==r.map[u-r.width]){var h=o.nodeAt(d).attrs;t.setNodeMarkup(t.mapping.slice(c).map(d+i),null,N(h,"rowspan",h.rowspan-1)),p+=h.colspan-1}else if(n<r.width&&d==r.map[u+r.width]){var f=o.nodeAt(d),v=f.type.create(N(f.attrs,"rowspan",f.attrs.rowspan-1),f.content),m=r.positionAt(n+1,p,o);t.insert(t.mapping.slice(c).map(i+m),v),p+=f.attrs.colspan-1}}}function ht(t,e){if(!S(t))return!1;if(e){var n=nt(t),r=t.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(var o=n.bottom-1;dt(r,n,o),o!=n.top;o--)n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=f.get(n.table);e(r)}return!0}function ft(t){var e=t.content;return 1==e.childCount&&e.firstChild.isTextblock&&0==e.firstChild.childCount}function vt(t,e){var n=t.selection;if(!(n instanceof I)||n.$anchorCell.pos==n.$headCell.pos)return!1;var r=nt(t),o=r.map;if(function(t,e){for(var n=t.width,r=t.height,o=t.map,i=e.top*n+e.left,s=i,a=(e.bottom-1)*n+e.left,l=i+(e.right-e.left-1),c=e.top;c<e.bottom;c++){if(e.left>0&&o[s]==o[s-1]||e.right<n&&o[l]==o[l+1])return!0;s+=n,l+=n}for(var p=e.left;p<e.right;p++){if(e.top>0&&o[i]==o[i-n]||e.bottom<r&&o[a]==o[a+n])return!0;i++,a++}return!1}(o,r))return!1;if(e){for(var i,a,l=t.tr,c={},p=s.Fragment.empty,u=r.top;u<r.bottom;u++)for(var d=r.left;d<r.right;d++){var h=o.map[u*o.width+d],f=r.table.nodeAt(h);if(!c[h])if(c[h]=!0,null==i)i=h,a=f;else{ft(f)||(p=p.append(f.content));var v=l.mapping.map(h+r.tableStart);l.delete(v,v+f.nodeSize)}}if(l.setNodeMarkup(i+r.tableStart,null,N(R(a.attrs,a.attrs.colspan,r.right-r.left-a.attrs.colspan),"rowspan",r.bottom-r.top)),p.size){var m=i+1+a.content.size,g=ft(a)?i+1:m;l.replaceWith(g+r.tableStart,m+r.tableStart,p)}l.setSelection(new I(l.doc.resolve(i+r.tableStart))),e(l)}return!0}function mt(t,e){var n=b(t.schema);return gt((function(t){var e=t.node;return n[e.type.spec.tableRole]}))(t,e)}function gt(t){return function(e,n){var r,o,i=e.selection;if(i instanceof I){if(i.$anchorCell.pos!=i.$headCell.pos)return!1;r=i.$anchorCell.nodeAfter,o=i.$anchorCell.pos}else{if(!(r=function(t){for(var e=t.depth;e>0;e--){var n=t.node(e).type.spec.tableRole;if("cell"===n||"header_cell"===n)return t.node(e)}return null}(i.$from)))return!1;o=x(i.$from).pos}if(1==r.attrs.colspan&&1==r.attrs.rowspan)return!1;if(n){var s=r.attrs,a=[],l=s.colwidth;s.rowspan>1&&(s=N(s,"rowspan",1)),s.colspan>1&&(s=N(s,"colspan",1));for(var c,p=nt(e),u=e.tr,d=0;d<p.right-p.left;d++)a.push(l?N(s,"colwidth",l&&l[d]?[l[d]]:null):s);for(var h=p.top;h<p.bottom;h++){var f=p.map.positionAt(h,p.left,p.table);h==p.top&&(f+=r.nodeSize);for(var v=p.left,m=0;v<p.right;v++,m++)v==p.left&&h==p.top||u.insert(c=u.mapping.map(f+p.tableStart,1),t({node:r,row:h,col:v}).createAndFill(a[m]))}u.setNodeMarkup(o,t({node:r,row:p.top,col:p.left}),a[0]),i instanceof I&&u.setSelection(new I(u.doc.resolve(i.$anchorCell.pos),c&&u.doc.resolve(c))),n(u)}return!0}}function yt(t,e){return function(n,r){if(!S(n))return!1;var o=k(n);if(o.nodeAfter.attrs[t]===e)return!1;if(r){var i=n.tr;n.selection instanceof I?n.selection.forEachCell((function(n,r){n.attrs[t]!==e&&i.setNodeMarkup(r,null,N(n.attrs,t,e))})):i.setNodeMarkup(o.pos,null,N(o.nodeAfter.attrs,t,e)),r(i)}return!0}}function bt(t,e,n){for(var r=e.map.cellsInRect({left:0,top:0,right:"row"==t?e.map.width:1,bottom:"column"==t?e.map.height:1}),o=0;o<r.length;o++){var i=e.table.nodeAt(r[o]);if(i&&i.type!==n.header_cell)return!1}return!0}function wt(t,e){return(e=e||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(t){return function(e,n){if(!S(e))return!1;if(n){for(var r=b(e.schema),o=nt(e),i=e.tr,s=o.map.cellsInRect("column"==t?new h(o.left,0,o.right,o.map.height):"row"==t?new h(0,o.top,o.map.width,o.bottom):o),a=s.map((function(t){return o.table.nodeAt(t)})),l=0;l<s.length;l++)a[l].type==r.header_cell&&i.setNodeMarkup(o.tableStart+s[l],r.cell,a[l].attrs);if(0==i.steps.length)for(var c=0;c<s.length;c++)i.setNodeMarkup(o.tableStart+s[c],r.header_cell,a[c].attrs);n(i)}return!0}}(t):function(e,n){if(!S(e))return!1;if(n){var r=b(e.schema),o=nt(e),i=e.tr,s=bt("row",o,r),a=bt("column",o,r),l=("column"===t?s:"row"===t&&a)?1:0,c="column"==t?new h(0,l,1,o.map.height):"row"==t?new h(l,0,o.map.width,1):o,p="column"==t?a?r.cell:r.header_cell:"row"==t?s?r.cell:r.header_cell:r.cell;o.map.cellsInRect(c).forEach((function(t){var e=t+o.tableStart,n=i.doc.nodeAt(e);n&&i.setNodeMarkup(e,p,n.attrs)})),n(i)}return!0}}var xt=wt("row",{useDeprecatedLogic:!0}),St=wt("column",{useDeprecatedLogic:!0}),kt=wt("cell",{useDeprecatedLogic:!0});function Ct(t){return function(e,n){if(!S(e))return!1;var r=function(t,e){if(e<0){var n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(var r=t.index(-1)-1,o=t.before();r>=0;r--){var i=t.node(-1).child(r);if(i.childCount)return o-1-i.lastChild.nodeSize;o-=i.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;for(var s=t.node(-1),a=t.indexAfter(-1),l=t.after();a<s.childCount;a++){var c=s.child(a);if(c.childCount)return l+1;l+=c.nodeSize}}}(k(e),t);if(null!=r){if(n){var o=e.doc.resolve(r);n(e.tr.setSelection(i.TextSelection.between(o,O(o))).scrollIntoView())}return!0}}}function Ot(t,e){for(var n=t.selection.$anchor,r=n.depth;r>0;r--){if("table"==n.node(r).type.spec.tableRole)return e&&e(t.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0}return!1}var Mt=function(t,e){this.node=t,this.cellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Tt(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))};function Tt(t,e,n,r,o,i){for(var s=0,a=!0,l=e.firstChild,c=t.firstChild,p=0,u=0;p<c.childCount;p++)for(var d=c.child(p).attrs,h=d.colspan,f=d.colwidth,v=0;v<h;v++,u++){var m=o==u?i:f&&f[v],g=m?m+"px":"";s+=m||r,m||(a=!1),l?(l.style.width!=g&&(l.style.width=g),l=l.nextSibling):e.appendChild(document.createElement("col")).style.width=g}for(;l;){var y=l.nextSibling;l.parentNode.removeChild(l),l=y}a?(n.style.width=s+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=s+"px")}Mt.prototype.update=function(t){return t.type==this.node.type&&(this.node=t,Tt(t,this.colgroup,this.table,this.cellMinWidth),!0)},Mt.prototype.ignoreMutation=function(t){return"attributes"==t.type&&(t.target==this.table||this.colgroup.contains(t.target))};var _t=new i.PluginKey("tableColumnResizing");function At(t){void 0===t&&(t={});var e=t.handleWidth;void 0===e&&(e=5);var n=t.cellMinWidth;void 0===n&&(n=25);var r=t.View;void 0===r&&(r=Mt);var o=t.lastColumnResizable;return void 0===o&&(o=!0),new i.Plugin({key:_t,state:{init:function(t,e){return this.spec.props.nodeViews[b(e.schema).table.name]=function(t,e){return new r(t,n,e)},new Nt(-1,!1)},apply:function(t,e){return e.apply(t)}},props:{attributes:function(t){return _t.getState(t).activeHandle>-1?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove:function(t,n){!function(t,e,n,r,o){var i=_t.getState(t.state);if(!i.dragging){var s=function(t){for(;t&&"TD"!=t.nodeName&&"TH"!=t.nodeName;)t=t.classList.contains("ProseMirror")?null:t.parentNode;return t}(e.target),a=-1;if(s){var l=s.getBoundingClientRect(),c=l.left,p=l.right;e.clientX-c<=n?a=Et(t,e,"left"):p-e.clientX<=n&&(a=Et(t,e,"right"))}if(a!=i.activeHandle){if(!o&&-1!==a){var u=t.state.doc.resolve(a),d=u.node(-1),h=f.get(d),v=u.start(-1);if(h.colCount(u.pos-v)+u.nodeAfter.attrs.colspan-1==h.width-1)return}Dt(t,a)}}}(t,n,e,0,o)},mouseleave:function(t){!function(t){var e=_t.getState(t.state);e.activeHandle>-1&&!e.dragging&&Dt(t,-1)}(t)},mousedown:function(t,e){!function(t,e,n){var r=_t.getState(t.state);if(-1==r.activeHandle||r.dragging)return!1;var o=t.state.doc.nodeAt(r.activeHandle),i=function(t,e,n){var r=n.colspan,o=n.colwidth,i=o&&o[o.length-1];if(i)return i;var s=t.domAtPos(e),a=s.node.childNodes[s.offset].offsetWidth,l=r;if(o)for(var c=0;c<r;c++)o[c]&&(a-=o[c],l--);return a/l}(t,r.activeHandle,o.attrs);function s(e){window.removeEventListener("mouseup",s),window.removeEventListener("mousemove",a);var r=_t.getState(t.state);r.dragging&&(!function(t,e,n){for(var r=t.state.doc.resolve(e),o=r.node(-1),i=f.get(o),s=r.start(-1),a=i.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,l=t.state.tr,c=0;c<i.height;c++){var p=c*i.width+a;if(!c||i.map[p]!=i.map[p-i.width]){var u=i.map[p],d=o.nodeAt(u).attrs,h=1==d.colspan?0:a-i.colCount(u);if(!d.colwidth||d.colwidth[h]!=n){var v=d.colwidth?d.colwidth.slice():It(d.colspan);v[h]=n,l.setNodeMarkup(s+u,null,N(d,"colwidth",v))}}}l.docChanged&&t.dispatch(l)}(t,r.activeHandle,Rt(r.dragging,e,n)),t.dispatch(t.state.tr.setMeta(_t,{setDragging:null})))}function a(e){if(!e.which)return s(e);var r=_t.getState(t.state),o=Rt(r.dragging,e,n);!function(t,e,n,r){var o=t.state.doc.resolve(e),i=o.node(-1),s=o.start(-1),a=f.get(i).colCount(o.pos-s)+o.nodeAfter.attrs.colspan-1,l=t.domAtPos(o.start(-1)).node;for(;"TABLE"!=l.nodeName;)l=l.parentNode;Tt(i,l.firstChild,l,r,a,n)}(t,r.activeHandle,o,n)}t.dispatch(t.state.tr.setMeta(_t,{setDragging:{startX:e.clientX,startWidth:i}})),window.addEventListener("mouseup",s),window.addEventListener("mousemove",a),e.preventDefault()}(t,e,n)}},decorations:function(t){var e=_t.getState(t);if(e.activeHandle>-1)return function(t,e){for(var n=[],r=t.doc.resolve(e),o=r.node(-1),i=f.get(o),s=r.start(-1),a=i.colCount(r.pos-s)+r.nodeAfter.attrs.colspan,c=0;c<i.height;c++){var p=a+c*i.width-1;if(!(a!=i.width&&i.map[p]==i.map[p+1]||0!=c&&i.map[p-1]==i.map[p-1-i.width])){var u=i.map[p],d=s+u+o.nodeAt(u).nodeSize-1,h=document.createElement("div");h.className="column-resize-handle",n.push(l.a.widget(d,h))}}return l.b.create(t.doc,n)}(t,e.activeHandle)},nodeViews:{}}})}var Nt=function(t,e){this.activeHandle=t,this.dragging=e};function Et(t,e,n){var r=t.posAtCoords({left:e.clientX,top:e.clientY});if(!r)return-1;var o=r.pos,i=x(t.state.doc.resolve(o));if(!i)return-1;if("right"==n)return i.pos;var s=f.get(i.node(-1)),a=i.start(-1),l=s.map.indexOf(i.pos-a);return l%s.width==0?-1:a+s.map[l-1]}function Rt(t,e,n){var r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function Dt(t,e){t.dispatch(t.state.tr.setMeta(_t,{setHandle:e}))}function It(t){for(var e=[],n=0;n<t;n++)e.push(0);return e}function Pt(t){void 0===t&&(t={});var e=t.allowTableNodeSelection;return void 0===e&&(e=!1),new i.Plugin({key:w,state:{init:function(){return null},apply:function(t,e){var n=t.getMeta(w);if(null!=n)return-1==n?null:n;if(null==e||!t.docChanged)return e;var r=t.mapping.mapResult(e),o=r.deleted,i=r.pos;return o?null:i}},props:{decorations:$,handleDOMEvents:{mousedown:X},createSelectionBetween:function(t){if(null!=w.getState(t.state))return t.state.selection},handleTripleClick:U,handleKeyDown:H,handlePaste:G},appendTransaction:function(t,n,r){return function(t,e,n){var r,o,s=(e||t).selection,a=(e||t).doc;if(s instanceof i.NodeSelection&&(o=s.node.type.spec.tableRole)){if("cell"==o||"header_cell"==o)r=I.create(a,s.from);else if("row"==o){var l=a.resolve(s.from+1);r=I.rowSelection(l,l)}else if(!n){var c=f.get(s.node),p=s.from+1,u=p+c.map[c.width*c.height-1];r=I.create(a,p+1,u)}}else s instanceof i.TextSelection&&function(t){var e=t.$from,n=t.$to;if(e.pos==n.pos||e.pos<e.pos-6)return!1;for(var r=e.pos,o=n.pos,i=e.depth;i>=0&&!(e.after(i+1)<e.end(i));i--,r++);for(var s=n.depth;s>=0&&!(n.before(s+1)>n.start(s));s--,o--);return r==o&&/row|table/.test(e.node(i).type.spec.tableRole)}(s)?r=i.TextSelection.create(a,s.from):s instanceof i.TextSelection&&function(t){for(var e,n,r=t.$from,o=t.$to,i=r.depth;i>0;i--){var s=r.node(i);if("cell"===s.type.spec.tableRole||"header_cell"===s.type.spec.tableRole){e=s;break}}for(var a=o.depth;a>0;a--){var l=o.node(a);if("cell"===l.type.spec.tableRole||"header_cell"===l.type.spec.tableRole){n=l;break}}return e!==n&&0===o.parentOffset}(s)&&(r=i.TextSelection.create(a,s.$from.start(),s.$from.end()));return r&&(e||(e=t.tr)).setSelection(r),e}(r,et(r,n),e)}})}Nt.prototype.apply=function(t){var e=this,n=t.getMeta(_t);if(n&&null!=n.setHandle)return new Nt(n.setHandle,null);if(n&&void 0!==n.setDragging)return new Nt(e.activeHandle,n.setDragging);if(e.activeHandle>-1&&t.docChanged){var r=t.mapping.map(e.activeHandle,-1);C(t.doc.resolve(r))||(r=null),e=new Nt(r,e.dragging)}return e}},311:function(t,e,n){"use strict";n.d(e,"h",(function(){return r.Plugin})),n.d(e,"i",(function(){return r.PluginKey})),n.d(e,"a",(function(){return N})),n.d(e,"b",(function(){return E})),n.d(e,"c",(function(){return D})),n.d(e,"d",(function(){return z})),n.d(e,"e",(function(){return S})),n.d(e,"f",(function(){return C})),n.d(e,"g",(function(){return M}));var r=n(279),o=n(286),i=n(280),s=n(281);var a=function(t,e){var n=this;this.editorView=t,this.width=e.width||1,this.color=e.color||"black",this.class=e.class,this.cursorPos=null,this.element=null,this.timeout=null,this.handlers=["dragover","dragend","drop","dragleave"].map((function(e){var r=function(t){return n[e](t)};return t.dom.addEventListener(e,r),{name:e,handler:r}}))};a.prototype.destroy=function(){var t=this;this.handlers.forEach((function(e){var n=e.name,r=e.handler;return t.editorView.dom.removeEventListener(n,r)}))},a.prototype.update=function(t,e){null!=this.cursorPos&&e.doc!=t.state.doc&&this.updateOverlay()},a.prototype.setCursor=function(t){t!=this.cursorPos&&(this.cursorPos=t,null==t?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())},a.prototype.updateOverlay=function(){var t,e=this.editorView.state.doc.resolve(this.cursorPos);if(!e.parent.inlineContent){var n=e.nodeBefore,r=e.nodeAfter;if(n||r){var o=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0)).getBoundingClientRect(),i=n?o.bottom:o.top;n&&r&&(i=(i+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),t={left:o.left,right:o.right,top:i-this.width/2,bottom:i+this.width/2}}}if(!t){var s=this.editorView.coordsAtPos(this.cursorPos);t={left:s.left-this.width/2,right:s.left+this.width/2,top:s.top,bottom:s.bottom}}var a=this.editorView.dom.offsetParent;this.element||(this.element=a.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color);var l=!a||a==document.body&&"static"==getComputedStyle(a).position?{left:-pageXOffset,top:-pageYOffset}:a.getBoundingClientRect();this.element.style.left=t.left-l.left+"px",this.element.style.top=t.top-l.top+"px",this.element.style.width=t.right-t.left+"px",this.element.style.height=t.bottom-t.top+"px"},a.prototype.scheduleRemoval=function(t){var e=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){return e.setCursor(null)}),t)},a.prototype.dragover=function(t){if(this.editorView.editable){var e=this.editorView.posAtCoords({left:t.clientX,top:t.clientY});if(e){var n=e.pos;this.editorView.dragging&&this.editorView.dragging.slice&&null==(n=Object(s.h)(this.editorView.state.doc,n,this.editorView.dragging.slice))&&(n=e.pos),this.setCursor(n),this.scheduleRemoval(5e3)}}},a.prototype.dragend=function(){this.scheduleRemoval(20)},a.prototype.drop=function(){this.scheduleRemoval(20)},a.prototype.dragleave=function(t){t.target!=this.editorView.dom&&this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)};var l=n(297),c=function(t){function e(e){t.call(this,e,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(n,r){var o=n.resolve(r.map(this.head));return e.valid(o)?new e(o):t.near(o)},e.prototype.content=function(){return i.Slice.empty},e.prototype.eq=function(t){return t instanceof e&&t.head==this.head},e.prototype.toJSON=function(){return{type:"gapcursor",pos:this.head}},e.fromJSON=function(t,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new e(t.resolve(n.pos))},e.prototype.getBookmark=function(){return new p(this.anchor)},e.valid=function(t){var e=t.parent;if(e.isTextblock||!function(t){for(var e=t.depth;e>=0;e--){var n=t.index(e);if(0!=n)for(var r=t.node(e).child(n-1);;r=r.lastChild){if(0==r.childCount&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}(t)||!function(t){for(var e=t.depth;e>=0;e--){var n=t.indexAfter(e),r=t.node(e);if(n!=r.childCount)for(var o=r.child(n);;o=o.firstChild){if(0==o.childCount&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}(t))return!1;var n=e.type.spec.allowGapCursor;if(null!=n)return n;var r=e.contentMatchAt(t.index()).defaultType;return r&&r.isTextblock},e.findFrom=function(t,n,o){t:for(;;){if(!o&&e.valid(t))return t;for(var i=t.pos,s=null,a=t.depth;;a--){var l=t.node(a);if(n>0?t.indexAfter(a)<l.childCount:t.index(a)>0){s=l.child(n>0?t.indexAfter(a):t.index(a)-1);break}if(0==a)return null;i+=n;var c=t.doc.resolve(i);if(e.valid(c))return c}for(;;){var p=n>0?s.firstChild:s.lastChild;if(!p){if(s.isAtom&&!s.isText&&!r.NodeSelection.isSelectable(s)){t=t.doc.resolve(i+s.nodeSize*n),o=!1;continue t}break}s=p,i+=n;var u=t.doc.resolve(i);if(e.valid(u))return u}return null}},e}(r.Selection);c.prototype.visible=!1,r.Selection.jsonID("gapcursor",c);var p=function(t){this.pos=t};p.prototype.map=function(t){return new p(t.map(this.pos))},p.prototype.resolve=function(t){var e=t.resolve(this.pos);return c.valid(e)?new c(e):r.Selection.near(e)};var u=Object(l.a)({ArrowLeft:d("horiz",-1),ArrowRight:d("horiz",1),ArrowUp:d("vert",-1),ArrowDown:d("vert",1)});function d(t,e){var n="vert"==t?e>0?"down":"up":e>0?"right":"left";return function(t,o,i){var s=t.selection,a=e>0?s.$to:s.$from,l=s.empty;if(s instanceof r.TextSelection){if(!i.endOfTextblock(n)||0==a.depth)return!1;l=!1,a=t.doc.resolve(e>0?a.after():a.before())}var p=c.findFrom(a,e,l);return!!p&&(o&&o(t.tr.setSelection(new c(p))),!0)}}function h(t,e,n){if(!t.editable)return!1;var o=t.state.doc.resolve(e);if(!c.valid(o))return!1;var i=t.posAtCoords({left:n.clientX,top:n.clientY}).inside;return!(i>-1&&r.NodeSelection.isSelectable(t.state.doc.nodeAt(i)))&&(t.dispatch(t.state.tr.setSelection(new c(o))),!0)}function f(t){if(!(t.selection instanceof c))return null;var e=document.createElement("div");return e.className="ProseMirror-gapcursor",o.b.create(t.doc,[o.a.widget(t.selection.head,e,{key:"gapcursor"})])}var v=n(278),m=n(283),g=n(291),y=n(1),b=n.n(y),w=n(312);class x{constructor(t,{editor:e,extension:n,parent:r,node:o,view:i,decorations:s,getPos:a}){this.component=t,this.editor=e,this.extension=n,this.parent=r,this.node=o,this.view=i,this.decorations=s,this.isNode=!!this.node.marks,this.isMark=!this.isNode,this.getPos=this.isMark?this.getMarkPos:a,this.captureEvents=!0,this.dom=this.createDOM(),this.contentDOM=this.vm.$refs.content}createDOM(){const t=b.a.extend(this.component),e={editor:this.editor,node:this.node,view:this.view,getPos:()=>this.getPos(),decorations:this.decorations,selected:!1,options:this.extension.options,updateAttrs:t=>this.updateAttrs(t)};return"function"==typeof this.extension.setSelection&&(this.setSelection=this.extension.setSelection),"function"==typeof this.extension.update&&(this.update=this.extension.update),this.vm=new t({parent:this.parent,propsData:e}).$mount(),this.vm.$el}update(t,e){return t.type===this.node.type&&(t===this.node&&this.decorations===e||(this.node=t,this.decorations=e,this.updateComponentProps({node:t,decorations:e})),!0)}updateComponentProps(t){if(!this.vm._props)return;const e=b.a.config.silent;b.a.config.silent=!0,Object.entries(t).forEach(([t,e])=>{this.vm._props[t]=e}),b.a.config.silent=e}updateAttrs(t){if(!this.view.editable)return;const{state:e}=this.view,{type:n}=this.node,r=this.getPos(),o={...this.node.attrs,...t},i=this.isMark?e.tr.removeMark(r.from,r.to,n).addMark(r.from,r.to,n.create(o)):e.tr.setNodeMarkup(r,null,o);this.view.dispatch(i)}ignoreMutation(t){return"selection"!==t.type&&(!this.contentDOM||!this.contentDOM.contains(t.target))}stopEvent(t){if("function"==typeof this.extension.stopEvent)return this.extension.stopEvent(t);const e=!!this.extension.schema.draggable;if(e&&"mousedown"===t.type){const e=t.target.closest&&t.target.closest("[data-drag-handle]");e&&(this.dom===e||this.dom.contains(e))&&(this.captureEvents=!1,document.addEventListener("dragend",()=>{this.captureEvents=!0},{once:!0}))}const n="copy"===t.type,r="paste"===t.type,o="cut"===t.type,i=t.type.startsWith("drag")||"drop"===t.type;return!(e&&i||n||r||o)&&this.captureEvents}selectNode(){this.updateComponentProps({selected:!0})}deselectNode(){this.updateComponentProps({selected:!1})}getMarkPos(){const t=this.view.posAtDOM(this.dom),e=this.view.state.doc.resolve(t);return Object(g.b)(e,this.node.type)}destroy(){this.vm.$destroy()}}class S{constructor(t={}){this.options={...this.defaultOptions,...t}}init(){return null}bindEditor(t=null){this.editor=t}get name(){return null}get type(){return"extension"}get defaultOptions(){return{}}get plugins(){return[]}inputRules(){return[]}pasteRules(){return[]}keys(){return{}}}class k{constructor(t=[],e){t.forEach(t=>{t.bindEditor(e),t.init()}),this.extensions=t}get nodes(){return this.extensions.filter(t=>"node"===t.type).reduce((t,{name:e,schema:n})=>({...t,[e]:n}),{})}get options(){const{view:t}=this;return this.extensions.reduce((e,n)=>({...e,[n.name]:new Proxy(n.options,{set(e,n,r){const o=e[n]!==r;return Object.assign(e,{[n]:r}),o&&t.updateState(t.state),!0}})}),{})}get marks(){return this.extensions.filter(t=>"mark"===t.type).reduce((t,{name:e,schema:n})=>({...t,[e]:n}),{})}get plugins(){return this.extensions.filter(t=>t.plugins).reduce((t,{plugins:e})=>[...t,...e],[])}keymaps({schema:t}){return[...this.extensions.filter(t=>["extension"].includes(t.type)).filter(t=>t.keys).map(e=>e.keys({schema:t})),...this.extensions.filter(t=>["node","mark"].includes(t.type)).filter(t=>t.keys).map(e=>e.keys({type:t["".concat(e.type,"s")][e.name],schema:t}))].map(t=>Object(l.b)(t))}inputRules({schema:t,excludedExtensions:e}){if(!(e instanceof Array)&&e)return[];const n=e instanceof Array?this.extensions.filter(t=>!e.includes(t.name)):this.extensions;return[...n.filter(t=>["extension"].includes(t.type)).filter(t=>t.inputRules).map(e=>e.inputRules({schema:t})),...n.filter(t=>["node","mark"].includes(t.type)).filter(t=>t.inputRules).map(e=>e.inputRules({type:t["".concat(e.type,"s")][e.name],schema:t}))].reduce((t,e)=>[...t,...e],[])}pasteRules({schema:t,excludedExtensions:e}){if(!(e instanceof Array)&&e)return[];const n=e instanceof Array?this.extensions.filter(t=>!e.includes(t.name)):this.extensions;return[...n.filter(t=>["extension"].includes(t.type)).filter(t=>t.pasteRules).map(e=>e.pasteRules({schema:t})),...n.filter(t=>["node","mark"].includes(t.type)).filter(t=>t.pasteRules).map(e=>e.pasteRules({type:t["".concat(e.type,"s")][e.name],schema:t}))].reduce((t,e)=>[...t,...e],[])}commands({schema:t,view:e}){return this.extensions.filter(t=>t.commands).reduce((n,r)=>{const{name:o,type:i}=r,s={},a=r.commands({schema:t,...["node","mark"].includes(i)?{type:t["".concat(i,"s")][o]}:{}}),l=(t,n)=>!!e.editable&&(e.focus(),t(n)(e.state,e.dispatch,e)),c=(t,e)=>{Array.isArray(e)?s[t]=t=>e.forEach(e=>l(e,t)):"function"==typeof e&&(s[t]=t=>l(e,t))};return"object"==typeof a?Object.entries(a).forEach(([t,e])=>{c(t,e)}):c(o,a),{...n,...s}},{})}}class C extends S{constructor(t={}){super(t)}get type(){return"mark"}get view(){return null}get schema(){return null}command(){return()=>{}}}function O(t=0,e=0,n=0){return Math.min(Math.max(parseInt(t,10),e),n)}class M extends S{constructor(t={}){super(t)}get type(){return"node"}get view(){return null}get schema(){return null}command(){return()=>{}}}class T extends M{get name(){return"doc"}get schema(){return{content:"block+"}}}class _ extends M{get name(){return"paragraph"}get schema(){return{content:"inline*",group:"block",draggable:!1,parseDOM:[{tag:"p"}],toDOM:()=>["p",0]}}commands({type:t}){return()=>Object(w.k)(t)}}class A extends M{get name(){return"text"}get schema(){return{group:"inline"}}}class N extends class{on(t,e){return this._callbacks=this._callbacks||{},this._callbacks[t]||(this._callbacks[t]=[]),this._callbacks[t].push(e),this}emit(t,...e){this._callbacks=this._callbacks||{};const n=this._callbacks[t];return n&&n.forEach(t=>t.apply(this,e)),this}off(t,e){if(arguments.length){const n=this._callbacks?this._callbacks[t]:null;n&&(e?this._callbacks[t]=n.filter(t=>t!==e):delete this._callbacks[t])}else this._callbacks={};return this}}{constructor(t={}){super(),this.defaultOptions={editorProps:{},editable:!0,autoFocus:null,extensions:[],content:"",topNode:"doc",emptyDocument:{type:"doc",content:[{type:"paragraph"}]},useBuiltInExtensions:!0,disableInputRules:!1,disablePasteRules:!1,dropCursor:{},enableDropCursor:!0,enableGapCursor:!0,parseOptions:{},injectCSS:!0,onInit:()=>{},onTransaction:()=>{},onUpdate:()=>{},onFocus:()=>{},onBlur:()=>{},onPaste:()=>{},onDrop:()=>{}},this.events=["init","transaction","update","focus","blur","paste","drop"],this.init(t)}init(t={}){this.setOptions({...this.defaultOptions,...t}),this.focused=!1,this.selection={from:0,to:0},this.element=document.createElement("div"),this.extensions=this.createExtensions(),this.nodes=this.createNodes(),this.marks=this.createMarks(),this.schema=this.createSchema(),this.plugins=this.createPlugins(),this.keymaps=this.createKeymaps(),this.inputRules=this.createInputRules(),this.pasteRules=this.createPasteRules(),this.view=this.createView(),this.commands=this.createCommands(),this.setActiveNodesAndMarks(),this.options.injectCSS&&function(t){{const e=document.createElement("style");e.type="text/css",e.textContent=t;const{head:n}=document,{firstChild:r}=n;r?n.insertBefore(e,r):n.appendChild(e)}}('.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n'),null!==this.options.autoFocus&&this.focus(this.options.autoFocus),this.events.forEach(t=>{var e;this.on(t,this.options[(e="on ".concat(t),e.replace(/(?:^\w|[A-Z]|\b\w)/g,(t,e)=>0===e?t.toLowerCase():t.toUpperCase()).replace(/\s+/g,""))]||(()=>{}))}),this.emit("init",{view:this.view,state:this.state}),this.extensions.view=this.view}setOptions(t){this.options={...this.options,...t},this.view&&this.state&&this.view.updateState(this.state)}get builtInExtensions(){return this.options.useBuiltInExtensions?[new T,new A,new _]:[]}get state(){return this.view?this.view.state:null}createExtensions(){return new k([...this.builtInExtensions,...this.options.extensions],this)}createPlugins(){return this.extensions.plugins}createKeymaps(){return this.extensions.keymaps({schema:this.schema})}createInputRules(){return this.extensions.inputRules({schema:this.schema,excludedExtensions:this.options.disableInputRules})}createPasteRules(){return this.extensions.pasteRules({schema:this.schema,excludedExtensions:this.options.disablePasteRules})}createCommands(){return this.extensions.commands({schema:this.schema,view:this.view})}createNodes(){return this.extensions.nodes}createMarks(){return this.extensions.marks}createSchema(){return new i.Schema({topNode:this.options.topNode,nodes:this.nodes,marks:this.marks})}createState(){return r.EditorState.create({schema:this.schema,doc:this.createDocument(this.options.content),plugins:[...this.plugins,Object(m.b)({rules:this.inputRules}),...this.pasteRules,...this.keymaps,Object(l.b)({Backspace:m.d}),Object(l.b)(v.a),...this.options.enableDropCursor?[(t=this.options.dropCursor,void 0===t&&(t={}),new r.Plugin({view:function(e){return new a(e,t)}}))]:[],...this.options.enableGapCursor?[new r.Plugin({props:{decorations:f,createSelectionBetween:function(t,e,n){if(e.pos==n.pos&&c.valid(n))return new c(n)},handleClick:h,handleKeyDown:u}})]:[],new r.Plugin({key:new r.PluginKey("editable"),props:{editable:()=>this.options.editable}}),new r.Plugin({props:{attributes:{tabindex:0},handleDOMEvents:{focus:(t,e)=>{this.focused=!0,this.emit("focus",{event:e,state:t.state,view:t});const n=this.state.tr.setMeta("focused",!0);this.view.dispatch(n)},blur:(t,e)=>{this.focused=!1,this.emit("blur",{event:e,state:t.state,view:t});const n=this.state.tr.setMeta("focused",!1);this.view.dispatch(n)}}}}),new r.Plugin({props:this.options.editorProps})]});var t}createDocument(t,e=this.options.parseOptions){if(null===t)return this.schema.nodeFromJSON(this.options.emptyDocument);if("object"==typeof t)try{return this.schema.nodeFromJSON(t)}catch(e){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",e),this.schema.nodeFromJSON(this.options.emptyDocument)}if("string"==typeof t){const n="<div>".concat(t,"</div>"),r=(new window.DOMParser).parseFromString(n,"text/html").body.firstElementChild;return i.DOMParser.fromSchema(this.schema).parse(r,e)}return!1}createView(){return new o.c(this.element,{state:this.createState(),handlePaste:(...t)=>{this.emit("paste",...t)},handleDrop:(...t)=>{this.emit("drop",...t)},dispatchTransaction:this.dispatchTransaction.bind(this)})}setParentComponent(t=null){t&&this.view.setProps({nodeViews:this.initNodeViews({parent:t,extensions:[...this.builtInExtensions,...this.options.extensions]})})}initNodeViews({parent:t,extensions:e}){return e.filter(t=>["node","mark"].includes(t.type)).filter(t=>t.view).reduce((e,n)=>({...e,[n.name]:(e,r,o,i)=>{const s=n.view;return new x(s,{editor:this,extension:n,parent:t,node:e,view:r,getPos:o,decorations:i})}}),{})}dispatchTransaction(t){const e=this.state.apply(t);this.view.updateState(e),this.selection={from:this.state.selection.from,to:this.state.selection.to},this.setActiveNodesAndMarks(),this.emit("transaction",{getHTML:this.getHTML.bind(this),getJSON:this.getJSON.bind(this),state:this.state,transaction:t}),t.docChanged&&!t.getMeta("preventUpdate")&&this.emitUpdate(t)}emitUpdate(t){this.emit("update",{getHTML:this.getHTML.bind(this),getJSON:this.getJSON.bind(this),state:this.state,transaction:t})}resolveSelection(t=null){if(this.selection&&null===t)return this.selection;if("start"===t||!0===t)return{from:0,to:0};if("end"===t){const{doc:t}=this.state;return{from:t.content.size,to:t.content.size}}return{from:t,to:t}}focus(t=null){if(this.view.focused&&null===t||!1===t)return;const{from:e,to:n}=this.resolveSelection(t);this.setSelection(e,n),setTimeout(()=>this.view.focus(),10)}setSelection(t=0,e=0){const{doc:n,tr:o}=this.state,i=O(t,0,n.content.size),s=O(e,0,n.content.size),a=r.TextSelection.create(n,i,s),l=o.setSelection(a);this.view.dispatch(l)}blur(){this.view.dom.blur()}getSchemaJSON(){return JSON.parse(JSON.stringify({nodes:this.extensions.nodes,marks:this.extensions.marks}))}getHTML(){const t=document.createElement("div"),e=i.DOMSerializer.fromSchema(this.schema).serializeFragment(this.state.doc.content);return t.appendChild(e),t.innerHTML}getJSON(){return this.state.doc.toJSON()}setContent(t={},e=!1,n){const{doc:o,tr:i}=this.state,s=this.createDocument(t,n),a=r.TextSelection.create(o,0,o.content.size),l=i.setSelection(a).replaceSelectionWith(s,!1).setMeta("preventUpdate",!e);this.view.dispatch(l)}clearContent(t=!1){this.setContent(this.options.emptyDocument,t)}setActiveNodesAndMarks(){this.activeMarks=Object.entries(this.schema.marks).reduce((t,[e,n])=>({...t,[e]:(t={})=>Object(g.d)(this.state,n,t)}),{}),this.activeMarkAttrs=Object.entries(this.schema.marks).reduce((t,[e,n])=>({...t,[e]:Object(g.a)(this.state,n)}),{}),this.activeNodes=Object.entries(this.schema.nodes).reduce((t,[e,n])=>({...t,[e]:(t={})=>Object(g.f)(this.state,n,t)}),{})}getMarkAttrs(t=null){return this.activeMarkAttrs[t]}getNodeAttrs(t=null){return{...Object(g.c)(this.state,this.schema.nodes[t])}}get isActive(){return Object.entries({...this.activeMarks,...this.activeNodes}).reduce((t,[e,n])=>({...t,[e]:(t={})=>n(t)}),{})}registerPlugin(t=null,e){const n="function"==typeof e?e(t,this.state.plugins):[t,...this.state.plugins],r=this.state.reconfigure({plugins:n});this.view.updateState(r)}unregisterPlugin(t=null){if(!t||!this.view.docView)return;const e=this.state.reconfigure({plugins:this.state.plugins.filter(e=>!e.key.startsWith("".concat(t,"$")))});this.view.updateState(e)}destroy(){this.view&&this.view.destroy()}}var E={props:{editor:{default:null,type:Object}},watch:{editor:{immediate:!0,handler(t){t&&t.element&&this.$nextTick(()=>{this.$el.appendChild(t.element.firstChild),t.setParentComponent(this)})}}},render:t=>t("div"),beforeDestroy(){this.editor.element=this.$el}};class R{constructor({options:t}){this.options=t,this.preventHide=!1,this.mousedownHandler=this.handleClick.bind(this),this.options.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.blurHandler=()=>{this.preventHide?this.preventHide=!1:this.options.editor.emit("menubar:focusUpdate",!1)},this.options.editor.on("blur",this.blurHandler)}handleClick(){this.preventHide=!0}destroy(){this.options.element.removeEventListener("mousedown",this.mousedownHandler),this.options.editor.off("blur",this.blurHandler)}}var D={props:{editor:{default:null,type:Object}},data:()=>({focused:!1}),watch:{editor:{immediate:!0,handler(t){t&&this.$nextTick(()=>{var e;t.registerPlugin((e={editor:t,element:this.$el},new r.Plugin({key:new r.PluginKey("menu_bar"),view:t=>new R({editorView:t,options:e})}))),this.focused=t.focused,t.on("focus",()=>{this.focused=!0}),t.on("menubar:focusUpdate",t=>{this.focused=t})})}}},render(){return this.editor?this.$scopedSlots.default({focused:this.focused,focus:this.editor.focus,commands:this.editor.commands,isActive:this.editor.isActive,getMarkAttrs:this.editor.getMarkAttrs.bind(this.editor),getNodeAttrs:this.editor.getNodeAttrs.bind(this.editor)}):null}};function I(t,e,n){const r=document.createRange();return r.setEnd(t,null==n?t.nodeValue.length:n),r.setStart(t,e||0),r}function P(t,e){const n=t.getClientRects();return n.length?n[e<0?0:n.length-1]:t.getBoundingClientRect()}function $(t,e,n=!1){const{node:r,offset:o}=t.docView.domFromPos(e);let i,s;if(3===r.nodeType)n&&o<r.nodeValue.length?(s=P(I(r,o-1,o),-1),i="right"):o<r.nodeValue.length&&(s=P(I(r,o,o+1),-1),i="left");else if(r.firstChild){if(o<r.childNodes.length){const t=r.childNodes[o];s=P(3===t.nodeType?I(t):t,-1),i="left"}if((!s||s.top===s.bottom)&&o){const t=r.childNodes[o-1];s=P(3===t.nodeType?I(t):t,1),i="right"}}else s=r.getBoundingClientRect(),i="left";const a=s[i];return{top:s.top,bottom:s.bottom,left:a,right:a}}class L{constructor({options:t,editorView:e}){this.options={element:null,keepInBounds:!0,onUpdate:()=>!1,...t},this.editorView=e,this.isActive=!1,this.left=0,this.bottom=0,this.top=0,this.preventHide=!1,this.mousedownHandler=this.handleClick.bind(this),this.options.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.focusHandler=({view:t})=>{this.update(t)},this.options.editor.on("focus",this.focusHandler),this.blurHandler=({event:t})=>{this.preventHide?this.preventHide=!1:this.hide(t)},this.options.editor.on("blur",this.blurHandler)}handleClick(){this.preventHide=!0}update(t,e){const{state:n}=t;if(t.composing)return;if(e&&e.doc.eq(n.doc)&&e.selection.eq(n.selection))return;if(n.selection.empty)return void this.hide();const{from:r,to:o}=n.selection,i=$(t,r),s=$(t,o,!0),a=this.options.element.offsetParent;if(!a)return void this.hide();const l=a.getBoundingClientRect(),c=this.options.element.getBoundingClientRect(),p=(i.left+s.left)/2-l.left;this.left=Math.round(this.options.keepInBounds?Math.min(l.width-c.width/2,Math.max(p,c.width/2)):p),this.bottom=Math.round(l.bottom-i.top),this.top=Math.round(s.bottom-l.top),this.isActive=!0,this.sendUpdate()}sendUpdate(){this.options.onUpdate({isActive:this.isActive,left:this.left,bottom:this.bottom,top:this.top})}hide(t){t&&t.relatedTarget&&this.options.element.parentNode&&this.options.element.parentNode.contains(t.relatedTarget)||(this.isActive=!1,this.sendUpdate())}destroy(){this.options.element.removeEventListener("mousedown",this.mousedownHandler),this.options.editor.off("focus",this.focusHandler),this.options.editor.off("blur",this.blurHandler)}}var z={props:{editor:{default:null,type:Object},keepInBounds:{default:!0,type:Boolean}},data:()=>({menu:{isActive:!1,left:0,bottom:0}}),watch:{editor:{immediate:!0,handler(t){t&&this.$nextTick(()=>{var e;t.registerPlugin((e={editor:t,element:this.$el,keepInBounds:this.keepInBounds,onUpdate:t=>{t.isActive&&!1===this.menu.isActive?this.$emit("show",t):t.isActive||!0!==this.menu.isActive||this.$emit("hide",t),this.menu=t}},new r.Plugin({key:new r.PluginKey("menu_bubble"),view:t=>new L({editorView:t,options:e})})))})}}},render(){return this.editor?this.$scopedSlots.default({focused:this.editor.view.focused,focus:this.editor.focus,commands:this.editor.commands,isActive:this.editor.isActive,getMarkAttrs:this.editor.getMarkAttrs.bind(this.editor),getNodeAttrs:this.editor.getNodeAttrs.bind(this.editor),menu:this.menu}):null},beforeDestroy(){this.editor.unregisterPlugin("menu_bubble")}}},312:function(t,e,n){"use strict";n.d(e,"a",(function(){return r.b})),n.d(e,"b",(function(){return r.c})),n.d(e,"k",(function(){return r.e})),n.d(e,"r",(function(){return r.f})),n.d(e,"d",(function(){return l})),n.d(e,"l",(function(){return c})),n.d(e,"m",(function(){return a})),n.d(e,"o",(function(){return p.c})),n.d(e,"u",(function(){return p.e})),n.d(e,"c",(function(){return f})),n.d(e,"e",(function(){return v})),n.d(e,"f",(function(){return y})),n.d(e,"g",(function(){return m})),n.d(e,"h",(function(){return g})),n.d(e,"i",(function(){return b})),n.d(e,"j",(function(){return w})),n.d(e,"n",(function(){return x})),n.d(e,"p",(function(){return S})),n.d(e,"q",(function(){return C})),n.d(e,"s",(function(){return O})),n.d(e,"t",(function(){return M}));var r=n(278),o=n(281),i=n(280);function s(t,e){return function(n,r){var s=n.selection,a=s.$from,l=s.$to,c=a.blockRange(l),p=!1,u=c;if(!c)return!1;if(c.depth>=2&&a.node(c.depth-1).type.compatibleContent(t)&&0==c.startIndex){if(0==a.index(c.depth-1))return!1;var d=n.doc.resolve(c.start-2);u=new i.NodeRange(d,d,c.depth),c.endIndex<c.parent.childCount&&(c=new i.NodeRange(a,n.doc.resolve(l.end(c.depth)),c.depth)),p=!0}var h=Object(o.i)(u,t,e,c);return!!h&&(r&&r(function(t,e,n,r,s){for(var a=i.Fragment.empty,l=n.length-1;l>=0;l--)a=i.Fragment.from(n[l].type.create(n[l].attrs,a));t.step(new o.b(e.start-(r?2:0),e.end,e.start,e.end,new i.Slice(a,0,0),n.length,!0));for(var c=0,p=0;p<n.length;p++)n[p].type==s&&(c=p+1);for(var u=n.length-c,d=e.start+n.length-(r?2:0),h=e.parent,f=e.startIndex,v=e.endIndex,m=!0;f<v;f++,m=!1)!m&&Object(o.g)(t.doc,d,u)&&(t.split(d,u),d+=2*u),d+=h.child(f).nodeSize;return t}(n.tr,c,h,p,t).scrollIntoView()),!0)}}function a(t){return function(e,n){var r=e.selection,s=r.$from,a=r.$to,l=r.node;if(l&&l.isBlock||s.depth<2||!s.sameParent(a))return!1;var c=s.node(-1);if(c.type!=t)return!1;if(0==s.parent.content.size&&s.node(-1).childCount==s.indexAfter(-1)){if(2==s.depth||s.node(-3).type!=t||s.index(-2)!=s.node(-2).childCount-1)return!1;if(n){for(var p=i.Fragment.empty,u=s.index(-1)>0,d=s.depth-(u?1:2);d>=s.depth-3;d--)p=i.Fragment.from(s.node(d).copy(p));p=p.append(i.Fragment.from(t.createAndFill()));var h=e.tr.replace(s.before(u?null:-1),s.after(-3),new i.Slice(p,u?3:2,2));h.setSelection(e.selection.constructor.near(h.doc.resolve(s.pos+(u?3:2)))),n(h.scrollIntoView())}return!0}var f=a.pos==s.end()?c.contentMatchAt(0).defaultType:null,v=e.tr.delete(s.pos,a.pos),m=f&&[null,{type:f}];return!!Object(o.g)(v.doc,s.pos,2,m)&&(n&&n(v.split(s.pos,2,m).scrollIntoView()),!0)}}function l(t){return function(e,n){var r=e.selection,s=r.$from,a=r.$to,l=s.blockRange(a,(function(e){return e.childCount&&e.firstChild.type==t}));return!!l&&(!n||(s.node(l.depth-1).type==t?function(t,e,n,r){var s=t.tr,a=r.end,l=r.$to.end(r.depth);a<l&&(s.step(new o.b(a-1,l,a,l,new i.Slice(i.Fragment.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new i.NodeRange(s.doc.resolve(r.$from.pos),s.doc.resolve(l),r.depth));return e(s.lift(r,Object(o.k)(r)).scrollIntoView()),!0}(e,n,t,l):function(t,e,n){for(var r=t.tr,s=n.parent,a=n.end,l=n.endIndex-1,c=n.startIndex;l>c;l--)a-=s.child(l).nodeSize,r.delete(a-1,a+1);var p=r.doc.resolve(n.start),u=p.nodeAfter,d=0==n.startIndex,h=n.endIndex==s.childCount,f=p.node(-1),v=p.index(-1);if(!f.canReplace(v+(d?0:1),v+1,u.content.append(h?i.Fragment.empty:i.Fragment.from(s))))return!1;var m=p.pos,g=m+u.nodeSize;return r.step(new o.b(m-(d?1:0),g+(h?1:0),m+1,g-1,new i.Slice((d?i.Fragment.empty:i.Fragment.from(s.copy(i.Fragment.empty))).append(h?i.Fragment.empty:i.Fragment.from(s.copy(i.Fragment.empty))),d?0:1,h?0:1),d?0:1)),e(r.scrollIntoView()),!0}(e,n,l)))}}function c(t){return function(e,n){var r=e.selection,s=r.$from,a=r.$to,l=s.blockRange(a,(function(e){return e.childCount&&e.firstChild.type==t}));if(!l)return!1;var c=l.startIndex;if(0==c)return!1;var p=l.parent,u=p.child(c-1);if(u.type!=t)return!1;if(n){var d=u.lastChild&&u.lastChild.type==p.type,h=i.Fragment.from(d?t.create():null),f=new i.Slice(i.Fragment.from(t.create(null,i.Fragment.from(p.type.create(null,h)))),d?3:1,0),v=l.start,m=l.end;n(e.tr.step(new o.b(v-(d?3:1),m,v,m,f,1,!0)).scrollIntoView())}return!0}}var p=n(283),u=n(279),d=n(291),h=n(292);function f(t=""){return(e,n)=>{const{$from:r}=e.selection,{pos:o}=r.pos;return n(e.tr.insertText(t,o)),!0}}function v(t,e,n){return new p.a(t,(t,r,o,i)=>{const s=n instanceof Function?n(r):n,{tr:a}=t,l=r.length-1;let c=i,p=o;if(r[l]){const n=o+r[0].indexOf(r[l-1]),s=n+r[l-1].length-1,u=n+r[l-1].lastIndexOf(r[l]),d=u+r[l].length;if(function(t,e,n){let r=[];return n.doc.nodesBetween(t,e,(t,e)=>{r=[...r,...t.marks.map(n=>({start:e,end:e+t.nodeSize,mark:n}))]}),r}(o,i,t).filter(t=>{const{excluded:n}=t.mark.type;return n.find(t=>t.name===e.name)}).filter(t=>t.end>n).length)return!1;d<s&&a.delete(d,s),u>n&&a.delete(n,u),p=n,c=p+r[l].length}return a.addMark(p,c,e.create(s)),a.removeStoredMark(e),a})}function m(t,e,n){return new p.a(t,(t,r,o,i)=>{const s=n instanceof Function?n(r):n,{tr:a}=t;return r[0]&&a.replaceWith(o-1,i,e.create(s)),a})}function g(t,e,n){const r=o=>{const s=[];return o.forEach(o=>{if(o.isText){const{text:r}=o;let i,a=0;do{if(i=t.exec(r),i){const t=i.index,r=t+i[0].length,l=n instanceof Function?n(i[0]):n;t>0&&s.push(o.cut(a,t)),s.push(o.cut(t,r).mark(e.create(l).addToSet(o.marks))),a=r}}while(i);a<r.length&&s.push(o.cut(a))}else s.push(o.copy(r(o.content)))}),i.Fragment.fromArray(s)};return new u.Plugin({props:{transformPasted:t=>new i.Slice(r(t.content),t.openStart,t.openEnd)}})}function y(t,e,n){const r=(o,s)=>{const a=[];return o.forEach(o=>{if(o.isText){const{text:r,marks:i}=o;let l,c=0;const p=!!i.filter(t=>"link"===t.type.name)[0];for(;!p&&null!==(l=t.exec(r));)if(s&&s.type.allowsMarkType(e)&&l[1]){const t=l.index,r=t+l[0].length,i=t+l[0].indexOf(l[1]),s=i+l[1].length,p=n instanceof Function?n(l):n;t>0&&a.push(o.cut(c,t)),a.push(o.cut(i,s).mark(e.create(p).addToSet(o.marks))),c=r}c<r.length&&a.push(o.cut(c))}else a.push(o.copy(r(o.content,o)))}),i.Fragment.fromArray(a)};return new u.Plugin({props:{transformPasted:t=>new i.Slice(r(t.content),t.openStart,t.openEnd)}})}function b(t){return(e,n)=>{const{tr:r,selection:o}=e;let{from:i,to:s}=o;const{$from:a,empty:l}=o;if(l){const e=Object(d.b)(a,t);i=e.from,s=e.to}return r.removeMark(i,s,t),n(r)}}function w(t=null,e,n={}){return(r,o)=>{const{$from:i,$to:s}=r.selection,a=i.index(),l=t?t.from:i.pos,c=t?t.to:s.pos;return!!i.parent.canReplaceWith(a,a,e)&&(o&&o(r.tr.replaceWith(l,c,e.create(n))),!0)}}function x(t){return function(e,n){const{$from:r,$to:o,node:s}=e.selection;if(s&&s.isBlock||r.depth<2||!r.sameParent(o))return!1;const a=r.node(-1);if(a.type!=t)return!1;if(0==r.parent.content.size){if(2==r.depth||r.node(-3).type!=t||r.index(-2)!=r.node(-2).childCount-1)return!1;if(n){let o=i.Fragment.empty;const s=r.index(-1)>0;for(let t=r.depth-(s?1:2);t>=r.depth-3;t--)o=i.Fragment.from(r.node(t).copy(o));o=o.append(i.Fragment.from(t.createAndFill()));const a=e.tr.replace(r.before(s?null:-1),r.after(-3),new i.Slice(o,s?3:2,2));a.setSelection(e.selection.constructor.near(a.doc.resolve(r.pos+(s?3:2)))),n(a.scrollIntoView())}return!0}const l=o.pos==r.end()?a.contentMatchAt(r.indexAfter(-1)).defaultType:null,c=e.tr.delete(r.pos,o.pos);let p=l&&[{type:t},{type:l}];return p||(p=[{type:t},null]),!!function(t,e,n=1,r){const o=t.resolve(e),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let t=o.depth-1,e=n-2;t>i;t--,e--){const n=o.node(t),i=o.index(t);if(n.type.spec.isolating)return!1;let s=n.content.cutByIndex(i,n.childCount);const a=r&&r[e]||n;if(a!=n&&(s=s.replaceChild(0,a.type.create(a.attrs))),!n.canReplace(i+1,n.childCount))return!1}const a=o.indexAfter(i),l=r&&r[0];return o.node(i).canReplaceWith(a,a,l?l.type:o.node(i+1).type)}(c.doc,r.pos,2,p)&&(n&&n(c.split(r.pos,2,p).scrollIntoView()),!0)}}function S(t,e,n={}){return(o,i,s)=>Object(d.f)(o,t,n)?Object(r.e)(e)(o,i,s):Object(r.e)(t,n)(o,i,s)}function k(t,e){return t.type===e.nodes.bullet_list||t.type===e.nodes.ordered_list||t.type===e.nodes.todo_list}function C(t,e){return(n,r,o)=>{const{schema:i,selection:a}=n,{$from:c,$to:p}=a,u=c.blockRange(p);if(!u)return!1;const d=Object(h.findParentNode)(t=>k(t,i))(a);if(u.depth>=1&&d&&u.depth-d.depth<=1){if(d.node.type===t)return l(e)(n,r,o);if(k(d.node,i)&&t.validContent(d.node.content)){const{tr:e}=n;return e.setNodeMarkup(d.pos,t),r&&r(e),!1}}return s(t)(n,r,o)}}function O(t,e={}){return(n,o,i)=>Object(d.f)(n,t,e)?Object(r.d)(n,o):Object(r.g)(t,e)(n,o,i)}function M(t,e){return(n,r)=>{const{tr:o,selection:i,doc:s}=n,{ranges:a,empty:l}=i;if(l){const{from:n,to:r}=Object(d.b)(i.$from,t);s.rangeHasMark(n,r,t)&&o.removeMark(n,r,t),o.addMark(n,r,t.create(e))}else a.forEach(n=>{const{$to:r,$from:i}=n;s.rangeHasMark(i.pos,r.pos,t)&&o.removeMark(i.pos,r.pos,t),o.addMark(i.pos,r.pos,t.create(e))});return r(o)}}},341:function(t,e,n){var r=n(342);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(6)(r,o);r.locals&&(t.exports=r.locals)},342:function(t,e,n){(t.exports=n(5)(!1)).push([t.i,'.theme--light.v-slider .v-slider__track-background,\n.theme--light.v-slider .v-slider__track-fill,\n.theme--light.v-slider .v-slider__thumb {\n  background: rgba(0, 0, 0, 0.26);\n}\n\n.theme--dark.v-slider .v-slider__track-background,\n.theme--dark.v-slider .v-slider__track-fill,\n.theme--dark.v-slider .v-slider__thumb {\n  background: rgba(255, 255, 255, 0.2);\n}\n\n.v-slider {\n  cursor: default;\n  display: flex;\n  align-items: center;\n  position: relative;\n  flex: 1;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.v-slider input {\n  cursor: default;\n  padding: 0;\n  width: 100%;\n  display: none;\n}\n\n.v-slider__track-container {\n  position: absolute;\n  border-radius: 0;\n}\n\n.v-slider__track-background, .v-slider__track-fill {\n  position: absolute;\n  transition: 0.3s cubic-bezier(0.25, 0.8, 0.5, 1);\n}\n\n.v-slider__thumb-container {\n  outline: none;\n  position: absolute;\n  transition: 0.3s cubic-bezier(0.25, 0.8, 0.5, 1);\n  top: 50%;\n}\n.v-slider__thumb-container:hover .v-slider__thumb:before {\n  transform: scale(1);\n}\n\n.v-slider__thumb {\n  position: absolute;\n  width: 12px;\n  height: 12px;\n  left: -6px;\n  top: 50%;\n  border-radius: 50%;\n  transition: 0.3s cubic-bezier(0.25, 0.8, 0.5, 1);\n  transform: translateY(-50%);\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.v-slider__thumb:before {\n  transition: 0.3s cubic-bezier(0.25, 0.8, 0.5, 1);\n  content: "";\n  color: inherit;\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  background: currentColor;\n  opacity: 0.3;\n  position: absolute;\n  left: -12px;\n  top: -12px;\n  transform: scale(0.1);\n  pointer-events: none;\n}\n\n.v-slider__ticks-container {\n  position: absolute;\n}\n\n.v-slider__tick {\n  position: absolute;\n  opacity: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  transition: 0.3s cubic-bezier(0.25, 0.8, 0.5, 1);\n  border-radius: 0;\n}\n.v-slider__tick--filled {\n  background-color: rgba(255, 255, 255, 0.5);\n}\n.v-application--is-ltr .v-slider__tick:first-child .v-slider__tick-label {\n  transform: none;\n}\n.v-application--is-rtl .v-slider__tick:first-child .v-slider__tick-label {\n  transform: translateX(100%);\n}\n.v-application--is-ltr .v-slider__tick:last-child .v-slider__tick-label {\n  transform: translateX(-100%);\n}\n.v-application--is-rtl .v-slider__tick:last-child .v-slider__tick-label {\n  transform: none;\n}\n\n.v-slider__tick-label {\n  position: absolute;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  white-space: nowrap;\n}\n\n.v-slider__thumb-label-container {\n  position: absolute;\n  left: 0;\n  top: 0;\n  transition: 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);\n}\n\n.v-slider__thumb-label {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 0.75rem;\n  color: #fff;\n  width: 32px;\n  height: 32px;\n  border-radius: 50% 50% 0;\n  position: absolute;\n  left: 0;\n  bottom: 100%;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  transition: 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);\n}\n\n.v-slider--horizontal {\n  min-height: 32px;\n  margin-left: 8px;\n  margin-right: 8px;\n}\n.v-slider--horizontal .v-slider__track-container {\n  width: 100%;\n  height: 2px;\n  left: 0;\n  top: 50%;\n  transform: translateY(-50%);\n}\n.v-slider--horizontal .v-slider__track-background, .v-slider--horizontal .v-slider__track-fill {\n  height: 100%;\n}\n.v-slider--horizontal .v-slider__ticks-container {\n  left: 0;\n  height: 2px;\n  width: 100%;\n}\n.v-application--is-ltr .v-slider--horizontal .v-slider__tick:first-child .v-slider__tick-label {\n  transform: translateX(0%);\n}\n.v-application--is-rtl .v-slider--horizontal .v-slider__tick:first-child .v-slider__tick-label {\n  transform: translateX(0%);\n}\n.v-application--is-ltr .v-slider--horizontal .v-slider__tick:last-child .v-slider__tick-label {\n  transform: translateX(-100%);\n}\n.v-application--is-rtl .v-slider--horizontal .v-slider__tick:last-child .v-slider__tick-label {\n  transform: translateX(100%);\n}\n.v-slider--horizontal .v-slider__tick .v-slider__tick-label {\n  top: 8px;\n}\n.v-application--is-ltr .v-slider--horizontal .v-slider__tick .v-slider__tick-label {\n  transform: translateX(-50%);\n}\n.v-application--is-rtl .v-slider--horizontal .v-slider__tick .v-slider__tick-label {\n  transform: translateX(50%);\n}\n.v-slider--horizontal .v-slider__thumb-label {\n  transform: translateY(-20%) translateY(-12px) translateX(-50%) rotate(45deg);\n}\n.v-slider--horizontal .v-slider__thumb-label > * {\n  transform: rotate(-45deg);\n}\n\n.v-slider--vertical {\n  min-height: 150px;\n  margin-top: 12px;\n  margin-bottom: 12px;\n}\n.v-slider--vertical .v-slider__track-container {\n  height: 100%;\n  width: 2px;\n  left: 50%;\n  top: 0;\n  transform: translateX(-50%);\n}\n.v-slider--vertical .v-slider__track-background, .v-slider--vertical .v-slider__track-fill {\n  width: 100%;\n}\n.v-slider--vertical .v-slider__thumb-container {\n  left: 50%;\n}\n.v-slider--vertical .v-slider__ticks-container {\n  top: 0;\n  width: 2px;\n  height: 100%;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.v-application--is-ltr .v-slider--vertical .v-slider__tick .v-slider__tick-label, .v-application--is-ltr .v-slider--vertical .v-slider__tick:first-child .v-slider__tick-label, .v-application--is-ltr .v-slider--vertical .v-slider__tick:last-child .v-slider__tick-label {\n  transform: translateY(-50%);\n  left: 12px;\n}\n.v-application--is-rtl .v-slider--vertical .v-slider__tick .v-slider__tick-label, .v-application--is-rtl .v-slider--vertical .v-slider__tick:first-child .v-slider__tick-label, .v-application--is-rtl .v-slider--vertical .v-slider__tick:last-child .v-slider__tick-label {\n  transform: translateY(-50%);\n  right: 12px;\n}\n.v-slider--vertical .v-slider__thumb-label > * {\n  transform: rotate(-135deg);\n}\n\n.v-slider__thumb-container--focused .v-slider__thumb:before {\n  transform: scale(1);\n}\n\n.v-slider--active .v-slider__tick {\n  opacity: 1;\n}\n\n.v-slider__thumb-container--active .v-slider__thumb:before {\n  transform: scale(1.5) !important;\n}\n\n.v-slider--disabled {\n  pointer-events: none;\n}\n.v-slider--disabled .v-slider__thumb {\n  width: 8px;\n  height: 8px;\n  left: -4px;\n}\n.v-slider--disabled .v-slider__thumb:before {\n  display: none;\n}\n\n.v-slider__ticks-container--always-show .v-slider__tick {\n  opacity: 1;\n}\n\n.v-input__slider.v-input--is-readonly > .v-input__control {\n  pointer-events: none;\n}\n.v-application--is-ltr .v-input__slider .v-input__slot .v-label {\n  margin-left: 0;\n  margin-right: 12px;\n}\n.v-application--is-rtl .v-input__slider .v-input__slot .v-label {\n  margin-right: 0;\n  margin-left: 12px;\n}\n\n.v-application--is-ltr .v-input__slider--inverse-label .v-input__slot .v-label {\n  margin-right: 0;\n  margin-left: 12px;\n}\n.v-application--is-rtl .v-input__slider--inverse-label .v-input__slot .v-label {\n  margin-left: 0;\n  margin-right: 12px;\n}\n\n.v-input__slider--vertical {\n  align-items: center;\n}\n.v-application--is-ltr .v-input__slider--vertical {\n  flex-direction: column-reverse;\n}\n.v-application--is-rtl .v-input__slider--vertical {\n  flex-direction: column;\n}\n.v-input__slider--vertical .v-input__slot, .v-input__slider--vertical .v-input__prepend-outer, .v-input__slider--vertical .v-input__append-outer {\n  margin: 0;\n}\n.v-input__slider--vertical .v-messages {\n  display: none;\n}\n\n.v-input--has-state .v-slider__track-background {\n  opacity: 0.4;\n}',""])},349:function(t,e,n){var r=n(350);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(6)(r,o);r.locals&&(t.exports=r.locals)},350:function(t,e,n){(t.exports=n(5)(!1)).push([t.i,".theme--light.v-stepper {\n  background: #FFFFFF;\n}\n.theme--light.v-stepper .v-stepper__step:not(.v-stepper__step--active):not(.v-stepper__step--complete):not(.v-stepper__step--error) .v-stepper__step__step {\n  background: rgba(0, 0, 0, 0.38);\n}\n.theme--light.v-stepper .v-stepper__step__step {\n  color: white;\n}\n.theme--light.v-stepper .v-stepper__step__step .v-icon {\n  color: white;\n}\n.theme--light.v-stepper .v-stepper__header .v-divider {\n  border-color: rgba(0, 0, 0, 0.12);\n}\n.theme--light.v-stepper .v-stepper__step--active .v-stepper__label {\n  text-shadow: 0px 0px 0px black;\n}\n.theme--light.v-stepper .v-stepper__step--editable:hover {\n  background: rgba(0, 0, 0, 0.06);\n}\n.theme--light.v-stepper .v-stepper__step--editable:hover .v-stepper__label {\n  text-shadow: 0px 0px 0px black;\n}\n.theme--light.v-stepper .v-stepper__step--complete .v-stepper__label {\n  color: rgba(0, 0, 0, 0.87);\n}\n.theme--light.v-stepper .v-stepper__step--inactive.v-stepper__step--editable:not(.v-stepper__step--error):hover .v-stepper__step__step {\n  background: rgba(0, 0, 0, 0.54);\n}\n.theme--light.v-stepper .v-stepper__label {\n  color: rgba(0, 0, 0, 0.38);\n}\n.theme--light.v-stepper .v-stepper__label small {\n  color: rgba(0, 0, 0, 0.6);\n}\n.theme--light.v-stepper--non-linear .v-stepper__step:not(.v-stepper__step--complete):not(.v-stepper__step--error) .v-stepper__label {\n  color: rgba(0, 0, 0, 0.6);\n}\n.v-application--is-ltr .theme--light.v-stepper--vertical .v-stepper__content:not(:last-child) {\n  border-left: 1px solid rgba(0, 0, 0, 0.12);\n}\n.v-application--is-rtl .theme--light.v-stepper--vertical .v-stepper__content:not(:last-child) {\n  border-right: 1px solid rgba(0, 0, 0, 0.12);\n}\n\n.theme--dark.v-stepper {\n  background: #303030;\n}\n.theme--dark.v-stepper .v-stepper__step:not(.v-stepper__step--active):not(.v-stepper__step--complete):not(.v-stepper__step--error) .v-stepper__step__step {\n  background: rgba(255, 255, 255, 0.5);\n}\n.theme--dark.v-stepper .v-stepper__step__step {\n  color: white;\n}\n.theme--dark.v-stepper .v-stepper__step__step .v-icon {\n  color: white;\n}\n.theme--dark.v-stepper .v-stepper__header .v-divider {\n  border-color: rgba(255, 255, 255, 0.12);\n}\n.theme--dark.v-stepper .v-stepper__step--active .v-stepper__label {\n  text-shadow: 0px 0px 0px white;\n}\n.theme--dark.v-stepper .v-stepper__step--editable:hover {\n  background: rgba(255, 255, 255, 0.06);\n}\n.theme--dark.v-stepper .v-stepper__step--editable:hover .v-stepper__label {\n  text-shadow: 0px 0px 0px white;\n}\n.theme--dark.v-stepper .v-stepper__step--complete .v-stepper__label {\n  color: rgba(255, 255, 255, 0.87);\n}\n.theme--dark.v-stepper .v-stepper__step--inactive.v-stepper__step--editable:not(.v-stepper__step--error):hover .v-stepper__step__step {\n  background: rgba(255, 255, 255, 0.75);\n}\n.theme--dark.v-stepper .v-stepper__label {\n  color: rgba(255, 255, 255, 0.5);\n}\n.theme--dark.v-stepper .v-stepper__label small {\n  color: rgba(255, 255, 255, 0.7);\n}\n.theme--dark.v-stepper--non-linear .v-stepper__step:not(.v-stepper__step--complete):not(.v-stepper__step--error) .v-stepper__label {\n  color: rgba(255, 255, 255, 0.7);\n}\n.v-application--is-ltr .theme--dark.v-stepper--vertical .v-stepper__content:not(:last-child) {\n  border-left: 1px solid rgba(255, 255, 255, 0.12);\n}\n.v-application--is-rtl .theme--dark.v-stepper--vertical .v-stepper__content:not(:last-child) {\n  border-right: 1px solid rgba(255, 255, 255, 0.12);\n}\n\n.v-stepper {\n  border-radius: 4px;\n  overflow: hidden;\n  position: relative;\n  box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);\n}\n.v-stepper__header {\n  height: 72px;\n  align-items: stretch;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);\n}\n.v-stepper__header .v-divider {\n  align-self: center;\n  margin: 0 -16px;\n}\n.v-stepper__items {\n  position: relative;\n  overflow: hidden;\n}\n.v-stepper__step__step {\n  align-items: center;\n  border-radius: 50%;\n  display: inline-flex;\n  font-size: 0.75rem;\n  justify-content: center;\n  height: 24px;\n  min-width: 24px;\n  width: 24px;\n  transition: 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);\n}\n.v-application--is-ltr .v-stepper__step__step {\n  margin-right: 8px;\n}\n.v-application--is-rtl .v-stepper__step__step {\n  margin-left: 8px;\n}\n.v-stepper__step__step .v-icon.v-icon {\n  font-size: 1.25rem;\n}\n.v-stepper__step__step .v-icon.v-icon.v-icon--svg {\n  height: 1.25rem;\n  width: 1.25rem;\n}\n.v-stepper__step {\n  align-items: center;\n  display: flex;\n  flex-direction: row;\n  padding: 24px;\n  position: relative;\n}\n.v-stepper__step--active .v-stepper__label {\n  transition: 0.3s cubic-bezier(0.4, 0, 0.6, 1);\n}\n.v-stepper__step--editable {\n  cursor: pointer;\n}\n.v-stepper__step.v-stepper__step--error .v-stepper__step__step {\n  background: transparent;\n  color: inherit;\n}\n.v-stepper__step.v-stepper__step--error .v-stepper__step__step .v-icon {\n  font-size: 1.5rem;\n  color: inherit;\n}\n.v-stepper__step.v-stepper__step--error .v-stepper__label {\n  color: inherit;\n  text-shadow: none;\n  font-weight: 500;\n}\n.v-stepper__step.v-stepper__step--error .v-stepper__label small {\n  color: inherit;\n}\n.v-stepper__label {\n  align-items: flex-start;\n  display: flex;\n  flex-direction: column;\n  line-height: 1;\n}\n.v-application--is-ltr .v-stepper__label {\n  text-align: left;\n}\n.v-application--is-rtl .v-stepper__label {\n  text-align: right;\n}\n.v-stepper__label small {\n  font-size: 0.75rem;\n  font-weight: 300;\n  text-shadow: none;\n}\n.v-stepper__wrapper {\n  overflow: hidden;\n  transition: none;\n}\n.v-stepper__content {\n  top: 0;\n  padding: 24px 24px 16px 24px;\n  flex: 1 0 auto;\n  width: 100%;\n}\n.v-stepper__content > .v-btn {\n  margin: 24px 8px 8px 0;\n}\n.v-stepper--is-booted .v-stepper__content, .v-stepper--is-booted .v-stepper__wrapper {\n  transition: 0.3s cubic-bezier(0.25, 0.8, 0.5, 1);\n}\n.v-stepper--vertical {\n  padding-bottom: 36px;\n}\n.v-stepper--vertical .v-stepper__content {\n  padding: 16px 60px 16px 23px;\n  width: auto;\n}\n.v-application--is-ltr .v-stepper--vertical .v-stepper__content {\n  margin: -8px -36px -16px 36px;\n}\n.v-application--is-rtl .v-stepper--vertical .v-stepper__content {\n  margin: -8px 36px -16px -36px;\n}\n.v-stepper--vertical .v-stepper__step {\n  padding: 24px 24px 16px;\n}\n.v-application--is-ltr .v-stepper--vertical .v-stepper__step__step {\n  margin-right: 12px;\n}\n.v-application--is-rtl .v-stepper--vertical .v-stepper__step__step {\n  margin-left: 12px;\n}\n.v-stepper--alt-labels .v-stepper__header {\n  height: auto;\n}\n.v-stepper--alt-labels .v-stepper__header .v-divider {\n  margin: 35px -67px 0;\n  align-self: flex-start;\n}\n.v-stepper--alt-labels .v-stepper__step {\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  flex-basis: 175px;\n}\n.v-stepper--alt-labels .v-stepper__step small {\n  align-self: center;\n}\n.v-stepper--alt-labels .v-stepper__step__step {\n  margin-bottom: 11px;\n  margin-left: 0;\n  margin-right: 0;\n}\n\n@media only screen and (max-width: 959px) {\n  .v-stepper:not(.v-stepper--vertical) .v-stepper__label {\n    display: none;\n  }\n  .v-stepper:not(.v-stepper--vertical) .v-stepper__step__step {\n    margin-left: 0;\n    margin-right: 0;\n  }\n}",""])},351:function(t,e,n){!function(t){"use strict";var e={inject:["manager"],props:{index:{type:Number,required:!0},collection:{type:[String,Number],default:"default"},disabled:{type:Boolean,default:!1}},mounted:function(){var t=this.$props,e=t.collection,n=t.disabled,r=t.index;n||this.setDraggable(e,r)},watch:{index:function(t){this.$el&&this.$el.sortableInfo&&(this.$el.sortableInfo.index=t)},disabled:function(t){t?this.removeDraggable(this.collection):this.setDraggable(this.collection,this.index)},collection:function(t,e){this.removeDraggable(e),this.setDraggable(t,this.index)}},beforeDestroy:function(){var t=this.collection;this.disabled||this.removeDraggable(t)},methods:{setDraggable:function(t,e){var n=this.$el;n.sortableInfo={index:e,collection:t,manager:this.manager},this.ref={node:n},this.manager.add(t,this.ref)},removeDraggable:function(t){this.manager.remove(t,this.ref)}}},n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.refs={}}return n(t,[{key:"add",value:function(t,e){this.refs[t]||(this.refs[t]=[]),this.refs[t].push(e)}},{key:"remove",value:function(t,e){var n=this.getIndex(t,e);-1!==n&&this.refs[t].splice(n,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var t=this;return this.refs[this.active.collection].find((function(e){return e.node.sortableInfo.index==t.active.index}))}},{key:"getIndex",value:function(t,e){return this.refs[t].indexOf(e)}},{key:"getOrderedRefs",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.active.collection;return this.refs[t].sort((function(t,e){return t.node.sortableInfo.index-e.node.sortableInfo.index}))}}]),t}();function s(t,e,n){var r=t.slice(0);if(n>=r.length)for(var o=n-r.length;1+o--;)r.push(void 0);return r.splice(n,0,r.splice(e,1)[0]),r}var a={start:["touchstart","mousedown"],move:["touchmove","mousemove"],end:["touchend","touchcancel","mouseup"]},l=function(){if("undefined"==typeof window||"undefined"==typeof document)return"";var t=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],e=(Array.prototype.slice.call(t).join("").match(/-(moz|webkit|ms)-/)||""===t.OLink&&["","o"])[1];switch(e){case"ms":return"ms";default:return e&&e.length?e[0].toUpperCase()+e.substr(1):""}}();function c(t,e){for(;t;){if(e(t))return t;t=t.parentNode}}function p(t,e,n){return n<t?t:n>e?e:n}function u(t){return"px"===t.substr(-2)?parseFloat(t):0}var d={data:function(){return{sorting:!1,sortingIndex:null,manager:new i,events:{start:this.handleStart,move:this.handleMove,end:this.handleEnd}}},props:{value:{type:Array,required:!0},axis:{type:String,default:"y"},distance:{type:Number,default:0},pressDelay:{type:Number,default:0},pressThreshold:{type:Number,default:5},useDragHandle:{type:Boolean,default:!1},useWindowAsScrollContainer:{type:Boolean,default:!1},hideSortableGhost:{type:Boolean,default:!0},lockToContainerEdges:{type:Boolean,default:!1},lockOffset:{type:[String,Number,Array],default:"50%"},transitionDuration:{type:Number,default:300},appendTo:{type:String,default:"body"},draggedSettlingDuration:{type:Number,default:null},lockAxis:String,helperClass:String,contentWindow:Object,shouldCancelStart:{type:Function,default:function(t){return-1!==["input","textarea","select","option","button"].indexOf(t.target.tagName.toLowerCase())}},getHelperDimensions:{type:Function,default:function(t){var e=t.node;return{width:e.offsetWidth,height:e.offsetHeight}}}},provide:function(){return{manager:this.manager}},mounted:function(){var t=this;this.container=this.$el,this.document=this.container.ownerDocument||document,this._window=this.contentWindow||window,this.scrollContainer=this.useWindowAsScrollContainer?this.document.body:this.container;var e=function(e){t.events.hasOwnProperty(e)&&a[e].forEach((function(n){return t.container.addEventListener(n,t.events[e],{passive:!0})}))};for(var n in this.events)e(n)},beforeDestroy:function(){var t=this,e=function(e){t.events.hasOwnProperty(e)&&a[e].forEach((function(n){return t.container.removeEventListener(n,t.events[e])}))};for(var n in this.events)e(n)},methods:{handleStart:function(t){var e=this,n=this.$props,r=n.distance,o=n.shouldCancelStart;if(2===t.button||o(t))return!1;this._touched=!0,this._pos=this.getOffset(t);var i=c(t.target,(function(t){return null!=t.sortableInfo}));if(i&&i.sortableInfo&&this.nodeIsChild(i)&&!this.sorting){var s=this.$props.useDragHandle,a=i.sortableInfo,l=a.index,p=a.collection;if(s&&!c(t.target,(function(t){return null!=t.sortableHandle})))return;this.manager.active={index:l,collection:p},"a"===t.target.tagName.toLowerCase()&&t.preventDefault(),r||(0===this.$props.pressDelay?this.handlePress(t):this.pressTimer=setTimeout((function(){return e.handlePress(t)}),this.$props.pressDelay))}},nodeIsChild:function(t){return t.sortableInfo.manager===this.manager},handleMove:function(t){var e=this.$props,n=e.distance,r=e.pressThreshold;if(!this.sorting&&this._touched){var o=this.getOffset(t);this._delta={x:this._pos.x-o.x,y:this._pos.y-o.y};var i=Math.abs(this._delta.x)+Math.abs(this._delta.y);n||r&&!(r&&i>=r)?n&&i>=n&&this.manager.isActive()&&this.handlePress(t):(clearTimeout(this.cancelTimer),this.cancelTimer=setTimeout(this.cancel,0))}},handleEnd:function(){var t=this.$props.distance;this._touched=!1,t||this.cancel()},cancel:function(){this.sorting||(clearTimeout(this.pressTimer),this.manager.active=null)},handlePress:function(t){var e=this;t.stopPropagation();var n,r,i=this.manager.getActive();if(i){var s=this.$props,l=s.axis,c=s.getHelperDimensions,p=s.helperClass,d=s.hideSortableGhost,h=s.useWindowAsScrollContainer,f=s.appendTo,v=i.node,m=i.collection,g=v.sortableInfo.index,y=(n=v,{top:u((r=window.getComputedStyle(n)).marginTop),right:u(r.marginRight),bottom:u(r.marginBottom),left:u(r.marginLeft)}),b=this.container.getBoundingClientRect(),w=c({index:g,node:v,collection:m});this.node=v,this.margin=y,this.width=w.width,this.height=w.height,this.marginOffset={x:this.margin.left+this.margin.right,y:Math.max(this.margin.top,this.margin.bottom)},this.boundingClientRect=v.getBoundingClientRect(),this.containerBoundingRect=b,this.index=g,this.newIndex=g,this._axis={x:l.indexOf("x")>=0,y:l.indexOf("y")>=0},this.offsetEdge=this.getEdgeOffset(v),this.initialOffset=this.getOffset(t),this.initialScroll={top:this.scrollContainer.scrollTop,left:this.scrollContainer.scrollLeft},this.initialWindowScroll={top:window.pageYOffset,left:window.pageXOffset};var x,S=v.querySelectorAll("input, textarea, select"),k=v.cloneNode(!0);[].concat(o(k.querySelectorAll("input, textarea, select"))).forEach((function(t,e){"file"!==t.type&&S[e]&&(t.value=S[e].value)})),this.helper=this.document.querySelector(f).appendChild(k),this.helper.style.position="fixed",this.helper.style.top=this.boundingClientRect.top-y.top+"px",this.helper.style.left=this.boundingClientRect.left-y.left+"px",this.helper.style.width=this.width+"px",this.helper.style.height=this.height+"px",this.helper.style.boxSizing="border-box",this.helper.style.pointerEvents="none",d&&(this.sortableGhost=v,v.style.visibility="hidden",v.style.opacity=0),this.translate={},this.minTranslate={},this.maxTranslate={},this._axis.x&&(this.minTranslate.x=(h?0:b.left)-this.boundingClientRect.left-this.width/2,this.maxTranslate.x=(h?this._window.innerWidth:b.left+b.width)-this.boundingClientRect.left-this.width/2),this._axis.y&&(this.minTranslate.y=(h?0:b.top)-this.boundingClientRect.top-this.height/2,this.maxTranslate.y=(h?this._window.innerHeight:b.top+b.height)-this.boundingClientRect.top-this.height/2),p&&(x=this.helper.classList).add.apply(x,o(p.split(" "))),this.listenerNode=t.touches?v:this._window,a.move.forEach((function(t){return e.listenerNode.addEventListener(t,e.handleSortMove,!1)})),a.end.forEach((function(t){return e.listenerNode.addEventListener(t,e.handleSortEnd,!1)})),this.sorting=!0,this.sortingIndex=g,this.$emit("sort-start",{event:t,node:v,index:g,collection:m})}},handleSortMove:function(t){t.preventDefault(),this.updatePosition(t),this.animateNodes(),this.autoscroll(),this.$emit("sort-move",{event:t})},handleSortEnd:function(t){var e=this,n=this.manager.active.collection;this.listenerNode&&(a.move.forEach((function(t){return e.listenerNode.removeEventListener(t,e.handleSortMove)})),a.end.forEach((function(t){return e.listenerNode.removeEventListener(t,e.handleSortEnd)})));var r=this.manager.refs[n],o=function(){e.helper.parentNode.removeChild(e.helper),e.hideSortableGhost&&e.sortableGhost&&(e.sortableGhost.style.visibility="",e.sortableGhost.style.opacity="");for(var o=0,i=r.length;o<i;o++){var a=r[o],c=a.node;a.edgeOffset=null,c.style[l+"Transform"]="",c.style[l+"TransitionDuration"]=""}clearInterval(e.autoscrollInterval),e.autoscrollInterval=null,e.manager.active=null,e.sorting=!1,e.sortingIndex=null,e.$emit("sort-end",{event:t,oldIndex:e.index,newIndex:e.newIndex,collection:n}),e.$emit("input",s(e.value,e.index,e.newIndex)),e._touched=!1};this.$props.transitionDuration||this.$props.draggedSettlingDuration?this.transitionHelperIntoPlace(r).then((function(){return o()})):o()},transitionHelperIntoPlace:function(t){var e=this;if(0===this.$props.draggedSettlingDuration||0===t.length)return Promise.resolve();var n=this.scrollContainer.scrollLeft-this.initialScroll.left,r=this.scrollContainer.scrollTop-this.initialScroll.top,o=t[this.index].node,i=t[this.newIndex].node,s=-n;this.translate&&this.translate.x>0?s+=i.offsetLeft+i.offsetWidth-(o.offsetLeft+o.offsetWidth):s+=i.offsetLeft-o.offsetLeft;var a=-r;this.translate&&this.translate.y>0?a+=i.offsetTop+i.offsetHeight-(o.offsetTop+o.offsetHeight):a+=i.offsetTop-o.offsetTop;var c=null!==this.$props.draggedSettlingDuration?this.$props.draggedSettlingDuration:this.$props.transitionDuration;return this.helper.style[l+"Transform"]="translate3d("+s+"px,"+a+"px, 0)",this.helper.style[l+"TransitionDuration"]=c+"ms",new Promise((function(t){var n=function(n){n&&"transform"!==n.propertyName||(clearTimeout(r),e.helper.style[l+"Transform"]="",e.helper.style[l+"TransitionDuration"]="",t())},r=setTimeout(n,c+10);e.helper.addEventListener("transitionend",n,!1)}))},getEdgeOffset:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{top:0,left:0};if(t){var n={top:e.top+t.offsetTop,left:e.left+t.offsetLeft};return t.parentNode!==this.container?this.getEdgeOffset(t.parentNode,n):n}},getOffset:function(t){var e=t.touches?t.touches[0]:t;return{x:e.pageX,y:e.pageY}},getLockPixelOffsets:function(){var t=this.$props.lockOffset;if(Array.isArray(this.lockOffset)||(t=[t,t]),2!==t.length)throw new Error("lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given "+t);var e=r(t,2),n=e[0],o=e[1];return[this.getLockPixelOffset(n),this.getLockPixelOffset(o)]},getLockPixelOffset:function(t){var e=t,n=t,r="px";if("string"==typeof t){var o=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(t);if(null===o)throw new Error('lockOffset value should be a number or a string of a number followed by "px" or "%". Given '+t);e=n=parseFloat(t),r=o[1]}if(!isFinite(e)||!isFinite(n))throw new Error("lockOffset value should be a finite. Given "+t);return"%"===r&&(e=e*this.width/100,n=n*this.height/100),{x:e,y:n}},updatePosition:function(t){var e=this.$props,n=e.lockAxis,o=e.lockToContainerEdges,i=this.getOffset(t),s={x:i.x-this.initialOffset.x,y:i.y-this.initialOffset.y};if(s.y-=window.pageYOffset-this.initialWindowScroll.top,s.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=s,o){var a=this.getLockPixelOffsets(),c=r(a,2),u=c[0],d=c[1],h={x:this.width/2-u.x,y:this.height/2-u.y},f={x:this.width/2-d.x,y:this.height/2-d.y};s.x=p(this.minTranslate.x+h.x,this.maxTranslate.x-f.x,s.x),s.y=p(this.minTranslate.y+h.y,this.maxTranslate.y-f.y,s.y)}"x"===n?s.y=0:"y"===n&&(s.x=0),this.helper.style[l+"Transform"]="translate3d("+s.x+"px,"+s.y+"px, 0)"},animateNodes:function(){var t=this.$props,e=t.transitionDuration,n=t.hideSortableGhost,r=this.manager.getOrderedRefs(),o=this.scrollContainer.scrollLeft-this.initialScroll.left,i=this.scrollContainer.scrollTop-this.initialScroll.top,s=this.offsetEdge.left+this.translate.x+o,a=this.offsetEdge.top+this.translate.y+i,c=window.pageYOffset-this.initialWindowScroll.top,p=window.pageXOffset-this.initialWindowScroll.left;this.newIndex=null;for(var u=0,d=r.length;u<d;u++){var h=r[u].node,f=h.sortableInfo.index,v=h.offsetWidth,m=h.offsetHeight,g={width:this.width>v?v/2:this.width/2,height:this.height>m?m/2:this.height/2},y={x:0,y:0},b=r[u].edgeOffset;b||(r[u].edgeOffset=b=this.getEdgeOffset(h));var w=u<r.length-1&&r[u+1],x=u>0&&r[u-1];w&&!w.edgeOffset&&(w.edgeOffset=this.getEdgeOffset(w.node)),f!==this.index?(e&&(h.style[l+"TransitionDuration"]=e+"ms"),this._axis.x?this._axis.y?f<this.index&&(s+p-g.width<=b.left&&a+c<=b.top+g.height||a+c+g.height<=b.top)?(y.x=this.width+this.marginOffset.x,b.left+y.x>this.containerBoundingRect.width-g.width&&(y.x=w.edgeOffset.left-b.left,y.y=w.edgeOffset.top-b.top),null===this.newIndex&&(this.newIndex=f)):f>this.index&&(s+p+g.width>=b.left&&a+c+g.height>=b.top||a+c+g.height>=b.top+m)&&(y.x=-(this.width+this.marginOffset.x),b.left+y.x<this.containerBoundingRect.left+g.width&&(y.x=x.edgeOffset.left-b.left,y.y=x.edgeOffset.top-b.top),this.newIndex=f):f>this.index&&s+p+g.width>=b.left?(y.x=-(this.width+this.marginOffset.x),this.newIndex=f):f<this.index&&s+p<=b.left+g.width&&(y.x=this.width+this.marginOffset.x,null==this.newIndex&&(this.newIndex=f)):this._axis.y&&(f>this.index&&a+c+g.height>=b.top?(y.y=-(this.height+this.marginOffset.y),this.newIndex=f):f<this.index&&a+c<=b.top+g.height&&(y.y=this.height+this.marginOffset.y,null==this.newIndex&&(this.newIndex=f))),h.style[l+"Transform"]="translate3d("+y.x+"px,"+y.y+"px,0)"):n&&(this.sortableGhost=h,h.style.visibility="hidden",h.style.opacity=0)}null==this.newIndex&&(this.newIndex=this.index)},autoscroll:function(){var t=this,e=this.translate,n={x:0,y:0},r={x:1,y:1},o=10,i=10;e.y>=this.maxTranslate.y-this.height/2?(n.y=1,r.y=i*Math.abs((this.maxTranslate.y-this.height/2-e.y)/this.height)):e.x>=this.maxTranslate.x-this.width/2?(n.x=1,r.x=o*Math.abs((this.maxTranslate.x-this.width/2-e.x)/this.width)):e.y<=this.minTranslate.y+this.height/2?(n.y=-1,r.y=i*Math.abs((e.y-this.height/2-this.minTranslate.y)/this.height)):e.x<=this.minTranslate.x+this.width/2&&(n.x=-1,r.x=o*Math.abs((e.x-this.width/2-this.minTranslate.x)/this.width)),this.autoscrollInterval&&(clearInterval(this.autoscrollInterval),this.autoscrollInterval=null,this.isAutoScrolling=!1),0===n.x&&0===n.y||(this.autoscrollInterval=setInterval((function(){t.isAutoScrolling=!0;var e=1*r.x*n.x,o=1*r.y*n.y;t.scrollContainer.scrollTop+=o,t.scrollContainer.scrollLeft+=e,t.translate.x+=e,t.translate.y+=o,t.animateNodes()}),5))}}};function h(t,e){return{name:t,mixins:[e],props:{tag:{type:String,default:"div"}},render:function(t){return t(this.tag,this.$slots.default)}}}var f=h("slick-list",d),v=h("slick-item",e);t.ElementMixin=e,t.ContainerMixin=d,t.HandleDirective={bind:function(t){t.sortableHandle=!0}},t.SlickList=f,t.SlickItem=v,t.arrayMove=s,Object.defineProperty(t,"__esModule",{value:!0})}(e)},354:function(t,e,n){"use strict";var r=n(355),o=n(356);e.highlight=i,e.highlightAuto=function(t,e){var n,s,a,l,c=e||{},p=c.subset||r.listLanguages(),u=c.prefix,d=p.length,h=-1;null==u&&(u="hljs-");if("string"!=typeof t)throw o("Expected `string` for value, got `%s`",t);s={relevance:0,language:null,value:[]},n={relevance:0,language:null,value:[]};for(;++h<d;)l=p[h],r.getLanguage(l)&&((a=i(l,t,e)).language=l,a.relevance>s.relevance&&(s=a),a.relevance>n.relevance&&(s=n,n=a));s.language&&(n.secondBest=s);return n},e.registerLanguage=function(t,e){r.registerLanguage(t,e)},e.listLanguages=function(){return r.listLanguages()},e.registerAlias=function(t,e){var n,o=t;e&&((o={})[t]=e);for(n in o)r.registerAliases(o[n],{languageName:n})},s.prototype.addText=function(t){var e,n,r=this.stack;if(""===t)return;e=r[r.length-1],(n=e.children[e.children.length-1])&&"text"===n.type?n.value+=t:e.children.push({type:"text",value:t})},s.prototype.addKeyword=function(t,e){this.openNode(e),this.addText(t),this.closeNode()},s.prototype.addSublanguage=function(t,e){var n=this.stack,r=n[n.length-1],o=t.rootNode.children,i=e?{type:"element",tagName:"span",properties:{className:[e]},children:o}:o;r.children=r.children.concat(i)},s.prototype.openNode=function(t){var e=this.stack,n=this.options.classPrefix+t,r=e[e.length-1],o={type:"element",tagName:"span",properties:{className:[n]},children:[]};r.children.push(o),e.push(o)},s.prototype.closeNode=function(){this.stack.pop()},s.prototype.closeAllNodes=a,s.prototype.finalize=a,s.prototype.toHTML=function(){return""};function i(t,e,n){var i,a=r.configure({}),l=(n||{}).prefix;if("string"!=typeof t)throw o("Expected `string` for name, got `%s`",t);if(!r.getLanguage(t))throw o("Unknown language: `%s` is not registered",t);if("string"!=typeof e)throw o("Expected `string` for value, got `%s`",e);if(null==l&&(l="hljs-"),r.configure({__emitter:s,classPrefix:l}),i=r.highlight(t,e,!0),r.configure(a||{}),i.errorRaised)throw i.errorRaised;return{relevance:i.relevance,language:i.language,value:i.emitter.rootNode.children}}function s(t){this.options=t,this.rootNode={children:[]},this.stack=[this.rootNode]}function a(){}},355:function(t,e){function n(t){Object.freeze(t);var e="function"==typeof t;return Object.getOwnPropertyNames(t).forEach((function(r){!Object.hasOwnProperty.call(t,r)||null===t[r]||"object"!=typeof t[r]&&"function"!=typeof t[r]||e&&("caller"===r||"callee"===r||"arguments"===r)||Object.isFrozen(t[r])||n(t[r])})),t}class r{constructor(t){void 0===t.data&&(t.data={}),this.data=t.data}ignoreMatch(){this.ignore=!0}}function o(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function i(t,...e){var n={};for(const e in t)n[e]=t[e];return e.forEach((function(t){for(const e in t)n[e]=t[e]})),n}function s(t){return t.nodeName.toLowerCase()}var a=Object.freeze({__proto__:null,escapeHTML:o,inherit:i,nodeStream:function(t){var e=[];return function t(n,r){for(var o=n.firstChild;o;o=o.nextSibling)3===o.nodeType?r+=o.nodeValue.length:1===o.nodeType&&(e.push({event:"start",offset:r,node:o}),r=t(o,r),s(o).match(/br|hr|img|input/)||e.push({event:"stop",offset:r,node:o}));return r}(t,0),e},mergeStreams:function(t,e,n){var r=0,i="",a=[];function l(){return t.length&&e.length?t[0].offset!==e[0].offset?t[0].offset<e[0].offset?t:e:"start"===e[0].event?t:e:t.length?t:e}function c(t){i+="<"+s(t)+[].map.call(t.attributes,(function(t){return" "+t.nodeName+'="'+o(t.value)+'"'})).join("")+">"}function p(t){i+="</"+s(t)+">"}function u(t){("start"===t.event?c:p)(t.node)}for(;t.length||e.length;){var d=l();if(i+=o(n.substring(r,d[0].offset)),r=d[0].offset,d===t){a.reverse().forEach(p);do{u(d.splice(0,1)[0]),d=l()}while(d===t&&d.length&&d[0].offset===r);a.reverse().forEach(c)}else"start"===d[0].event?a.push(d[0].node):a.pop(),u(d.splice(0,1)[0])}return i+o(n.substr(r))}});const l=t=>!!t.kind;class c{constructor(t,e){this.buffer="",this.classPrefix=e.classPrefix,t.walk(this)}addText(t){this.buffer+=o(t)}openNode(t){if(!l(t))return;let e=t.kind;t.sublanguage||(e=`${this.classPrefix}${e}`),this.span(e)}closeNode(t){l(t)&&(this.buffer+="</span>")}value(){return this.buffer}span(t){this.buffer+=`<span class="${t}">`}}class p{constructor(){this.rootNode={children:[]},this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(t){this.top.children.push(t)}openNode(t){const e={kind:t,children:[]};this.add(e),this.stack.push(e)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(t){return this.constructor._walk(t,this.rootNode)}static _walk(t,e){return"string"==typeof e?t.addText(e):e.children&&(t.openNode(e),e.children.forEach(e=>this._walk(t,e)),t.closeNode(e)),t}static _collapse(t){"string"!=typeof t&&t.children&&(t.children.every(t=>"string"==typeof t)?t.children=[t.children.join("")]:t.children.forEach(t=>{p._collapse(t)}))}}class u extends p{constructor(t){super(),this.options=t}addKeyword(t,e){""!==t&&(this.openNode(e),this.addText(t),this.closeNode())}addText(t){""!==t&&this.add(t)}addSublanguage(t,e){const n=t.root;n.kind=e,n.sublanguage=!0,this.add(n)}toHTML(){return new c(this,this.options).value()}finalize(){return!0}}function d(t){return t?"string"==typeof t?t:t.source:null}const h="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",f={begin:"\\\\[\\s\\S]",relevance:0},v={className:"string",begin:"'",end:"'",illegal:"\\n",contains:[f]},m={className:"string",begin:'"',end:'"',illegal:"\\n",contains:[f]},g={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},y=function(t,e,n={}){var r=i({className:"comment",begin:t,end:e,contains:[]},n);return r.contains.push(g),r.contains.push({className:"doctag",begin:"(?:TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):",relevance:0}),r},b=y("//","$"),w=y("/\\*","\\*/"),x=y("#","$"),S={className:"number",begin:"\\b\\d+(\\.\\d+)?",relevance:0},k={className:"number",begin:h,relevance:0},C={className:"number",begin:"\\b(0b[01]+)",relevance:0},O={className:"number",begin:"\\b\\d+(\\.\\d+)?(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},M={begin:/(?=\/[^/\n]*\/)/,contains:[{className:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[f,{begin:/\[/,end:/\]/,relevance:0,contains:[f]}]}]},T={className:"title",begin:"[a-zA-Z]\\w*",relevance:0},_={className:"title",begin:"[a-zA-Z_]\\w*",relevance:0},A={begin:"\\.\\s*[a-zA-Z_]\\w*",relevance:0};var N=Object.freeze({__proto__:null,IDENT_RE:"[a-zA-Z]\\w*",UNDERSCORE_IDENT_RE:"[a-zA-Z_]\\w*",NUMBER_RE:"\\b\\d+(\\.\\d+)?",C_NUMBER_RE:h,BINARY_NUMBER_RE:"\\b(0b[01]+)",RE_STARTERS_RE:"!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",SHEBANG:(t={})=>{const e=/^#![ ]*\//;return t.binary&&(t.begin=function(...t){return t.map(t=>d(t)).join("")}(e,/.*\b/,t.binary,/\b.*/)),i({className:"meta",begin:e,end:/$/,relevance:0,"on:begin":(t,e)=>{0!==t.index&&e.ignoreMatch()}},t)},BACKSLASH_ESCAPE:f,APOS_STRING_MODE:v,QUOTE_STRING_MODE:m,PHRASAL_WORDS_MODE:g,COMMENT:y,C_LINE_COMMENT_MODE:b,C_BLOCK_COMMENT_MODE:w,HASH_COMMENT_MODE:x,NUMBER_MODE:S,C_NUMBER_MODE:k,BINARY_NUMBER_MODE:C,CSS_NUMBER_MODE:O,REGEXP_MODE:M,TITLE_MODE:T,UNDERSCORE_TITLE_MODE:_,METHOD_GUARD:A,END_SAME_AS_BEGIN:function(t){return Object.assign(t,{"on:begin":(t,e)=>{e.data._beginMatch=t[1]},"on:end":(t,e)=>{e.data._beginMatch!==t[1]&&e.ignoreMatch()}})}}),E="of and for in not or if then".split(" ");function R(t){function e(e,n){return new RegExp(d(e),"m"+(t.case_insensitive?"i":"")+(n?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(t,e){e.position=this.position++,this.matchIndexes[this.matchAt]=e,this.regexes.push([e,t]),this.matchAt+=function(t){return new RegExp(t.toString()+"|").exec("").length-1}(t)+1}compile(){0===this.regexes.length&&(this.exec=()=>null);const t=this.regexes.map(t=>t[1]);this.matcherRe=e(function(t,e="|"){for(var n=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./,r=0,o="",i=0;i<t.length;i++){var s=r+=1,a=d(t[i]);for(i>0&&(o+=e),o+="(";a.length>0;){var l=n.exec(a);if(null==l){o+=a;break}o+=a.substring(0,l.index),a=a.substring(l.index+l[0].length),"\\"===l[0][0]&&l[1]?o+="\\"+String(Number(l[1])+s):(o+=l[0],"("===l[0]&&r++)}o+=")"}return o}(t),!0),this.lastIndex=0}exec(t){this.matcherRe.lastIndex=this.lastIndex;const e=this.matcherRe.exec(t);if(!e)return null;const n=e.findIndex((t,e)=>e>0&&void 0!==t),r=this.matchIndexes[n];return e.splice(0,n),Object.assign(e,r)}}class r{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(t){if(this.multiRegexes[t])return this.multiRegexes[t];const e=new n;return this.rules.slice(t).forEach(([t,n])=>e.addRule(t,n)),e.compile(),this.multiRegexes[t]=e,e}resumingScanAtSamePosition(){return 0!==this.regexIndex}considerAll(){this.regexIndex=0}addRule(t,e){this.rules.push([t,e]),"begin"===e.type&&this.count++}exec(t){const e=this.getMatcher(this.regexIndex);e.lastIndex=this.lastIndex;let n=e.exec(t);if(this.resumingScanAtSamePosition())if(n&&n.index===this.lastIndex);else{const e=this.getMatcher(0);e.lastIndex=this.lastIndex+1,n=e.exec(t)}return n&&(this.regexIndex+=n.position+1,this.regexIndex===this.count&&this.considerAll()),n}}function o(t,e){const n=t.input[t.index-1],r=t.input[t.index+t[0].length];"."!==n&&"."!==r||e.ignoreMatch()}if(t.contains&&t.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return function n(s,a){const l=s;if(s.compiled)return l;s.compiled=!0,s.__beforeBegin=null,s.keywords=s.keywords||s.beginKeywords;let c=null;if("object"==typeof s.keywords&&(c=s.keywords.$pattern,delete s.keywords.$pattern),s.keywords&&(s.keywords=function(t,e){var n={};"string"==typeof t?r("keyword",t):Object.keys(t).forEach((function(e){r(e,t[e])}));return n;function r(t,r){e&&(r=r.toLowerCase()),r.split(" ").forEach((function(e){var r=e.split("|");n[r[0]]=[t,D(r[0],r[1])]}))}}(s.keywords,t.case_insensitive)),s.lexemes&&c)throw new Error("ERR: Prefer `keywords.$pattern` to `mode.lexemes`, BOTH are not allowed. (see mode reference) ");return l.keywordPatternRe=e(s.lexemes||c||/\w+/,!0),a&&(s.beginKeywords&&(s.begin="\\b("+s.beginKeywords.split(" ").join("|")+")(?=\\b|\\s)",s.__beforeBegin=o),s.begin||(s.begin=/\B|\b/),l.beginRe=e(s.begin),s.endSameAsBegin&&(s.end=s.begin),s.end||s.endsWithParent||(s.end=/\B|\b/),s.end&&(l.endRe=e(s.end)),l.terminator_end=d(s.end)||"",s.endsWithParent&&a.terminator_end&&(l.terminator_end+=(s.end?"|":"")+a.terminator_end)),s.illegal&&(l.illegalRe=e(s.illegal)),void 0===s.relevance&&(s.relevance=1),s.contains||(s.contains=[]),s.contains=[].concat(...s.contains.map((function(t){return function(t){t.variants&&!t.cached_variants&&(t.cached_variants=t.variants.map((function(e){return i(t,{variants:null},e)})));if(t.cached_variants)return t.cached_variants;if(function t(e){return!!e&&(e.endsWithParent||t(e.starts))}(t))return i(t,{starts:t.starts?i(t.starts):null});if(Object.isFrozen(t))return i(t);return t}("self"===t?s:t)}))),s.contains.forEach((function(t){n(t,l)})),s.starts&&n(s.starts,a),l.matcher=function(t){const e=new r;return t.contains.forEach(t=>e.addRule(t.begin,{rule:t,type:"begin"})),t.terminator_end&&e.addRule(t.terminator_end,{type:"end"}),t.illegal&&e.addRule(t.illegal,{type:"illegal"}),e}(l),l}(t)}function D(t,e){return e?Number(e):function(t){return E.includes(t.toLowerCase())}(t)?0:1}const I={props:["language","code","autodetect"],data:function(){return{detectedLanguage:"",unknownLanguage:!1}},computed:{className(){return this.unknownLanguage?"":"hljs "+this.detectedLanguage},highlighted(){if(!this.autoDetect&&!hljs.getLanguage(this.language))return console.warn(`The language "${this.language}" you specified could not be found.`),this.unknownLanguage=!0,o(this.code);let t;return this.autoDetect?(t=hljs.highlightAuto(this.code),this.detectedLanguage=t.language):(t=hljs.highlight(this.language,this.code,this.ignoreIllegals),this.detectectLanguage=this.language),t.value},autoDetect(){return!this.language||(t=this.autodetect,Boolean(t||""===t));var t},ignoreIllegals:()=>!0},render(t){return t("pre",{},[t("code",{class:this.className,domProps:{innerHTML:this.highlighted}})])}},P={install(t){t.component("highlightjs",I)}},$=o,L=i,{nodeStream:z,mergeStreams:B}=a,j=Symbol("nomatch");var V=function(t){var e=[],o=Object.create(null),i=Object.create(null),s=[],a=!0,l=/(^(<[^>]+>|\t|)+|\n)/gm,c="Could not find the language '{}', did you forget to load/include a language module?";const p={disableAutodetect:!0,name:"Plain text",contains:[]};var d={noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:null,__emitter:u};function h(t){return d.noHighlightRe.test(t)}function f(t,e,n,r){var o={code:e,language:t};k("before:highlight",o);var i=o.result?o.result:v(o.language,o.code,n,r);return i.code=o.code,k("after:highlight",i),i}function v(t,e,n,i){var s=e;function l(t,e){var n=x.case_insensitive?e[0].toLowerCase():e[0];return Object.prototype.hasOwnProperty.call(t.keywords,n)&&t.keywords[n]}function p(){null!=C.subLanguage?function(){if(""!==T){var t=null;if("string"==typeof C.subLanguage){if(!o[C.subLanguage])return void M.addText(T);t=v(C.subLanguage,T,!0,O[C.subLanguage]),O[C.subLanguage]=t.top}else t=m(T,C.subLanguage.length?C.subLanguage:null);C.relevance>0&&(_+=t.relevance),M.addSublanguage(t.emitter,t.language)}}():function(){if(!C.keywords)return void M.addText(T);let t=0;C.keywordPatternRe.lastIndex=0;let e=C.keywordPatternRe.exec(T),n="";for(;e;){n+=T.substring(t,e.index);const r=l(C,e);if(r){const[t,o]=r;M.addText(n),n="",_+=o,M.addKeyword(e[0],t)}else n+=e[0];t=C.keywordPatternRe.lastIndex,e=C.keywordPatternRe.exec(T)}n+=T.substr(t),M.addText(n)}(),T=""}function u(t){return t.className&&M.openNode(t.className),C=Object.create(t,{parent:{value:C}})}function h(t){return 0===C.matcher.regexIndex?(T+=t[0],1):(E=!0,0)}function f(t){var e=t[0],n=t.rule;const o=new r(n),i=[n.__beforeBegin,n["on:begin"]];for(const n of i)if(n&&(n(t,o),o.ignore))return h(e);return n&&n.endSameAsBegin&&(n.endRe=new RegExp(e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")),n.skip?T+=e:(n.excludeBegin&&(T+=e),p(),n.returnBegin||n.excludeBegin||(T=e)),u(n),n.returnBegin?0:e.length}function g(t){var e=t[0],n=s.substr(t.index),o=function t(e,n,o){let i=function(t,e){var n=t&&t.exec(e);return n&&0===n.index}(e.endRe,o);if(i){if(e["on:end"]){const t=new r(e);e["on:end"](n,t),t.ignore&&(i=!1)}if(i){for(;e.endsParent&&e.parent;)e=e.parent;return e}}if(e.endsWithParent)return t(e.parent,n,o)}(C,t,n);if(!o)return j;var i=C;i.skip?T+=e:(i.returnEnd||i.excludeEnd||(T+=e),p(),i.excludeEnd&&(T=e));do{C.className&&M.closeNode(),C.skip||C.subLanguage||(_+=C.relevance),C=C.parent}while(C!==o.parent);return o.starts&&(o.endSameAsBegin&&(o.starts.endRe=o.endRe),u(o.starts)),i.returnEnd?0:e.length}var y={};function b(e,r){var o=r&&r[0];if(T+=e,null==o)return p(),0;if("begin"===y.type&&"end"===r.type&&y.index===r.index&&""===o){if(T+=s.slice(r.index,r.index+1),!a){const e=new Error("0 width match regex");throw e.languageName=t,e.badRule=y.rule,e}return 1}if(y=r,"begin"===r.type)return f(r);if("illegal"===r.type&&!n){const t=new Error('Illegal lexeme "'+o+'" for mode "'+(C.className||"<unnamed>")+'"');throw t.mode=C,t}if("end"===r.type){var i=g(r);if(i!==j)return i}if("illegal"===r.type&&""===o)return 1;if(N>1e5&&N>3*r.index){throw new Error("potential infinite loop, way more iterations than matches")}return T+=o,o.length}var x=w(t);if(!x)throw console.error(c.replace("{}",t)),new Error('Unknown language: "'+t+'"');var S=R(x),k="",C=i||S,O={},M=new d.__emitter(d);!function(){for(var t=[],e=C;e!==x;e=e.parent)e.className&&t.unshift(e.className);t.forEach(t=>M.openNode(t))}();var T="",_=0,A=0,N=0,E=!1;try{for(C.matcher.considerAll();;){N++,E?E=!1:C.matcher.considerAll(),C.matcher.lastIndex=A;const t=C.matcher.exec(s);if(!t)break;const e=b(s.substring(A,t.index),t);A=t.index+e}return b(s.substr(A)),M.closeAllNodes(),M.finalize(),k=M.toHTML(),{relevance:_,value:k,language:t,illegal:!1,emitter:M,top:C}}catch(e){if(e.message&&e.message.includes("Illegal"))return{illegal:!0,illegalBy:{msg:e.message,context:s.slice(A-100,A+100),mode:e.mode},sofar:k,relevance:0,value:$(s),emitter:M};if(a)return{illegal:!1,relevance:0,value:$(s),emitter:M,language:t,top:C,errorRaised:e};throw e}}function m(t,e){e=e||d.languages||Object.keys(o);var n=function(t){const e={relevance:0,emitter:new d.__emitter(d),value:$(t),illegal:!1,top:p};return e.emitter.addText(t),e}(t),r=n;return e.filter(w).filter(S).forEach((function(e){var o=v(e,t,!1);o.language=e,o.relevance>r.relevance&&(r=o),o.relevance>n.relevance&&(r=n,n=o)})),r.language&&(n.second_best=r),n}function g(t){return d.tabReplace||d.useBR?t.replace(l,t=>"\n"===t?d.useBR?"<br>":t:d.tabReplace?t.replace(/\t/g,d.tabReplace):t):t}function y(t){let e=null;const n=function(t){var e=t.className+" ";e+=t.parentNode?t.parentNode.className:"";const n=d.languageDetectRe.exec(e);if(n){var r=w(n[1]);return r||(console.warn(c.replace("{}",n[1])),console.warn("Falling back to no-highlight mode for this block.",t)),r?n[1]:"no-highlight"}return e.split(/\s+/).find(t=>h(t)||w(t))}(t);if(h(n))return;k("before:highlightBlock",{block:t,language:n}),d.useBR?(e=document.createElement("div"),e.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/<br[ /]*>/g,"\n")):e=t;const r=e.textContent,o=n?f(n,r,!0):m(r),s=z(e);if(s.length){const t=document.createElement("div");t.innerHTML=o.value,o.value=B(s,z(t),r)}o.value=g(o.value),k("after:highlightBlock",{block:t,result:o}),t.innerHTML=o.value,t.className=function(t,e,n){var r=e?i[e]:n,o=[t.trim()];return t.match(/\bhljs\b/)||o.push("hljs"),t.includes(r)||o.push(r),o.join(" ").trim()}(t.className,n,o.language),t.result={language:o.language,re:o.relevance,relavance:o.relevance},o.second_best&&(t.second_best={language:o.second_best.language,re:o.second_best.relevance,relavance:o.second_best.relevance})}const b=()=>{if(!b.called){b.called=!0;var t=document.querySelectorAll("pre code");e.forEach.call(t,y)}};function w(t){return t=(t||"").toLowerCase(),o[t]||o[i[t]]}function x(t,{languageName:e}){"string"==typeof t&&(t=[t]),t.forEach(t=>{i[t]=e})}function S(t){var e=w(t);return e&&!e.disableAutodetect}function k(t,e){var n=t;s.forEach((function(t){t[n]&&t[n](e)}))}Object.assign(t,{highlight:f,highlightAuto:m,fixMarkup:function(t){return console.warn("fixMarkup is deprecated and will be removed entirely in v11.0"),console.warn("Please see https://github.com/highlightjs/highlight.js/issues/2534"),g(t)},highlightBlock:y,configure:function(t){t.useBR&&(console.warn("'useBR' option is deprecated and will be removed entirely in v11.0"),console.warn("Please see https://github.com/highlightjs/highlight.js/issues/2559")),d=L(d,t)},initHighlighting:b,initHighlightingOnLoad:function(){window.addEventListener("DOMContentLoaded",b,!1)},registerLanguage:function(e,n){var r=null;try{r=n(t)}catch(t){if(console.error("Language definition for '{}' could not be registered.".replace("{}",e)),!a)throw t;console.error(t),r=p}r.name||(r.name=e),o[e]=r,r.rawDefinition=n.bind(null,t),r.aliases&&x(r.aliases,{languageName:e})},listLanguages:function(){return Object.keys(o)},getLanguage:w,registerAliases:x,requireLanguage:function(t){var e=w(t);if(e)return e;throw new Error("The '{}' language is required, but not loaded.".replace("{}",t))},autoDetection:S,inherit:L,addPlugin:function(t){s.push(t)},vuePlugin:P}),t.debugMode=function(){a=!1},t.safeMode=function(){a=!0},t.versionString="10.3.1";for(const t in N)"object"==typeof N[t]&&n(N[t]);return Object.assign(t,N),t}({});t.exports=V},356:function(t,e,n){"use strict";var r=n(357),o=i(Error);function i(t){return e.displayName=t.displayName||t.name,e;function e(e){return e&&(e=r.apply(null,arguments)),new t(e)}}t.exports=o,o.eval=i(EvalError),o.range=i(RangeError),o.reference=i(ReferenceError),o.syntax=i(SyntaxError),o.type=i(TypeError),o.uri=i(URIError),o.create=i},357:function(t,e,n){!function(){var e;function n(t){for(var e,n,r,o,i=1,s=[].slice.call(arguments),a=0,l=t.length,c="",p=!1,u=!1,d=function(){return s[i++]},h=function(){for(var n="";/\d/.test(t[a]);)n+=t[a++],e=t[a];return n.length>0?parseInt(n):null};a<l;++a)if(e=t[a],p)switch(p=!1,"."==e?(u=!1,e=t[++a]):"0"==e&&"."==t[a+1]?(u=!0,e=t[a+=2]):u=!0,o=h(),e){case"b":c+=parseInt(d(),10).toString(2);break;case"c":c+="string"==typeof(n=d())||n instanceof String?n:String.fromCharCode(parseInt(n,10));break;case"d":c+=parseInt(d(),10);break;case"f":r=String(parseFloat(d()).toFixed(o||6)),c+=u?r:r.replace(/^0/,"");break;case"j":c+=JSON.stringify(d());break;case"o":c+="0"+parseInt(d(),10).toString(8);break;case"s":c+=d();break;case"x":c+="0x"+parseInt(d(),10).toString(16);break;case"X":c+="0x"+parseInt(d(),10).toString(16).toUpperCase();break;default:c+=e}else"%"===e?p=!0:c+=e;return c}(e=t.exports=n).format=n,e.vsprintf=function(t,e){return n.apply(null,[t].concat(e))},"undefined"!=typeof console&&"function"==typeof console.log&&(e.printf=function(){console.log(n.apply(null,arguments))})}()},358:function(t,e,n){var r=n(359);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(6)(r,o);r.locals&&(t.exports=r.locals)},359:function(t,e,n){(t.exports=n(5)(!1)).push([t.i,".v-input--checkbox.v-input--indeterminate.v-input--is-disabled {\n  opacity: 0.6;\n}",""])},360:function(t,e,n){var r=n(361);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(6)(r,o);r.locals&&(t.exports=r.locals)},361:function(t,e,n){(t.exports=n(5)(!1)).push([t.i,'.tiptap-vuetify-editor__action-render-btn{margin:2px 6px}.tiptap-vuetify-editor__btn-icon.v-icon.fas{font-size:16px}.tiptap-vuetify-editor__toolbar .v-toolbar{display:flex;height:auto!important;padding:5px}.tiptap-vuetify-editor__toolbar .v-toolbar .v-toolbar__content{height:auto!important;flex-wrap:wrap;padding:0}.tiptap-vuetify-editor-pop{position:fixed;z-index:1;opacity:.9!important;transition:transform .1s ease-in-out}.tiptap-vuetify-editor-pop .tiptap-vuetify-editor-pop__popper{background-image:linear-gradient(180deg,rgba(49,49,47,.99),#262625);background-repeat:repeat-x;border-radius:5px;padding:0 10px;color:#fff;line-height:44px;display:inline-block;visibility:hidden;opacity:0;pointer-events:none}.tiptap-vuetify-editor-pop .tiptap-vuetify-editor-pop__popper--visible{visibility:visible;pointer-events:auto;-webkit-animation:pop-upwards .18s linear forwards;animation:pop-upwards .18s linear forwards;-webkit-animation-delay:.2s;animation-delay:.2s;transition:opacity 0s linear .2s}.tiptap-vuetify-editor-pop[x-placement=top]{margin-bottom:7px}.tiptap-vuetify-editor-pop[x-placement=bottom]{margin-top:7px}.tiptap-vuetify-editor-pop[x-placement=bottom] .tiptap-vuetify-editor-pop__popper{background-image:linear-gradient(0deg,rgba(49,49,47,.99),#262625)}[x-arrow]{position:fixed;width:14px;height:14px;background-color:#262625;transform:rotate(45deg);z-index:-1}[x-placement=top] [x-arrow]{margin-bottom:-7px;bottom:0}[x-placement=bottom] [x-arrow]{margin-top:-7px;top:0}@-webkit-keyframes pop-upwards{0%{transform:matrix(.97,0,0,1,0,12);opacity:0}20%{transform:matrix(.99,0,0,1,0,2);opacity:.7}40%{transform:matrix(1,0,0,1,0,-1);opacity:1}70%{transform:matrix(1,0,0,1,0,0);opacity:1}to{transform:matrix(1,0,0,1,0,0);opacity:1}}@keyframes pop-upwards{0%{transform:matrix(.97,0,0,1,0,12);opacity:0}20%{transform:matrix(.99,0,0,1,0,2);opacity:.7}40%{transform:matrix(1,0,0,1,0,-1);opacity:1}70%{transform:matrix(1,0,0,1,0,0);opacity:1}to{transform:matrix(1,0,0,1,0,0);opacity:1}}.tiptap-vuetify-editor{position:relative}.tiptap-vuetify-editor .ProseMirror{outline:0!important;margin:20px!important}.tiptap-vuetify-editor--disabled{cursor:not-allowed}.tiptap-vuetify-editor__content{transition:all 2s;overflow:auto!important;padding:5px}.tiptap-vuetify-editor__content a{pointer-events:none}.tiptap-vuetify-editor__content h1,.tiptap-vuetify-editor__content h2,.tiptap-vuetify-editor__content h3,.tiptap-vuetify-editor__content h4{margin:10px 0 20px!important}.tiptap-vuetify-editor__content blockquote{border-left:.25em solid #dfe2e5;color:#6a737d;padding-left:1em;margin:20px 0!important}.tiptap-vuetify-editor__content code{padding:0 4px!important;margin:0 5px!important}.tiptap-vuetify-editor__content pre code{padding:8px!important;margin:0 5px!important}.tiptap-vuetify-editor__content code:after,.tiptap-vuetify-editor__content code:before{content:none!important;letter-spacing:normal!important}.tiptap-vuetify-editor__content p{margin-top:16px!important;margin-bottom:16px!important;min-height:1rem}.tiptap-vuetify-editor__content p.tiptap-vuetify-editor__paragraph--is-empty:first-child:before{content:attr(data-empty-text);float:left;color:#aaa;pointer-events:none;height:0;font-style:italic}.tiptap-vuetify-editor__content table{border-collapse:collapse;table-layout:fixed;width:100%;margin:0;overflow:hidden}.tiptap-vuetify-editor__content table td,.tiptap-vuetify-editor__content table th{min-width:1em;border:2px solid grey;padding:3px 5px;vertical-align:top;box-sizing:border-box;position:relative}.tiptap-vuetify-editor__content table td>*,.tiptap-vuetify-editor__content table th>*{margin-bottom:0}.tiptap-vuetify-editor__content table th{font-weight:700;text-align:left}.tiptap-vuetify-editor__content table .selectedCell:after{z-index:2;position:absolute;content:"";left:0;right:0;top:0;bottom:0;background:rgba(200,200,255,.4);pointer-events:none}.tiptap-vuetify-editor__content table .column-resize-handle{position:absolute;right:-2px;top:0;bottom:0;width:4px;z-index:20;background-color:#adf;pointer-events:none}.tiptap-vuetify-editor__content .tableWrapper{margin:1em 0;overflow-x:auto}.tiptap-vuetify-editor__content .resize-cursor{cursor:col-resize}.tiptap-vuetify-editor__content--disabled{color:rgba(0,0,0,.38)}.tiptap-vuetify-editor__content--disabled:after{background-color:rgba(0,0,0,.06);position:absolute;content:"";top:0;left:0;right:0;bottom:0}#tiptap-vuetify-image-upload-area__input-file{display:none}.tiptap-vuetify-image-upload-area-holder{background-color:#c8dadf;height:400px;outline:2px dashed #92b0b3;outline-offset:-10px;transition:all .15s ease-in-out;display:flex!important;justify-content:center;align-items:center}.tiptap-vuetify-image-upload-area-holder--dragover,.tiptap-vuetify-image-upload-area-holder:hover{background-color:#a5b7bc;outline:2px dashed #648083;color:#444;cursor:pointer}.tiptap-vuetify-image-upload-area-holder--dragover .tiptap-vuetify-image-upload-area-holder__icon,.tiptap-vuetify-image-upload-area-holder:hover .tiptap-vuetify-image-upload-area-holder__icon{fill:#5f777a!important}.tiptap-vuetify-image-upload-area-holder .tiptap-vuetify-image-upload-area-holder__icon{width:100%;height:80px;fill:#92b0b3;display:block;margin-bottom:40px;transition:all .15s ease-in-out}.tiptap-vuetify-todo-item-view{display:flex}',""])},375:function(t,e,n){"use strict";n.d(e,"a",(function(){return R})),n.d(e,"b",(function(){return U})),n.d(e,"c",(function(){return D})),n.d(e,"d",(function(){return G})),n.d(e,"e",(function(){return I})),n.d(e,"f",(function(){return P})),n.d(e,"g",(function(){return $})),n.d(e,"h",(function(){return tt})),n.d(e,"i",(function(){return L})),n.d(e,"j",(function(){return B})),n.d(e,"k",(function(){return X})),n.d(e,"l",(function(){return Y})),n.d(e,"m",(function(){return j})),n.d(e,"n",(function(){return V})),n.d(e,"o",(function(){return et})),n.d(e,"p",(function(){return Z})),n.d(e,"q",(function(){return H})),n.d(e,"r",(function(){return W})),n.d(e,"s",(function(){return q})),n.d(e,"t",(function(){return J})),n.d(e,"u",(function(){return K})),n.d(e,"v",(function(){return Q}));var r=n(311),o=n(312),i=(n(354),n(286)),s=n(292),a=(n(280),n(279)),l=n(304),c=n(291),p=n(281);new a.PluginKey("collab");var u=function(){};u.prototype.append=function(t){return t.length?(t=u.from(t),!this.length&&t||t.length<200&&this.leafAppend(t)||this.length<200&&t.leafPrepend(this)||this.appendInner(t)):this},u.prototype.prepend=function(t){return t.length?u.from(t).append(this):this},u.prototype.appendInner=function(t){return new h(this,t)},u.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.length),t>=e?u.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))},u.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},u.prototype.forEach=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)},u.prototype.map=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(e,n){return r.push(t(e,n))}),e,n),r},u.from=function(t){return t instanceof u?t:t&&t.length?new d(t):u.empty};var d=function(t){function e(e){t.call(this),this.values=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(t,n){return 0==t&&n==this.length?this:new e(this.values.slice(t,n))},e.prototype.getInner=function(t){return this.values[t]},e.prototype.forEachInner=function(t,e,n,r){for(var o=e;o<n;o++)if(!1===t(this.values[o],r+o))return!1},e.prototype.forEachInvertedInner=function(t,e,n,r){for(var o=e-1;o>=n;o--)if(!1===t(this.values[o],r+o))return!1},e.prototype.leafAppend=function(t){if(this.length+t.length<=200)return new e(this.values.concat(t.flatten()))},e.prototype.leafPrepend=function(t){if(this.length+t.length<=200)return new e(t.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(u);u.empty=new d([]);var h=function(t){function e(e,n){t.call(this),this.left=e,this.right=n,this.length=e.length+n.length,this.depth=Math.max(e.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(t){return t<this.left.length?this.left.get(t):this.right.get(t-this.left.length)},e.prototype.forEachInner=function(t,e,n,r){var o=this.left.length;return!(e<o&&!1===this.left.forEachInner(t,e,Math.min(n,o),r))&&(!(n>o&&!1===this.right.forEachInner(t,Math.max(e-o,0),Math.min(this.length,n)-o,r+o))&&void 0)},e.prototype.forEachInvertedInner=function(t,e,n,r){var o=this.left.length;return!(e>o&&!1===this.right.forEachInvertedInner(t,e-o,Math.max(n,o)-o,r+o))&&(!(n<o&&!1===this.left.forEachInvertedInner(t,Math.min(e,o),n,r))&&void 0)},e.prototype.sliceInner=function(t,e){if(0==t&&e==this.length)return this;var n=this.left.length;return e<=n?this.left.slice(t,e):t>=n?this.right.slice(t-n,e-n):this.left.slice(t,n).append(this.right.slice(0,e-n))},e.prototype.leafAppend=function(t){var n=this.right.leafAppend(t);if(n)return new e(this.left,n)},e.prototype.leafPrepend=function(t){var n=this.left.leafPrepend(t);if(n)return new e(n,this.right)},e.prototype.appendInner=function(t){return this.left.depth>=Math.max(this.right.depth,t.depth)+1?new e(this.left,new e(this.right,t)):new e(this,t)},e}(u),f=u,v=function(t,e){this.items=t,this.eventCount=e};v.prototype.popEvent=function(t,e){var n=this;if(0==this.eventCount)return null;for(var r,o,i=this.items.length;;i--){if(this.items.get(i-1).selection){--i;break}}e&&(r=this.remapping(i,this.items.length),o=r.maps.length);var s,a,l=t.tr,c=[],p=[];return this.items.forEach((function(t,e){if(!t.step)return r||(r=n.remapping(i,e+1),o=r.maps.length),o--,void p.push(t);if(r){p.push(new m(t.map));var u,d=t.step.map(r.slice(o));d&&l.maybeStep(d).doc&&(u=l.mapping.maps[l.mapping.maps.length-1],c.push(new m(u,null,null,c.length+p.length))),o--,u&&r.appendMap(u,o)}else l.maybeStep(t.step);return t.selection?(s=r?t.selection.map(r.slice(o)):t.selection,a=new v(n.items.slice(0,i).append(p.reverse().concat(c)),n.eventCount-1),!1):void 0}),this.items.length,0),{remaining:a,transform:l,selection:s}},v.prototype.addTransform=function(t,e,n,r){for(var o=[],i=this.eventCount,s=this.items,a=!r&&s.length?s.get(s.length-1):null,l=0;l<t.steps.length;l++){var c,p=t.steps[l].invert(t.docs[l]),u=new m(t.mapping.maps[l],p,e);(c=a&&a.merge(u))&&(u=c,l?o.pop():s=s.slice(0,s.length-1)),o.push(u),e&&(i++,e=null),r||(a=u)}var d,h,f,g=i-n.depth;return g>y&&(h=g,(d=s).forEach((function(t,e){if(t.selection&&0==h--)return f=e,!1})),s=d.slice(f),i-=g),new v(s.append(o),i)},v.prototype.remapping=function(t,e){var n=new p.a;return this.items.forEach((function(e,r){var o=null!=e.mirrorOffset&&r-e.mirrorOffset>=t?n.maps.length-e.mirrorOffset:null;n.appendMap(e.map,o)}),t,e),n},v.prototype.addMaps=function(t){return 0==this.eventCount?this:new v(this.items.append(t.map((function(t){return new m(t)}))),this.eventCount)},v.prototype.rebased=function(t,e){if(!this.eventCount)return this;var n=[],r=Math.max(0,this.items.length-e),o=t.mapping,i=t.steps.length,s=this.eventCount;this.items.forEach((function(t){t.selection&&s--}),r);var a=e;this.items.forEach((function(e){var r=o.getMirror(--a);if(null!=r){i=Math.min(i,r);var l=o.maps[r];if(e.step){var c=t.steps[r].invert(t.docs[r]),p=e.selection&&e.selection.map(o.slice(a+1,r));p&&s++,n.push(new m(l,c,p))}else n.push(new m(l))}}),r);for(var l=[],c=e;c<i;c++)l.push(new m(o.maps[c]));var p=this.items.slice(0,r).append(l).append(n),u=new v(p,s);return u.emptyItemCount()>500&&(u=u.compress(this.items.length-n.length)),u},v.prototype.emptyItemCount=function(){var t=0;return this.items.forEach((function(e){e.step||t++})),t},v.prototype.compress=function(t){void 0===t&&(t=this.items.length);var e=this.remapping(0,t),n=e.maps.length,r=[],o=0;return this.items.forEach((function(i,s){if(s>=t)r.push(i),i.selection&&o++;else if(i.step){var a=i.step.map(e.slice(n)),l=a&&a.getMap();if(n--,l&&e.appendMap(l,n),a){var c=i.selection&&i.selection.map(e.slice(n));c&&o++;var p,u=new m(l.invert(),a,c),d=r.length-1;(p=r.length&&r[d].merge(u))?r[d]=p:r.push(u)}}else i.map&&n--}),this.items.length,0),new v(f.from(r.reverse()),o)},v.empty=new v(f.empty,0);var m=function(t,e,n,r){this.map=t,this.step=e,this.selection=n,this.mirrorOffset=r};m.prototype.merge=function(t){if(this.step&&t.step&&!t.selection){var e=t.step.merge(this.step);if(e)return new m(e.getMap().invert(),e,this.selection)}};var g=function(t,e,n,r){this.done=t,this.undone=e,this.prevRanges=n,this.prevTime=r},y=20;function b(t){var e=[];return t.forEach((function(t,n,r,o){return e.push(r,o)})),e}function w(t,e){if(!t)return null;for(var n=[],r=0;r<t.length;r+=2){var o=e.map(t[r],1),i=e.map(t[r+1],-1);o<=i&&n.push(o,i)}return n}function x(t,e,n,r){var o=C(e),i=O.get(e).spec.config,s=(r?t.undone:t.done).popEvent(e,o);if(s){var a=s.selection.resolve(s.transform.doc),l=(r?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,o),c=new g(r?l:s.remaining,r?s.remaining:l,null,0);n(s.transform.setSelection(a).setMeta(O,{redo:r,historyState:c}).scrollIntoView())}}var S=!1,k=null;function C(t){var e=t.plugins;if(k!=e){S=!1,k=e;for(var n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){S=!0;break}}return S}var O=new a.PluginKey("history"),M=new a.PluginKey("closeHistory");function T(t){return t={depth:t&&t.depth||100,newGroupDelay:t&&t.newGroupDelay||500},new a.Plugin({key:O,state:{init:function(){return new g(v.empty,v.empty,null,0)},apply:function(e,n,r){return function(t,e,n,r){var o,i=n.getMeta(O);if(i)return i.historyState;n.getMeta(M)&&(t=new g(t.done,t.undone,null,0));var s=n.getMeta("appendedTransaction");if(0==n.steps.length)return t;if(s&&s.getMeta(O))return s.getMeta(O).redo?new g(t.done.addTransform(n,null,r,C(e)),t.undone,b(n.mapping.maps[n.steps.length-1]),t.prevTime):new g(t.done,t.undone.addTransform(n,null,r,C(e)),null,t.prevTime);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(o=n.getMeta("rebased"))?new g(t.done.rebased(n,o),t.undone.rebased(n,o),w(t.prevRanges,n.mapping),t.prevTime):new g(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),w(t.prevRanges,n.mapping),t.prevTime);var a=0==t.prevTime||!s&&(t.prevTime<(n.time||0)-r.newGroupDelay||!function(t,e){if(!e)return!1;if(!t.docChanged)return!0;var n=!1;return t.mapping.maps[0].forEach((function(t,r){for(var o=0;o<e.length;o+=2)t<=e[o+1]&&r>=e[o]&&(n=!0)})),n}(n,t.prevRanges)),l=s?w(t.prevRanges,n.mapping):b(n.mapping.maps[n.steps.length-1]);return new g(t.done.addTransform(n,a?e.selection.getBookmark():null,r,C(e)),v.empty,l,n.time)}(n,r,e,t)}},config:t})}function _(t,e){var n=O.getState(t);return!(!n||0==n.done.eventCount)&&(e&&x(n,t,e,!1),!0)}function A(t,e){var n=O.getState(t);return!(!n||0==n.undone.eventCount)&&(e&&x(n,t,e,!0),!0)}function N(t){var e=O.getState(t);return e?e.done.eventCount:0}function E(t){var e=O.getState(t);return e?e.undone.eventCount:0}class R extends r.g{get name(){return"blockquote"}get schema(){return{content:"block*",group:"block",defining:!0,draggable:!1,parseDOM:[{tag:"blockquote"}],toDOM:()=>["blockquote",0]}}commands({type:t}){return()=>Object(o.s)(t)}keys({type:t}){return{"Ctrl->":Object(o.s)(t)}}inputRules({type:t}){return[Object(o.u)(/^\s*>\s$/,t)]}}class D extends r.g{get name(){return"bullet_list"}get schema(){return{content:"list_item+",group:"block",parseDOM:[{tag:"ul"}],toDOM:()=>["ul",0]}}commands({type:t,schema:e}){return()=>Object(o.q)(t,e.nodes.list_item)}keys({type:t,schema:e}){return{"Shift-Ctrl-8":Object(o.q)(t,e.nodes.list_item)}}inputRules({type:t}){return[Object(o.u)(/^\s*([-+*])\s$/,t)]}}class I extends r.g{get name(){return"code_block"}get schema(){return{content:"text*",marks:"",group:"block",code:!0,defining:!0,draggable:!1,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:()=>["pre",["code",0]]}}commands({type:t,schema:e}){return()=>Object(o.p)(t,e.nodes.paragraph)}keys({type:t}){return{"Shift-Ctrl-\\":Object(o.k)(t)}}inputRules({type:t}){return[Object(o.o)(/^```$/,t)]}}r.g;class P extends r.g{get name(){return"hard_break"}get schema(){return{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>["br"]}}commands({type:t}){return()=>Object(o.a)(o.b,(e,n)=>(n(e.tr.replaceSelectionWith(t.create()).scrollIntoView()),!0))}keys({type:t}){const e=Object(o.a)(o.b,(e,n)=>(n(e.tr.replaceSelectionWith(t.create()).scrollIntoView()),!0));return{"Mod-Enter":e,"Shift-Enter":e}}}class $ extends r.g{get name(){return"heading"}get defaultOptions(){return{levels:[1,2,3,4,5,6]}}get schema(){return{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,draggable:!1,parseDOM:this.options.levels.map(t=>({tag:"h".concat(t),attrs:{level:t}})),toDOM:t=>["h".concat(t.attrs.level),0]}}commands({type:t,schema:e}){return n=>Object(o.p)(t,e.nodes.paragraph,n)}keys({type:t}){return this.options.levels.reduce((e,n)=>({...e,["Shift-Ctrl-".concat(n)]:Object(o.k)(t,{level:n})}),{})}inputRules({type:t}){return this.options.levels.map(e=>Object(o.o)(new RegExp("^(#{1,".concat(e,"})\\s$")),t,()=>({level:e})))}}class L extends r.g{get name(){return"horizontal_rule"}get schema(){return{group:"block",parseDOM:[{tag:"hr"}],toDOM:()=>["hr"]}}commands({type:t}){return()=>(e,n)=>n(e.tr.replaceSelectionWith(t.create()))}inputRules({type:t}){return[Object(o.g)(/^(?:---|___\s|\*\*\*\s)$/,t)]}}const z=/!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\)/;class B extends r.g{get name(){return"image"}get schema(){return{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:t=>({src:t.getAttribute("src"),title:t.getAttribute("title"),alt:t.getAttribute("alt")})}],toDOM:t=>["img",t.attrs]}}commands({type:t}){return e=>(n,r)=>{const{selection:o}=n,i=o.$cursor?o.$cursor.pos:o.$to.pos,s=t.create(e);r(n.tr.insert(i,s))}}inputRules({type:t}){return[Object(o.g)(z,t,t=>{const[,e,n,r]=t;return{src:n,alt:e,title:r}})]}get plugins(){return[new r.h({props:{handleDOMEvents:{drop(t,e){if(!(e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length))return;const n=Array.from(e.dataTransfer.files).filter(t=>/image/i.test(t.type));if(0===n.length)return;e.preventDefault();const{schema:r}=t.state,o=t.posAtCoords({left:e.clientX,top:e.clientY});n.forEach(e=>{const n=new FileReader;n.onload=e=>{const n=r.nodes.image.create({src:e.target.result}),i=t.state.tr.insert(o.pos,n);t.dispatch(i)},n.readAsDataURL(e)})}}}})]}}class j extends r.g{get name(){return"list_item"}get schema(){return{content:"paragraph block*",defining:!0,draggable:!1,parseDOM:[{tag:"li"}],toDOM:()=>["li",0]}}keys({type:t}){return{Enter:Object(o.m)(t),Tab:Object(o.l)(t),"Shift-Tab":Object(o.d)(t)}}}r.g;class V extends r.g{get name(){return"ordered_list"}get schema(){return{attrs:{order:{default:1}},content:"list_item+",group:"block",parseDOM:[{tag:"ol",getAttrs:t=>({order:t.hasAttribute("start")?+t.getAttribute("start"):1})}],toDOM:t=>1===t.attrs.order?["ol",0]:["ol",{start:t.attrs.order},0]}}commands({type:t,schema:e}){return()=>Object(o.q)(t,e.nodes.list_item)}keys({type:t,schema:e}){return{"Shift-Ctrl-9":Object(o.q)(t,e.nodes.list_item)}}inputRules({type:t}){return[Object(o.u)(/^(\d+)\.\s$/,t,t=>({order:+t[1]}),(t,e)=>e.childCount+e.attrs.order===+t[1])]}}var F=Object(l.tableNodes)({tableGroup:"block",cellContent:"block+",cellAttributes:{background:{default:null,getFromDOM:t=>t.style.backgroundColor||null,setDOMAttr(t,e){if(t){const n={style:"".concat(e.style||"","background-color: ").concat(t,";")};Object.assign(e,n)}}}}});class H extends r.g{get name(){return"table"}get defaultOptions(){return{resizable:!1}}get schema(){return F.table}commands({schema:t}){return{createTable:({rowsCount:e,colsCount:n,withHeaderRow:r})=>(o,i)=>{const l=o.tr.selection.anchor+1,c=Object(s.createTable)(t,e,n,r),p=o.tr.replaceSelectionWith(c).scrollIntoView(),u=p.doc.resolve(l);p.setSelection(a.TextSelection.near(u)),i(p)},addColumnBefore:()=>l.addColumnBefore,addColumnAfter:()=>l.addColumnAfter,deleteColumn:()=>l.deleteColumn,addRowBefore:()=>l.addRowBefore,addRowAfter:()=>l.addRowAfter,deleteRow:()=>l.deleteRow,deleteTable:()=>l.deleteTable,toggleCellMerge:()=>(t,e)=>{Object(l.mergeCells)(t,e)||Object(l.splitCell)(t,e)},mergeCells:()=>l.mergeCells,splitCell:()=>l.splitCell,toggleHeaderColumn:()=>l.toggleHeaderColumn,toggleHeaderRow:()=>l.toggleHeaderRow,toggleHeaderCell:()=>l.toggleHeaderCell,setCellAttr:()=>l.setCellAttr,fixTables:()=>l.fixTables}}keys(){return{Tab:Object(l.goToNextCell)(1),"Shift-Tab":Object(l.goToNextCell)(-1)}}get plugins(){return[...this.options.resizable?[Object(l.columnResizing)()]:[],Object(l.tableEditing)()]}}class q extends r.g{get name(){return"table_header"}get schema(){return F.table_header}}class W extends r.g{get name(){return"table_cell"}get schema(){return F.table_cell}}class J extends r.g{get name(){return"table_row"}get schema(){return F.table_row}}r.g;class K extends r.g{get name(){return"todo_list"}get schema(){return{group:"block",content:"todo_item+",toDOM:()=>["ul",{"data-type":this.name},0],parseDOM:[{priority:51,tag:'[data-type="'.concat(this.name,'"]')}]}}commands({type:t,schema:e}){return()=>Object(o.q)(t,e.nodes.todo_item)}inputRules({type:t}){return[Object(o.u)(/^\s*(\[ \])\s$/,t)]}}class U extends r.f{get name(){return"bold"}get schema(){return{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:t=>"normal"!==t.style.fontWeight&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}],toDOM:()=>["strong",0]}}keys({type:t}){return{"Mod-b":Object(o.r)(t)}}commands({type:t}){return()=>Object(o.r)(t)}inputRules({type:t}){return[Object(o.e)(/(?:\*\*|__)([^*_]+)(?:\*\*|__)$/,t)]}pasteRules({type:t}){return[Object(o.f)(/(?:\*\*|__)([^*_]+)(?:\*\*|__)/g,t)]}}class G extends r.f{get name(){return"code"}get schema(){return{excludes:"_",parseDOM:[{tag:"code"}],toDOM:()=>["code",0]}}keys({type:t}){return{"Mod-`":Object(o.r)(t)}}commands({type:t}){return()=>Object(o.r)(t)}inputRules({type:t}){return[Object(o.e)(/(?:`)([^`]+)(?:`)$/,t)]}pasteRules({type:t}){return[Object(o.f)(/(?:`)([^`]+)(?:`)/g,t)]}}class X extends r.f{get name(){return"italic"}get schema(){return{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:()=>["em",0]}}keys({type:t}){return{"Mod-i":Object(o.r)(t)}}commands({type:t}){return()=>Object(o.r)(t)}inputRules({type:t}){return[Object(o.e)(/(?:^|[^_])(_([^_]+)_)$/,t),Object(o.e)(/(?:^|[^*])(\*([^*]+)\*)$/,t)]}pasteRules({type:t}){return[Object(o.f)(/_([^_]+)_/g,t),Object(o.f)(/\*([^*]+)\*/g,t)]}}class Y extends r.f{get name(){return"link"}get defaultOptions(){return{openOnClick:!0,target:null}}get schema(){return{attrs:{href:{default:null},target:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:t=>({href:t.getAttribute("href"),target:t.getAttribute("target")})}],toDOM:t=>["a",{...t.attrs,rel:"noopener noreferrer nofollow",target:this.options.target},0]}}commands({type:t}){return e=>e.href?Object(o.t)(t,e):Object(o.i)(t)}pasteRules({type:t}){return[Object(o.h)(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z]{2,}\b([-a-zA-Z0-9@:%_+.~#?&//=,]*)/gi,t,t=>({href:t}))]}get plugins(){return this.options.openOnClick?[new r.h({props:{handleClick:(t,e,n)=>{const{schema:r}=t.state,o=Object(c.a)(t.state,r.marks.link);o.href&&n.target instanceof HTMLAnchorElement&&(n.stopPropagation(),window.open(o.href,o.target))}}})]:[]}}class Z extends r.f{get name(){return"strike"}get schema(){return{parseDOM:[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",getAttrs:t=>"line-through"===t}],toDOM:()=>["s",0]}}keys({type:t}){return{"Mod-d":Object(o.r)(t)}}commands({type:t}){return()=>Object(o.r)(t)}inputRules({type:t}){return[Object(o.e)(/~([^~]+)~$/,t)]}pasteRules({type:t}){return[Object(o.f)(/~([^~]+)~/g,t)]}}class Q extends r.f{get name(){return"underline"}get schema(){return{parseDOM:[{tag:"u"},{style:"text-decoration",getAttrs:t=>"underline"===t}],toDOM:()=>["u",0]}}keys({type:t}){return{"Mod-u":Object(o.r)(t)}}commands({type:t}){return()=>Object(o.r)(t)}}r.e;r.e;class tt extends r.e{get name(){return"history"}get defaultOptions(){return{depth:"",newGroupDelay:""}}keys(){return{"Mod-z":_,"Mod-y":A,"Shift-Mod-z":A,"Mod-":_,"Shift-Mod-":A}}get plugins(){return[T({depth:this.options.depth,newGroupDelay:this.options.newGroupDelay})]}commands(){return{undo:()=>_,redo:()=>A,undoDepth:()=>N,redoDepth:()=>E}}}class et extends r.e{get name(){return"placeholder"}get defaultOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",emptyNodeText:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0}}get plugins(){return[new r.h({props:{decorations:({doc:t,plugins:e,selection:n})=>{const r=e.find(t=>t.key.startsWith("editable$")).props.editable()||!this.options.showOnlyWhenEditable,{anchor:o}=n,s=[],a=0===t.textContent.length;return!!r&&(t.descendants((t,e)=>{const n=o>=e&&o<=e+t.nodeSize,r=0===t.content.size;if((n||!this.options.showOnlyCurrent)&&r){const n=[this.options.emptyNodeClass];a&&n.push(this.options.emptyEditorClass);const r=i.a.node(e,e+t.nodeSize,{class:n.join(" "),"data-empty-text":"function"==typeof this.options.emptyNodeText?this.options.emptyNodeText(t):this.options.emptyNodeText});s.push(r)}return!1}),i.b.create(t,s))}}})]}}r.e;r.e},384:function(t,e,n){"use strict";n(341);var r=n(19),o=n(17),i=n(2),s=n(52),a=n(39),l=n(0),c=n(3);e.a=Object(i.a)(r.a,s.a).extend({name:"v-slider",directives:{ClickOutside:a.a},mixins:[s.a],props:{disabled:Boolean,inverseLabel:Boolean,max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:1},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:t=>"boolean"==typeof t||"always"===t},thumbSize:{type:[Number,String],default:32},tickLabels:{type:Array,default:()=>[]},ticks:{type:[Boolean,String],default:!1,validator:t=>"boolean"==typeof t||"always"===t},tickSize:{type:[Number,String],default:2},trackColor:String,trackFillColor:String,value:[Number,String],vertical:Boolean},data:()=>({app:null,oldValue:null,thumbPressed:!1,mouseTimeout:-1,isFocused:!1,isActive:!1,noClick:!1}),computed:{classes(){return{...r.a.options.computed.classes.call(this),"v-input__slider":!0,"v-input__slider--vertical":this.vertical,"v-input__slider--inverse-label":this.inverseLabel}},internalValue:{get(){return this.lazyValue},set(t){t=isNaN(t)?this.minValue:t;const e=this.roundValue(Math.min(Math.max(t,this.minValue),this.maxValue));e!==this.lazyValue&&(this.lazyValue=e,this.$emit("input",e))}},trackTransition(){return this.thumbPressed?this.showTicks||this.stepNumeric?"0.1s cubic-bezier(0.25, 0.8, 0.5, 1)":"none":""},minValue(){return parseFloat(this.min)},maxValue(){return parseFloat(this.max)},stepNumeric(){return this.step>0?parseFloat(this.step):0},inputWidth(){return(this.roundValue(this.internalValue)-this.minValue)/(this.maxValue-this.minValue)*100},trackFillStyles(){const t=this.vertical?"bottom":"left",e=this.vertical?"top":"right",n=this.vertical?"height":"width",r=this.$vuetify.rtl?"auto":"0",o=this.$vuetify.rtl?"0":"auto",i=this.isDisabled?`calc(${this.inputWidth}% - 10px)`:this.inputWidth+"%";return{transition:this.trackTransition,[t]:r,[e]:o,[n]:i}},trackStyles(){const t=this.vertical?this.$vuetify.rtl?"bottom":"top":this.$vuetify.rtl?"left":"right",e=this.vertical?"height":"width",n=this.isDisabled?`calc(${100-this.inputWidth}% - 10px)`:`calc(${100-this.inputWidth}%)`;return{transition:this.trackTransition,[t]:"0px",[e]:n}},showTicks(){return this.tickLabels.length>0||!(this.isDisabled||!this.stepNumeric||!this.ticks)},numTicks(){return Math.ceil((this.maxValue-this.minValue)/this.stepNumeric)},showThumbLabel(){return!(this.isDisabled||!this.thumbLabel&&!this.$scopedSlots["thumb-label"])},computedTrackColor(){if(!this.isDisabled)return this.trackColor?this.trackColor:this.isDark?this.validationState:this.validationState||"primary lighten-3"},computedTrackFillColor(){if(!this.isDisabled)return this.trackFillColor?this.trackFillColor:this.validationState||this.computedColor},computedThumbColor(){return this.thumbColor?this.thumbColor:this.validationState||this.computedColor}},watch:{min(t){const e=parseFloat(t);e>this.internalValue&&this.$emit("input",e)},max(t){const e=parseFloat(t);e<this.internalValue&&this.$emit("input",e)},value:{handler(t){this.internalValue=t}}},beforeMount(){this.internalValue=this.value},mounted(){this.app=document.querySelector("[data-app]")||Object(c.c)("Missing v-app or a non-body wrapping element with the [data-app] attribute",this)},methods:{genDefaultSlot(){const t=[this.genLabel()],e=this.genSlider();return this.inverseLabel?t.unshift(e):t.push(e),t.push(this.genProgress()),t},genSlider(){return this.$createElement("div",{class:{"v-slider":!0,"v-slider--horizontal":!this.vertical,"v-slider--vertical":this.vertical,"v-slider--focused":this.isFocused,"v-slider--active":this.isActive,"v-slider--disabled":this.isDisabled,"v-slider--readonly":this.isReadonly,...this.themeClasses},directives:[{name:"click-outside",value:this.onBlur}],on:{click:this.onSliderClick,mousedown:this.onSliderMouseDown,touchstart:this.onSliderMouseDown}},this.genChildren())},genChildren(){return[this.genInput(),this.genTrackContainer(),this.genSteps(),this.genThumbContainer(this.internalValue,this.inputWidth,this.isActive,this.isFocused,this.onFocus,this.onBlur)]},genInput(){return this.$createElement("input",{attrs:{value:this.internalValue,id:this.computedId,disabled:!0,readonly:!0,tabindex:-1,...this.$attrs}})},genTrackContainer(){const t=[this.$createElement("div",this.setBackgroundColor(this.computedTrackColor,{staticClass:"v-slider__track-background",style:this.trackStyles})),this.$createElement("div",this.setBackgroundColor(this.computedTrackFillColor,{staticClass:"v-slider__track-fill",style:this.trackFillStyles}))];return this.$createElement("div",{staticClass:"v-slider__track-container",ref:"track"},t)},genSteps(){if(!this.step||!this.showTicks)return null;const t=parseFloat(this.tickSize),e=Object(l.h)(this.numTicks+1),n=this.vertical?"bottom":this.$vuetify.rtl?"right":"left",r=this.vertical?this.$vuetify.rtl?"left":"right":"top";this.vertical&&e.reverse();const o=e.map(e=>{const o=[];this.tickLabels[e]&&o.push(this.$createElement("div",{staticClass:"v-slider__tick-label"},this.tickLabels[e]));const i=e*(100/this.numTicks),s=this.$vuetify.rtl?100-this.inputWidth<i:i<this.inputWidth;return this.$createElement("span",{key:e,staticClass:"v-slider__tick",class:{"v-slider__tick--filled":s},style:{width:t+"px",height:t+"px",[n]:`calc(${i}% - ${t/2}px)`,[r]:`calc(50% - ${t/2}px)`}},o)});return this.$createElement("div",{staticClass:"v-slider__ticks-container",class:{"v-slider__ticks-container--always-show":"always"===this.ticks||this.tickLabels.length>0}},o)},genThumbContainer(t,e,n,r,o,i,s="thumb"){const a=[this.genThumb()],l=this.genThumbLabelContent(t);return this.showThumbLabel&&a.push(this.genThumbLabel(l)),this.$createElement("div",this.setTextColor(this.computedThumbColor,{ref:s,key:s,staticClass:"v-slider__thumb-container",class:{"v-slider__thumb-container--active":n,"v-slider__thumb-container--focused":r,"v-slider__thumb-container--show-label":this.showThumbLabel},style:this.getThumbContainerStyles(e),attrs:{role:"slider",tabindex:this.isDisabled?-1:this.$attrs.tabindex?this.$attrs.tabindex:0,"aria-label":this.label,"aria-valuemin":this.min,"aria-valuemax":this.max,"aria-valuenow":this.internalValue,"aria-readonly":String(this.isReadonly),"aria-orientation":this.vertical?"vertical":"horizontal",...this.$attrs},on:{focus:o,blur:i,keydown:this.onKeyDown}}),a)},genThumbLabelContent(t){return this.$scopedSlots["thumb-label"]?this.$scopedSlots["thumb-label"]({value:t}):[this.$createElement("span",[String(t)])]},genThumbLabel(t){const e=Object(l.g)(this.thumbSize),n=this.vertical?`translateY(20%) translateY(${Number(this.thumbSize)/3-1}px) translateX(55%) rotate(135deg)`:"translateY(-20%) translateY(-12px) translateX(-50%) rotate(45deg)";return this.$createElement(o.e,{props:{origin:"bottom center"}},[this.$createElement("div",{staticClass:"v-slider__thumb-label-container",directives:[{name:"show",value:this.isFocused||this.isActive||"always"===this.thumbLabel}]},[this.$createElement("div",this.setBackgroundColor(this.computedThumbColor,{staticClass:"v-slider__thumb-label",style:{height:e,width:e,transform:n}}),[this.$createElement("div",t)])])])},genThumb(){return this.$createElement("div",this.setBackgroundColor(this.computedThumbColor,{staticClass:"v-slider__thumb"}))},getThumbContainerStyles(t){const e=this.vertical?"top":"left";let n=this.$vuetify.rtl?100-t:t;return n=this.vertical?100-n:n,{transition:this.trackTransition,[e]:n+"%"}},onSliderMouseDown(t){var e;t.preventDefault(),this.oldValue=this.internalValue,this.isActive=!0;const n=!l.C||{passive:!0,capture:!0},r=!!l.C&&{passive:!0};(null==(e=t.target)?void 0:e.matches(".v-slider__thumb-container, .v-slider__thumb-container *"))?this.thumbPressed=!0:(window.clearTimeout(this.mouseTimeout),this.mouseTimeout=window.setTimeout(()=>{this.thumbPressed=!0},300));const o="touches"in t;this.onMouseMove(t),this.app.addEventListener(o?"touchmove":"mousemove",this.onMouseMove,r),Object(l.a)(this.app,o?"touchend":"mouseup",this.onSliderMouseUp,n),this.$emit("start",this.internalValue)},onSliderMouseUp(t){t.stopPropagation(),window.clearTimeout(this.mouseTimeout),this.thumbPressed=!1;const e=!!l.C&&{passive:!0};this.app.removeEventListener("touchmove",this.onMouseMove,e),this.app.removeEventListener("mousemove",this.onMouseMove,e),this.$emit("mouseup",t),this.$emit("end",this.internalValue),Object(l.j)(this.oldValue,this.internalValue)||(this.$emit("change",this.internalValue),this.noClick=!0),this.isActive=!1},onMouseMove(t){"mousemove"===t.type&&(this.thumbPressed=!0),this.internalValue=this.parseMouseMove(t)},onKeyDown(t){if(!this.isInteractive)return;const e=this.parseKeyDown(t,this.internalValue);null==e||e<this.minValue||e>this.maxValue||(this.internalValue=e,this.$emit("change",e))},onSliderClick(t){if(this.noClick)return void(this.noClick=!1);this.$refs.thumb.focus(),this.onMouseMove(t),this.$emit("change",this.internalValue)},onBlur(t){this.isFocused=!1,this.$emit("blur",t)},onFocus(t){this.isFocused=!0,this.$emit("focus",t)},parseMouseMove(t){const e=this.vertical?"top":"left",n=this.vertical?"height":"width",r=this.vertical?"clientY":"clientX",{[e]:o,[n]:i}=this.$refs.track.getBoundingClientRect(),s="touches"in t?t.touches[0][r]:t[r];let a=Math.min(Math.max((s-o)/i,0),1)||0;return this.vertical&&(a=1-a),this.$vuetify.rtl&&(a=1-a),parseFloat(this.min)+a*(this.maxValue-this.minValue)},parseKeyDown(t,e){if(!this.isInteractive)return;const{pageup:n,pagedown:r,end:o,home:i,left:s,right:a,down:c,up:p}=l.y;if(![n,r,o,i,s,a,c,p].includes(t.keyCode))return;t.preventDefault();const u=this.stepNumeric||1,d=(this.maxValue-this.minValue)/u;if([s,a,c,p].includes(t.keyCode)){e+=((this.$vuetify.rtl?[s,p]:[a,p]).includes(t.keyCode)?1:-1)*u*(t.shiftKey?3:t.ctrlKey?2:1)}else if(t.keyCode===i)e=this.minValue;else if(t.keyCode===o)e=this.maxValue;else{e-=(t.keyCode===r?1:-1)*u*(d>100?d/10:10)}return e},roundValue(t){if(!this.stepNumeric)return t;const e=this.step.toString().trim(),n=e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0,r=this.minValue%this.stepNumeric,o=Math.round((t-r)/this.stepNumeric)*this.stepNumeric+r;return parseFloat(Math.min(o,this.maxValue).toFixed(n))}}})},385:function(t,e,n){"use strict";n(349);var r=n(36),o=n(46),i=n(4),s=n(2),a=n(3);const l=Object(s.a)(Object(r.b)("stepper"),o.a,i.a);e.a=l.extend({name:"v-stepper",provide(){return{stepClick:this.stepClick,isVertical:this.vertical}},props:{altLabels:Boolean,nonLinear:Boolean,vertical:Boolean},data(){const t={isBooted:!1,steps:[],content:[],isReverse:!1};return t.internalLazyValue=null!=this.value?this.value:(t[0]||{}).step||1,t},computed:{classes(){return{"v-stepper--is-booted":this.isBooted,"v-stepper--vertical":this.vertical,"v-stepper--alt-labels":this.altLabels,"v-stepper--non-linear":this.nonLinear,...this.themeClasses}}},watch:{internalValue(t,e){this.isReverse=Number(t)<Number(e),e&&(this.isBooted=!0),this.updateView()}},created(){this.$listeners.input&&Object(a.a)("@input","@change",this)},mounted(){this.updateView()},methods:{register(t){"v-stepper-step"===t.$options.name?this.steps.push(t):"v-stepper-content"===t.$options.name&&(t.isVertical=this.vertical,this.content.push(t))},unregister(t){"v-stepper-step"===t.$options.name?this.steps=this.steps.filter(e=>e!==t):"v-stepper-content"===t.$options.name&&(t.isVertical=this.vertical,this.content=this.content.filter(e=>e!==t))},stepClick(t){this.$nextTick(()=>this.internalValue=t)},updateView(){for(let t=this.steps.length;--t>=0;)this.steps[t].toggle(this.internalValue);for(let t=this.content.length;--t>=0;)this.content[t].toggle(this.internalValue,this.isReverse)}},render(t){return t("div",{staticClass:"v-stepper",class:this.classes},this.$slots.default)}})},386:function(t,e,n){"use strict";var r=n(17),o=n(36),i=n(0),s=n(2);const a=Object(s.a)(Object(o.a)("stepper","v-stepper-content","v-stepper"));e.a=a.extend().extend({name:"v-stepper-content",inject:{isVerticalProvided:{from:"isVertical"}},props:{step:{type:[Number,String],required:!0}},data(){return{height:0,isActive:null,isReverse:!1,isVertical:this.isVerticalProvided}},computed:{computedTransition(){return(this.$vuetify.rtl?!this.isReverse:this.isReverse)?r.h:r.i},styles(){return this.isVertical?{height:Object(i.g)(this.height)}:{}}},watch:{isActive(t,e){t&&null==e?this.height="auto":this.isVertical&&(this.isActive?this.enter():this.leave())}},mounted(){this.$refs.wrapper.addEventListener("transitionend",this.onTransition,!1),this.stepper&&this.stepper.register(this)},beforeDestroy(){this.$refs.wrapper.removeEventListener("transitionend",this.onTransition,!1),this.stepper&&this.stepper.unregister(this)},methods:{onTransition(t){this.isActive&&"height"===t.propertyName&&(this.height="auto")},enter(){let t=0;requestAnimationFrame(()=>{t=this.$refs.wrapper.scrollHeight}),this.height=0,setTimeout(()=>this.isActive&&(this.height=t||"auto"),450)},leave(){this.height=this.$refs.wrapper.clientHeight,setTimeout(()=>this.height=0,10)},toggle(t,e){this.isActive=t.toString()===this.step.toString(),this.isReverse=e}},render(t){const e={staticClass:"v-stepper__content"},n={staticClass:"v-stepper__wrapper",style:this.styles,ref:"wrapper"};this.isVertical||(e.directives=[{name:"show",value:this.isActive}]);const r=t("div",n,[this.$slots.default]),o=t("div",e,[r]);return t(this.computedTransition,{on:this.$listeners},[o])}})},387:function(t,e,n){"use strict";var r=n(9),o=n(7),i=n(36),s=n(21),a=n(2);const l=Object(a.a)(o.a,Object(i.a)("stepper","v-stepper-step","v-stepper"));e.a=l.extend().extend({name:"v-stepper-step",directives:{ripple:s.a},inject:["stepClick"],props:{color:{type:String,default:"primary"},complete:Boolean,completeIcon:{type:String,default:"$complete"},editable:Boolean,editIcon:{type:String,default:"$edit"},errorIcon:{type:String,default:"$error"},rules:{type:Array,default:()=>[]},step:[Number,String]},data:()=>({isActive:!1,isInactive:!0}),computed:{classes(){return{"v-stepper__step--active":this.isActive,"v-stepper__step--editable":this.editable,"v-stepper__step--inactive":this.isInactive,"v-stepper__step--error error--text":this.hasError,"v-stepper__step--complete":this.complete}},hasError(){return this.rules.some(t=>!0!==t())}},mounted(){this.stepper&&this.stepper.register(this)},beforeDestroy(){this.stepper&&this.stepper.unregister(this)},methods:{click(t){t.stopPropagation(),this.$emit("click",t),this.editable&&this.stepClick(this.step)},genIcon(t){return this.$createElement(r.a,t)},genLabel(){return this.$createElement("div",{staticClass:"v-stepper__label"},this.$slots.default)},genStep(){const t=!(this.hasError||!this.complete&&!this.isActive)&&this.color;return this.$createElement("span",this.setBackgroundColor(t,{staticClass:"v-stepper__step__step"}),this.genStepContent())},genStepContent(){const t=[];return this.hasError?t.push(this.genIcon(this.errorIcon)):this.complete?this.editable?t.push(this.genIcon(this.editIcon)):t.push(this.genIcon(this.completeIcon)):t.push(String(this.step)),t},toggle(t){this.isActive=t.toString()===this.step.toString(),this.isInactive=Number(t)<Number(this.step)}},render(t){return t("div",{staticClass:"v-stepper__step",class:this.classes,directives:[{name:"ripple",value:this.editable}],on:{click:this.click}},[this.genStep(),this.genLabel()])}})},388:function(t,e,n){"use strict";var r=n(305);e.a=r.a.extend({name:"v-tab-item",props:{id:String},methods:{genWindowItem(){const t=r.a.options.methods.genWindowItem.call(this);return t.data.domProps=t.data.domProps||{},t.data.domProps.id=this.id||this.value,t}}})},389:function(t,e,n){"use strict";n(358),n(125);var r=n(9),o=n(19),i=n(95);e.a=i.a.extend({name:"v-checkbox",props:{indeterminate:Boolean,indeterminateIcon:{type:String,default:"$checkboxIndeterminate"},offIcon:{type:String,default:"$checkboxOff"},onIcon:{type:String,default:"$checkboxOn"}},data(){return{inputIndeterminate:this.indeterminate}},computed:{classes(){return{...o.a.options.computed.classes.call(this),"v-input--selection-controls":!0,"v-input--checkbox":!0,"v-input--indeterminate":this.inputIndeterminate}},computedIcon(){return this.inputIndeterminate?this.indeterminateIcon:this.isActive?this.onIcon:this.offIcon},validationState(){if(!this.isDisabled||this.inputIndeterminate)return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0}},watch:{indeterminate(t){this.$nextTick(()=>this.inputIndeterminate=t)},inputIndeterminate(t){this.$emit("update:indeterminate",t)},isActive(){this.indeterminate&&(this.inputIndeterminate=!1)}},methods:{genCheckbox(){return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(r.a,this.setTextColor(this.validationState,{props:{dense:this.dense,dark:this.dark,light:this.light}}),this.computedIcon),this.genInput("checkbox",{...this.attrs$,"aria-checked":this.inputIndeterminate?"mixed":this.isActive.toString()}),this.genRipple(this.setTextColor(this.rippleState))])},genDefaultSlot(){return[this.genCheckbox(),this.genLabel()]}}})},398:function(t,e,n){"use strict";var r=n(282),o=function(t){var e={};for(var n in t){var r=t[n];null!=r&&(e[n]=r)}return e};function i(t,e,n,r,o,i,s,a,l,c){"boolean"!=typeof s&&(l=a,a=s,s=!1);var p,u="function"==typeof n?n.options:n;if(t&&t.render&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0,o&&(u.functional=!0)),r&&(u._scopeId=r),i?(p=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(i)},u._ssrRegister=p):e&&(p=s?function(t){e.call(this,c(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),p)if(u.functional){var d=u.render;u.render=function(t,e){return p.call(e),d(t,e)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,p):[p]}return n}var s=i({},void 0,{name:"LControlZoom",mixins:[{props:{position:{type:String,default:"topright"}},mounted:function(){this.controlOptions={position:this.position}},beforeDestroy:function(){this.mapObject&&this.mapObject.remove()}},{props:{options:{type:Object,default:function(){return{}}}}}],props:{zoomInText:{type:String,default:"+"},zoomInTitle:{type:String,default:"Zoom in"},zoomOutText:{type:String,default:"-"},zoomOutTitle:{type:String,default:"Zoom out"}},mounted:function(){var t=this,e=function(t,e){var n=e.options&&e.options.constructor===Object?e.options:{};t=t&&t.constructor===Object?t:{};var r=o(n);t=o(t);var i=e.$options.props;for(var s in t){var a=i[s]?i[s].default&&"function"==typeof i[s].default?i[s].default.call():i[s].default:Symbol("unique"),l=!1;l=Array.isArray(a)?JSON.stringify(a)===JSON.stringify(t[s]):a===t[s],r[s]&&!l?(console.warn(s+" props is overriding the value passed in the options props"),r[s]=t[s]):r[s]||(r[s]=t[s])}return r}(Object.assign({},this.controlOptions,{zoomInText:this.zoomInText,zoomInTitle:this.zoomInTitle,zoomOutText:this.zoomOutText,zoomOutTitle:this.zoomOutTitle}),this);this.mapObject=r.control.zoom(e),function(t,e,n,o){var i=function(o){var i,s="set"+((i=o)&&"function"==typeof i.charAt?i.charAt(0).toUpperCase()+i.slice(1):i),a=n[o].type===Object||n[o].type===Array||Array.isArray(n[o].type);n[o].custom&&t[s]?t.$watch(o,(function(e,n){t[s](e,n)}),{deep:a}):"setOptions"===s?t.$watch(o,(function(t,n){Object(r.setOptions)(e,t)}),{deep:a}):e[s]&&t.$watch(o,(function(t,n){e[s](t)}),{deep:a})};for(var s in n)i(s)}(this,this.mapObject,this.$options.props),this.mapObject.addTo(this.$parent.mapObject),this.$nextTick((function(){t.$emit("ready",t.mapObject)}))},render:function(){return null}},void 0,void 0,void 0,!1,void 0,void 0,void 0);e.a=s}}]);